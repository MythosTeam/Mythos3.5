#############################################
# No education focus selected               #
#############################################

character_event = {
	id = ZE.14700
	hide_window = yes
	is_triggered_only = yes
	
	# Bounce to another event with a slight delay to fix magic characters getting 2 education traits
	immediate = {
		if = {
			limit = {
				has_dlc = "Zeus"
				NOR = {
					has_character_flag = is_being_graded
					has_focus = focus_ed_diplomacy
					has_focus = focus_ed_martial
					has_focus = focus_ed_stewardship
					has_focus = focus_ed_intrigue
					has_focus = focus_ed_learning
					has_focus = focus_ed_magic
					trait = naive_appeaser
					trait = underhanded_rogue
					trait = charismatic_negotiator
					trait = grey_eminence
					trait = misguided_warrior
					trait = tough_soldier
					trait = skilled_tactician
					trait = brilliant_strategist
					trait = indulgent_wastrel
					trait = thrifty_clerk
					trait = fortune_builder
					trait = midas_touched
					trait = amateurish_plotter
					trait = flamboyant_schemer
					trait = intricate_webweaver
					trait = elusive_shadow
					trait = detached_priest
					trait = martial_cleric
					trait = scholarly_theologian
					trait = mastermind_theologian
					trait = novice_mage
					trait = eldritch_scholar
					trait = veteran_wizard
					trait = arcane_master
				}
			}
			character_event = { id = MYTH_WoL.190 days = 1 }
		}
	}
}
# Notify educator
character_event = {
	id = ZE.14710
	picture = GFX_evt_noble_in_castle

	desc = {
		text = EVTDESCA_ZE_14710
		trigger = {
			FROM = { trait = naive_appeaser }
		}
	}
	desc = {
		text = EVTDESCB_ZE_14710
		trigger = {
			FROM = { trait = misguided_warrior }
		}
	}
	desc = {
		text = EVTDESCC_ZE_14710
		trigger = {
			FROM = { trait = indulgent_wastrel }
		}
	}
	desc = {
		text = EVTDESCD_ZE_14710
		trigger = {
			FROM = { trait = amateurish_plotter }
		}
	}
	desc = {
		text = EVTDESCE_ZE_14710
		trigger = {
			FROM = { trait = detached_priest }
		}
	}
	desc = {
		text = EVTDESCE_ZE_14710
		trigger = {
			FROM = { trait = novice_mage }
		}
	}
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ZE_14710
		trigger = {
			FROM = { trait = naive_appeaser }
		}
		tooltip = { FROM = { add_trait = naive_appeaser } }
	}
	option = {
		name = EVTOPTA_ZE_14710
		trigger = {
			FROM = { trait = misguided_warrior }
		}
		tooltip = { FROM = { add_trait = misguided_warrior } }
	}
	option = {
		name = EVTOPTA_ZE_14710
		trigger = {
			FROM = { trait = indulgent_wastrel }
		}
		tooltip = { FROM = { add_trait = indulgent_wastrel } }
	}
	option = {
		name = EVTOPTA_ZE_14710
		trigger = {
			FROM = { trait = amateurish_plotter }
		}
		tooltip = { FROM = { add_trait = amateurish_plotter } }
	}
	option = {
		name = EVTOPTA_ZE_14710
		trigger = {
			FROM = { trait = detached_priest }
		}
		tooltip = { FROM = { add_trait = detached_priest } }
	}
	option = {
		name = EVTOPTA_ZE_14710
		trigger = {
			FROM = { trait = novice_mage }
		}
		tooltip = { FROM = { add_trait = novice_mage } }
	}
}
# Respond to worried friend/relative
character_event = {
	id = WoL.6322
	desc = EVTDESC_WoL_6322
	picture = GFX_evt_courtiers_talking
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes

	option = {
		name = EVTOPTA_WoL_6322 # Don't worry
		reverse_opinion = {
			modifier = opinion_worried
			who = FROM
			years = 2
		}
		hidden_tooltip = { 
			random_list = {
				10 = {
					character_event = { id = WoL.6329 days = 180 }
				}
				4 = {
					character_event = { id = MYTH_WoL.20 days = 180 }
				}
			}
		}
	}
	option = {
		name = EVTOPTB_WoL_6322  # I am communing with other worlds here!
		prestige = 30
		reverse_opinion = {
			modifier = opinion_afraid
			who = FROM
			years = 2
		}
		hidden_tooltip = { 
			random_list = {
				10 = {
					character_event = { id = WoL.6329 days = 180 }
				}
				4 = {
					character_event = { id = MYTH_WoL.20 days = 180 }
				}
			}
		}
	}
	option = {
		name = EVTOPTC_WoL_6322 # Alright, I'll stop it (lies)
		trigger = {
			NOT = { trait = honest }
		}
		if = {
			limit = { NOT = { trait = deceitful } }
			add_trait = deceitful
		}
		hidden_tooltip = { 
			random_list = {
				10 = {
					character_event = { id = WoL.6329 days = 180 }
				}
				4 = {
					character_event = { id = MYTH_WoL.20 days = 180 }
				}
			}
		}
	}
}

# Hunt outcome
character_event = {
	id = WoL.5011
	
	hide_window = yes

	is_triggered_only = yes
	
	trigger = {
		has_focus = focus_hunting    # To interrupt events if player changes focus
	}
	
	immediate = {
		random_list = {
			2 = {
				modifier = {
					factor = 0.8
					check_variable = { which = control value = 6 }
				}
				modifier = {
					factor = 0.8
					check_variable = { which = control value = 7 }
				}
				modifier = {
					factor = 0.8
					check_variable = { which = control value = 8 }
				}
				modifier = {
					factor = 0.8
					check_variable = { which = control value = 9 }
				}
				modifier = {
					factor = 1.2
					check_variable = { which = control value <= 4 }
				}
				modifier = {
					factor = 1.2
					check_variable = { which = control value <= 3 }
				}
				modifier = {
					factor = 1.2
					check_variable = { which = control value <= 2 }
				}
				modifier = {
					factor = 1.2
					check_variable = { which = control value == 1 }
				}
				if = {
					limit = { trait = known_werewolf }
					random = {
						chance = 25
						set_character_flag = failed_epic_hunt
						character_event = { id = WEREWOLF.45 } # Werewolf tears animal apart
						break = yes
					}
				}
				character_event = { id = WoL.5030 }  # Actually finds and kills animal
			}
			20 = {
				set_character_flag = failed_epic_hunt
				character_event = { id = WoL.5035 }  # Comes very close to animal and sees its majestic beauty
			}
			20 = {
				set_character_flag = failed_epic_hunt
				character_event = { id = WoL.5040 }  # Meets other hunter obsessed with same animal, he joins your court, random character
			}
			20 = {
				set_character_flag = failed_epic_hunt
				character_event = { id = WoL.5045 }  # Gets lost in the wilderness, bad experience
			}
			20 = {
				set_character_flag = failed_epic_hunt
				character_event = { id = WoL.5050 }  # Gets lost in the wilderness, good experience
			}
			60 = {
				set_character_flag = failed_epic_hunt
				character_event = { id = WoL.5055 }  # Uneventful hunt, returns home emptyhanded
			}
			20 = {
				set_character_flag = failed_epic_hunt
				character_event = { id = WoL.5060 }  # Gets lost, finds cottage, meets strange old witch
			}
			20 = {
				set_character_flag = failed_epic_hunt
				character_event = { id = WoL.5065 }  # Gets lost, finds cottage, meets attractive person of opposite sex...
			}
			1 = {
				set_character_flag = failed_epic_hunt
				character_event = { id = MYTH_WoL.33 } # Attacked by a wild man
			}
			
		}
	}
}

# Hidden 'outcome tombola' event for the "Spy On" decision
character_event = {
	id = WoL.2060
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				OR = {
					prisoner = yes # I have become imprisoned
					trait = incapable # I have become incapable
					NOT = { has_focus = focus_intrigue } # I have changed my focus
				}
			}
			character_event = { id = WoL.2069 } # Clear out any flags, etc
			break = yes # Stop execution here
		}
		
		if = {
			limit = {
				FROMFROM = {
					is_alive = no
				}
			}
			
			character_event = { id = WoL.2061 }
			break = yes
		}
		
		if = {
			limit = {
				FROMFROM = {
					prisoner = yes
				}
			}
			character_event = { id = WoL.2062 }
			break = yes
		}
		if = {
			limit = {
				FROMFROM = {
					trait = incapable
				}
			}
			character_event = { id = WoL.2063 }
			break = yes
		}
		if = {
			limit = {
				FROMFROM = {
					NOT = { same_realm = ROOT }
				}
			}
			character_event = { id = WoL.2064 }
			break = yes
		}
		
		if = {
			limit = {
				NOT = {
					has_opinion_modifier = {
						who = FROMFROM
						modifier = opinion_spying_on
					}
				}
			}
			break = yes # I have stopped spying on this character
		}
		
		repeat_event = { id = WoL.2060 days = 40 random = 40 } # Fire again with no scope changes
		
		if = {
			limit = {
				FROMFROM = {
					OR = {
						trait = on_hajj
						is_inaccessible_trigger = yes
						trait = on_pilgrimage
					}
				}
			}
			break = yes
		}
		
		random_list = {
			20000 = { # Nothing happens
				modifier = {
					factor = 0.75
					attribute_diff = {
						attribute = intrigue
						character = FROMFROM
						value = 3
					}
				}
				modifier = {
					factor = 0.75
					attribute_diff = {
						attribute = intrigue
						character = FROMFROM
						value = 5
					}
				}
				modifier = {
					factor = 0.5
					attribute_diff = {
						attribute = intrigue
						character = FROMFROM
						value = 10
					}
				}
				modifier = {
					factor = 2.0
					NOT = {
						attribute_diff = {
							attribute = intrigue
							character = FROMFROM
							value = -2
						}
					}
				}
				modifier = {
					factor = 3.0
					NOT = {
						attribute_diff = {
							attribute = intrigue
							character = FROMFROM
							value = -4
						}
					}
				}
				modifier = {
					factor = 4.0
					NOT = {
						attribute_diff = {
							attribute = intrigue
							character = FROMFROM
							value = -9
						}
					}
				}
				modifier = {
					factor = 0.75
					has_character_modifier = wol_schemer_1
				}
				modifier = {
					factor = 0.5
					has_character_modifier = wol_schemer_2
				}
				modifier = {
					factor = 0.2
					trait = schemer
				}
				modifier = {
					factor = 1.5
					FROMFROM = { has_character_modifier = wol_schemer_1 }
				}
				modifier = {
					factor = 3.0
					FROMFROM = { has_character_modifier = wol_schemer_2 }
				}
				modifier = {
					factor = 5.0
					FROMFROM = { trait = schemer }
				}
				
				random = {
					chance = 25
					character_event = { id = WoL.2065 } # Time to give up?
				}
			}
			10000 = { # Plot uncovered
				modifier = {
					factor = 0
					FROMFROM = {
						NOR = {
							AND = {
								has_plot = yes
								NOT = { plot_is_known_by = ROOT }
							}
							any_backed_character = {
								has_plot = yes
								NOT = { plot_is_known_by = ROOT }
							}
						}
					}
				}
				
				character_event = { id = WoL.2000 days = 1 } # Chance of levelling up Intrigue skills
				
				if = {
					limit = {
						FROMFROM = {
							has_plot = yes
							NOT = { plot_is_known_by = ROOT }
						}
					}
					FROMFROM = { character_event = { id = WoL.2070 } } # Plot uncovered 
					break = yes
				}
				
				FROMFROM = {
					random_backed_character = {
						limit = {
							has_plot = yes
							NOT = { plot_is_known_by = ROOT }
						}
						character_event = { id = WoL.2070 }
					}
				}
			}
			
			3000 = { # Adultery of spouse or consort uncovered
				modifier = {
					factor = 0
					FROMFROM = {
						NOT = { is_married = ROOT }
						NOT = { is_consort = ROOT }
						NOT = {
							any_lover = {
								OR = {
									is_married = ROOT
									is_consort = ROOT
								}
							}
						}
					}
				}
				modifier = {
					factor = 0
					FROMFROM = {
						OR = {
							is_married = ROOT
							is_consort = ROOT
						}
						NOT = {
							any_lover = {
								NOT = { character = ROOT }
							}
						}
					}
				}
				modifier = {
					factor = 0.05
					FROMFROM = {
						OR = {
							has_character_modifier = wol_court_tomcat
							has_character_modifier = wol_court_vixen
						}
					}
				}
				modifier = {
					factor = 0.05
					FROMFROM = {
						any_lover = {
							NOT = { character = ROOT }
							OR = {
								has_character_modifier = wol_court_tomcat
								has_character_modifier = wol_court_vixen
								trait = schemer
								has_character_modifier = wol_schemer_2
							}
						}
					}
				}
				modifier = {
					factor = 0.1
					FROMFROM = {
						any_lover = {
							NOT = { character = ROOT }
							has_character_modifier = wol_schemer_1
						}
					}
				}
				modifier = {
					factor = 2
					FROMFROM = {
						OR = {
							AND = {
								num_of_lovers = 2
								NOT = { is_lover = ROOT }
							}
							num_of_lovers = 3
						}
					}
				}
				
				character_event = { id = WoL.2000 days = 1 } # Chance of levelling up Intrigue skills
				
				if = {
					limit = {
						FROMFROM = {
							OR = {
								is_married = ROOT
								is_consort = ROOT
							}
						}
					}
					FROMFROM = {
						save_event_target_as = target_cheating_spouse
						random_lover = {
							limit = {
								NOT = { character = ROOT }
							}
							save_event_target_as = target_adulterer
						}
					}
				}
				
				if = {
					limit = {
						FROMFROM = {
							NOR = {
								is_married = ROOT
								is_consort = ROOT
							}
						}
					}
					FROMFROM = {
						save_event_target_as = target_adulterer
						random_lover = {
							limit = {
								OR = {
									is_married = ROOT
									is_consort = ROOT
								}
							}
							save_event_target_as = target_cheating_spouse
						}
					}
				}
				
				event_target:target_cheating_spouse = { character_event = { id = WoL.2140 } } # Adultery discovered
			}
			
			2000 = { # Discovery of werewolf
				modifier = {
					factor = 0
					FROMFROM = {
						OR = {
							NOT = { trait = werewolf }
							trait = known_werewolf
						}
					}
				}
				modifier = {
					factor = 0
					trait = werewolf
				}
				modifier = {
					factor = 0
					culture = werewolf_culture
				}
				modifier = {
					factor = 1.2
					FROMFROM = {
						OR = {
							trait = lunatic
							trait = possessed
						}
					}
				}
				modifier = {
					factor = 4
					trait = monster_hunter
				}
				modifier = {
					factor = 1.4
					FROMFROM = {
						trait = rabies
					}
				}
				modifier = {
					factor = 0.7
					FROMFROM = {
						OR = {
							trait = genius
							trait = quick
							trait = shrewd
						}
					}
				}
				modifier = {
					factor = 1.1
					FROMFROM = {
						trait = hedonist
					}
				}
				modifier = {
					factor = 1.2
					FROMFROM = {
						trait = gluttonous
					}
				}
				modifier = {
					factor = 0.8
					FROMFROM = {
						OR = {
							trait = temperate
							trait = kind
							trait = patient
						}
					}
				}
				modifier = {
					factor = 0.9
					FROMFROM = {
						OR = {
							trait = deceitful
							trait = paranoid
						}
					}
				}
				modifier = {
					factor = 1.4
					FROMFROM = {
						trait = cruel
						trait = wroth
					}
				}
				modifier = {
					factor = 1.1
					FROMFROM = {
						trait = berserker
					}
				}
				modifier = {
					factor = 2
					FROMFROM = {
						trait = cannibal_trait
					}
				}
				modifier = {
					factor = 2
					FROMFROM = {
						has_instances_of_character_modifier = { modifier = known_monster amount = 1 }
					}
				}
				modifier = {
					factor = 1.8
					FROMFROM = {
						has_instances_of_character_modifier = { modifier = known_monster amount = 2 }
					}
				}
				modifier = {
					factor = 1.6
					FROMFROM = {
						has_instances_of_character_modifier = { modifier = known_monster amount = 3 }
					}
				}
				modifier = {
					factor = 1.4
					FROMFROM = {
						has_instances_of_character_modifier = { modifier = known_monster amount = 4 }
					}
				}
				modifier = {
					factor = 1.2
					FROMFROM = {
						has_instances_of_character_modifier = { modifier = known_monster amount = 5 }
					}
				}
				modifier = {
					factor = 2
					has_game_rule = { name = secrecy value = more }
				}
				modifier = {
					factor = 0.5
					has_game_rule = { name = secrecy value = fewer }
				}
				character_event = { id = WoL.2000 days = 1 } # Chance of levelling up Intrigue skills
				
				if = {
					limit = {
						FROMFROM = {
							trait = werewolf
						}
					}
					#FROMFROM = { character_event = { id = MYTH_WoL.6 } } # Character uncovered as a werewolf
					#any_realm_character = { character_event = { id = MYTH_WoL.7 } } # Court finds out character is a werewolf
					#liege = { character_event = { id = MYTH_WoL.8 } } # Liege finds out character is a werewolf
					save_event_target_as = target_discovered_werewolf
					character_event = { id = MYTH_WoL.9 } # Werewolf discovered					
				}
			}
			
			2000 = { # Discovery of vampire
				modifier = {
					factor = 0
					FROMFROM = {
						OR = {
							NOT = { trait = vampire }
							trait = known_vampire
						}
					}
				}
				modifier = {
					factor = 0
					trait = vampire
				}
				modifier = {
					factor = 0
					culture = vampire_culture
				}
				modifier = {
					factor = 0.1
					religion = satanist
				}
				modifier = {
					factor = 1.2
					FROMFROM = {
						OR = {
							trait = lunatic
							trait = possessed
						}
					}
				}
				modifier = {
					factor = 4
					trait = monster_hunter
				}
				modifier = {
					factor = 1.2
					FROMFROM = {
						trait = hunger_1
					}
				}
				modifier = {
					factor = 1.5
					FROMFROM = {
						trait = hunger_2
					}
				}
				modifier = {
					factor = 1.9
					FROMFROM = {
						trait = hunger_3
					}
				}
				modifier = {
					factor = 2.4
					FROMFROM = {
						trait = hunger_4
					}
				}
				modifier = {
					factor = 3
					FROMFROM = {
						trait = hunger_5
					}
				}
				modifier = {
					factor = 1.5
					FROMFROM = { is_40 = yes }
					NOT = { FROMFROM = {  immortal_age = 30 } }
					NOR = { # Not immortal for non-monsterous reason
						trait = immortal
						trait = god
						trait = philosopher_stone_trait
					}
				}
				modifier = {
					factor = 1.5
					FROMFROM = { is_50 = yes }
					NOT = { FROMFROM = { immortal_age = 40 } }
					NOR = { # Not immortal for non-monsterous reason
						trait = immortal
						trait = god
						trait = philosopher_stone_trait
					}
				}
				modifier = {
					factor = 1.5
					FROMFROM = { is_60 = yes }
					NOT = { FROMFROM = { immortal_age = 50 } }
					NOR = { # Not immortal for non-monsterous reason
						trait = immortal
						trait = god
						trait = philosopher_stone_trait
					}
				}
				modifier = {
					factor = 1.5
					FROMFROM = { is_70 = yes }
					NOT = { FROMFROM = { immortal_age = 60 } }
					NOR = { # Not immortal for non-monsterous reason
						trait = immortal
						trait = god
						trait = philosopher_stone_trait
					}
				}
				modifier = {
					factor = 1.5
					FROMFROM = { is_80 = yes }
					NOT = { FROMFROM = { immortal_age = 70 } }
					NOR = { # Not immortal for non-monsterous reason
						trait = immortal
						trait = god
						trait = philosopher_stone_trait
					}
				}
				modifier = {
					factor = 2
					FROMFROM = { is_90 = yes }
					NOT = { FROMFROM = { immortal_age = 80 } }
					NOR = { # Not immortal for non-monsterous reason
						trait = immortal
						trait = god
						trait = philosopher_stone_trait
					}
				}
				modifier = {
					factor = 2.5
					FROMFROM = { is_100 = yes }
					NOR = { # Not immortal for non-monsterous reason
						trait = immortal
						trait = god
						trait = philosopher_stone_trait
					}
				}
				modifier = {
					factor = 0.7
					FROMFROM = {
						OR = {
							trait = genius
							trait = quick
							trait = shrewd
						}
					}
				}
				modifier = {
					factor = 1.1
					FROMFROM = {
						trait = hedonist
					}
				}
				modifier = {
					factor = 1.4
					FROMFROM = {
						trait = impaler
					}
				}
				modifier = {
					factor = 1.2
					FROMFROM = {
						trait = gluttonous
					}
				}
				modifier = {
					factor = 0.8
					FROMFROM = {
						OR = {
							trait = temperate
							trait = kind
							trait = patient
						}
					}
				}
				modifier = {
					factor = 0.9
					FROMFROM = {
						OR = {
							trait = deceitful
							trait = paranoid
						}
					}
				}
				modifier = {
					factor = 1.4
					FROMFROM = {
						trait = cruel
						trait = wroth
					}
				}
				modifier = {
					factor = 2
					FROMFROM = {
						has_instances_of_character_modifier = { modifier = known_monster amount = 1 }
					}
				}
				modifier = {
					factor = 1.8
					FROMFROM = {
						has_instances_of_character_modifier = { modifier = known_monster amount = 2 }
					}
				}
				modifier = {
					factor = 1.6
					FROMFROM = {
						has_instances_of_character_modifier = { modifier = known_monster amount = 3 }
					}
				}
				modifier = {
					factor = 1.4
					FROMFROM = {
						has_instances_of_character_modifier = { modifier = known_monster amount = 4 }
					}
				}
				modifier = {
					factor = 1.2
					FROMFROM = {
						has_instances_of_character_modifier = { modifier = known_monster amount = 5 }
					}
				}
				modifier = {
					factor = 2
					has_game_rule = { name = secrecy value = more }
				}
				modifier = {
					factor = 0.5
					has_game_rule = { name = secrecy value = fewer }
				}
				character_event = { id = WoL.2000 days = 1 } # Chance of levelling up Intrigue skills
				
				if = {
					limit = {
						FROMFROM = {
							trait = vampire
						}
					}
					save_event_target_as = target_discovered_vampire
					character_event = { id = VAMPIRE.17 } # Vampire discovered					
				}
			}
			
			1000 = { # Treason charges & blackmail. Allows imprisonment or faction prevention/joining.
				modifier = {
					factor = 0
					OR = {
						FROMFROM = { independent = yes }
						has_opinion_modifier = { who = FROMFROM modifier = opinion_spy_blackmailed } # Already done this once
					}
				}
				modifier = {
					factor = 3.0
					FROMFROM = {
						society_is_criminal = yes
						NOT = { same_society_as = ROOT }
					}
				}
				
				character_event = { id = WoL.2000 days = 1 } # Chance of levelling up Intrigue skills
				
				character_event = { id = WoL.2080 }
			}
			
			3000 = { # Chance to slander
				modifier = {
					factor = 0
					FROMFROM = { has_character_modifier = vicious_rumors }
				}
				modifier = {
					factor = 0.5
					OR = {
						trait = temperate
						trait = just
						trait = honest
						trait = kind
					}
				}
				modifier = {
					factor = 2.0
					FROMFROM = {
						OR = {
							has_character_modifier = incestuous_adulterer
							has_character_modifier = incestuous_adulteress
							has_character_modifier = adulterer
							has_character_modifier = adulteress
							has_character_modifier = known_sodomite
							has_character_modifier = cradle_robber
							has_character_modifier = adulterous_priest
						}
					}
				}
				modifier = {
					factor = 2.0
					FROMFROM = {
						OR = {
							trait = hedonist
							trait = drunkard
							trait = impaler
							trait = decadent
							trait = bastard
							trait = inbred
							trait = dwarf
							trait = homosexual
							trait = gluttonous
							trait = legit_bastard
						}
					}
				}
			
				character_event = { id = WoL.2000 days = 1 } # Chance of levelling up Intrigue skills
				
				character_event = { id = WoL.2100 }
			}
			400 = { # Chance to murder the target
				modifier = {
					factor = 0
					NOT = {
						attribute_diff = {
							attribute = intrigue
							character = FROMFROM
							value = 0
						}
					}
				}
				
				modifier = {
					factor = 0
					NOR = {
						trait = schemer
						has_character_modifier = wol_schemer_1
						has_character_modifier = wol_schemer_2
					}
				}
				
				modifier = {
					factor = 0.25
					has_character_modifier = wol_schemer_1
				}
				
				modifier = {
					factor = 0.5
					has_character_modifier = wol_schemer_2
				}
				
				character_event = { id = WoL.2000 days = 1 } # Chance of levelling up Intrigue skills
				
				character_event = { id = WoL.2110 }
			}
			400 = { # Chance to abduct the target
				modifier = {
					factor = 0
					NOT = {
						attribute_diff = {
							attribute = intrigue
							character = FROMFROM
							value = 0
						}
					}
				}
				
				modifier = {
					factor = 0
					NOR = {
						trait = schemer
						has_character_modifier = wol_schemer_1
						has_character_modifier = wol_schemer_2
					}
				}
				
				modifier = {
					factor = 0.25
					has_character_modifier = wol_schemer_1
				}
				
				modifier = {
					factor = 0.5
					has_character_modifier = wol_schemer_2
				}
				
				character_event = { id = WoL.2000 days = 1 } # Chance of levelling up Intrigue skills
				
				character_event = { id = WoL.2120 }
			}
		}
	}
}

# Godly voter shows you how to be more pious.
# Modified for more bad priest traits
character_event = {
	id = ZE.22500
	desc = EVTDESC_ZE_22500
	picture = GFX_evt_council_agreement
	
	min_age = 16
	capable_only = yes
	prisoner = no
	
	only_playable = yes

	is_triggered_only = yes
	
	trigger = {
		has_dlc = "Zeus"
		is_voter = yes
		NOR = { 
			piety = 200
			trait = zealous
			trait = humble
			trait = erudite
			trait = theologian
			trait = faqih
			trait = hafiz
			is_inaccessible_trigger = yes
		}
		
		liege = {
			any_realm_character = {
				same_liege = ROOT
				religion = ROOT
				OR = {
					AND = {
						is_theocracy = yes
						piety = 0
						NOR = {
							trait = bad_priest_muslim
							trait = bad_priest_christian
							trait = bad_priest_norse
							trait = bad_priest_tengri
							trait = bad_priest_zoroastrian
							trait = bad_priest_aztec
							trait = bad_priest_draconic
							trait = bad_priest_druidic
							trait = bad_priest_kemetic
							trait = bad_priest_jotnar
							trait = bad_priest_hellenic
							trait = bad_priest_satanist
							trait = cynical
						}
					}
					AND = {
						piety = 200
						NOT = { trait = cynical }
						OR = {
							trait = zealous
							trait = humble
							trait = erudite
							trait = theologian
							trait = faqih
							trait = hafiz
						}
					}
				}
				NOR = {
					character = ROOT
					owes_favor_to = ROOT
					trait = incapable
					is_inaccessible_trigger = yes
					is_rival = ROOT
				}
				is_voter = yes
				prisoner = no
			}
		}
	}
	
	immediate = {
		liege = {
			any_realm_character = {
				limit = {
					same_liege = ROOT
					religion = ROOT
					OR = {
						AND = {
							is_theocracy = yes
							piety = 0
							NOR = {
								trait = bad_priest_muslim
								trait = bad_priest_christian
								trait = bad_priest_norse
								trait = bad_priest_tengri
								trait = bad_priest_zoroastrian
								trait = bad_priest_aztec
								trait = bad_priest_draconic
								trait = bad_priest_druidic
								trait = bad_priest_kemetic
								trait = bad_priest_jotnar
								trait = bad_priest_hellenic
								trait = bad_priest_satanist
								trait = cynical
							}
						}
						AND = {
							piety = 200
							NOT = { trait = cynical }
							OR = {
								trait = zealous
								trait = humble
								trait = erudite
								trait = theologian
								trait = faqih
								trait = hafiz
							}
						}
					}
					NOR = {
						character = ROOT
						owes_favor_to = ROOT
						trait = incapable
						is_inaccessible_trigger = yes
						is_rival = ROOT
					}
					is_voter = yes
					prisoner = no
				}
				save_event_target_as = target_pious_voter
			}
		}
	}
	
	# Accept
	option = {
		name = EVTOPTA_ZE_22500
		
		ai_chance = {
			factor = 70
			
			modifier = {
				factor = 0.5
				trait = proud
			}
		}
		
		piety = 100
		add_character_modifier = {
			name = the_pious
			years = 3
		}
		event_target:target_pious_voter = {
			add_favor = ROOT
			character_event = {	id = ZE.22510 days = 1 }
		}
	}
	
	# Deny
	option = {
		name = EVTOPTB_ZE_22500
		
		ai_chance = {
			factor = 30
		}
		
		piety = -50
		
		event_target:target_pious_voter = {
			opinion = {
				modifier = opinion_dislike
				who = ROOT
				years = 15
			}
			character_event = {	id = ZE.22520 days = 1 }
		}
		
	}
}

# Bi-yearly childhood pulse - select which event chain to get, weighted by childhood focus
character_event = {
	id = ZE.12999

	hide_window = yes
	
	is_triggered_only = yes
	
	only_capable = yes
	min_age = 6
	max_age = 12
	trigger = {
		has_dlc = "Zeus"
		NOT = { has_character_modifier = the_oubliette }
		NOT = { has_character_modifier = the_dungeon }
		NOT = { has_character_flag = is_child_of_destiny }
		NOT = { is_inaccessible_trigger = yes }
	}

	immediate = {
		random_list = {
			10 = {				# Haughty
				modifier = {
					factor = 5
					OR = {
						has_focus = focus_ch_pride
						has_focus = focus_ch_magic
					}
				}
				modifier = {
					factor = 0
					OR = {
						has_character_flag = ze_child_haughty_events
						trait = haughty
					}
				}
				character_event = { id = ZE.12000 days = 10 random = 90 }
			}
			10 = {				# Affectionate
				modifier = {
					factor = 5
					has_focus = focus_ch_humility
				}
				modifier = {
					factor = 0
					OR = {
						has_character_flag = ze_child_affectionate_events
						trait = affectionate
					}
				}
				character_event = { id = ZE.12010 days = 10 random = 90 }
			}
			10 = {				# Timid
				modifier = {
					factor = 5
					has_focus = focus_ch_humility
				}
				modifier = {
					factor = 0
					OR = {
						has_character_flag = ze_child_timid_events
						trait = timid
						trait = rowdy # Mutually exclusive with Timid
					}
				}
				character_event = { id = ZE.12020 days = 10 random = 90 }
			}
			10 = {				# Rowdy
				modifier = {
					factor = 5
					has_focus = focus_ch_struggle
				}
				modifier = {
					factor = 0
					OR = {
						has_character_flag = ze_child_rowdy_events
						is_strong_trigger = yes
						is_weak_trigger = yes
						is_dumb_trigger = yes
						trait = rowdy
						trait = timid # Mutually exclusive with Rowdy
					}
				}
				character_event = { id = ZE.12030 days = 10 random = 90 }
			}
			10 = {				# Willful
				modifier = {
					factor = 5
					has_focus = focus_ch_struggle
				}
				modifier = {
					factor = 0
					OR = {
						has_character_flag = ze_child_willful_events
						trait = willful
					}
				}
				character_event = { id = ZE.12040 days = 10 random = 90 }
			}
			10 = {				# Brooding
				modifier = {
					factor = 5
					OR = {
						has_focus = focus_ch_pride
						has_focus = focus_ch_magic
					}
				}
				modifier = {
					factor = 0
					OR = {
						has_character_flag = ze_child_brooding_events
						trait = brooding
					}
				}
				character_event = { id = ZE.12050 days = 10 random = 90 }
			}
			10 = {				# Indolent
				modifier = {
					factor = 5
					has_focus = focus_ch_etiquette
				}
				modifier = {
					factor = 0
					OR = {
						has_character_flag = ze_child_indolent_events
						trait = indolent
					}
				}
				character_event = { id = ZE.12060 days = 10 random = 90 }
			}
			10 = {				# Playful
				modifier = {
					factor = 5
					has_focus = focus_ch_etiquette
				}
				modifier = {
					factor = 0
					OR = {
						has_character_flag = ze_child_playful_events
						trait = lunatic
						trait = playful
					}
				}
				character_event = { id = ZE.12070 days = 10 random = 90 }
			}
			10 = {				# Conscientious
				modifier = {
					factor = 5
					has_focus = focus_ch_duty
				}
				modifier = {
					factor = 0
					OR = {
						has_character_flag = ze_child_conscientious_events
						trait = conscientious
					}
				}
				character_event = { id = ZE.12080 days = 10 random = 90 }
			}
			10 = {				# Fussy
				modifier = {
					factor = 5
					has_focus = focus_ch_thrift
				}
				modifier = {
					factor = 0
					OR = {
						has_character_flag = ze_child_fussy_events
						trait = fussy
					}
				}
				character_event = { id = ZE.12090 days = 10 random = 90 }
			}
			10 = {				# Curious
				modifier = {
					factor = 5
					OR = {
						has_focus = focus_ch_thrift
						has_focus = focus_ch_magic
					}
				}
				modifier = {
					factor = 0
					OR = {
						has_character_flag = ze_child_curious_events
						trait = genius
						trait = curious
					}
				}
				character_event = { id = ZE.12100 days = 10 random = 90 }
			}
			10 = {				# Idolizer
				modifier = {
					factor = 5
					has_focus = focus_ch_faith
				}
				modifier = {
					factor = 0
					OR = {
						has_character_flag = ze_child_idolizer_events
						trait = genius
						trait = idolizer
					}
				}
				character_event = { id = ZE.12110 days = 10 random = 90 }
			}
		}
		# Culture / Religion swap from focus
		if = {
			limit = { 
				OR = {
					has_focus = focus_ch_heritage
					has_character_modifier = house_arrest
				}
				NOR = {
					educator = {
						religion = ROOT
						culture = ROOT
						culture_group = undead_culture_group
						religion = the_damned
					}
					trait = zombie
				}
			}
			random_list = {
				30 = {
					random_list = {
						50 = {
							if = {
								limit = {
									NOT = { 
										educator = {
											religion = ROOT
										}
									}
								}
								educator = { character_event = { id = ZE.2113 days = 20 random = 200 } }
							}
							if = {
								limit = {
									NOR = {
										mother = { is_nomadic = yes }
										father = { is_nomadic = yes }
										any_sibling = { is_nomadic = yes }
										educator = {
											culture = ROOT
										}
									}
								}
								educator = { character_event = { id = ZE.2123 days = 300 random = 100 } }
							}
						}
						50 = {
							if = {
								limit = {
									NOR = {
										mother = { is_nomadic = yes }
										father = { is_nomadic = yes }
										any_sibling = { is_nomadic = yes }
										educator = {
											culture = ROOT
										}
									}
								}
								educator = { character_event = { id = ZE.2123 days = 20 random = 200 } }
							}
							if = {
								limit = {
									NOT = { 
										educator = {
											religion = ROOT
										}
									}
								}
								educator = { character_event = { id = ZE.2113 days = 300 random = 100 } }
							}
						}
					}
				}
				30 = {
					modifier = {
						age = 8
						factor = 0.5
					}
					modifier = {
						age = 10
						factor = 0
					}
				}
			}
		}
		if = {
			limit = {
				has_focus = focus_ch_faith
				NOT = {
					educator = {
						religion = ROOT
					}
				}
			}
			random_list = {
				30 = {
					educator = { character_event = { id = ZE.2103 days = 45 random = 400 } }
				}
				30 = {
					modifier = {
						age = 8
						factor = 0.5
					}
					modifier = {
						age = 10
						factor = 0
					}
				}
			}
		}
	}
}

#Active ***life - less impressive if immortal.
character_event = {
	id = 30100
	desc = EVTDESC30100
	picture = GFX_evt_lovers
	
	min_age = 16
	only_women = yes
	capable_only = yes
	prisoner = no
	
	is_triggered_only = yes
	
	trigger = {
		fertility = 0.65
		NOT = { is_ascetic_trigger = yes }
		NOT = { trait = celibate }
		spouse = {
			NOT = { trait = incapable }
			NOT = { trait = celibate }
			NOT = { is_ascetic_trigger = yes }
			NOT = { trait = eunuch }
			#age = 40
			is_40 = yes
			war = no
			in_command = no
			is_abroad = no
			at_location = ROOT
			prisoner = no
			is_alive = yes
			immortal = no
		}
		NOT = {
			has_character_modifier = spouse_active_timer
		}
	}
	
	weight_multiplier = {
		days = 1
		
		modifier = {
			factor = 4
			NOT = { age = 25 }
		}
		modifier = {
			factor = 0.5
			trait = chaste
		}
		modifier = {
			factor = 1.5
			trait = lustful
		}
		modifier = {
			factor = 2
			spouse = { has_character_modifier = for_the_sake_of_love }
		}
	}
	
	immediate = {
		add_character_modifier = {
			name = spouse_active_timer
			duration = 365
			hidden = yes
		}
	}
	
	option = {
		name = "EVTOPTA30100" #Take him on a wild ride
		spouse = {
			set_character_flag = wild_ride
			character_event = {
				id = 30101
				tooltip = "EVTTOOLTIPA30101"
			}
		}
	}
	
	option = {
		name = "EVTOPTD30100" #Make sure he knows who is the boss in the bedchamber
		spouse = {
			set_character_flag = boss_in_bedchamber
			character_event = {
				id = 30101
				tooltip = "EVTTOOLTIPB30101"
			}
		}
	}
	option = {
		name = "EVTOPTB30100" #Be gentle to him
		spouse = {
			set_character_flag = gentle_loving
			character_event = {
				id = 30102
				tooltip = "EVTTOOLTIPA30102"
			}
		}
	}
	option = {
		name = "EVTOPTC30100" #Make sweet, sweet love
		spouse = {
			set_character_flag = sweet_love
			character_event = {
				id = 30102
				tooltip = "EVTTOOLTIPB30102"
			}
		}
	}
}

#Active ***live: Wild ride and Boss in Bed
character_event = {
	id = 30101
	desc = EVTDESC30101
	picture = GFX_evt_lovers
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA30101
		trigger = {
			has_character_flag = wild_ride
			#NOT = {
			#	#age = 55
			#}
			is_60 = no
		}
		clr_character_flag = wild_ride
		prestige = 20
		if = {
			limit = { NOT = { trait = lustful } }
			random = {
				chance = 40
				
				add_trait = lustful
				hidden_tooltip = {
					character_event = {
						id = 38272 #Notify Lustful
					}
				}
			}
		}
		if = {
			limit = { immortal = no }
			random = {
				chance = 10
				
				death = {
					death_reason = death_accident
				}
				spouse = {
					character_event = {
						id = 30103
						tooltip = "EVTTOOLTIP30103"
					}
				}
				break = yes
			}
		}
	}
	option = {
		name = "EVTOPTB30101"
		trigger = {
			has_character_flag = wild_ride
			age = 55
		}
		clr_character_flag = wild_ride
		prestige = 20
		if = {
			limit = { NOT = { trait = lustful } }
			random = {
				chance = 40
				
				add_trait = lustful
				hidden_tooltip = {
					character_event = {
						id = 38272 #Notify Lustful
					}
				}
			}
		}
		if = {
			limit = { immortal = no }
			random = {
				chance = 30
				
				death = {
					death_reason = death_accident
				}
				spouse = {
					character_event = {
						id = 30103
						tooltip = "EVTTOOLTIP30103"
					}
				}
				break = yes
			}
		}
		random = {
			chance = 40
			
			add_trait = lustful
			hidden_tooltip = {
				character_event = {
					id = 38272 #Notify Lustful
				}
			}
		}
	}
	option = {
		name = "EVTOPTC30101"
		trigger = {
			has_character_flag = boss_in_bedchamber
			#NOT = {
			#	#age = 55
			#}
			is_60 = no
		}
		clr_character_flag = boss_in_bedchamber
		prestige = 20
		if = {
			limit = { NOT = { trait = lustful } }
			random = {
				chance = 40
				
				add_trait = lustful
				hidden_tooltip = {
					character_event = {
						id = 38272 #Notify Lustful
					}
				}
			}
		}
		if = {
			limit = { immortal = no }
			random = {
				chance = 10
				
				death = {
					death_reason = death_accident
				}
				spouse = {
					character_event = {
						id = 30103
						tooltip = "EVTTOOLTIP30103"
					}
				}
				break = yes
			}
		}
	}
	option = {
		name = "EVTOPTD30101"
		trigger = {
			has_character_flag = boss_in_bedchamber
			#age = 55
			is_60 = yes
		}
		clr_character_flag = boss_in_bedchamber
		prestige = 20
		random = {
			chance = 10
			
			death = {
				death_reason = death_accident
			}
			spouse = {
				character_event = {
					id = 30103
					tooltip = "EVTTOOLTIP30103"
				}
			}
			break = yes
		}
		if = {
			limit = { NOT = { trait = lustful } }
			random = {
				chance = 40
				
				add_trait = lustful
				hidden_tooltip = {
					character_event = {
						id = 38272 #Notify Lustful
					}
				}
			}
		}
	}
}

#Active ***live: Gentle and Sweet Love
character_event = {
	id = 30102
	desc = "EVTDESC30102"
	picture = GFX_evt_lovers
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA30102"
		trigger = {
			has_character_flag = gentle_loving
			#NOT = {
			#	age = 55
			#}
			is_60 = no
		}
		clr_character_flag = gentle_loving
		random = {
			chance = 60
			
			add_trait = lustful
			hidden_tooltip = {
				character_event = {
					id = 38272 #Notify Lustful
				}
			}
		}
		random = {
			chance = 10
			
			death = {
				death_reason = death_accident
			}
			spouse = {
				character_event = {
					id = 30104
					tooltip = "EVTTOOLTIP30104"
				}
			}
		}
	}
	option = {
		name = "EVTOPTB30102"
		trigger = {
			has_character_flag = gentle_loving
			#age = 55
			is_60 = yes
		}
		clr_character_flag = gentle_loving
		random = {
			chance = 40
			
			add_trait = lustful
			hidden_tooltip = {
				character_event = {
					id = 38272 #Notify Lustful
				}
			}
		}
		random = {
			chance = 20
			
			death = {
				death_reason = death_accident
			}
			spouse = {
				character_event = {
					id = 30104
					tooltip = "EVTTOOLTIP30104"
				}
			}
		}
	}
	option = {
		name = "EVTOPTC30102"
		trigger = {
			has_character_flag = sweet_love
			#NOT = {
			#	age = 60
			#}
			is_60 = no
		}
		clr_character_flag = sweet_love
		random = {
			chance = 30
			
			add_trait = lustful
			hidden_tooltip = {
				character_event = {
					id = 38272 #Notify Lustful
				}
			}
		}
		random = {
			chance = 20
			
			spouse = {
				character_event = {
					id = 30104
					tooltip = "EVTTOOLTIP30104"
				}
			}
			death = {
				death_reason = death_accident
			}
		}
	}
	option = {
		name = "EVTOPTD30102"
		trigger = {
			has_character_flag = sweet_love
			#age = 60
			is_60 = yes
		}
		clr_character_flag = sweet_love
		random = {
			chance = 20
			
			add_trait = lustful
			hidden_tooltip = {
				character_event = {
					id = 38272 #Notify Lustful
				}
			}
		}
		random = {
			chance = 40
			
			spouse = {
				character_event = {
					id = 30104
					tooltip = "EVTTOOLTIP30104"
				}
			}
			death = {
				death_reason = death_accident
			}
		}
	}
}

# Wife, suspecting husband is infertile, tries to produce an heir with someone else
character_event = {
	id = 30105
	desc = "EVTDESC30105"
	picture = "GFX_evt_pregnancy"
	
	only_women = yes
	capable_only = yes
	prisoner = no
	#max_age = 40
	min_age = 20
	is_married = yes
	
	is_triggered_only = yes
	
	trigger = {
		is_40 = no
		has_lover = no
		fertility = 0.3
		spouse = {
			NOT = { trait = incapable }
			war = no
			in_command = no
			is_abroad = no
			at_location = ROOT
			prisoner = no
			is_alive = yes
			NOT = {
				num_of_children = 1
			}
			NOT = {
				fertility = 0.5
			}
		}
		is_pregnant = no
		NOT = {
			num_of_children = 1
		}
		any_courtier = {
			reverse_opinion = { who = ROOT value = 40 }
			is_female = no
			fertility = 0.5
			has_lover = no
			age = 20
			NOR = { 
				age = 35
				trait = eunuch
				is_ascetic_trigger = yes
				trait = chaste
				trait = celibate
				family = ROOT
			}
			is_close_relative = no
		}
		NOT = {
			has_character_modifier = suitable_father_timer
		}
	}
	
	weight_multiplier = {
		days = 1
		
		modifier = {
			factor = 3
			has_ambition = obj_have_a_daughter
		}
		modifier = {
			factor = 0.5
			trait = chaste
		}
		modifier = {
			factor = 3
			has_ambition = obj_have_a_son
		}
	}
	
	immediate = {
		hidden_tooltip = {
			add_character_modifier = {
				name = suitable_father_timer
				duration = 365
				hidden = yes
			}
		}
	}
	
	option = {
		name = "EVTOPTA30105"
		ai_chance = { factor = 80 }
		piety = -15
		random_courtier = {
			limit = {
				reverse_opinion = { who = ROOT value = 40 }
				is_female = no
				fertility = 0.5
				has_lover = no
				age = 20
				NOR = { 
					age = 35
					trait = eunuch
					is_ascetic_trigger = yes
					trait = chaste
					trait = celibate
					family = ROOT
				}
				is_close_relative = no
			}
			add_lover = ROOT
			random = {
				chance = 15
				impregnate_cuckoo = ROOT
			}
		}
	}
	option = {
		name = "EVTOPTB30105"
		piety = 10
	}
}

# Immortality keeps triggering for gods.  Also, adjust for aging
#Contemplating mortality
narrative_event = {
	title = EVTNAME_RIP_21000
	id = RIP.21000
	border = GFX_event_narrative_frame_religion
	picture = GFX_evt_danse_macabre

	only_playable = yes
	capable_only = yes
	prisoner = no
	min_age = 16
	has_dlc = "Reapers"

	hide_from = yes
	hide_new = yes

	trigger = {
		OR = {
			ai = no
			has_game_rule = {
				name = supernatural_events
				value = unrestricted
			}
		}
		NOR = {
			has_game_rule = {
				name = supernatural_events
				value = off
			}
			has_character_flag = eternal_life_events
		}
		is_inaccessible_trigger = no
		immortal = no
		NOR = {
			trait = god
			trait = vampire
			trait = zombie
			trait = demon_trait
			trait = ethereal_trait
			trait = philosopher_stone_trait
		}
	}

	mean_time_to_happen = {
		months = 3000
		
		modifier = {
			factor = 0.8
			NOT = { health = 2 }
			has_disease_trigger = yes
		}
		modifier = {
			factor = 0.5
			has_disease_trigger = yes
		}
		modifier = {
			factor = 0.9
			#age = 50
			is_50 = yes
		}
		modifier = {
			factor = 0.9
			#age = 60
			is_60 = yes
		}
		modifier = {
			factor = 0.9
			#age = 70
			is_70 = yes
		}
		modifier = {
			factor = 0.9
			#age = 80
			is_80 = yes
		}
		modifier = {
			factor = 0.9
			#age = 90
			is_90 = yes
		}
	}

	immediate = {
		set_character_flag = eternal_life_events

		if = {
			limit = {
				is_married = no
				NOT = { trait = ambitious }
			}

			set_character_flag = RIP_21000_lonely

			if = {
				limit = { 
					any_courtier = { 
						sad_example_trigger = yes 
						is_inaccessible_trigger = no
						ai = yes
					} 
				}

				random_courtier = {
					limit = { 
						sad_example_trigger = yes 
						is_inaccessible_trigger = no
						ai = yes
					}
					
					add_trait = depressed
					save_event_target_as = eternal_life_sad_example	
				}
			}

			if = {
				limit = { NOT = { any_courtier = { sad_example_trigger = yes } } }

				create_character = {
					age = 62
					random_traits = yes
					trait = depressed
					religion = ROOT
					dynasty = random
					race = ROOT
					culture = ROOT
				}
				new_character = {
					if = {
						limit = {
							graphical_culture = dragongfx
							graphical_culture = demongfx
							graphical_culture = etherealgfx
						}
						set_graphical_culture = english
					}
					save_event_target_as = eternal_life_sad_example
				}
			}
		}
	}

	desc = {
		text = EVTDSC_RIP_21000_MARRIED
		trigger = { 
			AND = {
				is_married = yes
				any_spouse = {
					is_lover = ROOT
				}
			}
		}
	}
	desc = {
		text = EVTDSC_RIP_21000_UNMARRIED
		trigger = {
			has_character_flag = RIP_21000_lonely
		}
	}

	desc = {
		text = EVTDSC_RIP_21000_UNMARRIED_AMBITIOUS
		trigger = {
			OR = {
				AND = {
					is_married = no
					trait = ambitious
				}
				AND = {
					is_married = yes
					NOT = { trait = kind }
					NOT = {
						any_spouse = {
							is_lover = ROOT
						}
					}
				}
			}
		}
	}
	desc = {
		text = EVTDSC_RIP_21000_MARRIED_NO_LOVE
		trigger = { 
			AND = {
				is_married = yes
				trait = kind
				NOT = {
					any_spouse = {
						is_lover = ROOT
					}
				}
			}
		}
	}
	desc = {
		text = EVTDSC_RIP_21000_FALLBACK
		trigger = {
			is_married = no
			NOT = { trait = ambitious }
			NOT = { has_character_flag = RIP_21000_lonely }
		}
	}	

	#Summon the council!
	option = {
		name = EVTOPTA_RIP_21000
		narrative_event = {
			id = RIP.21001
			days = 10
			tooltip = EVTOPTA_RIP_21000_TOOLTIP
		}

		trigger = {	NOT = { has_character_flag = RIP_21000_lonely } }
	}

	#Summon the council! Who cares about lonely people?
	option = {
		name = EVTOPTB_RIP_21000
		narrative_event = {
			id = RIP.21001
			days = 15
			tooltip = EVTOPTB_RIP_21000_TOOLTIP
		}

		trigger = { has_character_flag = RIP_21000_lonely }

		clr_character_flag = RIP_21000_lonely
	}

	#Nah
	option = {
		name = EVTOPTC_RIP_21000
		custom_tooltip = { text = EVTOPTC_RIP_21000_TOOLTIP }
		if = {
			limit = { NOT = { trait = content } }
			add_trait = content
		}

		trigger = {	NOT = { has_character_flag = RIP_21000_lonely }	}
	}

	#Nah, I wanna spend more time with the sad person
	option = {
		name = EVTOPTD_RIP_21000
		custom_tooltip = { text = EVTOPTD_RIP_21000_TOOLTIP }

		if = {
			limit = { NOT = { trait = content } }
			add_trait = content
		}

		event_target:eternal_life_sad_example = {
			show_scope_change = no
			opinion = {
				who = FROM
				modifier = opinion_budding_friendship
			}
			hidden_tooltip = { add_friend = FROM }
		}

		trigger = {	has_character_flag = RIP_21000_lonely }
		
		hidden_tooltip = {
			clear_event_target = eternal_life_sad_example
			clr_character_flag = RIP_21000_lonely
		}
	}
	
	after = {
		hidden_tooltip = {
			character_event = { id = MYTH.56 }
		}
	}
}

character_event = {
	id = 72109
	desc = "EVTDESC72109"
	picture = GFX_evt_feast
	
	is_triggered_only = yes

	option = {
		name = "EVTOPTA72109"
		hidden_tooltip = {
			random_list = {
				20 = { #Jongleurs seek your patronage
					character_event = { id = 72000 days = 5 }
				}
				20 = { #Minstrel seeks your patronage
					character_event = { id = 72001 days = 5 }
				}
				20 = { #Enchanted instruments
					character_event = { id = MYTH.47 days = 5 }
				}
				20 = { #Musicians seek your patronage
					character_event = { id = 72002 days = 5 }
				}
				20 = { #Ethereal Musicians
					character_event = { id = MYTH.46 days = 5 }
				}
				20 = { #Fire-eaters seek your patronage
					character_event = { id = 72006 days = 5 }
				}
				20 = { #Conjurer seeks your patronage
					character_event = { id = 72007 days = 5 }
				}
				20 = { #Acrobats seek your patronage
					character_event = { id = 72009 days = 5 }
				}
				20 = { #Travelling Dancers seek your patronage
					character_event = { id = 72120 days = 5 }
				}
			}
			random_list = {
				15 = { #Jongleurs seek your patronage #2
					character_event = { id = 72000 days = 10 }
				}
				15 = { #Minstrel seeks your patronage #2
					character_event = { id = 72001 days = 10 }
				}
				15 = { #Enchanted instruments #2
					character_event = { id = MYTH.47 days = 10 }
				}
				15 = { #Musicians seek your patronage #2
					character_event = { id = 72002 days = 10 }
				}
				15 = { #Ethereal Musicians #2
					character_event = { id = MYTH.46 days = 10 }
				}
				15 = { #Fire-eaters seek your patronage #2
					character_event = { id = 72006 days = 10 }
				}
				15 = { #Conjurer seeks your patronage #2
					character_event = { id = 72007 days = 10 }
				}
				15 = { #Acrobats seek your patronage #2
					character_event = { id = 72009 days = 10 }
				}
				15 = { #Travelling Dancers seek your patronage #2
					character_event = { id = 72120 days = 10 }
				}
				5 = { #Castle problems
					modifier = {
						factor = 0
						NOT = {
							any_courtier = {
								has_job_title = job_treasurer
							}
						}
					}
					character_event = { id = 72004 days = 10 }
				}
				5 = { #Highway Robber Band
					modifier = {
						factor = 0
						NOR = {
							any_courtier = {
								has_job_title = job_marshal
							}
							location = {
								has_province_modifier = highway_robber_band
							}
						}
					}
					character_event = { id = 72005 days = 10 }
				}
				30 = { #Hunt for boars for winter feast
					modifier = {
						factor = 0
						NOT = {
							any_courtier = {
								has_job_title = job_marshal
							}
						}
					}
					character_event = { id = 72008 days = 10 }
				}
			}
			character_event = {
				id = 72003
				days = 15
				random = 2
			}
		}
	}
}

### Witch
character_event = {
	id = WoL.12028
	desc = EVTDESC_WoL_12028
	picture = GFX_evt_throne_room
	border = GFX_event_normal_frame_economy
	
	min_age = 16
	capable_only = yes
	only_playable = yes
	prisoner = no
	
	trigger = {
		has_focus = focus_rulership
		any_demesne_province = {
			always = yes
		}
	}
	
	is_triggered_only = yes
	
	weight_multiplier = {
		factor = 1
	}
	
	immediate = {
		random_demesne_province = {
			save_event_target_as = witch_province
		}
		random_list = {
			10 = {
				create_character = {
					random_traits = no
					dynasty = NONE
					female = yes
					age = 28
					religion = ROOT
					culture = ROOT
					trait = ugly
					trait = kind
					trait = charitable
					trait = humble
					trait = honest
					trait = shy
					trait = trusting
					#trait = naive_appeaser
				}
				new_character = {
					random_list = {
						90 = { add_trait = naive_appeaser }
						10 = {
							add_trait = novice_mage
							add_trait = magic_heritage
							update_natural_magic = yes
						}
					}		
					save_event_target_as = suspected_witch
					hidden_tooltip = {
						character_event = { id = MYTH.56 }
					}
				}
			}
			10 = {
				create_character = {
					random_traits = no
					dynasty = NONE
					female = yes
					age = 26
					religion = ROOT
					culture = ROOT
					trait = hunchback
					trait = wroth
					trait = envious
					trait = paranoid
					trait = deceitful
					trait = shy
					trait = cynical
					#trait = amateurish_plotter
				}
				new_character = {
					random_list = {
						90 = { add_trait = amateurish_plotter }
						10 = {
							add_trait = novice_mage
							add_trait = magic_heritage
							update_natural_magic = yes
						}
					}	
					save_event_target_as = suspected_witch
					hidden_tooltip = {
						character_event = { id = MYTH.56 }
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTA_WoL_12028
		event_target:witch_province = {
			add_province_modifier = {
				name = peasants_protected
				duration = 365
			}
		}
		event_target:suspected_witch = {
			death = {
				death_reason = death_execution_burning
				killer = ROOT
			}
		}
		hidden_tooltip = { character_event = { id = WoL.12500 days = 1 } }
		piety = 30
	}
	option = {
		name = EVTOPTB_WoL_12028
		event_target:suspected_witch = {
			imprison = ROOT
		}
		hidden_tooltip = { character_event = { id = WoL.12500 days = 1 } }
	}
	option = {
		name = EVTOPTC_WoL_12028
		event_target:witch_province = {
			add_province_modifier = {
				name = peasant_unrest
				duration = 365
			}
		}
		culture_techpoints = 50
		hidden_tooltip = { character_event = { id = WoL.12500 days = 1 } }
	}
}

###########################################
# Favorite hunting dog                    #
# ID WoL.5200-WoL.5299                    #
###########################################
# Only events that care about the name

# Name puppy
character_event = {
	id = WoL.5203
	desc = EVTDESC_WoL_5203
	picture = GFX_evt_hunting_scene
	border = GFX_event_normal_frame_war

	is_triggered_only = yes
	
	immediate = {
		random_list = {
			90 = { set_character_flag = good_dog }  # Decide dog's personality...
			10 = { set_character_flag = bad_dog }
		}
	}
	
	option = { # Faithful
		name = EVTOPTA_WoL_5203
		set_character_flag = dog_name_faithful
		hidden_tooltip = { character_event = { id = WoL.5204 days = 150 } }
	}
	option = { # Hunter
		name = EVTOPTB_WoL_5203
		set_character_flag = dog_name_hunter
		hidden_tooltip = { character_event = { id = WoL.5204 days = 150 } }
	}
	option = { # Tricky
		name = EVTOPTC_WoL_5203
		set_character_flag = dog_name_tricky
		hidden_tooltip = { character_event = { id = WoL.5204 days = 150 } }
	}
	option = { # Lucifer
		name = EVTOPTD_WoL_5203
		trigger = {
			OR = {
				trait = cynical
				trait = possessed
				is_devil_worshiper_trigger = yes
			}
			religion_group = christian
		}
		set_character_flag = dog_name_lucifer
		hidden_tooltip = { character_event = { id = WoL.5204 days = 150 } }
	}
	option = { # Shaytan
		name = EVTOPTE_WoL_5203
		trigger = {
			OR = {
				trait = cynical
				trait = possessed
				is_devil_worshiper_trigger = yes
			}
			religion_group = muslim
		}
		set_character_flag = dog_name_shaytan
		hidden_tooltip = { character_event = { id = WoL.5204 days = 150 } }
	}
	option = { # Fenrir
		name = EVTOPTF_WoL_5203
		trigger = {
			OR = {
				trait = cynical
				trait = possessed
				is_devil_worshiper_trigger = yes
			}
			OR = {
				religion = norse_pagan
				religion = norse_pagan_reformed
			}
		}
		set_character_flag = dog_name_fenrir
		hidden_tooltip = { character_event = { id = WoL.5204 days = 150 } }
	}
	option = { # Erlik
		name = EVTOPTG_WoL_5203
		trigger = {
			OR = {
				trait = cynical
				trait = possessed
				is_devil_worshiper_trigger = yes
			}
			OR = {
				religion = tengri_pagan
				religion = tengri_pagan_reformed
			}
		}
		set_character_flag = dog_name_erlik
		hidden_tooltip = { character_event = { id = WoL.5204 days = 150 } }
	}
	option = { # Velnias
		name = EVTOPTH_WoL_5203
		trigger = {
			OR = {
				trait = cynical
				trait = possessed
				is_devil_worshiper_trigger = yes
			}
			OR = {
				religion = baltic_pagan
				religion = baltic_pagan_reformed
			}
		}
		set_character_flag = dog_name_velnias
		hidden_tooltip = { character_event = { id = WoL.5204 days = 150 } }
	}
	option = { # Tuoni
		name = EVTOPTI_WoL_5203
		trigger = {
			OR = {
				trait = cynical
				trait = possessed
				is_devil_worshiper_trigger = yes
			}
			OR = {
				religion = finnish_pagan
				religion = finnish_pagan_reformed
			}
		}
		set_character_flag = dog_name_tuoni
		hidden_tooltip = { character_event = { id = WoL.5204 days = 150 } }
	}
	option = { # Xolotl
		name = EVTOPTJ_WoL_5203
		trigger = {
			OR = {
				trait = cynical
				trait = possessed
				is_devil_worshiper_trigger = yes
			}
			OR = {
				religion = aztec
				religion = aztec_reformed
			}
		}
		set_character_flag = dog_name_xolotl
		hidden_tooltip = { character_event = { id = WoL.5204 days = 150 } }
	}
	option = { # Veles
		name = EVTOPTK_WoL_5203
		trigger = {
			OR = {
				trait = cynical
				trait = possessed
				is_devil_worshiper_trigger = yes
			}
			OR = {
				religion = slavic_pagan
				religion = slavic_pagan_reformed
			}
		}
		set_character_flag = dog_name_veles
		hidden_tooltip = { character_event = { id = WoL.5204 days = 150 } }
	}
	option = { # Guruhi
		name = EVTOPTL_WoL_5203
		trigger = {
			OR = {
				trait = cynical
				trait = possessed
				is_devil_worshiper_trigger = yes
			}
			OR = {
				religion = west_african_pagan
				religion = west_african_pagan_reformed
			}
		}
		set_character_flag = dog_name_guruhi
		hidden_tooltip = { character_event = { id = WoL.5204 days = 150 } }
	}
	option = { # Darkness
		name = EVTOPTM_WoL_5203
		trigger = {
			OR = {
				trait = cynical
				trait = possessed
				is_devil_worshiper_trigger = yes
			}
			OR = {
				religion = zun_pagan
				religion = zun_pagan_reformed
			}
		}
		set_character_flag = dog_name_darkness
		hidden_tooltip = { character_event = { id = WoL.5204 days = 150 } }
	}
	option = { # Ahriman
		name = EVTOPTN_WoL_5203
		trigger = {
			OR = {
				trait = cynical
				trait = possessed
				is_devil_worshiper_trigger = yes
			}
			religion_group = zoroastrian_group
		}
		set_character_flag = dog_name_ahriman
		hidden_tooltip = { character_event = { id = WoL.5204 days = 150 } }
	}
	option = { # Satan
		name = EVTOPTO_WoL_5203
		trigger = {
			OR = {
				trait = cynical
				trait = possessed
				is_devil_worshiper_trigger = yes
			}
			religion_group = jewish_group
		}
		set_character_flag = dog_name_satan
		hidden_tooltip = { character_event = { id = WoL.5204 days = 150 } }
	}
	option = { # Vinayaka
		name = EVTOPTP_WoL_5203
		trigger = {
			OR = {
				trait = cynical
				trait = possessed
				is_devil_worshiper_trigger = yes
			}
			religion = hindu
		}
		set_character_flag = dog_name_vinayaka
		hidden_tooltip = { character_event = { id = WoL.5204 days = 150 } }
	}
	option = { # Mara
		name = EVTOPTQ_WoL_5203
		trigger = {
			OR = {
				trait = cynical
				trait = possessed
				is_devil_worshiper_trigger = yes
			}
			religion = buddhist
		}
		set_character_flag = dog_name_mara
		hidden_tooltip = { character_event = { id = WoL.5204 days = 150 } }
	}
	option = { # Punisher
		name = EVTOPTR_WoL_5203
		trigger = {
			OR = {
				trait = cynical
				trait = possessed
				is_devil_worshiper_trigger = yes
			}
			religion = jain
		}
		set_character_flag = dog_name_punisher
		hidden_tooltip = { character_event = { id = WoL.5204 days = 150 } }
	}
	option = { # Sigurd
		name = EVTOPTS_WoL_5203
		trigger = {
			OR = {
				trait = cynical
				trait = possessed
				is_devil_worshiper_trigger = yes
			}
			OR = {
				religion = draconic_pagan
				religion = draconic_pagan_reformed
			}
		}
		set_character_flag = dog_name_sigurd
		hidden_tooltip = { character_event = { id = WoL.5204 days = 150 } }
	}
	option = { # Thor
		name = EVTOPTT_WoL_5203
		trigger = {
			OR = {
				trait = cynical
				trait = possessed
				is_devil_worshiper_trigger = yes
			}
			OR = {
				religion = jotnar
				religion = jotnar_reformed
			}
		}
		set_character_flag = dog_name_thor
		hidden_tooltip = { character_event = { id = WoL.5204 days = 150 } }
	}
	option = { # Michael
		name = EVTOPTU_WoL_5203
		trigger = {
			OR = {
				trait = cynical
				trait = possessed
				is_devil_worshiper_trigger = yes
			}
			religion = satanist
		}
		set_character_flag = dog_name_michael
		hidden_tooltip = { character_event = { id = WoL.5204 days = 150 } }
	}
	option = { # Ysbaddaden - there may be a better fit - information is a bit sparse
		name = EVTOPTV_WoL_5203
		trigger = {
			OR = {
				trait = cynical
				trait = possessed
				is_devil_worshiper_trigger = yes
			}
			OR = {
				religion = druidic
				religion = druidic_reformed
			}
		}
		set_character_flag = dog_name_ysbaddaden
		hidden_tooltip = { character_event = { id = WoL.5204 days = 150 } }
	}
	option = { # Set - Probably best known spelling.  Setesh might also be a good choice - "sounds" more Egyptian while still being recognizable to most people.
		name = EVTOPTW_WoL_5203
		trigger = {
			OR = {
				trait = cynical
				trait = possessed
				is_devil_worshiper_trigger = yes
			}
			OR = {
				religion = kemetic_pagan
				religion = kemetic_pagan_reformed
				religion = atenist
			}
		}
		set_character_flag = dog_name_set
		hidden_tooltip = { character_event = { id = WoL.5204 days = 150 } }
	}
	option = { # Deimos
		name = EVTOPTX_WoL_5203
		trigger = {
			OR = {
				trait = cynical
				trait = possessed
				is_devil_worshiper_trigger = yes
			}
			religion = hellenic_pagan
		}
		set_character_flag = dog_name_deimos
		hidden_tooltip = { character_event = { id = WoL.5204 days = 150 } }
	}
	#option = { # Metus
	#	name = EVTOPTY_WoL_5203
	#	trigger = {
	#		OR = {
	#			trait = cynical
	#			trait = possessed
	#			is_devil_worshiper_trigger = yes
	#		}
	#		religion = hellen_pagan_reformed
	#		# Plus the planned reformation option
	#	}
	#	set_character_flag = dog_name_metus
	#	hidden_tooltip = { character_event = { id = WoL.5204 days = 150 } }
	#}
}

## Random dog events...

# Spending time outside training dog has its effects
character_event = {
	id = WoL.5221
	desc = EVTDESC_WoL_5221
	picture = GFX_evt_hunting_scene
	border = GFX_event_normal_frame_war

	is_triggered_only = yes

	trigger = {
		has_character_modifier = pet_hunting_dog
	}
	
	option = { # Train dog
		name = EVTOPTA_WoL_5221
		trigger = {
			has_character_flag = dog_name_faithful
		}
		if = {
			limit = {
				is_weak_trigger = no
				trait = diligent
			}
			health = 1
		}
		if = {
			limit = {
				is_weak_trigger = no
				NOT = { trait = diligent }
			}
			add_trait = diligent
		}
		if = {
			limit = {
				is_weak_trigger = yes
			}
			remove_trait = weak
			remove_trait = feeble
		}
	}
	option = { # Train dog
		name = EVTOPTB_WoL_5221
		trigger = {
			has_character_flag = dog_name_hunter
		}
		if = {
			limit = {
				is_weak_trigger = no
				trait = diligent
			}
			health = 1
		}
		if = {
			limit = {
				is_weak_trigger = no
				NOT = { trait = diligent }
			}
			add_trait = diligent
		}
		if = {
			limit = {
				is_weak_trigger = yes
			}
			remove_trait = weak
			remove_trait = feeble
		}
	}
	option = { # Train dog
		name = EVTOPTC_WoL_5221
		trigger = {
			has_character_flag = dog_name_tricky
		}
		if = {
			limit = {
				is_weak_trigger = no
				trait = diligent
			}
			health = 1
		}
		if = {
			limit = {
				is_weak_trigger = no
				NOT = { trait = diligent }
			}
			add_trait = diligent
		}
		if = {
			limit = {
				is_weak_trigger = yes
			}
			remove_trait = weak
			remove_trait = feeble
		}
	}
	option = { # Train dog
		name = EVTOPTD_WoL_5221
		trigger = {
			has_character_flag = dog_name_lucifer
		}
		if = {
			limit = {
				is_weak_trigger = no
				trait = diligent
			}
			health = 1
		}
		if = {
			limit = {
				is_weak_trigger = no
				NOT = { trait = diligent }
			}
			add_trait = diligent
		}
		if = {
			limit = {
				is_weak_trigger = yes
			}
			remove_trait = weak
			remove_trait = feeble
		}
	}
	option = { # Train dog
		name = EVTOPTE_WoL_5221
		trigger = {
			has_character_flag = dog_name_shaytan
		}
		if = {
			limit = {
				is_weak_trigger = no
				trait = diligent
			}
			health = 1
		}
		if = {
			limit = {
				is_weak_trigger = no
				NOT = { trait = diligent }
			}
			add_trait = diligent
		}
		if = {
			limit = {
				is_weak_trigger = yes
			}
			remove_trait = weak
			remove_trait = feeble
		}
	}
	option = { # Train dog
		name = EVTOPTF_WoL_5221
		trigger = {
			has_character_flag = dog_name_fenrir
		}
		if = {
			limit = {
				is_weak_trigger = no
				trait = diligent
			}
			health = 1
		}
		if = {
			limit = {
				is_weak_trigger = no
				NOT = { trait = diligent }
			}
			add_trait = diligent
		}
		if = {
			limit = {
				is_weak_trigger = yes
			}
			remove_trait = weak
			remove_trait = feeble
		}
	}
	option = { # Train dog
		name = EVTOPTG_WoL_5221
		trigger = {
			has_character_flag = dog_name_erlik
		}
		if = {
			limit = {
				is_weak_trigger = no
				trait = diligent
			}
			health = 1
		}
		if = {
			limit = {
				is_weak_trigger = no
				NOT = { trait = diligent }
			}
			add_trait = diligent
		}
		if = {
			limit = {
				is_weak_trigger = yes
			}
			remove_trait = weak
			remove_trait = feeble
		}
	}
	option = { # Train dog
		name = EVTOPTH_WoL_5221
		trigger = {
			has_character_flag = dog_name_velnias
		}
		if = {
			limit = {
				is_weak_trigger = no
				trait = diligent
			}
			health = 1
		}
		if = {
			limit = {
				is_weak_trigger = no
				NOT = { trait = diligent }
			}
			add_trait = diligent
		}
		if = {
			limit = {
				is_weak_trigger = yes
			}
			remove_trait = weak
			remove_trait = feeble
		}
	}
	option = { # Train dog
		name = EVTOPTI_WoL_5221
		trigger = {
			has_character_flag = dog_name_tuoni
		}
		if = {
			limit = {
				is_weak_trigger = no
				trait = diligent
			}
			health = 1
		}
		if = {
			limit = {
				is_weak_trigger = no
				NOT = { trait = diligent }
			}
			add_trait = diligent
		}
		if = {
			limit = {
				is_weak_trigger = yes
			}
			remove_trait = weak
			remove_trait = feeble
		}
	}
	option = { # Train dog
		name = EVTOPTJ_WoL_5221
		trigger = {
			has_character_flag = dog_name_xolotl
		}
		if = {
			limit = {
				is_weak_trigger = no
				trait = diligent
			}
			health = 1
		}
		if = {
			limit = {
				is_weak_trigger = no
				NOT = { trait = diligent }
			}
			add_trait = diligent
		}
		if = {
			limit = {
				is_weak_trigger = yes
			}
			remove_trait = weak
			remove_trait = feeble
		}
	}
	option = { # Train dog
		name = EVTOPTK_WoL_5221
		trigger = {
			has_character_flag = dog_name_veles
		}
		if = {
			limit = {
				is_weak_trigger = no
				trait = diligent
			}
			health = 1
		}
		if = {
			limit = {
				is_weak_trigger = no
				NOT = { trait = diligent }
			}
			add_trait = diligent
		}
		if = {
			limit = {
				is_weak_trigger = yes
			}
			remove_trait = weak
			remove_trait = feeble
		}
	}
	option = { # Train dog
		name = EVTOPTL_WoL_5221
		trigger = {
			has_character_flag = dog_name_guruhi
		}
		if = {
			limit = {
				is_weak_trigger = no
				trait = diligent
			}
			health = 1
		}
		if = {
			limit = {
				is_weak_trigger = no
				NOT = { trait = diligent }
			}
			add_trait = diligent
		}
		if = {
			limit = {
				is_weak_trigger = yes
			}
			remove_trait = weak
			remove_trait = feeble
		}
	}
	option = { # Train dog
		name = EVTOPTM_WoL_5221
		trigger = {
			has_character_flag = dog_name_darkness
		}
		if = {
			limit = {
				is_weak_trigger = no
				trait = diligent
			}
			health = 1
		}
		if = {
			limit = {
				is_weak_trigger = no
				NOT = { trait = diligent }
			}
			add_trait = diligent
		}
		if = {
			limit = {
				is_weak_trigger = yes
			}
			remove_trait = weak
			remove_trait = feeble
		}
	}
	option = { # Train dog
		name = EVTOPTN_WoL_5221
		trigger = {
			has_character_flag = dog_name_ahriman
		}
		if = {
			limit = {
				is_weak_trigger = no
				trait = diligent
			}
			health = 1
		}
		if = {
			limit = {
				is_weak_trigger = no
				NOT = { trait = diligent }
			}
			add_trait = diligent
		}
		if = {
			limit = {
				is_weak_trigger = yes
			}
			remove_trait = weak
			remove_trait = feeble
		}
	}
	option = { # Train dog
		name = EVTOPTO_WoL_5221
		trigger = {
			has_character_flag = dog_name_satan
		}
		if = {
			limit = {
				is_weak_trigger = no
				trait = diligent
			}
			health = 1
		}
		if = {
			limit = {
				is_weak_trigger = no
				NOT = { trait = diligent }
			}
			add_trait = diligent
		}
		if = {
			limit = {
				is_weak_trigger = yes
			}
			remove_trait = weak
			remove_trait = feeble
		}
	}
	option = { # Train dog
		name = EVTOPTP_WoL_5221
		trigger = {
			has_character_flag = dog_name_vinayaka
		}
		if = {
			limit = {
				is_weak_trigger = no
				trait = diligent
			}
			health = 1
		}
		if = {
			limit = {
				is_weak_trigger = no
				NOT = { trait = diligent }
			}
			add_trait = diligent
		}
		if = {
			limit = {
				is_weak_trigger = yes
			}
			remove_trait = weak
			remove_trait = feeble
		}
	}
	option = { # Train dog
		name = EVTOPTQ_WoL_5221
		trigger = {
			has_character_flag = dog_name_mara
		}
		if = {
			limit = {
				is_weak_trigger = no
				trait = diligent
			}
			health = 1
		}
		if = {
			limit = {
				is_weak_trigger = no
				NOT = { trait = diligent }
			}
			add_trait = diligent
		}
		if = {
			limit = {
				is_weak_trigger = yes
			}
			remove_trait = weak
			remove_trait = feeble
		}
	}
	option = { # Train dog
		name = EVTOPTR_WoL_5221
		trigger = {
			has_character_flag = dog_name_punisher
		}
		if = {
			limit = {
				is_weak_trigger = no
				trait = diligent
			}
			health = 1
		}
		if = {
			limit = {
				is_weak_trigger = no
				NOT = { trait = diligent }
			}
			add_trait = diligent
		}
		if = {
			limit = {
				is_weak_trigger = yes
			}
			remove_trait = weak
			remove_trait = feeble
		}
	}
	option = { # Train dog
		name = EVTOPTS_WoL_5221
		trigger = {
			has_character_flag = dog_name_sigurd
		}
		if = {
			limit = {
				is_weak_trigger = no
				trait = diligent
			}
			health = 1
		}
		if = {
			limit = {
				is_weak_trigger = no
				NOT = { trait = diligent }
			}
			add_trait = diligent
		}
		if = {
			limit = {
				is_weak_trigger = yes
			}
			remove_trait = weak
			remove_trait = feeble
		}
	}
	option = { # Train dog
		name = EVTOPTT_WoL_5221
		trigger = {
			has_character_flag = dog_name_thor
		}
		if = {
			limit = {
				is_weak_trigger = no
				trait = diligent
			}
			health = 1
		}
		if = {
			limit = {
				is_weak_trigger = no
				NOT = { trait = diligent }
			}
			add_trait = diligent
		}
		if = {
			limit = {
				is_weak_trigger = yes
			}
			remove_trait = weak
			remove_trait = feeble
		}
	}
	option = { # Train dog
		name = EVTOPTU_WoL_5221
		trigger = {
			has_character_flag = dog_name_michael
		}
		if = {
			limit = {
				is_weak_trigger = no
				trait = diligent
			}
			health = 1
		}
		if = {
			limit = {
				is_weak_trigger = no
				NOT = { trait = diligent }
			}
			add_trait = diligent
		}
		if = {
			limit = {
				is_weak_trigger = yes
			}
			remove_trait = weak
			remove_trait = feeble
		}
	}
	option = { # Train dog
		name = EVTOPTV_WoL_5221
		trigger = {
			has_character_flag = dog_name_ysbaddaden
		}
		if = {
			limit = {
				is_weak_trigger = no
				trait = diligent
			}
			health = 1
		}
		if = {
			limit = {
				is_weak_trigger = no
				NOT = { trait = diligent }
			}
			add_trait = diligent
		}
		if = {
			limit = {
				is_weak_trigger = yes
			}
			remove_trait = weak
			remove_trait = feeble
		}
	}
	option = { # Train dog
		name = EVTOPTW_WoL_5221
		trigger = {
			has_character_flag = dog_name_set
		}
		if = {
			limit = {
				is_weak_trigger = no
				trait = diligent
			}
			health = 1
		}
		if = {
			limit = {
				is_weak_trigger = no
				NOT = { trait = diligent }
			}
			add_trait = diligent
		}
		if = {
			limit = {
				is_weak_trigger = yes
			}
			remove_trait = weak
			remove_trait = feeble
		}
	}
	option = { # Train dog
		name = EVTOPTX_WoL_5221
		trigger = {
			has_character_flag = dog_name_deimos
		}
		if = {
			limit = {
				is_weak_trigger = no
				trait = diligent
			}
			health = 1
		}
		if = {
			limit = {
				is_weak_trigger = no
				NOT = { trait = diligent }
			}
			add_trait = diligent
		}
		if = {
			limit = {
				is_weak_trigger = yes
			}
			remove_trait = weak
			remove_trait = feeble
		}
	}
	option = { # Train dog
		name = EVTOPTY_WoL_5221
		trigger = {
			has_character_flag = dog_name_metus
		}
		if = {
			limit = {
				is_weak_trigger = no
				trait = diligent
			}
			health = 1
		}
		if = {
			limit = {
				is_weak_trigger = no
				NOT = { trait = diligent }
			}
			add_trait = diligent
		}
		if = {
			limit = {
				is_weak_trigger = yes
			}
			remove_trait = weak
			remove_trait = feeble
		}
	}
}

# Dog dies! Decide on funeral
character_event = {
	id = WoL.5290
	desc = EVTDESC_WoL_5290
	picture = GFX_evt_hunting_scene
	border = GFX_event_normal_frame_war

	is_triggered_only = yes

	trigger = {
		has_character_modifier = pet_hunting_dog
		NOT = { has_character_flag = hunting_dog_already_killed }
	}

	immediate = {
		remove_character_modifier = pet_best_friends
	}
	
	option = { # Bury him quietly
		name = EVTOPTA_WoL_5290
		remove_character_modifier = pet_hunting_dog
		hidden_tooltip = { character_event = { id = WoL.5291 } }
	}
	option = { # Throw a grand funeral
		name = EVTOPTB_WoL_5290
		remove_character_modifier = pet_hunting_dog
		hidden_tooltip = { character_event = { id = WoL.5291 } }
	}
	option = { # Lunatic option - build him a great pyramid - use dogs name
		name = EVTOPTC_WoL_5290
		trigger = {
			ai = no
			OR = {
				trait = lunatic
				trait = possessed
			}
			has_character_flag = dog_name_faithful
		}
		scaled_wealth = { value = -2 max = -800 }
		capital_scope = {
			add_province_modifier = { # Powerful but extremely unusual
				name = pyramid
				duration = -1
			}
		}
		remove_character_modifier = pet_hunting_dog
		hidden_tooltip = { character_event = { id = WoL.5291 } }
	}
	option = { # Lunatic option - build him a great pyramid - use dogs name
		name = EVTOPTD_WoL_5290
		trigger = {
			ai = no
			OR = {
				trait = lunatic
				trait = possessed
			}
			has_character_flag = dog_name_hunter
		}
		scaled_wealth = { value = -2 max = -800 }
		capital_scope = {
			add_province_modifier = { # Powerful but extremely unusual
				name = pyramid
				duration = -1
			}
		}
		remove_character_modifier = pet_hunting_dog
		hidden_tooltip = { character_event = { id = WoL.5291 } }
	}
	option = { # Lunatic option - build him a great pyramid - use dogs name
		name = EVTOPTE_WoL_5290
		trigger = {
			ai = no
			OR = {
				trait = lunatic
				trait = possessed
			}
			has_character_flag = dog_name_tricky
		}
		scaled_wealth = { value = -2 max = -800 }
		capital_scope = {
			add_province_modifier = { # Powerful but extremely unusual
				name = pyramid
				duration = -1
			}
		}
		remove_character_modifier = pet_hunting_dog
		hidden_tooltip = { character_event = { id = WoL.5291 } }
	}
	option = { # Lunatic option - build him a great pyramid - use dogs name
		name = EVTOPTF_WoL_5290
		trigger = {
			ai = no
			OR = {
				trait = lunatic
				trait = possessed
			}
			has_character_flag = dog_name_lucifer
		}
		scaled_wealth = { value = -2 max = -800 }
		capital_scope = {
			add_province_modifier = { # Powerful but extremely unusual
				name = pyramid
				duration = -1
			}
		}
		remove_character_modifier = pet_hunting_dog
		hidden_tooltip = { character_event = { id = WoL.5291 } }
	}
	option = { # Lunatic option - build him a great pyramid - use dogs name
		name = EVTOPTG_WoL_5290
		trigger = {
			ai = no
			OR = {
				trait = lunatic
				trait = possessed
			}
			has_character_flag = dog_name_shaytan
		}
		scaled_wealth = { value = -2 max = -800 }
		capital_scope = {
			add_province_modifier = { # Powerful but extremely unusual
				name = pyramid
				duration = -1
			}
		}
		remove_character_modifier = pet_hunting_dog
		hidden_tooltip = { character_event = { id = WoL.5291 } }
	}
	option = { # Lunatic option - build him a great pyramid - use dogs name
		name = EVTOPTH_WoL_5290
		trigger = {
			ai = no
			OR = {
				trait = lunatic
				trait = possessed
			}
			has_character_flag = dog_name_fenrir
		}
		scaled_wealth = { value = -2 max = -800 }
		capital_scope = {
			add_province_modifier = { # Powerful but extremely unusual
				name = pyramid
				duration = -1
			}
		}
		remove_character_modifier = pet_hunting_dog
		hidden_tooltip = { character_event = { id = WoL.5291 } }
	}
	option = { # Lunatic option - build him a great pyramid - use dogs name
		name = EVTOPTI_WoL_5290
		trigger = {
			ai = no
			OR = {
				trait = lunatic
				trait = possessed
			}
			has_character_flag = dog_name_erlik
		}
		scaled_wealth = { value = -2 max = -800 }
		capital_scope = {
			add_province_modifier = { # Powerful but extremely unusual
				name = pyramid
				duration = -1
			}
		}
		remove_character_modifier = pet_hunting_dog
		hidden_tooltip = { character_event = { id = WoL.5291 } }
	}
	option = { # Lunatic option - build him a great pyramid - use dogs name
		name = EVTOPTJ_WoL_5290
		trigger = {
			ai = no
			OR = {
				trait = lunatic
				trait = possessed
			}
			has_character_flag = dog_name_velnias
		}
		scaled_wealth = { value = -2 max = -800 }
		capital_scope = {
			add_province_modifier = { # Powerful but extremely unusual
				name = pyramid
				duration = -1
			}
		}
		remove_character_modifier = pet_hunting_dog
		hidden_tooltip = { character_event = { id = WoL.5291 } }
	}
	option = { # Lunatic option - build him a great pyramid - use dogs name
		name = EVTOPTK_WoL_5290
		trigger = {
			ai = no
			OR = {
				trait = lunatic
				trait = possessed
			}
			has_character_flag = dog_name_tuoni
		}
		scaled_wealth = { value = -2 max = -800 }
		capital_scope = {
			add_province_modifier = { # Powerful but extremely unusual
				name = pyramid
				duration = -1
			}
		}
		remove_character_modifier = pet_hunting_dog
		hidden_tooltip = { character_event = { id = WoL.5291 } }
	}
	option = { # Lunatic option - build him a great pyramid - use dogs name
		name = EVTOPTL_WoL_5290
		trigger = {
			ai = no
			OR = {
				trait = lunatic
				trait = possessed
			}
			has_character_flag = dog_name_xolotl
		}
		scaled_wealth = { value = -2 max = -800 }
		capital_scope = {
			add_province_modifier = { # Powerful but extremely unusual
				name = pyramid
				duration = -1
			}
		}
		remove_character_modifier = pet_hunting_dog
		hidden_tooltip = { character_event = { id = WoL.5291 } }
	}
	option = { # Lunatic option - build him a great pyramid - use dogs name
		name = EVTOPTM_WoL_5290
		trigger = {
			ai = no
			OR = {
				trait = lunatic
				trait = possessed
			}
			has_character_flag = dog_name_veles
		}
		scaled_wealth = { value = -2 max = -800 }
		capital_scope = {
			add_province_modifier = { # Powerful but extremely unusual
				name = pyramid
				duration = -1
			}
		}
		remove_character_modifier = pet_hunting_dog
		hidden_tooltip = { character_event = { id = WoL.5291 } }
	}
	option = { # Lunatic option - build him a great pyramid - use dogs name
		name = EVTOPTN_WoL_5290
		trigger = {
			ai = no
			OR = {
				trait = lunatic
				trait = possessed
			}
			has_character_flag = dog_name_guruhi
		}
		scaled_wealth = { value = -2 max = -800 }
		capital_scope = {
			add_province_modifier = { # Powerful but extremely unusual
				name = pyramid
				duration = -1
			}
		}
		remove_character_modifier = pet_hunting_dog
		hidden_tooltip = { character_event = { id = WoL.5291 } }
	}
	option = { # Lunatic option - build him a great pyramid - use dogs name
		name = EVTOPTO_WoL_5290
		trigger = {
			ai = no
			OR = {
				trait = lunatic
				trait = possessed
			}
			has_character_flag = dog_name_darkness
		}
		scaled_wealth = { value = -2 max = -800 }
		capital_scope = {
			add_province_modifier = { # Powerful but extremely unusual
				name = pyramid
				duration = -1
			}
		}
		remove_character_modifier = pet_hunting_dog
		hidden_tooltip = { character_event = { id = WoL.5291 } }
	}
	option = { # Lunatic option - build him a great pyramid - use dogs name
		name = EVTOPTP_WoL_5290
		trigger = {
			ai = no
			OR = {
				trait = lunatic
				trait = possessed
			}
			has_character_flag = dog_name_ahriman
		}
		scaled_wealth = { value = -2 max = -800 }
		capital_scope = {
			add_province_modifier = { # Powerful but extremely unusual
				name = pyramid
				duration = -1
			}
		}
		remove_character_modifier = pet_hunting_dog
		hidden_tooltip = { character_event = { id = WoL.5291 } }
	}
	option = { # Lunatic option - build him a great pyramid - use dogs name
		name = EVTOPTQ_WoL_5290
		trigger = {
			ai = no
			OR = {
				trait = lunatic
				trait = possessed
			}
			has_character_flag = dog_name_satan
		}
		scaled_wealth = { value = -2 max = -800 }
		capital_scope = {
			add_province_modifier = { # Powerful but extremely unusual
				name = pyramid
				duration = -1
			}
		}
		remove_character_modifier = pet_hunting_dog
		hidden_tooltip = { character_event = { id = WoL.5291 } }
	}
	option = { # Lunatic option - build him a great pyramid - use dogs name
		name = EVTOPTR_WoL_5290
		trigger = {
			ai = no
			OR = {
				trait = lunatic
				trait = possessed
			}
			has_character_flag = dog_name_vinayaka
		}
		scaled_wealth = { value = -2 max = -800 }
		capital_scope = {
			add_province_modifier = { # Powerful but extremely unusual
				name = pyramid
				duration = -1
			}
		}
		remove_character_modifier = pet_hunting_dog
		hidden_tooltip = { character_event = { id = WoL.5291 } }
	}
	option = { # Lunatic option - build him a great pyramid - use dogs name
		name = EVTOPTS_WoL_5290
		trigger = {
			ai = no
			OR = {
				trait = lunatic
				trait = possessed
			}
			has_character_flag = dog_name_mara
		}
		scaled_wealth = { value = -2 max = -800 }
		capital_scope = {
			add_province_modifier = { # Powerful but extremely unusual
				name = pyramid
				duration = -1
			}
		}
		remove_character_modifier = pet_hunting_dog
		hidden_tooltip = { character_event = { id = WoL.5291 } }
	}
	option = { # Lunatic option - build him a great pyramid - use dogs name
		name = EVTOPTT_WoL_5290
		trigger = {
			ai = no
			OR = {
				trait = lunatic
				trait = possessed
			}
			has_character_flag = dog_name_punisher
		}
		scaled_wealth = { value = -2 max = -800 }
		capital_scope = {
			add_province_modifier = { # Powerful but extremely unusual
				name = pyramid
				duration = -1
			}
		}
		remove_character_modifier = pet_hunting_dog
		hidden_tooltip = { character_event = { id = WoL.5291 } }
	}
	option = { # Lunatic option - build him a great pyramid - use dogs name
		name = EVTOPTU_WoL_5290
		trigger = {
			ai = no
			OR = {
				trait = lunatic
				trait = possessed
			}
			has_character_flag = dog_name_sigurd
		}
		scaled_wealth = { value = -2 max = -800 }
		capital_scope = {
			add_province_modifier = { # Powerful but extremely unusual
				name = pyramid
				duration = -1
			}
		}
		remove_character_modifier = pet_hunting_dog
		hidden_tooltip = { character_event = { id = WoL.5291 } }
	}
	option = { # Lunatic option - build him a great pyramid - use dogs name
		name = EVTOPTV_WoL_5290
		trigger = {
			ai = no
			OR = {
				trait = lunatic
				trait = possessed
			}
			has_character_flag = dog_name_thor
		}
		scaled_wealth = { value = -2 max = -800 }
		capital_scope = {
			add_province_modifier = { # Powerful but extremely unusual
				name = pyramid
				duration = -1
			}
		}
		remove_character_modifier = pet_hunting_dog
		hidden_tooltip = { character_event = { id = WoL.5291 } }
	}
	option = { # Lunatic option - build him a great pyramid - use dogs name
		name = EVTOPTW_WoL_5290
		trigger = {
			ai = no
			OR = {
				trait = lunatic
				trait = possessed
			}
			has_character_flag = dog_name_michael
		}
		scaled_wealth = { value = -2 max = -800 }
		capital_scope = {
			add_province_modifier = { # Powerful but extremely unusual
				name = pyramid
				duration = -1
			}
		}
		remove_character_modifier = pet_hunting_dog
		hidden_tooltip = { character_event = { id = WoL.5291 } }
	}
	option = { # Lunatic option - build him a great pyramid - use dogs name
		name = EVTOPTX_WoL_5290
		trigger = {
			ai = no
			OR = {
				trait = lunatic
				trait = possessed
			}
			has_character_flag = dog_name_ysbaddaden
		}
		scaled_wealth = { value = -2 max = -800 }
		capital_scope = {
			add_province_modifier = { # Powerful but extremely unusual
				name = pyramid
				duration = -1
			}
		}
		remove_character_modifier = pet_hunting_dog
		hidden_tooltip = { character_event = { id = WoL.5291 } }
	}
	option = { # Lunatic option - build him a great pyramid - use dogs name
		name = EVTOPTY_WoL_5290
		trigger = {
			ai = no
			OR = {
				trait = lunatic
				trait = possessed
			}
			has_character_flag = dog_name_set
		}
		scaled_wealth = { value = -2 max = -800 }
		capital_scope = {
			add_province_modifier = { # Powerful but extremely unusual
				name = pyramid
				duration = -1
			}
		}
		remove_character_modifier = pet_hunting_dog
		hidden_tooltip = { character_event = { id = WoL.5291 } }
	}
	option = { # Lunatic option - build him a great pyramid - use dogs name
		name = EVTOPTZ_WoL_5290
		trigger = {
			ai = no
			OR = {
				trait = lunatic
				trait = possessed
			}
			has_character_flag = dog_name_deimos
		}
		scaled_wealth = { value = -2 max = -800 }
		capital_scope = {
			add_province_modifier = { # Powerful but extremely unusual
				name = pyramid
				duration = -1
			}
		}
		remove_character_modifier = pet_hunting_dog
		hidden_tooltip = { character_event = { id = WoL.5291 } }
	}
	option = { # Lunatic option - build him a great pyramid - use dogs name
		name = EVTOPTAA_WoL_5290
		trigger = {
			ai = no
			OR = {
				trait = lunatic
				trait = possessed
			}
			has_character_flag = dog_name_metus
		}
		scaled_wealth = { value = -2 max = -800 }
		capital_scope = {
			add_province_modifier = { # Powerful but extremely unusual
				name = pyramid
				duration = -1
			}
		}
		remove_character_modifier = pet_hunting_dog
		hidden_tooltip = { character_event = { id = WoL.5291 } }
	}
	after = {
		hidden_effect = {
			if = {
				limit = {
					has_dlc = "Mystics"
					OR = {
						has_character_modifier = good_relationship_omen
						has_character_modifier = bad_relationship_omen
					}
				}
				set_character_flag = dog_death_omen
				character_event = { id = MNM.1213 days = 35 random = 30 } # Scrying vision come true
			}
			send_new_dog_event_effect = yes # Will only work for certain bloodlines...
		}
	}
}

# flag and delayed event clearing
character_event = {
	id = WoL.5291
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		remove_character_modifier = pet_hunting_dog
		clear_delayed_event = { id = WoL.5290 }
		clear_delayed_event = { id = WoL.5204 }
		clear_delayed_event = { id = WoL.5221 }
		clr_character_flag = dog_name_faithful
		clr_character_flag = dog_name_hunter
		clr_character_flag = dog_name_tricky
		clr_character_flag = dog_name_lucifer
		clr_character_flag = dog_name_shaytan
		clr_character_flag = dog_name_fenrir
		clr_character_flag = dog_name_erlik
		clr_character_flag = dog_name_velnias
		clr_character_flag = dog_name_tuoni
		clr_character_flag = dog_name_xolotl
		clr_character_flag = dog_name_veles
		clr_character_flag = dog_name_guruhi
		clr_character_flag = dog_name_darkness
		clr_character_flag = dog_name_ahriman
		clr_character_flag = dog_name_satan
		clr_character_flag = dog_name_vinayaka
		clr_character_flag = dog_name_mara
		clr_character_flag = dog_name_punisher
		clr_character_flag = dog_name_sigurd
		clr_character_flag = dog_name_thor
		clr_character_flag = dog_name_michael
		clr_character_flag = dog_name_ysbaddaden
		clr_character_flag = dog_name_set
		clr_character_flag = dog_name_deimos
		clr_character_flag = dog_name_metus
	}
}

# An ambitious character with no inheritance begins to plan an adventure for a foreign title
character_event = {
	id = TOG.1210
	
	hide_window = yes # Only fires for unplayable landless characters
	
	min_age = 16
	max_age = 50
	capable_only = yes
	prisoner = no
	
	trigger = {
		has_dlc = "The Old Gods"
		
		NOT = {
			has_game_rule = {
				name = adventurers
				value = none
			}
		}
		
		is_ruler = no
		NOT = { any_spouse = { is_ruler = yes } }

		OR = {
			is_female = no
			liege = { has_law = status_of_women_4 }
			liege = { has_law = true_cognatic_succession }
			liege = { religion = cathar }
			liege = { religion = messalian }
			has_game_rule = {
				name = gender
				value = all
			}
		}
		
#		year = 867
		
		diplomacy = 7
		martial = 9
		health = 4
		
		NOT = { trait = content }
		NOT = { trait = craven }
		
		OR = { # Only these for now
			culture_group = north_germanic
			culture_group = west_germanic
			culture_group = altaic
			culture = norman
			culture = frankish
			culture = breton
			culture = catalan
			culture = draconic
			AND = {
				culture = hungarian
				NOT = { year = 1066 }
			}
			has_character_flag = demon_child_non_pagan
		}
		
		NOT = { # Somewhat clunky way of checking that the character does not stand to inherit any titles
			any_heir_title = {
				always = yes
			}
		}
		
		NOT = { # Handled by event TOG.1200
			any_claim = {
				has_holder = yes
				holder_scope = {
					independent = yes
					OR = {
						is_merchant_republic = no
						NOT = {
							capital_holding = {
								de_jure_liege_or_above = PREVPREV
							}
						}
					}
				}
				OR = {
					tier = KING
					holder_scope = { tier = PREV }
				}
				ROOT = {
					NOR = {
						obedient = PREV
						non_interference = PREV
					}
				}
			}
		}
		
		OR = {
			father_even_if_dead = {
				OR = {
					primary_title = { higher_tier_than = BARON }
					father_even_if_dead = {
						primary_title = { higher_tier_than = BARON }
					}
					mother_even_if_dead = {
						primary_title = { higher_tier_than = BARON }
					}
				}
			}
			mother_even_if_dead = {
				OR = {
					primary_title = { higher_tier_than = BARON }
					father_even_if_dead = {
						primary_title = { higher_tier_than = BARON }
					}
					mother_even_if_dead = {
						primary_title = { higher_tier_than = BARON }
					}
				}
			}
		}
		
		NOT = { has_character_modifier = planning_duchy_adventure }
	}
	
	mean_time_to_happen = {
		years = 100
		modifier = {
			factor = 4
			has_dlc = "Horse Lords"
			is_allowed_to_loot = yes
		}
		modifier = {
			factor = 0.5
			trait = ambitious
		}
		modifier = {
			factor = 0.5
			OR = {
				AND = {
					culture = norman
					NOT = { year = 1250 }
				}
				AND = {
					culture_group = north_germanic
					NOT = { year = 1066 }
				}
			}
		}
		modifier = {
			factor = 0.2
			has_character_flag = flag_denied_title
		}
		modifier = {
			factor = 0.2
			has_character_flag = demon_child_non_pagan
		}
		modifier = {
			factor = 0.75
			diplomacy = 12
		}
		modifier = {
			factor = 0.75
			martial = 12
		}
		modifier = {
			factor = 0.75
			trait = brave
		}
		modifier = {
			factor = 0.85
			trait = proud
		}
		modifier = {
			factor = 3.0
			trait = slothful
		}
		modifier = {
			factor = 3.0
			trait = humble
		}
		modifier = {
			factor = 3.0
			trait = kind
		}
		modifier = {
			factor = 3.0
			any_liege = {
				ai = no
			}
		}
		modifier = {
			factor = 3.0
			top_liege = {
				tier = emperor
			}
		}
		modifier = {
			factor = 50
			has_game_rule = {
				name = adventurers
				value = rare
			}
		}
	}
	
	immediate = {
		random_independent_ruler = {
			limit = {
				NOT = { culture = ROOT }
				is_landed = yes
				independent = yes
				NOT = { is_vassal_or_below = ROOT }
				any_realm_province = {
					OR = {
						AND = {
							port = yes
							ROOT = {
								NOT = { culture_group = altaic }
								NOT = { culture = hungarian }
							}
							NOT = {
								distance = {
									who = ROOT
									value = 800
								}
							}
						}
						any_neighbor_province = {
							owner = {
								same_realm = ROOT
							}
						}
					}
					NOT = {
						region = world_europe_north
					}
					NOT = {
						duchy = {
							title = d_bjarmia
						}
					}
				}
				ROOT = {
					NOR = {
						obedient = PREV
						non_interference = PREV
					}
				}
			}
			
			random_realm_province = {
				limit = {
					OR = {
						AND = {
							port = yes
							ROOT = {
								NOT = { culture_group = altaic }
								NOT = { culture = hungarian }
							}
							NOT = {
								distance = {
									who = ROOT
									value = 800
								}
							}
						}
						any_neighbor_province = {
							owner = {
								same_realm = ROOT
							}
						}
					}
					NOT = {
						region = world_europe_north
					}
					NOT = {
						duchy = {
							title = d_bjarmia
						}
					}
				}
				
				ROOT = {
					opinion = {
						who = PREVPREV
						years = 3
						modifier = opinion_duchy_adventure_target
					}
					add_character_modifier = {
						name = planning_duchy_adventure
						hidden = yes
						days = 730
					}
					character_event = {
						id = TOG.1212 # Fire the attack
						days = 730
					}
				}
				PREV = {
					character_event = {
						id = TOG.1211 # Warn the target
					}
				}
			}
		}
		end_inaccessibility_effect = yes #removes in hiding or in_seclusion
		
		set_character_flag = do_not_disturb
		character_event = { id = TOG.1215 days = 730 }
	}
	
	option = {
		name = OK
	}
}

# An ambitious character with no inheritance begins to plan an adventure for a foreign title
character_event = {
	id = HL.100
	hide_window = yes # Only fires for unplayable landless characters
	
	min_age = 16
	max_age = 50
	only_men = yes
	capable_only = yes
	prisoner = no
	
	trigger = {
		has_dlc = "Horse Lords"
		
		NOT = {
			has_game_rule = {
				name = adventurers
				value = none
			}
		}
		
		is_ruler = no
		
#		year = 867
		
#		diplomacy = 7
#		martial = 9
#		health = 4
		
		is_allowed_to_loot = yes
		NOT = { trait = content }
		NOT = { trait = craven }
		OR = {
			AND = {
				any_liege = {
					government = nomadic_government
				}
				culture_group = altaic
			}
			religion = norse_pagan
			religion = norse_pagan_reformed
			religion = draconic_pagan
			religion = draconic_pagan_reformed
		}
		
		NOT = { # Somewhat clunky way of checking that the character does not stand to inherit any titles
			any_heir_title = {
				always = yes
			}
		}
		
		NOT = { # Handled by event TOG.1200
			any_claim = {
				has_holder = yes
				holder_scope = {
					independent = yes
					OR = {
						is_merchant_republic = no
						NOT = {
							capital_holding = {
								de_jure_liege_or_above = PREVPREV
							}
						}
					}
				}
				OR = {
					tier = KING
					holder_scope = { tier = PREV }
				}
			}
		}
		
		OR = {
			father_even_if_dead = {
				OR = {
					primary_title = { higher_tier_than = BARON }
					father_even_if_dead = {
						primary_title = { higher_tier_than = BARON }
					}
					mother_even_if_dead = {
						primary_title = { higher_tier_than = BARON }
					}
				}
			}
			mother_even_if_dead = {
				OR = {
					primary_title = { higher_tier_than = BARON }
					father_even_if_dead = {
						primary_title = { higher_tier_than = BARON }
					}
					mother_even_if_dead = {
						primary_title = { higher_tier_than = BARON }
					}
				}
			}
		}
	}
	
	mean_time_to_happen = {
		years = 30
		modifier = {
			factor = 0.5
			trait = ambitious
		}
		modifier = {
			factor = 0.2
			has_character_flag = flag_denied_title
		}
		modifier = {
			factor = 0.2
			has_character_flag = demon_child_non_pagan
		}
		modifier = {
			factor = 0.75
			diplomacy = 12
		}
		modifier = {
			factor = 0.75
			martial = 12
		}
		modifier = {
			factor = 0.75
			combat_rating = 30
		}
		modifier = {
			factor = 0.75
			trait = brave
		}
		modifier = {
			factor = 0.85
			trait = proud
		}
		modifier = {
			factor = 3.0
			trait = slothful
		}
		modifier = {
			factor = 3.0
			trait = humble
		}
		modifier = {
			factor = 3.0
			trait = kind
		}
		modifier = {
			factor = 3.0
			any_liege = {
				ai = no
			}
		}
		modifier = {
			factor = 50
			has_game_rule = {
				name = adventurers
				value = rare
			}
		}
#		modifier = {
#			factor = 3.0
#			top_liege = {
#				tier = emperor
#			}
#		}
	}
	
	immediate = {
		end_inaccessibility_effect = yes #removes in hiding or in_seclusion
		add_trait = adventurer
		liege = {
			primary_title = {
				holder_scope = {
					save_event_target_as = previous_liege
				}
			}
			character_event = {
				id = HL.101
				days = 1
			}
			capital_scope = {
				save_event_target_as = target_province
				ROOT = {
					set_defacto_liege = ROOT
					create_title = {
						tier = DUKE
						landless = yes
						adventurer = yes
						culture = ROOT
						name = "CLAIMANT_ADVENTURE"
						holder = ROOT
						base_title = THIS
					}
					set_character_flag = raiding_adventurer
					if = {
						limit = {
							event_target:previous_liege = {
								government = nomadic_government
							}
						}
						character_event = { id = HL.105 } #create troops steppe
					}
					if = {
						limit = {
							event_target:previous_liege = {
								NOT = { government = nomadic_government }
							}
						}
						character_event = { id = HL.102 } #create troops vikings
					}
					create_random_soldier = {
						random_traits = yes
						dynasty = none
						religion = ROOT
						culture = ROOT
						female = no
						age = 30
					}
					create_random_soldier = {
						random_traits = yes
						dynasty = none
						religion = ROOT
						culture = ROOT
						female = no
						age = 25
					}
					if  = {
						limit = {
							is_seafarer = yes
						}
						
						# Create a fleet, just to be sure
						spawn_fleet = {
							province = closest # closest sea zone
							owner = ROOT
							disband_on_peace = yes
							troops =
							{
								galleys = { 110 110 }
							}
						}
					}
				}
			}
		}
		character_event = { id = HL.110 days = 1095 } # Ping to see if he's ready to settle, repeating every 3 years.
	}
}

character_event = {
	id = HL.103
	is_triggered_only = yes
	hide_window = yes
	
	immediate = {
		random_list = {
			30 = { #250
				modifier = {
					factor = 1.3
					NOT = { martial = 2 }
				}
				modifier = {
					factor = 1.3
					NOT = { martial = 4 }
				}
				modifier = {
					factor = 1.3
					NOT = { martial = 6 }
				}
				modifier = {
					factor = 0.7
					martial = 15
				}
				modifier = {
					factor = 0.7
					martial = 18
				}
				modifier = {
					factor = 0.7
					martial = 21
				}
				modifier = {
					factor = 0.7
					martial = 24
				}
				spawn_unit = {
					province = event_target:target_province
					home = event_target:target_province
					owner = ROOT
					#leader = none
					attrition = 0
#					disband_on_peace = yes
					reinforces = yes
					is_looter = yes
					can_toggle_looting = no
					cannot_inherit = yes
					merge = yes
					troops = {
						archers = { 70 70 }
						light_infantry = { 170 170 }
						heavy_infantry = { 10 10 }
					}
				}
			}
			30 = { #380
				modifier = {
					factor = 1.3
					NOT = { martial = 4 }
				}
				modifier = {
					factor = 1.3
					NOT = { martial = 6 }
				}
				modifier = {
					factor = 1.3
					NOT = { martial = 8 }
				}
				modifier = {
					factor = 0.7
					martial = 17
				}
				modifier = {
					factor = 0.7
					martial = 20
				}
				modifier = {
					factor = 0.7
					martial = 23
				}
				modifier = {
					factor = 0.7
					martial = 26
				}
				spawn_unit = {
					province = event_target:target_province
					home = event_target:target_province
					owner = ROOT
					#leader = none
					attrition = 0
#					disband_on_peace = yes
					reinforces = yes
					is_looter = yes
					can_toggle_looting = no
					cannot_inherit = yes
					merge = yes
					troops = {
						archers = { 90 90 }
						light_infantry = { 215 215 }
						heavy_infantry = { 15 15 }
					}
				}
				
			}
			30 = { #420
				modifier = {
					factor = 1.3
					NOT = { martial = 9 }
				}
				modifier = {
					factor = 1.3
					NOT = { martial = 12 }
				}
				modifier = {
					factor = 1.3
					NOT = { martial = 15 }
				}
				modifier = {
					factor = 0.7
					martial = 20
				}
				modifier = {
					factor = 0.7
					martial = 24
				}
				spawn_unit = {
					province = event_target:target_province
					home = event_target:target_province
					owner = ROOT
					#leader = none
					attrition = 0
#					disband_on_peace = yes
					reinforces = yes
					is_looter = yes
					can_toggle_looting = no
					cannot_inherit = yes
					merge = yes
					troops = {
						archers = { 100 100 }
						light_infantry = { 225 225 }
						heavy_infantry = { 15 15 }
					}
				}
			}
			30 = { #490
				modifier = {
					factor = 1.3
					martial = 24
				}
				modifier = {
					factor = 1.3
					martial = 28
				}
				modifier = {
					factor = 0.5
					NOT = { martial = 10 }
				}
				modifier = {
					factor = 0.5
					NOT = { martial = 15 }
				}
				modifier = {
					factor = 0.7
					NOT = { martial = 20 }
				}
				spawn_unit = {
					province = event_target:target_province
					home = event_target:target_province
					owner = ROOT
					#leader = none
					attrition = 0
#					disband_on_peace = yes
					reinforces = yes
					is_looter = yes
					can_toggle_looting = no
					cannot_inherit = yes
					merge = yes
					troops = {
						archers = { 140 140 }
						light_infantry = { 330 330 }
						heavy_infantry = { 20 20 }
					}
				}
			}
			30 = { #570
				modifier = {
					factor = 0.7
					NOT = { martial = 14 }
				}
				modifier = {
					factor = 0.7
					NOT = { martial = 20 }
				}
				modifier = {
					factor = 0.7
					NOT = { martial = 26 }
				}
				spawn_unit = {
					province = event_target:target_province
					home = event_target:target_province
					owner = ROOT
					#leader = none
					attrition = 0
#					disband_on_peace = yes
					reinforces = yes
					is_looter = yes
					can_toggle_looting = no
					cannot_inherit = yes
					merge = yes
					troops = {
						archers = { 170 170 }
						light_infantry = { 360 360 }
						heavy_infantry = { 40 40 }
					}
				}
			}
			50 = { # 200 Dragons
				modifier = {
					factor = 0
					NOR = {
						religion = draconic_pagan
						religion = draconic_pagan_reformed
					}
				}
				modifier = {
					factor = 1.5
					culture = draconic
				}
				modifier = {
					factor = 0.5
					NOT = { trait = dragon }
				}
				modifier = {
					factor = 0.7
					NOT = { martial = 10 }
				}
				modifier = {
					factor = 0.7
					NOT = { martial = 14 }
				}
				spawn_unit = {
					province = event_target:target_province
					home = event_target:target_province
					owner = ROOT
					#leader = none
					attrition = 0
#					disband_on_peace = yes
					reinforces = yes
					is_looter = yes
					can_toggle_looting = no
					cannot_inherit = yes
					merge = yes
					troops = {
						dragon_cavalry = { 200 200 }
					}
				}
			}
		}
	}
}

character_event = {
	id = HL.106
	is_triggered_only = yes
	hide_window = yes
	
	immediate = {
		random_list = {
			30 = { #180
				modifier = {
					factor = 1.3
					NOT = { martial = 2 }
				}
				modifier = {
					factor = 1.3
					NOT = { martial = 4 }
				}
				modifier = {
					factor = 1.3
					NOT = { martial = 6 }
				}
				modifier = {
					factor = 0.7
					martial = 15
				}
				modifier = {
					factor = 0.7
					martial = 18
				}
				modifier = {
					factor = 0.7
					martial = 21
				}
				modifier = {
					factor = 0.7
					martial = 24
				}
				spawn_unit = {
					province = event_target:target_province
					home = event_target:target_province
					owner = ROOT
					attrition = 0
#					disband_on_peace = yes
					reinforces = yes
					is_looter = yes
					can_toggle_looting = no
					cannot_inherit = yes
					merge = yes
					troops = {
						light_cavalry = { 100 100 }
						horse_archers = { 80 80 }
					}
				}
			}
			30 = { #280
				modifier = {
					factor = 1.3
					NOT = { martial = 4 }
				}
				modifier = {
					factor = 1.3
					NOT = { martial = 6 }
				}
				modifier = {
					factor = 1.3
					NOT = { martial = 8 }
				}
				modifier = {
					factor = 0.7
					martial = 17
				}
				modifier = {
					factor = 0.7
					martial = 20
				}
				modifier = {
					factor = 0.7
					martial = 23
				}
				modifier = {
					factor = 0.7
					martial = 26
				}
				spawn_unit = {
					province = event_target:target_province
					home = event_target:target_province
					owner = ROOT
					attrition = 0
#					disband_on_peace = yes
					reinforces = yes
					is_looter = yes
					can_toggle_looting = no
					cannot_inherit = yes
					merge = yes
					troops = {
						light_cavalry = { 150 150 }
						horse_archers = { 130 130 }
					}
				}
				
			}
			30 = { #315
				modifier = {
					factor = 1.3
					NOT = { martial = 9 }
				}
				modifier = {
					factor = 1.3
					NOT = { martial = 12 }
				}
				modifier = {
					factor = 1.3
					NOT = { martial = 15 }
				}
				modifier = {
					factor = 0.7
					martial = 20
				}
				modifier = {
					factor = 0.7
					martial = 24
				}
				spawn_unit = {
					province = event_target:target_province
					home = event_target:target_province
					owner = ROOT
					attrition = 0
#					disband_on_peace = yes
					reinforces = yes
					is_looter = yes
					can_toggle_looting = no
					cannot_inherit = yes
					merge = yes
					troops = {
						light_cavalry = { 165 165 }
						horse_archers = { 150 150 }
					}
				}
			}
			30 = { #365
				modifier = {
					factor = 1.3
					martial = 24
				}
				modifier = {
					factor = 1.3
					martial = 28
				}
				modifier = {
					factor = 0.5
					NOT = { martial = 10 }
				}
				modifier = {
					factor = 0.5
					NOT = { martial = 15 }
				}
				modifier = {
					factor = 0.7
					NOT = { martial = 20 }
				}
				spawn_unit = {
					province = event_target:target_province
					home = event_target:target_province
					owner = ROOT
					attrition = 0
#					disband_on_peace = yes
					reinforces = yes
					is_looter = yes
					can_toggle_looting = no
					cannot_inherit = yes
					merge = yes
					troops = {
						light_cavalry = { 190 190 }
						horse_archers = { 175 175 }
					}
				}
			}
			30 = { #420
				modifier = {
					factor = 0.7
					NOT = { martial = 14 }
				}
				modifier = {
					factor = 0.7
					NOT = { martial = 20 }
				}
				modifier = {
					factor = 0.7
					NOT = { martial = 26 }
				}
				spawn_unit = {
					province = event_target:target_province
					home = event_target:target_province
					owner = ROOT
					attrition = 0
#					disband_on_peace = yes
					reinforces = yes
					is_looter = yes
					can_toggle_looting = no
					cannot_inherit = yes
					merge = yes
					troops = {
						light_cavalry = { 220 220 }
						horse_archers = { 200 200 }
					}
				}
			}
			50 = { # 200 Dragons
				modifier = {
					factor = 0
					NOR = {
						religion = draconic_pagan
						religion = draconic_pagan_reformed
					}
				}
				modifier = {
					factor = 1.5
					culture = draconic
				}
				modifier = {
					factor = 0.5
					NOT = { trait = dragon }
				}
				modifier = {
					factor = 0.7
					NOT = { martial = 10 }
				}
				modifier = {
					factor = 0.7
					NOT = { martial = 14 }
				}
				spawn_unit = {
					province = event_target:target_province
					home = event_target:target_province
					owner = ROOT
					#leader = none
					attrition = 0
#					disband_on_peace = yes
					reinforces = yes
					is_looter = yes
					can_toggle_looting = no
					cannot_inherit = yes
					merge = yes
					troops = {
						dragon_cavalry = { 200 200 }
					}
				}
			}
			30 = { # 500 Dragons
				modifier = {
					factor = 0
					NOR = {
						religion = draconic_pagan
						religion = draconic_pagan_reformed
					}
				}
				modifier = {
					factor = 1.5
					culture = draconic
				}
				modifier = {
					factor = 0.5
					NOT = { trait = dragon }
				}
				modifier = {
					factor = 0.7
					NOT = { martial = 14 }
				}
				modifier = {
					factor = 0.7
					NOT = { martial = 18 }
				}
				modifier = {
					factor = 0.7
					NOT = { martial = 24 }
				}
				modifier = {
					factor = 0.7
					NOT = { martial = 30 }
				}
				spawn_unit = {
					province = event_target:target_province
					home = event_target:target_province
					owner = ROOT
					#leader = none
					attrition = 0
#					disband_on_peace = yes
					reinforces = yes
					is_looter = yes
					can_toggle_looting = no
					cannot_inherit = yes
					merge = yes
					troops = {
						dragon_cavalry = { 500 500 }
					}
				}
			}
		}
	}
}

# Pagan reformation
narrative_event = {
	id = 670
	title = "EVTNAME670"
	desc = "EVTDESC670"
	desc = {
		trigger = {
			has_dlc = "Holy Fury" 
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		text = EVTDESC670_HF
		sound = pagan_reformation
	}
	desc = {
		trigger = {
			has_dlc = "Holy Fury" 
			has_alternate_start_parameter = { key = religion_names value = random }
		}
		text = EVTDESC670_HF_B
		sound = pagan_reformation
	}
	desc = {
		trigger = {
			NOT = { has_dlc = "Holy Fury" }
		}
		text = EVTDESC670
		sound = pagan_reformation
	}
	picture = { 
		trigger = { 
			ROOT = {
				OR = { 
					religion = hellenic_pagan
					religion = hellenic_pagan_reformed
				}
			}
		} 
		picture = GFX_evt_hellenic_temple
	}
	picture = { 
		trigger = { 
			ROOT = {
				OR = { 
					religion = west_african_pagan
					religion = west_african_pagan_reformed
				}
			}
		}
		picture = GFX_evt_west_african_ruler
	}
	picture = { 
		trigger = { 
			ROOT = { 
				NOR = { 
					religion = hellenic_pagan
					religion = hellenic_pagan_reformed
					religion = west_african_pagan
					religion = west_african_pagan_reformed
				}
			}
		} 
		picture = GFX_evt_pagan_reformation
	}
	border = "GFX_event_narrative_frame_religion"	
	
	is_triggered_only = yes
	major = yes
	show_ROOT = yes
	hide_new = yes
	
	only_rulers = yes
	
	immediate = {
		hidden_tooltip = {
			if = { #If hellenic reformer owns Rome, Catholic faith loses MA.
				limit = { 
					ROOT = { 
						religion = hellenic_pagan_reformed 
						completely_controls = c_roma
					} 
				}
				random_playable_ruler = { 
					limit = { religion = catholic }		
					religion_authority = {
						modifier = hellenic_resurgence
						years = 100
					}
				}
			}
			if = { #If hellenic reformer owns Constantinople, Orthodox faith loses MA.
				limit = { 
					ROOT = { 
						religion = hellenic_pagan_reformed 
						completely_controls = c_byzantion
					} 
				}
				random_playable_ruler = { 
					limit = { religion = orthodox }	
					religion_authority = {
						modifier = hellenic_resurgence
						years = 100
					}
				}
			}
			if = {
				limit = { #If religion being reformed is western paganism, other western pagan are emboldened, facilitating a chain reaction of reformation.
					ROOT = { 
						NOR = { 
							religion = hellenic_pagan_reformed #Not that kind of paganism.
							religion = bon_reformed
							religion = zun_pagan_reformed
							religion = aztec_reformed
							religion = draconic_pagan_reformed
						} 
					}
				}
				if = { 
					limit = { ROOT = { NOT = { religion = norse_pagan_reformed } } }
					random_playable_ruler = { 
						limit = { religion = norse_pagan }	
						religion_authority = {
							modifier = pagan_revival
							years = 20
						}
					}
				}
				if = { 
					limit = { ROOT = { NOT = { religion = tengri_pagan_reformed } } }
					random_playable_ruler = { 
						limit = { religion = tengri_pagan }	
						religion_authority = {
							modifier = pagan_revival
							years = 20
						}
					}
				}
				if = { 
					limit = { ROOT = { NOT = { religion = slavic_pagan_reformed } } }
					random_playable_ruler = { 
						limit = { religion = slavic_pagan }	
						religion_authority = {
							modifier = pagan_revival
							years = 20
						}
					}
				}
				if = { 
					limit = { ROOT = { NOT = { religion = baltic_pagan_reformed } } }
					random_playable_ruler = { 
						limit = { religion = baltic_pagan }	
						religion_authority = {
							modifier = pagan_revival
							years = 20
						}
					}
				}
				if = { 
					limit = { ROOT = { NOT = { religion = finnish_pagan_reformed } } }
					random_playable_ruler = { 
						limit = { religion = finnish_pagan }	
						religion_authority = {
							modifier = pagan_revival
							years = 20
						}
					}
				}
				if = { 
					limit = { ROOT = { NOT = { religion = west_african_pagan_reformed } } }
					random_playable_ruler = { 
						limit = { religion = west_african_pagan }	
						religion_authority = {
							modifier = pagan_revival
							years = 20
						}
					}
				}
				if = { 
					limit = { ROOT = { NOT = { religion = jotnar_reformed } } }
					random_playable_ruler = { 
						limit = { religion = jotnar }	
						religion_authority = {
							modifier = pagan_revival
							years = 20
						}
					}
				}
				if = { 
					limit = { ROOT = { NOT = { religion = druidic_reformed } } }
					random_playable_ruler = { 
						limit = { religion = druidic }	
						religion_authority = {
							modifier = pagan_revival
							years = 20
						}
					}
				}
				if = { 
					limit = { ROOT = { NOT = { religion = kemetic_pagan_reformed } } }
					random_playable_ruler = { 
						limit = { religion = kemetic_pagan }	
						religion_authority = {
							modifier = pagan_revival
							years = 20
						}
					}
				}
			}
			if = {
				limit = { #Modifier not applied correctly by pagan reformation screen.
					ROOT = { has_religion_feature = religion_cosmopolitan }
				}
				ROOT = { 	
					religion_authority = {
						modifier = cosmopolitan_religion
						years = 1000
					}
					any_playable_ruler = { 
						limit = { NOT = { distance_from_realm = { who = ROOT value = 200 } } }
						add_intermarry = ROOT
						ROOT = { add_intermarry = PREV }
					}
					any_neighbor_independent_ruler = { 
						add_intermarry = ROOT
						ROOT = { add_intermarry = PREV }
					}
				} 
			}
			if = {
				limit = { #Modifier not applied correctly by pagan reformation screen.
					ROOT = { has_religion_feature = religion_dogmatic }
				}
				ROOT = { 	
					religion_authority = {
						modifier = dogmatic_religion
						years = 1000
					}
					remove_intermarry = catholic
					remove_intermarry = orthodox
					remove_intermarry = miaphysite
					remove_intermarry = nestorian
					remove_intermarry = sunni
					remove_intermarry = shiite
					remove_intermarry = ibadi
					remove_intermarry = jewish
					remove_intermarry = samaritan
					remove_intermarry = karaite
					remove_intermarry = hindu
					remove_intermarry = buddhist
					remove_intermarry = jain
					remove_intermarry = taoist
					remove_intermarry = zoroastrian
					remove_intermarry = mazdaki
					remove_intermarry = manichean
					remove_intermarry = khurmazta
					remove_intermarry = pagan
					remove_intermarry = bon
					remove_intermarry = bon_reformed
					remove_intermarry = aztec
					remove_intermarry = aztec_reformed
					remove_intermarry = norse_pagan
					remove_intermarry = norse_pagan_reformed
					remove_intermarry = zun_pagan
					remove_intermarry = zun_pagan_reformed
					remove_intermarry = slavic_pagan
					remove_intermarry = slavic_pagan_reformed
					remove_intermarry = baltic_pagan
					remove_intermarry = baltic_pagan_reformed
					remove_intermarry = west_african_pagan
					remove_intermarry = west_african_pagan_reformed
					remove_intermarry = tengri_pagan
					remove_intermarry = tengri_pagan_reformed
					remove_intermarry = finnish_pagan
					remove_intermarry = finnish_pagan_reformed
					remove_intermarry = hellenic_pagan
					remove_intermarry = hellenic_pagan_reformed
					remove_intermarry = jotnar
					remove_intermarry = jotnar_reformed
					remove_intermarry = druidic
					remove_intermarry = druidic_reformed
					remove_intermarry = kemetic_pagan
					remove_intermarry = kemetic_pagan_reformed
					remove_intermarry = atenist
					remove_intermarry = draconic_pagan
					remove_intermarry = draconic_pagan_reformed
					remove_intermarry = satanist
					remove_intermarry = pagan_group
					remove_intermarry = zoroastrian_group
					remove_intermarry = christian
					remove_intermarry = muslim
					remove_intermarry = indian_group
					remove_intermarry = jewish_group
					remove_intermarry = other_group
					remove_intermarry = undead_religion_group

				} 
			}
			if = {
				limit = { #Switch to matriarchy.
					ROOT = { 
						has_religion_feature = religion_matriarchal 
						NOR = {  
							is_merchant_republic = yes
							is_republic = yes
						}
					}
				}
				ROOT = { 
					any_demesne_title = { 
						add_law = {
							law = enatic_succession
							cooldown = no
							opinion_effect = no
						}
						add_law = {
							law = status_of_women_4
							cooldown = no
							opinion_effect = no
						}
						if = { 
							limit = { 
								NOT = { has_law = succ_byzantine_elective } 
							}
							add_law = {
								law = succ_turkish_succession
								cooldown = no
								opinion_effect = no
							}
						}
					}
					recalc_succession = yes
				} 
			}
			if = {
				limit = { #Switch to equality.
					ROOT = { 
						OR = { 
							has_religion_feature = religion_equal 
							has_religion_feature = religion_feature_bon
						}
						NOR = {  
							is_merchant_republic = yes
							is_republic = yes
						}
					}
				}
				ROOT = { 
					any_demesne_title = { 
						add_law = {
							law = true_cognatic_succession
							cooldown = no
							opinion_effect = no
						}
						add_law = {
							law = status_of_women_4
							cooldown = no
							opinion_effect = no
						}
					}
				} 
			}
			if = {
				limit = { #Switch to patriarchy.
					ROOT = { has_religion_feature = religion_patriarchal }
				}
				ROOT = { 
					any_demesne_title = { 
						add_law = {
							law = agnatic_succession
							cooldown = no
							opinion_effect = no
						}
						add_law = {
							law = status_of_women_0
							cooldown = no
							opinion_effect = no
						}
						if = { 
							limit = { 
								NOT = { has_law = succ_byzantine_elective } 
							}
							add_law = {
								law = succ_turkish_succession
								cooldown = no
								opinion_effect = no
							}
						}
					}
					recalc_succession = yes
				} 
			}
			if = {
				limit = { #Switch to astrology.
					ROOT = { has_religion_feature = religion_astrology }
				}
				ROOT = { 
					add_western_zodiac_trait_effect = yes 
					character_event = { id = HF.23032 days = 5 } 
				} 
			}
			if = {
				limit = { #Apply default special features if player doesn't have dlc.
					NOT = { has_dlc = "Holy Fury" } 
					ROOT = { religion = norse_pagan_reformed } 
				}
				ROOT = { 
					set_allow_rivermovement = yes 
					enable_prepared_invasion = yes
					set_seafaring = yes
					make_reformer_head_of_religion = yes
					set_max_consorts = 3
				} 
			}
			if = {
				limit = { #Apply default special features if player doesn't have dlc.
					NOT = { has_dlc = "Holy Fury" } 
					ROOT = { 
						OR = { 
							religion = baltic_pagan_reformed 
							religion = slavic_pagan_reformed 
						}  
					} 
				}
				ROOT = { 
					set_unit_modifier = {		
						garrison_size = 0.2
						levy_size = 0.2
						
						key = "DEF_RELIGION"
					}
					set_unit_home_modifier = {
						land_morale = 0.8
						light_infantry_defensive = 0.8
						heavy_infantry_defensive = 0.8
						pikemen_defensive = 0.8
						light_cavalry_defensive = 0.8
						knights_defensive = 0.8
						archers_defensive = 0.8
						horse_archers_defensive = 0.8
						camel_cavalry_defensive = 0.8
						war_elephants_defensive = 0.8
						
						garrison_size = 0.4
						
						key = "DEF_RELIGION_HOME_TERRITORY"
					}
					set_max_consorts = 3
				} 
			}
			if = {
				limit = { #Apply default special features if player doesn't have dlc.
					NOT = { has_dlc = "Holy Fury" } 
					ROOT = { 
						religion = finnish_pagan_reformed 
					} 
				}
				ROOT = { 
					set_unit_modifier = {		
						garrison_size = 0.3
						levy_size = 0.1
						
						key = "DEF_RELIGION"
					}
					set_unit_home_modifier = {
						land_morale = 0.8
						light_infantry_defensive = 0.8
						heavy_infantry_defensive = 0.8
						pikemen_defensive = 0.8
						light_cavalry_defensive = 0.8
						knights_defensive = 0.8
						archers_defensive = 0.8
						horse_archers_defensive = 0.8
						camel_cavalry_defensive = 0.8
						war_elephants_defensive = 0.8
						
						garrison_size = 0.4
						
						key = "DEF_RELIGION_HOME_TERRITORY"
					}
					set_max_consorts = 3
				} 
			}
			if = {
				limit = { #Apply default special features if player doesn't have dlc.
					NOT = { has_dlc = "Holy Fury" } 
					ROOT = {
						OR = { 
							religion = bon_reformed
							religion = west_african_pagan_reformed 
						} 
					} 
				}
				ROOT = { 
					set_unit_modifier = {		
						garrison_size = 0.4
					
						key = "DEF_RELIGION"
					}
					set_unit_home_modifier = {
						land_morale = 0.8
						light_infantry_defensive = 0.8
						heavy_infantry_defensive = 0.8
						pikemen_defensive = 0.8
						light_cavalry_defensive = 0.8
						knights_defensive = 0.8
						archers_defensive = 0.8
						horse_archers_defensive = 0.8
						camel_cavalry_defensive = 0.8
						war_elephants_defensive = 0.8
						
						garrison_size = 0.4
						
						key = "DEF_RELIGION_HOME_TERRITORY"
					}
					set_max_consorts = 3
				} 
			}
			if = {
				limit = { #Apply default special features if player doesn't have dlc.
					NOT = { has_dlc = "Holy Fury" } 
					ROOT = { 
						religion = zun_pagan_reformed 
					} 
				}
				ROOT = { 
					set_unit_modifier = {
						levy_size = 0.3
						
						heavy_infantry_offensive = 0.2
						heavy_infantry_defensive = 0.2
						
						key = "OFF_RELIGION"
					}
					set_max_consorts = 3
				} 
			}
			if = {
				limit = { #Apply default special features if player doesn't have dlc.
					NOT = { has_dlc = "Holy Fury" } 
					ROOT = { 
						religion = draconic_pagan_reformed 
					} 
				}
				ROOT = { 
					set_allow_rivermovement = yes 
					enable_prepared_invasion = yes
					set_max_consorts = 3
				} 
			}
			if = {
				limit = { #Apply default special features if player doesn't have dlc.
					NOT = { has_dlc = "Holy Fury" } 
					ROOT = { 
						religion = druidic_reformed 
					} 
				}
				ROOT = { 
					set_unit_modifier = {	
						levy_size = 0.15
						
						retinuesize_perc = 0.3
						garrison_size = 0.2
						
						key = "HERO_RELIGION"
					}
					set_unit_home_modifier = {
						land_morale = 0.4
						light_infantry_defensive = 0.4
						heavy_infantry_defensive = 0.4
						pikemen_defensive = 0.4
						light_cavalry_defensive = 0.4
						knights_defensive = 0.4
						archers_defensive = 0.4
						horse_archers_defensive = 0.4
						
						garrison_size = 0.2
						
						key = "HERO_RELIGION_HOME_TERRITORY"
					}
					set_max_consorts = 3
				} 
			}
			if = {
				limit = { #Apply default special features if player doesn't have dlc.
					NOT = { has_dlc = "Holy Fury" } 
					ROOT = { religion = kemetic_pagan_reformed } 
				}
				ROOT = { 
					set_allow_rivermovement = yes
					make_reformer_head_of_religion = yes
				} 
			}
			if = {
				limit = { #Apply default special features if player doesn't have dlc.
					NOT = { has_dlc = "Holy Fury" } 
					ROOT = { religion = jotnar_reformed } 
				}
				ROOT = { 
					set_allow_rivermovement = yes 
					enable_prepared_invasion = yes
					set_seafaring = yes
					set_max_consorts = 3
				} 
			}
			if = {
				limit = { ai = no }
				set_character_flag = achievement_new_ways
			}
			if = {
				limit = {
					ai = no
					religion = hellenic_pagan_reformed
				}
				set_character_flag = achievement_by_jupiter
			}
			# Merge effects of features that modify unit stats
			update_religion_feature_effects = yes
			any_courtier = {
				limit = {
					is_heresy_of = ROOT
					employer = { character = ROOT }
				}
				religion = ROOT
			}
			any_dynasty_member = {
				limit = {
					is_heresy_of = ROOT
					is_playable = no
				}
				religion = ROOT
			}
			any_vassal = {
				limit = {
					is_playable = no
					is_heresy_of = ROOT
				}
				religion = ROOT
			}
			capital_scope = {
				if = {
					limit = { is_heresy_of = ROOT }
					religion = ROOT
				}
			}
			if = {
				limit = { 
					OR = {
						NOT = { has_dlc = "Holy Fury" } 
						has_religion_feature = religion_temporal_head 
					} 
					religion = norse_pagan_reformed 

				}
				add_artifact = crown_fylkir
			}
			if = {
				limit = { 
					has_religion_feature = religion_temporal_head 
					religion = tengri_pagan_reformed 

				}
				add_artifact = crown_tengri_fylkir
			}
			if = {
				limit = { 
					has_religion_feature = religion_temporal_head 
					religion = finnish_pagan_reformed 

				}
				add_artifact = crown_finnish_fylkir
			}
			if = {
				limit = { 
					has_religion_feature = religion_temporal_head 
					religion = west_african_pagan_reformed 

				}
				add_artifact = crown_west_african_fylkir
			}
			if = {
				limit = { 
					has_religion_feature = religion_temporal_head 
					religion = slavic_pagan_reformed 

				}
				add_artifact = crown_slavic_fylkir
			}
			if = {
				limit = { 
					has_religion_feature = religion_temporal_head 
					religion = baltic_pagan_reformed 

				}
				add_artifact = crown_romuva_fylkir
			}
			if = {
				limit = { 
					has_religion_feature = religion_temporal_head 
					religion = zun_pagan_reformed 

				}
				add_artifact = crown_zun_fylkir
			}
			if = {
				limit = { 
					has_religion_feature = religion_temporal_head 
					religion = aztec_reformed 

				}
				add_artifact = crown_aztec_fylkir
			}
			if = {
				limit = { 
					has_religion_feature = religion_temporal_head 
					religion = bon_reformed 

				}
				add_artifact = scepter_bon_fylkir
			}
			if = {
				limit = { 
					has_religion_feature = religion_temporal_head 
					religion = hellenic_pagan_reformed 

				}
				add_artifact = scepter_hellenic_fylkir
			}
			if = {
				limit = { 
					has_religion_feature = religion_temporal_head 
					religion = draconic_pagan_reformed 

				}
				add_artifact = crown_draconic_fylkir
			}
			if = {
				limit = { 
					has_religion_feature = religion_temporal_head 
					religion = druidic_reformed 

				}
				add_artifact = crown_celtic_fylkir
			}
			if = {
				limit = { 
					has_religion_feature = religion_temporal_head 
					religion = druidic_reformed 

				}
				add_artifact = crown_kemetic_fylkir
			}
			if = {
				limit = { 
					OR = {
						NOT = { has_dlc = "Holy Fury" } 
						has_religion_feature = religion_temporal_head 
					} 
					religion = kemetic_pagan_reformed 

				}
				add_artifact = crown_kemetic_fylkir
			}
			#hidden_effect = { reformation_god_names_changes_effect = yes }
			#Opinion boost to new religious head (if any) and Reformer.
			if = {
				limit = { 
					has_dlc = "Holy Fury" 
					OR = {
						has_religion_feature = religion_theocratic_head
						has_religion_feature = religion_autocephaly 
					} 

				}
				religion_head = { opinion = { who = ROOT modifier = opinion_my_reformer years = 50 } }
			}
			if = {
				limit = { religion = norse_pagan_reformed }
				d_jomsvikings = {
					religion = norse_pagan_reformed # This Holy Order now changes religion
				}
				set_global_flag = norse_reformation
			}
			if = {
				limit = { religion = tengri_pagan_reformed }
				set_global_flag = tengri_reformation
			}
			if = {
				limit = { religion = baltic_pagan_reformed }
				set_global_flag = baltic_reformation
			}
			if = {
				limit = { religion = finnish_pagan_reformed }
				set_global_flag = finnish_reformation
			}
			if = {
				limit = { religion = aztec_reformed }
				set_global_flag = aztec_reformation
			}
			if = {
				limit = { religion = slavic_pagan_reformed }
				set_global_flag = slavic_reformation
			}
			if = {
				limit = { religion = west_african_pagan_reformed }
				set_global_flag = west_african_reformation
			}
			if = {
				limit = { religion = zun_pagan_reformed }
				set_global_flag = zun_reformation
			}
			if = {
				limit = { religion = bon_reformed }
				set_global_flag = bon_reformation
			}
			if = {
				limit = { religion = hellenic_pagan_reformed }
				set_global_flag = hellenic_reformation
			}
			if = {
				limit = { religion = draconic_pagan_reformed }
				set_global_flag = draconic_reformation
			}
			if = {
				limit = { religion = druidic_reformed }
				set_global_flag = druidic_reformation
				d_galatian_company = {
					religion = druidic_reformed
				}
				d_helvetic_company = {
					religion = druidic_reformed
				}
				d_brennus_ambaxtoi = {
					religion = druidic_reformed
				}
			}
			if = {
				limit = { religion = jotnar_reformed }
				set_global_flag = jotnar_reformation
			}
		}
	}

	option = {
		name = "EVTOPTA670" # The Reformer
		trigger = { religion = ROOT }
		if = {
			limit = { ai = no }
			chronicle = {
				entry = CHRONICLE_PLAYER_REFORMED_RELIGION
				portrait = [Root.GetID]
			}
		}
		hidden_tooltip = {
			if = {
				limit = { 
					ROOT = { has_religion_feature = religion_matriarchal }
				}
				ROOT = { 
					any_demesne_title = { 
						add_law = {
							law = enatic_succession
							cooldown = no
							opinion_effect = no
						}
						add_law = {
							law = status_of_women_4
							cooldown = no
							opinion_effect = no
						}
					} 
					recalc_succession = yes
				} 
			}
			if = {
				limit = { 
					ROOT = { has_religion_feature = religion_patriarchal }
				}
				ROOT = { 
					any_demesne_title = { 
						add_law = {
							law = agnatic_succession
							cooldown = no
							opinion_effect = no
						}
						add_law = {
							law = status_of_women_0
							cooldown = no
							opinion_effect = no
						}
					} 
					recalc_succession = yes
				} 
			}
			if = {
				limit = { 
					ROOT = {
						OR = { 
							has_religion_feature = religion_equal 
							has_religion_feature = religion_feature_bon
						}
					}
				}
				ROOT = { 
					any_demesne_title = { 
						add_law = {
							law = true_cognatic_succession
							cooldown = no
							opinion_effect = no
						}
						add_law = {
							law = status_of_women_4
							cooldown = no
							opinion_effect = no
						}
					} 
					recalc_succession = yes
				} 
			}
			ROOT = {
				if = {
					limit = { 
						has_religion_feature = religion_matriarchal 
					}
					any_close_relative = { 
					limit = { is_female = no }
						opinion = { 
							who = ROOT 
							modifier = bad_succ_law_change
							years = 100
						}
					}
					any_close_relative = { 
						limit = { is_female = yes }
						opinion = { 
							who = ROOT 
							modifier = good_succ_law_change
							years = 100
						}
					}
				}
				if = {
					limit = { 
						has_religion_feature = religion_patriarchal 
					}
					any_close_relative = { 
						limit = { is_female = yes }
						opinion = { 
							who = ROOT 
							modifier = bad_succ_law_change
							years = 100
						}
					}
					any_close_relative = { 
						limit = { is_female = no }
						opinion = { 
							who = ROOT 
							modifier = good_succ_law_change
							years = 100
						}
					}
				}
			}
		}
	}
	option = {
		name = "EVTOPTB670" # Rulers of the old Faith - Accept
		trigger = {
			is_heresy_of = ROOT # The old religion has become a heresy of the Reformed one
		}
		if = {
			limit = { #Offer chance to switch the vassals' succession laws.
				ROOT = { has_religion_feature = religion_no_leader }
				ai = yes
			}		
			hidden_tooltip = {  
				character_event = { id = HF.23016 days = 20 random = 20 }
			}
		}
		if = {
			limit = { #Offer chance to switch the vassals' succession laws.
				ROOT = { has_religion_feature = religion_matriarchal }
			}
			custom_tooltip = { text = tooltip_HF23014_A }
			hidden_tooltip = { 
				any_demesne_title = { 
					add_law = {
						law = enatic_succession
						cooldown = no
						opinion_effect = no
					}
					add_law = {
						law = status_of_women_4
						cooldown = no
						opinion_effect = no
					}
				} 
				recalc_succession = yes
			} 
		}
		if = {
			limit = { #Offer chance to switch the vassals' succession laws.
				ROOT = { has_religion_feature = religion_patriarchal }
			}
			custom_tooltip = { text = tooltip_HF23015_A }
			hidden_tooltip = { 
				any_demesne_title = { 
					add_law = {
						law = agnatic_succession
						cooldown = no
						opinion_effect = no
					}
					add_law = {
						law = status_of_women_0
						cooldown = no
						opinion_effect = no
					}
				} 
				recalc_succession = yes
			} 
		}
		if = {
			limit = { #Offer chance to switch the vassals' succession laws.
				ROOT = {
					OR = { 
						has_religion_feature = religion_equal 
						has_religion_feature = religion_feature_bon
					}
				}
			}
			custom_tooltip = { text = tooltip_HF23016_A }
			hidden_tooltip = { 
				any_demesne_title = { 
					add_law = {
						law = true_cognatic_succession
						cooldown = no
						opinion_effect = no
					}
					add_law = {
						law = status_of_women_4
						cooldown = no
						opinion_effect = no
					}
				} 
				recalc_succession = yes
			} 
		}
		if = {
			limit = { ai = no }
			chronicle = {
				entry = CHRONICLE_OTHER_REFORMED_PLAYERS_RELIGION
				portrait = [Root.GetID]
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 5
				any_liege = { religion = ROOT }
			}
			modifier = {
				factor = 2
				same_realm = ROOT
			}
			modifier = {
				factor = 5
				trait = cynical
			}
			modifier = {
				factor = 10
				dynasty = ROOT
			}
			modifier = {
				factor = 0.1
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = content
			}
		}
		
		religion = ROOT
		
		hidden_tooltip = {
			any_courtier = {
				limit = {
					is_heresy_of = ROOT
					employer = { character = PREV }
				}
				religion = ROOT
			}
			any_dynasty_member = {
				limit = {
					is_heresy_of = ROOT
					is_playable = no
				}
				religion = ROOT
			}
			any_vassal = {
				limit = {
					is_playable = no
					is_heresy_of = ROOT
				}
				religion = ROOT
			}
			capital_scope = {
				if = {
					limit = { is_heresy_of = ROOT }
					religion = ROOT
				}
			}
		}
	}
	option = {
		name = "EVTOPTC670" # Rulers of the old Faith - Decline
		trigger = {
			is_heresy_of = ROOT # The old religion has become a heresy of the Reformed one
		}
		if = {
			limit = { ai = no }
			chronicle = {
				entry = CHRONICLE_OTHER_REFORMED_PLAYERS_RELIGION
				portrait = [Root.GetID]
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				OR = {
					has_landed_title = d_jomsvikings
					has_landed_title = d_galatian_company
					has_landed_title = d_helvetic_company
					has_landed_title = d_brennus_ambaxtoi
				}
			}
			post_reformation_ruler_conversion_score = yes
		}
		tooltip = { religion = THIS }
	}
	option = {
		name = "EVTOPTD670" # Other playable rulers
		trigger = {
			NOT = { religion = ROOT }
			NOT = { is_heresy_of = ROOT }
		}
	}
}

# 901: The Lord Spiritual converts a subject character
character_event = {
	id = 901
	title = "EVTNAME901"
	desc = "EVTDESC901"
	picture = GFX_evt_heretic
	border = GFX_event_normal_frame_religion

	min_age = 16
	capable_only = yes
	prisoner = no
	has_job_title = yes
	
	trigger = {
		has_job_action = action_inquisition
		NOT = { has_character_modifier = in_seclusion }
		NOT = { has_character_modifier = bedridden_illness }
		NOT = { trait = incapable }
		NOT = { religion = the_damned }
		location = {
			any_province_character = {
				ai = yes
				is_adult = yes
				NOT = { character = ROOT }
				NOT = { is_liege_of = ROOT }
				NOT = { religion = ROOT }
				NOT = { religion = the_damned }
				OR = {
					is_ruler = no
					primary_title = {
						controls_religion = no
						mercenary = no
						holy_order = no
					}
				}
				same_realm = ROOT
				NAND = {
					trait = god
					true_religion_group_christian_trigger = yes
					true_religion_group_muslim_trigger = yes
					true_religion_group_jewish_group_trigger = yes
					true_religion_zun_pagan_trigger = yes
					true_religion_zun_pagan_reformed_trigger = yes
					true_religion_group_zoroastrian_group_trigger = yes
					true_religion_buddhist_trigger = yes
					true_religion_taoist_trigger = yes
					true_religion_hindu_trigger = yes
					true_religion_bon_trigger = yes
					true_religion_jain_trigger = yes
					AND = {
						OR = {
							true_religion_draconic_pagan_trigger = yes
							true_religion_draconic_pagan_reformed_trigger = yes
						}
						ROOT = {
							OR = {
								religion = draconic_pagan
								religion = draconic_pagan_reformed
							}
						}
					}
					AND = {
						OR = {
							true_religion_norse_pagan_trigger = yes
							true_religion_norse_pagan_reformed_trigger = yes
							true_religion_jotnar_trigger = yes
							true_religion_jotnar_reformed_trigger = yes
						}
						ROOT = {
							OR = {
								religion = norse_pagan
								religion = norse_pagan_reformed
								religion = jotnar
								religion = jotnar_reformed
							}
						}
					}
					AND = {
						OR = {
							true_religion_baltic_pagan_trigger = yes
							true_religion_baltic_pagan_reformed_trigger = yes
						}
						ROOT = {
							OR = {
								religion = baltic_pagan
								religion = baltic_pagan_reformed
							}
						}
					}
					AND = {
						OR = {
							true_religion_finnish_pagan_trigger = yes
							true_religion_finnish_pagan_reformed_trigger = yes
						}
						ROOT = {
							OR = {
								religion = finnish_pagan
								religion = finnish_pagan_reformed
							}
						}
					}
					AND = {
						OR = {
							true_religion_slavic_pagan_trigger = yes
							true_religion_slavic_pagan_reformed_trigger = yes
						}
						ROOT = {
							OR = {
								religion = slavic_pagan
								religion = slavic_pagan_reformed
							}
						}
					}
					AND = {
						OR = {
							true_religion_tengri_pagan_trigger = yes
							true_religion_tengri_pagan_reformed_trigger = yes
						}
						ROOT = {
							OR = {
								religion = tengri_pagan
								religion = tengri_pagan_reformed
							}
						}
					}
					AND = {
						OR = {
							true_religion_aztec_trigger = yes
							true_religion_aztec_reformed_trigger = yes
						}
						ROOT = {
							OR = {
								religion = aztec
								religion = aztec_reformed
							}
						}
					}
					AND = {
						OR = {
							true_religion_west_african_pagan_trigger = yes
							true_religion_west_african_pagan_reformed_trigger = yes
						}
						ROOT = {
							OR = {
								religion = west_african_pagan
								religion = west_african_pagan_reformed
							}
						}
					}
					AND = {
						OR = {
							true_religion_hellenic_pagan_trigger = yes
							true_religion_hellenic_pagan_reformed_trigger = yes
						}
						ROOT = {
							OR = {
								religion = hellenic_pagan
								religion = hellenic_pagan_reformed
							}
						}
					}
					AND = {
						OR = {
							true_religion_druidic_trigger = yes
							true_religion_druidic_reformed_trigger = yes
						}
						ROOT = {
							OR = {
								religion = druidic
								religion = druidic_reformed
							}
						}
					}
					AND = {
						OR = {
							true_religion_kemetic_pagan_trigger = yes
							true_religion_kemetic_pagan_reformed_trigger = yes
							true_religion_atenist_trigger = yes
						}
						ROOT = {
							OR = {
								religion = kemetic_pagan
								religion = kemetic_pagan_reformed
								religion = atenist
							}
						}
					}
				}
			}
		}
	}
	
	mean_time_to_happen = {
		months = 120
	
		modifier = {
			factor = 0.75
			has_religion_feature = religion_proselytizing
		}
		modifier = {
			factor = 2.75
			has_religion_feature = religion_cosmopolitan
		}
		job_event_mtth_modifier_learning_score = yes
		modifier = {
			factor = 2.0
			NOT = { religion_authority = 0.4 }
		}
		modifier = {
			factor = 2.0
			NOT = { religion_authority = 0.2 }
		}
		modifier = {
			factor = 0.75
			religion_authority = 0.6
		}
		modifier = {
			factor = 0.75
			religion_authority = 0.8
		}
		modifier = {
			factor = 3.0
			religion_group = pagan_group
			is_reformed_religion = no
		}
	}
	
	option = {
		name = "EVTOPTA901"
		piety = 5
		location = {
			random_province_character = {
				limit = {
					ai = yes
					is_adult = yes
					NOT = { character = ROOT }
					NOT = { is_liege_of = ROOT }
					NOT = { religion = ROOT }
					OR = {
						is_ruler = no
						primary_title = {
							controls_religion = no
							mercenary = no
							holy_order = no
						}
					}
					same_realm = ROOT
				}
				letter_event = { id = 20010 tooltip = "EVTTOOLTIP20010" }
			}
		}
	}
}

# 20270: Liege get a letter
letter_event = {
	id = 20270
	desc = "EVTDESC20270"
	border = GFX_event_letter_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA20270"
		ai_chance = { factor = 100 }
		FROM = { imprison = yes }
	}
	option = {
		name = "EVTOPTC20270"
		trigger = {
			NOR = {
				religion = FROM
				has_secret_religion = yes
				trait = god
			}
		}
		ai_chance = { factor = 0 }
		set_secret_religion = { target_type = public target = FROM }
		FROM = { letter_event = { id = 20271 } }
	}
	option = {
		name = "EVTOPTB20270"
		trigger = { trait = god }
		ai_chance = { factor = 0 }
		religion = FROM
	}
}

# Lord Spiritual on mission turns disloyal and and writes letters home about virtues of enemy religion, converting courtiers...
character_event = {
	id = ZE.5020
	desc = EVTDESC_ZE_5020
	picture = GFX_evt_bishop
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes
	
	trigger = {
		has_dlc = "Zeus"
		ai = no
		job_spiritual = {
			ai = yes
			NOT = { opinion = { who = ROOT value = -75 } }
			has_job_action = action_inquisition
			NOT = { trait = honest }
			diplomacy = 10
			location = { NOT = { religion_group = ROOT } }
			OR = {
				trait = cynical
				trait = sympathy_christendom
				trait = sympathy_islam
				trait = sympathy_pagans
				trait = sympathy_zoroastrianism
				trait = sympathy_judaism
				trait = sympathy_indian
			}
		}
	}
	
	weight_multiplier = {
		days = 1
		
		modifier = {
			factor = 2
			job_spiritual = { trait = deceitful }
		}
		modifier = {
			factor = 0.5
			job_spiritual = { trait = craven }
		}
	}
	
	immediate = {
		job_spiritual = {
			set_character_flag = spiritual_reverse_convert_ze_5020
			location = {
				save_event_target_as = ze_5020_province
				trigger_switch = {
					on_trigger = religion_group
					christian 			= { PREV = { add_trait = sympathy_christendom } }
					muslim 				= { PREV = { add_trait = sympathy_islam } }
					pagan_group 		= { PREV = { add_trait = sympathy_pagans } }
					zoroastrian_group 	= { PREV = { add_trait = sympathy_zoroastrianism } }
					jewish_group 		= { PREV = { add_trait = sympathy_judaism } }
					indian_group 		= { PREV = { add_trait = sympathy_indian } }
				}
			}
		}
		random_courtier = {
			limit = {
				is_ruler = no
				is_adult = yes
				religion = ROOT
				NOR = {
					trait = zealous
					trait = god
					is_primary_heir = ROOT
					trait = incapable
					is_inaccessible_trigger = yes
				}
				prisoner = no
			}
			save_event_target_as = target_courtier
		}
	}
	
	option = {
		name = EVTOPTA_ZE_5020  # Strange, why convert?
		event_target:target_courtier = {
			event_target:ze_5020_province = {
				reverse_religion = PREV
			}
		}
		hidden_tooltip = {
			random_list = {
				80 = {
					character_event = { id = ZE.5022 days = 100 }  # Convert one more...
				}
				20 = {
					character_event = { id = ZE.5027 days = 100 } # Letters discovered!
					modifier = {
						factor = 2
						attribute_diff = {
							character = job_spiritual
							attribute = intrigue
							value = 4
						}
					}
					modifier = {
						factor = 2
						attribute_diff = {
							character = job_spiritual
							attribute = intrigue
							value = 8
						}
					}
				}
			}
		}
	}
}

# Lord Spiritual continues converting courtiers...
character_event = {
	id = ZE.5022
	desc = EVTDESC_ZE_5022
	picture = GFX_evt_bishop
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	trigger = {
		has_dlc = "Zeus"
		job_spiritual = {
			has_job_action = action_inquisition
			has_character_flag = spiritual_reverse_convert_ze_5020
			location = {
				province = event_target:ze_5020_province
			}
		}
	}
	
	immediate = {
		random_courtier = {
			limit = {
				is_ruler = no
				is_adult = yes
				religion = ROOT
				NOR = {
					trait = zealous
					trait = god
					is_primary_heir = ROOT
					trait = incapable
					is_inaccessible_trigger = yes
				}
				prisoner = no
			}
			save_event_target_as = target_courtier
		}
		job_spiritual = {
			save_event_target_as = target_spiritual
		}
	}

	option = {
		name = EVTOPTA_ZE_5022  # Strange, why convert?
		event_target:target_courtier = {
			event_target:ze_5020_province = {
				reverse_religion = PREV
			}
		}
		hidden_tooltip = {
			random_list = {
				80 = {
					repeat_event = { id = ZE.5022 days = 100 }  # Convert one more...
				}
				20 = {
					character_event = { id = ZE.5027 days = 100 } # Letters discovered!
					modifier = {
						factor = 2
						attribute_diff = {
							character = event_target:target_spiritual
							attribute = intrigue
							value = 4
						}
					}
					modifier = {
						factor = 2
						attribute_diff = {
							character = event_target:target_spiritual
							attribute = intrigue
							value = 8
						}
					}
				}
			}
		}
	}
}

# 927: Lord Spiritual = heretic
character_event = {
	id = 927
	title = "EVTNAME927"
	desc = "EVTDESC927"
	picture = GFX_evt_heretic
	border = GFX_event_normal_frame_religion
	
	min_age = 16
	capable_only = yes
	prisoner = no
	has_job_title = yes
	
	trigger = {
		has_job_action = action_advance_cul_tech
		NOT = { has_character_modifier = in_seclusion }
		NOT = { religion_group = indian_group }
		NOT = { has_religion_feature = religion_cosmopolitan }
		is_heretic = no
		has_secret_religion = no
		OR = {
			religion_group = christian
			religion_group = muslim
			religion_group = jewish_group
			AND = { # Norse can get heresies if jotun is available
				OR = {
					religion = norse_pagan
					religion = norse_pagan_reformed
				}
				OR = {
					trait = giant
					culture = jotunn
					location = { religion = jotnar }
					location = { religion = jotnar_reformed }
					location = { culture = jotunn }
					any_demesne_province = {
						OR = {
							religion = jotnar
							religion = jotnar_reformed
							culture = jotunn
						}
					}
				}
			}
			# Kemetic can get heresies if atenist is available or reformed
			AND = {
				religion = kemetic_pagan
				OR = {
					has_global_flag = atenist_revived
					has_global_flag = kemetic_pagan_reformation
					AND = {
						c_asyut = {
							location = {
								OR = {
									religion = kemetic_pagan
									religion = kemetic_pagan_reformed
									religion = atenist
								}
							}
						}
						OR = {
							# If these don't work, may need a random_character with a limit
							kemetic_pagan = { num_of_holy_sites = 3 }
							AND = {
								kemetic_pagan = { num_of_holy_sites = 2 }
								atenist = { num_of_holy_sites = 1 }
							}
							AND = {
								kemetic_pagan = { num_of_holy_sites = 2 }
								kemetic_pagan_reformed = { num_of_holy_sites = 1 }
							}
							AND = {
								kemetic_pagan = { num_of_holy_sites = 1 }
								atenist = { num_of_holy_sites = 2 }
							}
							AND = {
								kemetic_pagan = { num_of_holy_sites = 1 }
								kemetic_pagan_reformed = { num_of_holy_sites = 1 }
								atenist = { num_of_holy_sites = 1 }
							}
							AND = {
								kemetic_pagan = { num_of_holy_sites = 1 }
								kemetic_pagan_reformed = { num_of_holy_sites = 2 }
							}
							kemetic_pagan_reformed = { num_of_holy_sites = 3 }
							AND = {
								kemetic_pagan_reformed = { num_of_holy_sites = 2 }
								atenist = { num_of_holy_sites = 1 }
							}
							AND = {
								kemetic_pagan_reformed = { num_of_holy_sites = 1 }
								atenist = { num_of_holy_sites = 2 }
							}
							atenist = { num_of_holy_sites = 3 }
						}
					}
				}
			}
		}
		liege = {
			is_heretic = no
			OR = {
				religion_group = christian
				religion_group = muslim
				religion_group = jewish_group
			}
		}
		NOT = {
			religion_head = { character = ROOT }
		}
	}
	
	mean_time_to_happen = {
		months = 1000
		
		modifier = {
			factor = 2
			has_religion_feature = religion_dogmatic
		}
		job_event_mtth_modifier_learning_score = yes
	}
	
	option = {
		name = "EVTOPTA927"
		ai_chance = { factor = 80 }
		become_heretic = yes
		hidden_tooltip = {
			liege = { letter_event = { id = 20270 } }
		}
	}
	option = {
		name = "EVTOPTB927"
		ai_chance = { factor = 20 }
	}
	after = {
		hidden_tooltip = {
			if = {
				limit = {
					religion = atenist
					NOT = { has_global_flag = atenist_revived }
				}
				set_global_flag = atenist_revived
			}
		}
	}
}

# Impersonating Priests - Agitation 
character_event = {
	id = MNM.20048
	picture = GFX_evt_heretic
	border = GFX_event_normal_frame_intrigue
	
	show_from_from_from = yes
	
	is_triggered_only = yes
	
	trigger = {
		FROMFROMFROM = {
			is_alive = yes
			prisoner = no
			is_incapable = no
		}
		FROMFROM = {
			is_alive = yes
			prisoner = no
			is_incapable = no
		}
	}
	
	immediate = {
		if = {
			limit = {
				FROMFROM = {
					has_heresies = yes
					is_heretic = no
					OR = {
						NOR = { 
							religion = norse_pagan
							religion = norse_pagan_reformed
						}
						trait = giant
						culture = jotunn
					}
				}
			}
			set_character_flag = ip_heresy
		}
		
		if = {
			limit = { NOT = { trait = deceitful } }
			random = {
				chance = 25
				set_character_flag = ip_deceitful
			}
		}
		if = {
			limit = { NOT = { trait = gregarious } }
			random = {
				chance = 50
				set_character_flag = ip_gregarious
			}
		}
		
		if = {
			limit = {
				NOR = {
					is_friend = FROMFROMFROM
					is_lover = FROMFROMFROM
				}
			}
			random_list = {
				85 = { 
					set_character_flag = ip_friendify
				}
				15 = {
					modifier = {
						factor = 0
						FROMFROMFROM = { trait = honest }
					}
					modifier = {
						factor = 2
						FROMFROMFROM = { trait = deceitful }
					}
					modifier = {
						factor = 2
						FROMFROMFROM = { trait = cruel }
					}
					FROMFROMFROM = { character_event = { id = MNM.20051 days = 7 } } # Rivalry
				}
			}
		}
	}
	
	desc = EVTDESC_MNM_20048
	
	option = {
		name = EVTOPTA_MNM_20048
		
		if = {
			limit = {
				has_character_flag = ip_heresy
			}
			FROM = {
				add_province_modifier = {
					modifier = heretic_stronghold
					years = 3
				}
				if = {
					limit = {
						NOR = {
							religion = norse_pagan
							religion = norse_pagan_reformed
							religion = jotnar
							religion = jotnar_reformed
						}
					}
					become_heretic = yes
				}
				else = {
					random_list = {
						1 = {
							trigger = {
								NOT = { religion = norse_pagan }
								FROMFROM = {
									NOR = {
										religion = jotnar
										religion = jotnar_reformed
									}
								}
							}
							religion = norse_pagan
						}
						1 = {
							trigger = {
								NOT = { religion = norse_pagan_reformed }
								FROMFROM = {
									NOR = {
										religion = jotnar
										religion = jotnar_reformed
									}
								}
								has_character_flag = norse_reformation
							}
							religion = norse_pagan_reformed
						}
						1 = {
							trigger = {
								NOT = { religion = jotnar }
								FROMFROM = {
									OR = {
										trait = giant
										culture = jotunn
										religion = jotnar
										religion = jotnar_reformed
									}
								}	
							}
							religion = jotnar
						}
						1 = {
							trigger = {
								NOT = { religion = jotnar_reformed }
								has_global_flag = jotnar_reformation
								FROMFROM = {
									OR = {
										trait = giant
										culture = jotunn
										religion = jotnar
										religion = jotnar_reformed
									}
								}	
							}
							religion = jotnar_reformed
						}
					}
				}
				FROM = { province_event = { id = MNM.20050 } } # Notify lieges 
			}
		}
		
		if = {
			limit = {
				NOT = { has_character_flag = ip_heresy }
			}
			FROM = {
				add_province_modifier = {
					modifier = religious_unrest
					years = 5
				}
			}
		}
		
		if = {
			limit = {
				has_character_flag = ip_deceitful
			}
			if = {
				limit = {
					NOT = { has_character_flag = honest }
					NOT = { has_character_flag = deceitful }
				}
				add_trait = deceitful
			}
			if = {
				limit = {
					has_character_flag = honest
				}
				remove_trait = honest
			}
		}
		
		if = {
			limit = {
				has_character_flag = ip_gregarious
			}
			if = {
				limit = {
					NOT = { has_character_flag = shy }
					NOT = { has_character_flag = gregarious }
				}
				add_trait = gregarious
			}
			if = {
				limit = {
					has_character_flag = shy
				}
				remove_trait = shy
			}
		}
		
		# Friend gained / Rivalry lost
		if = {
			limit = {
				has_character_flag = ip_friendify
			}
			if = {
				limit = {
					NOT = {
						is_rival = FROMFROMFROM
					}
				}
				add_friend = FROMFROMFROM
			}
			if = {
				limit = {
					is_rival = FROMFROMFROM
				}
				remove_rival = FROMFROMFROM
			}
		}
		
		add_society_currency_minor_effect = yes
		
		clr_character_flag = ip_heresy
		clr_character_flag = ip_deceitful
		clr_character_flag = ip_gregarious
		clr_character_flag = ip_friendify
	}
}

# Heresy Appears in Province
province_event = {
	id = SoA.4000
	desc = EVTDESC39000
	picture = GFX_evt_heretic
	border = GFX_event_normal_frame_religion
	
	trigger = {
		has_dlc = "Sons of Abraham"
		
		is_heretic = no
		
		has_heresies = yes
		
		OR = { # Either not norse, or norse heresies are valid
			NOR = {
				religion = norse_pagan
			}
			has_global_flag = norse_reformation
			owner = {
				trait = giant
				culture = jotunn
				OR = {
					religion = jotnar
					religion = jotnar_reformed
				}
			}
			any_neighbor_province = {
				OR = {
					religion = jotnar
					religion = jotnar_reformed
				}
			}
		}
		
		OR = { # Either not Kemetic, kemetic reformed, or atenist is available
			NOT = { religion = kemetic_pagan }
			has_global_flag = kemetic_pagan_reformation
			has_global_flag = atenist_revived
			AND = {
				c_asyut = {
					location = {
						OR = {
							religion = kemetic_pagan
							religion = atenist
						}
					}
				}
				OR = {
					kemetic_pagan = { num_of_holy_sites = 3 }
					AND = {
						kemetic_pagan = { num_of_holy_sites = 2 }
						atenist = { num_of_holy_sites = 1 }
					}
					AND = {
						kemetic_pagan = { num_of_holy_sites = 2 }
						kemetic_pagan_reformed = { num_of_holy_sites = 1 }
					}
					AND = {
						kemetic_pagan = { num_of_holy_sites = 1 }
						atenist = { num_of_holy_sites = 2 }
					}
					AND = {
						kemetic_pagan = { num_of_holy_sites = 1 }
						kemetic_pagan_reformed = { num_of_holy_sites = 1 }
						atenist = { num_of_holy_sites = 1 }
					}
					AND = {
						kemetic_pagan = { num_of_holy_sites = 1 }
						kemetic_pagan_reformed = { num_of_holy_sites = 2 }
					}
					kemetic_pagan_reformed = { num_of_holy_sites = 3 }
					AND = {
						kemetic_pagan_reformed = { num_of_holy_sites = 2 }
						atenist = { num_of_holy_sites = 1 }
					}
					AND = {
						kemetic_pagan_reformed = { num_of_holy_sites = 1 }
						atenist = { num_of_holy_sites = 2 }
					}
					atenist = { num_of_holy_sites = 3 }
				}
			}
		}
		
		# Heretic top lieges must spread the faith themselves
		owner = {
			top_liege = {
				NOT = { is_heresy_of = ROOT }
			}
		}
		
		num_of_settlements = 1
		any_province_holding = {
			NOT = { holding_type = nomad }
		}
		
		NOT = { religion_authority = 0.9 }
	}
	
	mean_time_to_happen = {
		months = 9600 # 800 years
		modifier = {
			factor = 1.5
			religion_authority = 0.6
		}
		modifier = {
			factor = 1.5
			religion_authority = 0.7
		}
		modifier = {
			factor = 1.5
			religion_authority = 0.8
		}
		modifier = {
			factor = 2.0
			religion_authority = 0.9
		}
		modifier = {
			factor = 3.0
			OR = {
				province_id = 333 # Rome
				province_id = 497 # Thrace
				province_id = 719 # Mecca
			}
		}
		modifier = {
			factor = 0.5
			NOT = { religion_authority = 0.2 }
		}
		modifier = {
			factor = 0.75
			NOT = { religion_authority = 0.3 }
		}
		modifier = {
			factor = 0.75
			NOT = { religion_authority = 0.4 }
		}
		modifier = {
			factor = 0.75
			NOT = { religion_authority = 0.5 }
		}
		
		modifier = {
			factor = 0.5
			any_neighbor_province = {
				is_land = yes
				is_heresy_of = ROOT
			}
		}
		modifier = {
			factor = 0.25
			any_neighbor_province = {
				is_land = yes
				is_heresy_of = ROOT
				has_province_modifier = heretic_stronghold
			}
		}
	}
	
	immediate = {
	
		# Prefer a neighboring heresy
		random_neighbor_province = {
			limit = {
				is_land = yes
				is_heresy_of = ROOT
			}
			ROOT = {
				religion = PREV
			}
		}
	
		# Prefer an existing heresy in the realm
		if = {
			limit = {
				is_heretic = no
			}
			owner = {
				top_liege = {
					random_realm_province = {
						limit = {
							is_land = yes
							is_heresy_of = ROOT
						}
						ROOT = {
							religion = PREV
						}
					}
				}
			}
		}
	
		# ...otherwise, just pick a heresy
		if = {
			limit = {
				is_heretic = no
			}
			become_heretic = yes
		}
		
		# Two years of much higher revolt risk
		add_province_modifier = {
			name = religious_unrest
			duration = 730
		}
		
		# One heretic province in the realm is the epicentre of the heresy
		if = {
			limit = {
				owner = {
					top_liege = {
						NOT = {
							any_realm_province = {
								religion = ROOT
								has_province_modifier = heretic_stronghold
							}
						}
					}
				}
			}
			add_province_modifier = {
				name = heretic_stronghold # Ten years of even higher revolt risk
				duration = 3650
			}
		}
		
		# Notify the lieges
		owner = {
			any_liege = {
				character_event = { id = 39400 }
			}
		}
		owner = {
			if = {
				limit = { ai = no }
				chronicle = {
					entry = CHRONICLE_HERESY_SPREAD
					picture = GFX_evt_heretic
				}
			}
		}
		owner = {
			any_liege = {
				if = {
					limit = { ai = no }
					chronicle = {
						entry = CHRONICLE_HERESY_SPREAD
						picture = GFX_evt_heretic
					}
				}
			}
		}
		if = {
			limit = {
				religion = atenist
				NOT = { has_global_flag = atenist_revived }
			}
			set_global_flag = atenist_revived
		}
	}
	
	option = {
		name = EVTOPTA39000 # The owner is of the parent religion
		trigger = { owner = { is_parent_religion = ROOT } }
		
		owner = { piety = -10 }
		
		ai_chance = {
        	factor = 95
        }
	}
	
	option = {
		name = EVTOPTB39000 # The owner is of the same heresy
		trigger = { owner = { religion = ROOT } }
		ai_chance = {
        	factor = 95
        }
	}
	
	option = {
		name = EVTOPTC_SOA_4000 # The owner is of some other religion
		trigger = {
			owner = {
				NOT = { religion = ROOT }
				NOT = { is_parent_religion = ROOT }
			}
		}
		ai_chance = {
        	factor = 95
        }
	}
	
	option = {
		name = EVTOPTD_SOA_4000 #  The owner is of the parent religion and interested in the heresy
		trigger = {
			owner = {
				is_parent_religion = ROOT
			}
		}
		
		owner = {
			piety = -250
			set_secret_religion = { target_type = public target = ROOT }
			any_spouse = {
				limit = {
					ai = yes
					has_secret_religion = no
				}
				set_secret_religion = { target_type = public target = ROOT }
			}
			any_child = {
				limit = {
					ai = yes
					has_secret_religion = no
				}
				set_secret_religion = { target_type = public target = ROOT }
			}
		}
		
		ai_chance = {
        	factor = 5
        	modifier = {
        		factor = 0
				owner = {
					trait = zealous 
				}
        	}
        	modifier = {
        		factor = 2
				owner = {
					trait = cynical 
				}
        	}
        }
	}
}

# Hunt Apostates
character_event = { # Hunt Apostates meta event
	id = MNM.70100
	title = MNM.70031.t
	hide_window = yes
	
	min_age = 16
	capable_only = yes
	prisoner = no
	has_job_title = yes
	
	trigger = {
		has_job_action = action_hunt_heretics
		NOT = { has_character_modifier = in_seclusion }
		liege = {
			OR = {
				# There is someone who is highly suspect
				any_realm_character = {
					prisoner = no
					NOT = { character = ROOT } # Don't catch yourself
					NOT = { character = PREV } # Don't catch your liege
					NOT = { same_society_as = ROOT } # Nor your brethren 
					NOT = { same_society_as = PREV } # Nor liege's brethren
					NAND = { # If you share the same secret religion, dont catch them
						has_roots_secret_religion_truly_trigger = yes 
						is_devil_worshiper_trigger = no
					}
					NAND = { # If they share secret religion with the liege, dont catch them
						has_prevs_secret_religion_truly_trigger = yes 
						is_devil_worshiper_trigger = no 
					}
					NOT = {
						reverse_has_opinion_modifier = {
							modifier = opinion_accused_apostate
							who = PREV
						}
					}
					is_in_society = yes
					society_is_criminal = yes
					has_character_modifier = highly_suspect
				}
				
				# There is someone moderately suspect
				any_realm_character = {
					prisoner = no
					NOT = { character = ROOT } # Don't catch yourself
					NOT = { character = PREV } # Don't catch your liege
					NOT = { same_society_as = ROOT } # Nor your brethren 
					NOT = { same_society_as = PREV } # Nor liege's brethren
					NAND = { # If you share the same secret religion, dont catch them
						has_roots_secret_religion_truly_trigger = yes 
						is_devil_worshiper_trigger = no
					}
					NAND = { # If they share secret religion with the liege, dont catch them
						has_prevs_secret_religion_truly_trigger = yes 
						is_devil_worshiper_trigger = no 
					}
					NOT = {
						reverse_has_opinion_modifier = {
							modifier = opinion_accused_apostate
							who = PREV
						}
					}
					is_in_society = yes
					society_is_criminal = yes
					has_character_modifier = under_suspicion
				}
				
				# Someone with a secret religion
				any_realm_character = {
					prisoner = no
					NOT = { character = ROOT } # Don't catch yourself
					NOT = { character = PREV } # Don't catch your liege
					OR = { # Nor your brethren
						NOT = { same_society_as = ROOT }
						is_in_society = no
					}
					OR = { # Nor liege's brethren
						NOT = { same_society_as = PREV }
						is_in_society = no
					}
					NOT = { has_roots_secret_religion_truly_trigger = yes } # If you share the same secret religion, dont catch them
					NOT = { has_prevs_secret_religion_truly_trigger = yes } # If they share secret religion with the liege, dont catch them
					NOT = {
						reverse_has_opinion_modifier = {
							modifier = opinion_accused_apostate
							who = PREV
						}
					}
					religion = PREV
					age = 16
					has_secret_religion_trait_trigger = yes
				}
				
				# A Vampire, and I'm good at my job
				any_realm_character = {
					prisoner = no
					NOT = { character = ROOT } # Don't catch yourself
					NOT = { character = PREV } # Don't catch your liege
					NOT = { same_society_as = ROOT } # Nor your brethren 
					NOT = { same_society_as = PREV } # Nor liege's brethren
					NOT = { ROOT = { trait = vampire } } # Don't catch other vampires if you are one
					NOT = { PREV = { trait = known_vampire } } # Don't catch vampires if your liege is one
					NOT = { ROOT = { culture = vampire_culture } } # Don't catch vampires if your culture approves of them
					NOT = { PREV = { culture = vampire_culture } } # Don't catch vampires if your liege's culture approves of them
					NOT = { trait = known_vampire }
					ROOT = {
						OR = {
							AND = {
								learning = 16
								NOR = {
									has_game_rule = { name = secrecy value = more }
									has_game_rule = { name = secrecy value = fewer }
								}
							}
							AND = {
								learning = 12
								NOR = {
									has_game_rule = { name = secrecy value = more }
									has_game_rule = { name = secrecy value = fewer }
								}
								OR = {
									PREV = { has_character_modifier = known_monster }
									trait = monster_hunter
								}
							}
							AND = {
								learning = 9
								NOR = {
									has_game_rule = { name = secrecy value = more }
									has_game_rule = { name = secrecy value = fewer }
								}
								PREV = { has_character_modifier = known_monster }
								trait = monster_hunter
							}
							AND = {
								learning = 13
								NOT = {
									has_game_rule = { name = secrecy value = more }
								}
							}
							AND = {
								learning = 9
								NOT = {
									has_game_rule = { name = secrecy value = more }
								}
								OR = {
									PREV = { has_character_modifier = known_monster }
									trait = monster_hunter
								}
							}
							AND = {
								learning = 6
								NOT = {
									has_game_rule = { name = secrecy value = more }
								}
								PREV = { has_character_modifier = known_monster }
								trait = monster_hunter
							}
							AND = {
								learning = 19
								NOT = {
									has_game_rule = { name = secrecy value = fewer }
								}
							}
							AND = {
								learning = 15
								NOT = {
									has_game_rule = { name = secrecy value = fewer }
								}
								OR = {
									PREV = { has_character_modifier = known_monster }
									trait = monster_hunter
								}
							}
							AND = {
								learning = 12
								NOT = {
									has_game_rule = { name = secrecy value = fewer }
								}
								PREV = { has_character_modifier = known_monster }
								trait = monster_hunter
							}
						}
					}
				}
				
				# A Werewolf, and I'm good at my job
				any_realm_character = {
					prisoner = no
					NOT = { character = ROOT } # Don't catch yourself
					NOT = { character = PREV } # Don't catch your liege
					NOT = { same_society_as = ROOT } # Nor your brethren 
					NOT = { same_society_as = PREV } # Nor liege's brethren
					NOT = { ROOT = { trait = werewolf } } # Don't catch other werewolf if you are one
					NOT = { PREV = { trait = known_werewolf } } # Don't catch werewolf if your liege is one
					NOT = { ROOT = { culture = werewolf_culture } } # Don't catch werewolf if your culture approves of them
					NOT = { PREV = { culture = werewolf_culture } } # Don't catch werewolf if your liege's culture approves of them
					NOT = { trait = known_werewolf }
					ROOT = {
						OR = {
							AND = {
								learning = 16
								NOR = {
									has_game_rule = { name = secrecy value = more }
									has_game_rule = { name = secrecy value = fewer }
								}
							}
							AND = {
								learning = 12
								NOR = {
									has_game_rule = { name = secrecy value = more }
									has_game_rule = { name = secrecy value = fewer }
								}
								OR = {
									PREV = { has_character_modifier = known_monster }
									trait = monster_hunter
								}
							}
							AND = {
								learning = 9
								NOR = {
									has_game_rule = { name = secrecy value = more }
									has_game_rule = { name = secrecy value = fewer }
								}
								PREV = { has_character_modifier = known_monster }
								trait = monster_hunter
							}
							AND = {
								learning = 13
								NOT = {
									has_game_rule = { name = secrecy value = more }
								}
							}
							AND = {
								learning = 9
								NOT = {
									has_game_rule = { name = secrecy value = more }
								}
								OR = {
									PREV = { has_character_modifier = known_monster }
									trait = monster_hunter
								}
							}
							AND = {
								learning = 6
								NOT = {
									has_game_rule = { name = secrecy value = more }
								}
								PREV = { has_character_modifier = known_monster }
								trait = monster_hunter
							}
							AND = {
								learning = 19
								NOT = {
									has_game_rule = { name = secrecy value = fewer }
								}
							}
							AND = {
								learning = 15
								NOT = {
									has_game_rule = { name = secrecy value = fewer }
								}
								OR = {
									PREV = { has_character_modifier = known_monster }
									trait = monster_hunter
								}
							}
							AND = {
								learning = 12
								NOT = {
									has_game_rule = { name = secrecy value = fewer }
								}
								PREV = { has_character_modifier = known_monster }
								trait = monster_hunter
							}
						}
					}
				}
				
				# A devil worshiper, and I'm amazingly good at my job
				any_realm_character = {
					prisoner = no
					NOT = { character = ROOT } # Don't catch yourself
					NOT = { character = PREV } # Don't catch your liege
					NOT = { same_society_as = ROOT } # Nor your brethren 
					NOT = { same_society_as = PREV } # Nor liege's brethren
					NOT = { has_roots_secret_religion_truly_trigger = yes } # If you share the same secret religion, dont catch them
					NOT = { has_prevs_secret_religion_truly_trigger = yes } # If they share secret religion with the liege, dont catch them
					NOT = {
						reverse_has_opinion_modifier = {
							modifier = opinion_accused_apostate
							who = PREV
						}
					}
					age = 16
					is_devil_worshiper_trigger = yes
					ai = yes
					NOR = {
						has_character_modifier = highly_suspect
						has_character_modifier = under_suspicion
					}
					ROOT = {
						OR = {
							learning = 16
							AND = {
								learning = 12
								inquisitor = yes
							}
						}
					}
				}
				
				# Someone random, and I'm incompetent
				any_realm_character = {
					prisoner = no
					NOT = { character = ROOT } # Don't catch yourself
					NOT = { character = PREV } # Don't catch your liege
					OR = { # Nor your brethren
						NOT = { same_society_as = ROOT }
						is_in_society = no
					}
					OR = { # Nor liege's brethren
						NOT = { same_society_as = PREV }
						is_in_society = no
					}
					NOT = { has_roots_secret_religion_truly_trigger = yes } # If you share the same secret religion, dont catch them
					NOT = { has_prevs_secret_religion_truly_trigger = yes } # If they share secret religion with the liege, dont catch them
					NOT = {
						reverse_has_opinion_modifier = {
							modifier = opinion_accused_apostate
							who = PREV
						}
					}
					NOT = {
						higher_tier_than = BARON
					}
					age = 16
					NOR = {
						has_character_modifier = highly_suspect
						has_character_modifier = under_suspicion
						has_secret_religion_trait_trigger = yes
					}
					ROOT = {
						OR = {
							NOT = {
								learning = 8
							}
							is_dumb_trigger = yes
						}
					}
				}
			}
		}
	}
	
	immediate = {
		# Mark targets
		liege = {
			save_event_target_as = my_liege
			# Extremely suspect people
			random_realm_character = {
				limit = {
					prisoner = no
					NOT = { character = ROOT } # Don't catch yourself
					NOT = { character = event_target:my_liege } # Don't catch your liege
					NOT = { same_society_as = ROOT } # Nor your brethren 
					NOT = { same_society_as = event_target:my_liege } # Nor liege's brethren
					NAND = { # If you share the same secret religion, dont catch them
						has_my_liege_secret_religion_truly_trigger = yes 
						is_devil_worshiper_trigger = no
					}
					NAND = { # If they share secret religion with the liege, dont catch them
						has_prevs_secret_religion_truly_trigger = yes 
						is_devil_worshiper_trigger = no 
					}
					NOT = {
						reverse_has_opinion_modifier = {
							modifier = opinion_accused_apostate
							who = event_target:my_liege
						}
					}
					is_in_society = yes
					society_is_criminal = yes
					has_character_modifier = highly_suspect
				}
				save_event_target_as = highly_suspected_society_member
				set_character_flag = apostate_extremely_suspect
			}
			
			# Moderatley suspect people
			random_realm_character = {
				limit = {
					prisoner = no
					NOT = { character = ROOT } # Don't catch yourself
					NOT = { character = event_target:my_liege } # Don't catch your liege
					NOT = { same_society_as = ROOT } # Nor your brethren 
					NOT = { same_society_as = event_target:my_liege } # Nor liege's brethren
					NAND = { # If you share the same secret religion, dont catch them
						has_my_liege_secret_religion_truly_trigger = yes  
						is_devil_worshiper_trigger = no
					}
					NAND = { # If they share secret religion with the liege, dont catch them
						has_prevs_secret_religion_truly_trigger = yes 
						is_devil_worshiper_trigger = no 
					}
					NOT = {
						reverse_has_opinion_modifier = {
							modifier = opinion_accused_apostate
							who = event_target:my_liege
						}
					}
					is_in_society = yes
					society_is_criminal = yes
					has_character_modifier = under_suspicion
				}
				save_event_target_as = suspected_society_member
				set_character_flag = apostate_moderate_suspect
			}
			
			# Characters with a secret religion
			random_realm_character = {
				limit = {
					prisoner = no
					NOT = { character = ROOT } # Don't catch yourself
					NOT = { character = event_target:my_liege } # Don't catch your liege
					OR = { # Nor your brethren
						NOT = { same_society_as = ROOT }
						is_in_society = no
					}
					OR = { # Nor liege's brethren
						NOT = { same_society_as = event_target:my_liege }
						is_in_society = no
					}
					NOT = { has_roots_secret_religion_truly_trigger = yes } # If you share the same secret religion, dont catch them
					NOT = { has_my_liege_secret_religion_truly_trigger = yes } # If they share secret religion with the liege, dont catch them
					NOT = {
						reverse_has_opinion_modifier = {
							modifier = opinion_accused_apostate
							who = event_target:my_liege
						}
					}
					religion = event_target:my_liege
					age = 16
					has_secret_religion_trait_trigger = yes
				}
				save_event_target_as = suspected_apostate
				set_character_flag = apostate_secret_religion
			}
			
			# Vampires
			random_realm_character = {
				limit = {
					prisoner = no
					NOT = { character = ROOT } # Don't catch yourself
					NOT = { character = PREV } # Don't catch your liege
					NOT = { same_society_as = ROOT } # Nor your brethren 
					NOT = { same_society_as = PREV } # Nor liege's brethren
					NOT = { ROOT = { trait = vampire } } # Don't catch other vampires if you are one
					NOT = { PREV = { trait = known_vampire } } # Don't catch vampires if your liege is one
					NOT = { ROOT = { culture = vampire_culture } } # Don't catch vampires if your culture approves of them
					NOT = { PREV = { culture = vampire_culture } } # Don't catch vampires if your liege's culture approves of them
					NOT = { trait = known_vampire }
					ROOT = {
						OR = {
							AND = {
								learning = 16
								NOR = {
									has_game_rule = { name = secrecy value = more }
									has_game_rule = { name = secrecy value = fewer }
								}
							}
							AND = {
								learning = 12
								NOR = {
									has_game_rule = { name = secrecy value = more }
									has_game_rule = { name = secrecy value = fewer }
								}
								OR = {
									PREV = { has_character_modifier = known_monster }
									trait = monster_hunter
								}
							}
							AND = {
								learning = 9
								NOR = {
									has_game_rule = { name = secrecy value = more }
									has_game_rule = { name = secrecy value = fewer }
								}
								PREV = { has_character_modifier = known_monster }
								trait = monster_hunter
							}
							AND = {
								learning = 13
								NOT = {
									has_game_rule = { name = secrecy value = more }
								}
							}
							AND = {
								learning = 9
								NOT = {
									has_game_rule = { name = secrecy value = more }
								}
								OR = {
									PREV = { has_character_modifier = known_monster }
									trait = monster_hunter
								}
							}
							AND = {
								learning = 6
								NOT = {
									has_game_rule = { name = secrecy value = more }
								}
								PREV = { has_character_modifier = known_monster }
								trait = monster_hunter
							}
							AND = {
								learning = 19
								NOT = {
									has_game_rule = { name = secrecy value = fewer }
								}
							}
							AND = {
								learning = 15
								NOT = {
									has_game_rule = { name = secrecy value = fewer }
								}
								OR = {
									PREV = { has_character_modifier = known_monster }
									trait = monster_hunter
								}
							}
							AND = {
								learning = 12
								NOT = {
									has_game_rule = { name = secrecy value = fewer }
								}
								PREV = { has_character_modifier = known_monster }
								trait = monster_hunter
							}
						}
					}
				}
				save_event_target_as = suspected_vampire
				set_character_flag = apostate_vampire
			}
			
			# Werewolf
			random_realm_character = {
				limit = {
					prisoner = no
					NOT = { character = ROOT } # Don't catch yourself
					NOT = { character = PREV } # Don't catch your liege
					NOT = { same_society_as = ROOT } # Nor your brethren 
					NOT = { same_society_as = PREV } # Nor liege's brethren
					NOT = { ROOT = { trait = werewolf } } # Don't catch other werewolves if you are one
					NOT = { PREV = { trait = known_werewolf } } # Don't catch werewolves if your liege is one
					NOT = { ROOT = { culture = werewolf_culture } } # Don't catch werewolves if your culture approves of them
					NOT = { PREV = { culture = werewolf_culture } } # Don't catch werewolves if your liege's culture approves of them
					NOT = { trait = known_werewolf }
					ROOT = {
						OR = {
							AND = {
								learning = 16
								NOR = {
									has_game_rule = { name = secrecy value = more }
									has_game_rule = { name = secrecy value = fewer }
								}
							}
							AND = {
								learning = 12
								NOR = {
									has_game_rule = { name = secrecy value = more }
									has_game_rule = { name = secrecy value = fewer }
								}
								OR = {
									PREV = { has_character_modifier = known_monster }
									trait = monster_hunter
								}
							}
							AND = {
								learning = 9
								NOR = {
									has_game_rule = { name = secrecy value = more }
									has_game_rule = { name = secrecy value = fewer }
								}
								PREV = { has_character_modifier = known_monster }
								trait = monster_hunter
							}
							AND = {
								learning = 13
								NOT = {
									has_game_rule = { name = secrecy value = more }
								}
							}
							AND = {
								learning = 9
								NOT = {
									has_game_rule = { name = secrecy value = more }
								}
								OR = {
									PREV = { has_character_modifier = known_monster }
									trait = monster_hunter
								}
							}
							AND = {
								learning = 6
								NOT = {
									has_game_rule = { name = secrecy value = more }
								}
								PREV = { has_character_modifier = known_monster }
								trait = monster_hunter
							}
							AND = {
								learning = 19
								NOT = {
									has_game_rule = { name = secrecy value = fewer }
								}
							}
							AND = {
								learning = 15
								NOT = {
									has_game_rule = { name = secrecy value = fewer }
								}
								OR = {
									PREV = { has_character_modifier = known_monster }
									trait = monster_hunter
								}
							}
							AND = {
								learning = 12
								NOT = {
									has_game_rule = { name = secrecy value = fewer }
								}
								PREV = { has_character_modifier = known_monster }
								trait = monster_hunter
							}
						}
					}
				}
				save_event_target_as = suspected_werewolf
				set_character_flag = apostate_werewolf
			}
			
			# Devil worshipers without any suspicion
			random_realm_character = {
				limit = {
					prisoner = no
					NOT = { character = ROOT } # Don't catch yourself
					NOT = { character = event_target:my_liege } # Don't catch your liege
					NOT = { same_society_as = ROOT } # Nor your brethren 
					NOT = { same_society_as = event_target:my_liege } # Nor liege's brethren
					NOT = { has_roots_secret_religion_truly_trigger = yes } # If you share the same secret religion, dont catch them
					NOT = { has_prevs_secret_religion_truly_trigger = yes } # If they share secret religion with the liege, dont catch them
					NOT = {
						reverse_has_opinion_modifier = {
							modifier = opinion_accused_apostate
							who = event_target:my_liege
						}
					}
					age = 16
					is_devil_worshiper_trigger = yes
					ai = yes
					NOR = {
						has_character_modifier = highly_suspect
						has_character_modifier = under_suspicion
					}
					ROOT = {
						OR = {
							learning = 16
							AND = {
								learning = 12
								is_in_society = monastic_order_dominican
							}
						}
					}
				}
				save_event_target_as = no_suspicion
				set_character_flag = apostate_no_suspicion
			}
			
			# Innocent person!
			random_realm_character = {
				limit = {
					prisoner = no
					NOT = { character = ROOT } # Don't catch yourself
					NOT = { character = event_target:my_liege } # Don't catch your liege
					OR = { # Nor your brethren
						NOT = { same_society_as = ROOT }
						is_in_society = no
					}
					OR = { # Nor liege's brethren
						NOT = { same_society_as = event_target:my_liege }
						is_in_society = no
					}
					NOT = { has_roots_secret_religion_truly_trigger = yes } # If you share the same secret religion, dont catch them
					NOT = { has_prevs_secret_religion_truly_trigger = yes } # If they share secret religion with the liege, dont catch them
					NOT = {
						reverse_has_opinion_modifier = {
							modifier = opinion_accused_apostate
							who = event_target:my_liege
						}
					}
					NOT = {
						higher_tier_than = BARON
					}
					age = 16
					NOR = {
						is_devil_worshiper_trigger = yes
						has_character_modifier = highly_suspect
						has_character_modifier = under_suspicion
						has_secret_religion_trait_trigger = yes
					}
				}
				save_event_target_as = innocent_victim
				set_character_flag = apostate_innocent
			}
		}
		
		if = { # If you're incompetent its more usual to accuse someone innocent
			limit = {
				OR = {
					NOT = {
						learning = 8
					}
					is_dumb_trigger = yes
				}
				event_target:innocent_victim = {
					is_alive = yes
				}
			}
			random_list = {
				20 = {
					modifier = {
						factor = 1.25
						NOT = { learning = 2 }
					}
					modifier = {
						factor = 1.25
						NOT = { learning = 4 }
					}
					modifier = {
						factor = 1.25
						NOT = { learning = 6 }
					}
					modifier = {
						factor = 1.25
						NOT = { learning = 8 }
					}
					event_target:innocent_victim = {
						save_event_target_as = accused_apostate
					}
					character_event = { id = MNM.70110 }
					break = yes
				}
				80 = {
					
				}
			}
		}
		
		if = { # If there is someone who is highly suspicious, always succeed
			limit = {
				event_target:highly_suspected_society_member = {
					is_alive = yes
				}
			}
			event_target:highly_suspected_society_member = {
				save_event_target_as = accused_apostate
			}
			character_event = { id = MNM.70110 }
			break = yes
		}
		
		if = { # If there is someone semi-suspicious, succeed a bit less often
			limit = {
				event_target:suspected_society_member = {
					is_alive = yes
				}
			}
			random_list = {
				30 = {
					modifier = {
						factor = 0
						event_target:suspected_society_member = {
							ai = no
							NOT = { check_variable = { which = visibility_value value = 19 } }
						}
					}
					modifier = {
						factor = 0.25
						event_target:suspected_society_member = {
							ai = no
						}
					}
					modifier = {
						factor = 1.25
						learning = 10
					}
					modifier = {
						factor = 1.25
						learning = 12
					}
					modifier = {
						factor = 1.25
						learning = 14
					}
					modifier = {
						factor = 1.25
						learning = 16
					}
					modifier = {
						factor = 1.25
						learning = 18
					}
					modifier = {
						factor = 1.25
						learning = 20
					}
					modifier = {
						factor = 1.25
						learning = 22
					}
					modifier = {
						factor = 1.25
						inquisitor = yes
					}
					modifier = {
						factor = 1.25
						liege = {
							independent = yes
							any_realm_province = {
								has_wonder_upgrade = upgrade_inquisition_chambers
							}
						}
					}
					event_target:suspected_society_member = {
						save_event_target_as = accused_apostate
					}
					character_event = { id = MNM.70110 }
					break = yes
				}
				70 = {
					
				}
			}
		}
		
		if = { # If there is someone with a secret religion, only succeed if you're really good
			limit = {
				event_target:suspected_apostate = {
					is_alive = yes
				}
			}
			random_list = {
				25 = {
					modifier = {
						factor = 0
						event_target:suspected_apostate = {
							ai = no
						}
					}
					modifier = {
						factor = 1.25
						learning = 10
					}
					modifier = {
						factor = 1.25
						learning = 12
					}
					modifier = {
						factor = 1.25
						learning = 14
					}
					modifier = {
						factor = 1.25
						learning = 16
					}
					modifier = {
						factor = 1.25
						learning = 18
					}
					modifier = {
						factor = 1.25
						learning = 20
					}
					modifier = {
						factor = 1.25
						learning = 22
					}
					modifier = {
						factor = 1.25
						inquisitor = yes
					}
					modifier = {
						factor = 1.25
						liege = {
							independent = yes
							any_realm_province = {
								has_wonder_upgrade = upgrade_inquisition_chambers
							}
						}
					}
					event_target:suspected_apostate = {
						save_event_target_as = accused_apostate
					}
					character_event = { id = MNM.70110 }
					break = yes
				}
				75 = {
					
				}
			}
		}
		
		if = { # If there's a secret vampire, you need to be pretty good to succeed, or they need to be fairly suspicious
			limit = {
				event_target:suspected_vampire = {
					is_alive = yes
				}
			}
			random_list = {
				10 = {
					modifier = {
						factor = 0.1
						ai = no
					}
					modifier = {
						factor = 1.3
						learning = 10
					}
					modifier = {
						factor = 1.3
						learning = 12
					}
					modifier = {
						factor = 1.3
						learning = 14
					}
					modifier = {
						factor = 1.25
						learning = 16
					}
					modifier = {
						factor = 1.25
						learning = 18
					}
					modifier = {
						factor = 1.25
						learning = 20
					}
					modifier = {
						factor = 1.25
						learning = 22
					}
					modifier = {
						factor = 1.25
						trait = monster_hunter
					}
					modifier = {
						factor = 1.1
						inquisitor = yes
					}
					modifier = {
						factor = 1.25
						liege = {
							independent = yes
							any_realm_province = {
								has_wonder_upgrade = upgrade_inquisition_chambers
							}
						}
					}
					modifier = {
						factor = 1.5
						has_instances_of_character_modifier = { modifier = known_monster amount = 1 }
					}
					modifier = {
						factor = 1.5
						has_instances_of_character_modifier = { modifier = known_monster amount = 2 }
					}
					modifier = {
						factor = 1.5
						has_instances_of_character_modifier = { modifier = known_monster amount = 3 }
					}
					modifier = {
						factor = 2
						has_game_rule = { name = secrecy value = more }
					}
					modifier = {
						factor = 0.5
						has_game_rule = { name = secrecy value = fewer }
					}
					event_target:suspected_vampire = {
						save_event_target_as = accused_apostate
					}
					character_event = { id = MONSTER.12 }
					break = yes
				}
				90 = {
				
				}
			}
		}
		
		if = { # If there's a secret werewolf, you need to be pretty good to succeed, or they need to be fairly suspicious
			limit = {
				event_target:suspected_werewolf = {
					is_alive = yes
				}
			}
			random_list = {
				10 = {
					modifier = {
						factor = 0.1
						ai = no
					}
					modifier = {
						factor = 1.3
						learning = 10
					}
					modifier = {
						factor = 1.3
						learning = 12
					}
					modifier = {
						factor = 1.3
						learning = 14
					}
					modifier = {
						factor = 1.25
						learning = 16
					}
					modifier = {
						factor = 1.25
						learning = 18
					}
					modifier = {
						factor = 1.25
						learning = 20
					}
					modifier = {
						factor = 1.25
						learning = 22
					}
					modifier = {
						factor = 1.25
						trait = monster_hunter
					}
					modifier = {
						factor = 1.1
						inquisitor = yes
					}
					modifier = {
						factor = 1.25
						liege = {
							independent = yes
							any_realm_province = {
								has_wonder_upgrade = upgrade_inquisition_chambers
							}
						}
					}
					modifier = {
						factor = 1.5
						has_instances_of_character_modifier = { modifier = known_monster amount = 1 }
					}
					modifier = {
						factor = 1.5
						has_instances_of_character_modifier = { modifier = known_monster amount = 2 }
					}
					modifier = {
						factor = 1.5
						has_instances_of_character_modifier = { modifier = known_monster amount = 3 }
					}
					modifier = {
						factor = 2
						has_game_rule = { name = secrecy value = more }
					}
					modifier = {
						factor = 0.5
						has_game_rule = { name = secrecy value = fewer }
					}
					event_target:suspected_werewolf = {
						save_event_target_as = accused_apostate
					}
					character_event = { id = MONSTER.12 }
					break = yes
				}
				90 = {
				
				}
			}
		}
		
		if = { # If there is a devil worshiper without any level of suspicion, only succeed if you're amazingly good
			limit = {
				event_target:no_suspicion = {
					is_alive = yes
				}
			}
			random_list = {
				25 = {
					modifier = {
						factor = 1.25
						learning = 18
					}
					modifier = {
						factor = 1.25
						learning = 20
					}
					modifier = {
						factor = 1.25
						learning = 22
					}
					modifier = {
						factor = 1.25
						society_member_of = monastic_order_dominican
					}
					modifier = {
						factor = 1.25
						liege = {
							independent = yes
							any_realm_province = {
								has_wonder_upgrade = upgrade_inquisition_chambers
							}
						}
					}
					event_target:no_suspicion = {
						save_event_target_as = accused_apostate
					}
					character_event = { id = MNM.70110 }
					break = yes
				}
				75 = {
					
				}
			}
		}
		
		if = { # Accidently accuse someone innocent!
			limit = {
				event_target:innocent_victim = {
					is_alive = yes
				}
			}
			random_list = {
				5 = {
					modifier = {
						factor = 1.25
						NOT = { learning = 2 }
					}
					modifier = {
						factor = 1.25
						NOT = { learning = 4 }
					}
					modifier = {
						factor = 1.25
						NOT = { learning = 6 }
					}
					modifier = {
						factor = 1.25
						NOT = { learning = 8 }
					}
					modifier = {
						factor = 1.25
						is_dumb_trigger = yes
					}
					modifier = {
						factor = 0.9
						liege = {
							independent = yes
							any_realm_province = {
								has_wonder_upgrade = upgrade_inquisition_chambers
							}
						}
					}
					event_target:innocent_victim = {
						save_event_target_as = accused_apostate
					}
					character_event = { id = MNM.70110 }
					break = yes
				}
				95 = {
					
				}
			}
		}
	}
	
	mean_time_to_happen = {
		months = 100

		job_event_mtth_modifier_learning_score = yes
		modifier = {
			factor = 0.75
			inquisitor = yes
		}
		modifier = {
			factor = 0.75
			liege = {
				independent = yes
				any_realm_province = {
					has_wonder_upgrade = upgrade_inquisition_chambers
				}
			}
		}
		modifier = {
			factor = 2
			NOT = { religion_authority = 0.1 }
		}
		modifier = {
			factor = 1.5
			NOT = { religion_authority = 0.2 }
		}
		modifier = {
			factor = 1.25
			NOT = { religion_authority = 0.3 }
		}
		modifier = {
			factor = 1.25
			NOT = { religion_authority = 0.4 }
		}
		modifier = {
			factor = 1.25
			NOT = { religion_authority = 0.5 }
		}
		modifier = {
			factor = 0.9
			religion_authority = 0.6
		}
		modifier = {
			factor = 0.9
			religion_authority = 0.7
		}
		modifier = {
			factor = 0.9
			religion_authority = 0.8
		}
		modifier = {
			factor = 0.9
			religion_authority = 0.9
		}
	}
}

# 929: Plot Uncovered
character_event = {
	id = 929
	title = "EVTNAME929"
	desc = "EVTDESC929"
	picture = GFX_evt_council
	border = GFX_event_normal_frame_intrigue
	desc = {
		trigger = { event_target:accused_apostate = { has_character_flag = accused_plot } }
		text = "EVTDESC929"
	}
	desc = {
		trigger = { event_target:accused_apostate = { has_character_flag = accused_werewolf } }
		text = EVTDESC929.werewolf
	}
	desc = {
		trigger = { event_target:accused_apostate = { has_character_flag = accused_vampire } }
		text = EVTDESC929.vampire
	}
	
	min_age = 16
	capable_only = yes
	prisoner = no
	has_job_title = yes
	
	trigger = {
		has_job_action = action_uncover_plots
		NOT = { has_character_modifier = in_seclusion }
		NOT = { has_character_modifier = bedridden_illness }
		NOT = { trait = incapable }
		location = {
			any_province_character = {
				NOT = { is_liege_of = ROOT }
				NOT = { character = ROOT }
				OR = {
					has_plot = plot_gain_title
					has_plot = plot_kill_character
					has_plot = plot_kill_spouse
					has_plot = plot_weaken_fellow_vassal
					has_plot = plot_gain_liege_title
					has_plot = plot_gain_fellow_vassal_title
					AND = {
						trait = secret_werewolf
						ROOT = { 
							NOR = { 
								trait = werewolf
								culture = werewolf_culture
							}
						}
					}
					AND = {
						trait = secret_vampire
						ROOT = { 
							NOR = { 
								trait = werewolf
								culture = werewolf_culture
								religion = satanist
							}
						}
					}
				}
			}
		}
	}
	
	mean_time_to_happen = {
		months = 120
		
		job_event_mtth_modifier_intrigue_score = yes
	}
	
	immediate = {
		location = {
			random_province_character = {
				limit = {
					NOT = { is_liege_of = ROOT }
					NOT = { character = ROOT }
					OR = {
						has_plot = plot_gain_title
						has_plot = plot_kill_character
						has_plot = plot_kill_spouse
						has_plot = plot_weaken_fellow_vassal
						has_plot = plot_gain_liege_title
						has_plot = plot_gain_fellow_vassal_title
						AND = {
							trait = secret_werewolf
							ROOT = { 
								NOR = { 
									trait = werewolf
									culture = werewolf_culture
								}
							}
						}
						AND = {
							trait = secret_vampire
							ROOT = { 
								NOR = { 
									trait = werewolf
									culture = werewolf_culture
									religion = satanist
								}
							}
						}
					}
				}
				if = {
					limit = {
						OR = {
							AND = {
								trait = secret_werewolf
								ROOT = { 
									NOR = { 
										trait = werewolf
										culture = werewolf_culture
									}
								}
							}
							AND = {
								trait = secret_vampire
								ROOT = { 
									NOR = { 
										trait = werewolf
										culture = werewolf_culture
										religion = satanist
									}
								}
							}
						}
						OR = {
							has_plot = plot_gain_title
							has_plot = plot_kill_character
							has_plot = plot_kill_spouse
							has_plot = plot_weaken_fellow_vassal
							has_plot = plot_gain_liege_title
							has_plot = plot_gain_fellow_vassal_title
						}
					}
					random_list = {
						3 = {
							set_character_flag = accused_plot
						}
						1 = {
							if = {
								limit = { trait = secret_werewolf }
								set_character_flag = accused_werewolf
							}
							else = {
								set_character_flag = accused_vampire
							}
						}
					}
				}
				else_if = {
					limit = { trait = secret_werewolf }
					set_character_flag = accused_werewolf
				}
				else_if = {
					limit = { trait = secret_vampire }
					set_character_flag = accused_vampire
				}
				else = {
					set_character_flag = accused_plot
				}
				save_event_target_as = accused_apostate # Name used to match MnM version
			}
		}
	}
					
	
	option = {
		trigger = { event_target:accused_apostate = { has_character_flag = accused_plot } }
		name = "EVTOPTA929"
		hidden_tooltip = {
			event_target:accused_apostate = {
				character_event = { id = 20290 days = 7 }
			}
		}
	}
	
	option = {
		trigger = { event_target:accused_apostate = { has_character_flag = accused_vampire } }
		name = EVTOPTA929.vampire
		event_target:accused_apostate = {
			opinion = {
				modifier = opinion_hate
				who = ROOT
				years = 100
			}
		}
		
		custom_tooltip = {
			text = monster_found_tooltip
		}
		
		hidden_tooltip = {
			if = {
				limit = { lifestyle_traits < 1 }
				random = {
					chance = 30
					character_event = { id = MONSTER.15 }
				}
			}
		}
		
		liege = {
			character_event = { id = MONSTER.13 }
		}
	}
	
	option = {
		trigger = { event_target:accused_apostate = { has_character_flag = accused_werewolf } }
		name = EVTOPTA929.werewolf
		event_target:accused_apostate = {
			opinion = {
				modifier = opinion_hate
				who = ROOT
				years = 100
			}
		}
		
		custom_tooltip = {
			text = monster_found_tooltip
		}
		
		hidden_tooltip = {
			if = {
				limit = { lifestyle_traits < 1 }
				random = {
					chance = 30
					character_event = { id = MONSTER.15 }
				}
			}
		}
		
		liege = {
			character_event = { id = MONSTER.13 }
		}
	}
}

#Intrigue quest step 3 ghost success
narrative_event = {
	title = EVTNAME_RIP_21322
	id = RIP.21322
	desc = EVTDSC_RIP_21322
	border = GFX_event_narrative_frame_intrigue
	picture = GFX_evt_shadowy_cabal

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}

	fail_trigger_effect = {
		if = {
			limit = {
				FROM = { is_alive = no }
			}
			character_event = { id = RIP.21099 }
		}
	}

	option = {
		name = EVTOPTA_RIP_21322
		custom_tooltip = { text = EVTOPTA_RIP_21322_TOOLTIP } 
		#add_trait = immortal
		if = { 
			limit = { 
				is_female = no 
				has_dlc = "Holy Fury"
			}
			create_bloodline = {
				type = immortal_bloodline_01
			}       
		}
		if = { 
			limit = { 
				is_female = yes 
				has_dlc = "Holy Fury"
			}
			create_bloodline = {
				type = immortal_bloodline_01
				inheritance = matrilineal
			}       
		}

		add_artifact = philosopher_stone
		hidden_tooltip = { add_trait = philosopher_stone_trait }

		if = {
			limit = { trait = incapable }
			remove_trait = incapable
		}

		hidden_tooltip = {
			event_target:eternal_life_mystic = { add_trait = immortal }
			FROM =  {
				remove_opinion = {
					who = ROOT
					modifier = opinion_finished_mystic_task_2
				}
			}
		}
		FROM = {
			show_scope_change = no
			opinion = {
				who = ROOT
				modifier = opinion_finished_mystic_task_3
			}
		}
	}
}

#Intrigue quest step 3 search success 
narrative_event = {
	title = EVTNAME_RIP_21324
	id = RIP.21324
	desc = EVTDSC_RIP_21324
	border = GFX_event_narrative_frame_intrigue
	picture = GFX_evt_shadowy_cabal

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}

	fail_trigger_effect = {
		if = {
			limit = {
				FROM = { is_alive = no }
			}
			character_event = { id = RIP.21099 }
		}
	}

	option = {
		name = EVTOPTA_RIP_21324
		custom_tooltip = { text = EVTOPTA_RIP_21324_TOOLTIP } 
		#add_trait = immortal
		add_artifact = philosopher_stone
		if = { 
			limit = { 
				is_female = no 
				has_dlc = "Holy Fury"
			}
			create_bloodline = {
				type = immortal_bloodline_01
			}       
		}
		if = { 
			limit = { 
				is_female = yes 
				has_dlc = "Holy Fury"
			}
			create_bloodline = {
				type = immortal_bloodline_01
				inheritance = matrilineal
			}       
		}
		hidden_tooltip = { add_trait = philosopher_stone_trait }

		if = {
			limit = { trait = incapable }
			remove_trait = incapable
		}

		hidden_tooltip = {
			
			event_target:eternal_life_mystic = { add_trait = immortal }
			
			FROM =  {
				remove_opinion = {
					who = ROOT
					modifier = opinion_finished_mystic_task_2
				}
			}
		}
		FROM = {
			show_scope_change = no
			opinion = {
				who = ROOT
				modifier = opinion_finished_mystic_task_3
			}
		}
	}
}

# Attacker discovered after failed murder - consequences.
# (Should be fired for the attacker. The victim is event_target:target_victim.)
character_event = {
	id = 11
	
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		event_target:target_victim = {
			opinion = {
				who = ROOT
				modifier = opinion_murder_attempt
				months = 600
			}
			
			any_liege = {
				limit = {
					is_close_relative = PREV
					NOT = { character = ROOT }
					NOT = { dynasty = ROOT }
				}
				opinion = {
					who = ROOT
					modifier = opinion_dishonorable
					months = 60
				}
			}
			
			if = {
				limit = {
					NOT = { dynasty = ROOT }
				}
				any_dynasty_member = {
					opinion = {
						who = ROOT
						modifier = opinion_dishonorable
						months = 60
					}
				}
			}
			
			if = {
				limit = {
					mother = {
						NOT = { character = ROOT }
						NOT = { is_mother = ROOT }
					}
				}
				mother = {
					opinion = {
						who = ROOT
						modifier = attempted_murder_of_child
						months = 120
					}
				}
			}
			if = {
				limit = {
					father = {
						NOT = { character = ROOT }
						NOT = { is_father = ROOT }
					}
				}
				father = {
					opinion = {
						who = ROOT
						modifier = attempted_murder_of_child
						months = 120
					}
				}
			}
			
			any_child = {
				limit = {
					NOT = { character = ROOT }
					NOT = { is_child_of = ROOT }
				}
				opinion = {
					who = ROOT
					modifier = attempted_murder_of_parent
					months = 120
				}
			}
			
			any_sibling = {
				limit = {
					NOT = { character = ROOT }
					NOT = { sibling = ROOT }
				}
				opinion = {
					who = ROOT
					modifier = attempted_murder_of_sibling
					months = 60
				}
			}
			
			if = {
				limit = {
					ROOT = {
						trait = vampire
						is_voter = yes
						liege = { character = event_target:target_victim }
					}
					government = blood_court_government
					trait = vampire
					is_incapable = no
					prisoner = no
					is_adult = yes
					NOT = { is_inaccessible_trigger = yes }
				}
				opinion = { who = ROOT modifier = can_blood_bond }
			}
		}
	}
}

# Friend or family member worries about dangerous research
character_event = {
	id = WoL.6120
	
	hide_window = yes
	
	is_triggered_only = yes

	trigger = {
		has_focus = focus_scholarship
		prisoner = no
		NOT = { trait = incapable }
	}

	immediate = {
		if = {
			limit = {
				NOT = {
					any_courtier = {
						ai = yes
						is_adult = yes
						trait = zealous
						at_location = ROOT
						NOT = { religion = zun_pagan }
						NOT = { religion = zun_pagan_reformed }
						NOT = { religion = buddhist }
						NOT = { religion = atenist }
						OR = {
							mother = { character = ROOT }
							father = { character = ROOT }
							any_child = { character = ROOT }
							AND = {
								any_sibling = { character = ROOT }
								NOT = { is_rival = ROOT }
							}
							is_friend = ROOT
						}
					}
				}
			}
			character_event = { id = WoL.6130 days = 180 }
			break = yes                                         # NOTE
		}
		
		random_courtier = {
			limit = {
				is_adult = yes
				trait = zealous
				at_location = ROOT
				NOT = { religion = zun_pagan }
				NOT = { religion = zun_pagan_reformed }
				NOT = { religion = buddhist }
				NOT = { religion = atenist }
				OR = {
					mother = { character = ROOT }
					father = { character = ROOT }
					any_child = { character = ROOT }
					AND = {
						any_sibling = { character = ROOT }
						NOT = { is_rival = ROOT }
					}
					is_friend = ROOT
				}
			}
			character_event = { id = WoL.6121 } # Friend or family is worried
		}
	}
}

# Religious authorities find out
character_event = {
	id = WoL.6150

	hide_window = yes
	
	is_triggered_only = yes

	trigger = {
		has_focus = focus_scholarship
		prisoner = no
		NOT = { trait = incapable }
	}

	immediate = {
		if = {
			limit = {
				religion_head = { is_alive = yes }
				religion_head = { ai = yes }
				NOT = { religion = zun_pagan_reformed }
				NOT = { religion = atenist }
			}
			religion_head = {
				character_event = { id = WoL.6151 } # Religious head opines
			}
			break = yes
		}
		character_event = { id = WoL.6160 } # Else skip to next
	}
}

character_event = {
	id = WoL.6170
	desc = EVTDESC_WoL_6170
	picture = GFX_evt_scientist
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes

	trigger = {
		has_focus = focus_scholarship
		prisoner = no
		NOT = { trait = incapable }
	}

	option = {
		name = EVTOPTA_WoL_6170 # Publish findings
		prestige = 300
		if = {
			limit = { NOT = { lifestyle_traits = 1 } }
			remove_character_modifier = studying_the_stars
			add_trait = scholar
		}
		if = {
			limit = { has_nickname = no }
			random_list = {
				10 = {
					give_nickname = nick_the_wise
				}
				10 = {
					give_nickname = nick_the_able
				}
				10 = {
					give_nickname = nick_the_scholar
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							religion = zun_pagan
							religion = zun_pagan_reformed
							religion = buddhist
							religion = atenist
						}
					}
					give_nickname = nick_priest_hater
				}
			}
		}
		if = {
			limit = {
				NOR = {
					religion = zun_pagan
					religion = zun_pagan_reformed
					religion = buddhist
					religion = atenist
				}
			}
			add_character_modifier = {
				name = annoyed_religious
				years = -1
			}
		}
		custom_tooltip = {
			text = "WOL_6170_OPINION_EFFECT"
			hidden_effect = {
				any_realm_character = {
					limit = {
						OR = {
							is_priest = yes
							trait = zealous
						}
						NOR = {
							religion = zun_pagan
							religion = zun_pagan_reformed
							religion = buddhist
							religion = atenist
						}
					}
					opinion = {
						modifier = opinion_heretic
						who = ROOT
						years = 5
					}
				}
			}
		}
	}
	option = {
		name = EVTOPTB_WoL_6170 # Keep it secret but continue dedicating myself to knowledge
		if = {
			limit = { NOT = { lifestyle_traits = 1 } }
			remove_character_modifier = studying_the_stars
			add_trait = scholar
		}
	}
	option = {
		name = EVTOPTC_WoL_6170 # Very interesting but I'm done with this
		remove_character_modifier = studying_the_stars
		add_character_modifier = {
			name = heliocentrist_scholar
			duration = -1
		}
	}
	option = {
		name = EVTOPTD_WoL_6170 # This is heretical - I must burn it!
		trigger = {
			NOR = {
				religion = zun_pagan
				religion = zun_pagan_reformed
				religion = buddhist
				religion = atenist
			}
		}
		remove_character_modifier = studying_the_stars
		if = {
			limit = {
				NOT = { trait = zealous }
				NOT = { trait = cynical }
			}
			add_trait = zealous
		}
		if = {
			limit = {
				trait = cynical
			}
			remove_trait = cynical
		}
	}
}

# On-action event: Birth complications - Pointing out that the baby receives this event, and thus he is the one that has to decide if his mother gets to die or not.
character_event = {
	id = 313
	desc = OK
	
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		NOT = { age = 1 }
	}

	immediate = {
		if = { 
			limit = { 
				mother_even_if_dead = { 
					OR = { 
						has_character_flag = gabriel_baby
						has_character_flag = lucifer_baby
						has_character_flag = iblis_baby
						has_character_flag = thor_baby
						has_character_flag = loki_baby
						has_character_flag = tengri_baby
						has_character_flag = erlik_baby 
					} 
				}
			}
			character_event = { id = HFP.20538 days = 1 }
		}
		random_list = {
			80 = {
				# All is well
			}
			10 = {
				modifier = { #Old remedy
					factor = 0.25
					mother = {
						has_character_flag = flag_mother_dark_rest 
					}
				}
				modifier = {
					factor = 0
					OR = { 
						has_character_flag = gabriel_baby
						has_character_flag = lucifer_baby
						has_character_flag = iblis_baby
						has_character_flag = thor_baby
						has_character_flag = loki_baby
						has_character_flag = tengri_baby
						has_character_flag = erlik_baby 
					}
				}
				add_trait = sickly
				update_sickly_trait = yes

				#Sickly infant treatment event
				if = {
					limit = { 
						has_dlc = "Reapers" 
						host = {
							any_courtier_or_vassal = {
								has_minor_title = title_court_physician 
								liege = { character = PREVPREV }
							}
						}
					}

					save_event_target_as = sickly_infant
					father = { save_event_target_as = sickly_father }

					#Decided which parent will choose treatment
					if = { 
						limit = { 
							father = { is_ruler = yes } 
							host = { character = event_target:sickly_father }
							NOT = { mother = { is_ruler = yes } }
						}
						father = { save_event_target_as = infant_guardian }
					}

					if = { 
						limit = { 
							NOT = {
								father = { is_ruler = yes } 
								host = { character = event_target:sickly_father }
								NOT = { mother = { is_ruler = yes } }
							}
						}
						mother = { save_event_target_as = infant_guardian }
					}

					#Makes court physician examine child
					host = { 
						random_courtier_or_vassal = {
							limit = { 
								has_minor_title = title_court_physician 
								liege = { character = PREVPREV }
							}
							character_event = { id = RIP.11066 days = 7 }
						}
					}
				}
			}
		}
	}

	option = { # No complications
		name = OK
		trigger = { 
			NOT = { 
				mother = { trait = troubled_pregnancy }
			} 
		}
		ai_chance = {
			factor = 80
			modifier = {
				factor = 2.0
				mother = {
					health = 6
				}
			}
			modifier = {
				factor = 2.0
				mother = {
					health = 7
				}
			}
			modifier = {
				factor = 2.0
				mother = {
					num_of_children = 3
				}
			}
			modifier = {
				factor = 0.85
				mother = {
					age = 20
				}
			}
			modifier = {
				factor = 0.85
				mother = {
					age = 25
				}
			}
			modifier = {
				factor = 0.85
				mother = {
					age = 30
				}
			}
		}
	}
	option = { # Mother gets ill
		name = OK
		trigger = { 
			NOT = { 
				mother = { trait = troubled_pregnancy }
			} 
			NOT = { 
				mother = { is_ill = yes }
			} 
		}
		ai_chance = {
			factor = 4
			modifier = {
				factor = 2
				mother = {
					trait = hard_pregnancy
				}
			}
			modifier = {
				factor = 2.0
				mother = {
					NOT = { health = 4.1 }
				}
			}
			modifier = {
				factor = 1.5
				mother = {
					NOT = { num_of_children = 2 }
				}
			}
		}
		
		mother = {
			character_event = { id = 315 }
		}
	}
	
	option = { # Mother has troubled pregnancy.
		name = OK
		trigger = { 
			OR = { 
				mother = { trait = troubled_pregnancy }
				mother = { is_ill = yes }
				mother = { check_variable = { which = troubled_pregnancy_variable value = 1 } }
			} 
		}
		ai_chance = {
			factor = 16
			
			modifier = {
				factor = 2.0
				mother = {
					NOT = { health = 4.1 }
				}
			}
			modifier = {
				factor = 6.0
				mother = {
					NOT = { health = 3.1 }
				}
			}
			modifier = {
				factor = 1.5
				mother = {
					NOT = { num_of_children = 2 }
				}
			}
			
			modifier = {
				factor = 1.5
				mother = {
					check_variable = { which = troubled_pregnancy_variable value = 2 }
				}
			}
			modifier = {
				factor = 1.5
				mother = {
					check_variable = { which = troubled_pregnancy_variable value = 3 }
				}
			}
			modifier = {
				factor = 2
				mother = {
					check_variable = { which = troubled_pregnancy_variable value = 4 }
				}
			}
			modifier = {
				factor = 3
				mother = {
					check_variable = { which = troubled_pregnancy_variable value = 5 }
				}
			}
		}
		
		mother = {
				character_event = { id = 316 } #Troubled pregnancy gets worse.
		}
	}
}

character_event = { #birth
	id = MNM.7508
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		mother = {
			has_character_flag = DW_unholy_mother
		}
	}
	
	immediate = {
		add_trait = lefthanded
		set_character_flag = demon_child_non_pagan
		set_global_flag = demon_child_born
		add_character_modifier = {
			name = demon_child_non_pagan
			hidden = yes
			days = -1
		}
		if = {
			limit = {
				mother = { society_member_of = the_satanists }
			}
			ROOT = {
				set_character_flag = demonspawn_will_join_satanists
			}
		}
		if = {
			limit = {
				mother = { society_member_of = the_cold_ones }
			}
			ROOT = {
				set_character_flag = demonspawn_will_join_cold_ones
			}
		}
		if = {
			limit = {
				mother = { society_member_of = the_plaguebringers }
			}
			ROOT = {
				set_character_flag = demonspawn_will_join_plaguebringers
			}
		}
		if = {
			limit = {
				mother = { society_member_of = the_cult_of_kali }
			}
			ROOT = {
				set_character_flag = demonspawn_will_join_cult_of_kali
			}
		}
		if = {
			limit = {
				mother = { society_member_of = the_trollcrafters }
			}
			ROOT = {
				set_character_flag = demonspawn_will_join_trollcrafters
			}
		}
		if = {
			limit = {
				mother = { society_member_of = the_bacchants }
			}
			ROOT = {
				set_character_flag = demonspawn_will_join_bacchants
			}
		}
		if = {
			limit = {
				mother = { society_member_of = the_vodouns }
			}
			ROOT = {
				set_character_flag = demonspawn_will_join_vodouns
			}
		}
		remove_sickly = yes
		character_event = { id = SoA.3019 days = 90 random = 90 } # Demon child tombola
		#random_list = {
		#	50 = { set_character_flag = demon_child_non_pagan }
		#	50 = { set_character_flag = demon_child_fake }
		#}
		mother = { 
			clr_character_flag = DW_unholy_mother 
			save_event_target_as = unholy_mother
			any_quester_targeting_this = {
				limit = { has_quest = quest_the_devil_worshipers_demonic_impregnation }
				character_event = { id = MNM.7511 days = 10 }
			}
		}	
	}
}

#Reactions to firstborn
character_event = {
	id = RIP.29601
	border = GFX_event_normal_frame_religion
	picture = GFX_evt_birth 

	trigger = {
		FROM = { is_child_of = ROOT }
		NOT = { has_character_modifier = good_relationship_omen }
		NOT = { has_character_modifier = bad_relationship_omen }
	}

	immediate = {
		#Child is ugly
		if = {
			limit = { FROM = { trait = ugly } }
			set_character_flag = text_ugly
			break = yes
		}

		#Child is weak/sickly/inbred
		if = {
			limit = { 
				FROM = { 
					OR = {
						is_sickly = yes
						trait = inbred
						trait = weak 
					}
				} 
			}
			set_character_flag = text_weak
			break = yes
		}

		#Child is strong
		if = {
			limit = { FROM = { trait = strong } }
			set_character_flag = text_strong
			break = yes
		}

		#Child is bastard
		if = {
			limit = { FROM = { trait = bastard } }
			set_character_flag = text_bastard
			break = yes
		}
		#Female won't inherit
		if = {
			limit = {
				FROM = { is_female = yes }
				OR = {
					primary_title = { has_law = agnatic_succession }
					primary_title = { has_law = succ_patrician_elective }
					religion_group = muslim
				}	
			}
			set_character_flag = text_girl_cant_inherit
			break = yes
		}
		#Firstborn will inherit
		if = {
			limit = {
				FROM = {
					OR = {
						AND = {
							is_female = yes
							ROOT = { primary_title = { has_law = true_cognatic_succession } }
						}
						is_female = no
					}
				}
				OR = {
					has_law = succ_primogeniture
					has_law = succ_gavelkind
				}
			}
			set_character_flag = text_firstborn_inherits
			break = yes
		}
		#All other outcomes
		set_character_flag = text_unsure_future
	}

	desc = {
		trigger = { has_character_flag = text_bastard }
		text = EVTDSC_RIP_29601_A
	}
	desc = {
		trigger = { has_character_flag = text_girl_cant_inherit }
		text = EVTDSC_RIP_29601_B
	}
	desc = {
		trigger = { has_character_flag = text_firstborn_inherits }
		text = EVTDSC_RIP_29601_C
	}
	desc = {
		trigger = { has_character_flag = text_unsure_future }
		text = EVTDSC_RIP_29601_D
	}
	desc = {
		trigger = { has_character_flag = text_ugly }
		text = EVTDSC_RIP_29601_E
	}
	desc = {
		trigger = { has_character_flag = text_weak }
		text = EVTDSC_RIP_29601_F
	}
	desc = {
		trigger = { has_character_flag = text_strong }
		text = EVTDSC_RIP_29601_G
	}

	is_triggered_only = yes

	option = {
		name = {
			trigger = { has_character_flag = text_bastard }
			text = EVTOPTA_RIP_29601_A
		}
		name = {
			trigger = { has_character_flag = text_girl_cant_inherit }
			text = EVTOPTA_RIP_29601_B
		}
		name = {
			trigger = { has_character_flag = text_firstborn_inherits }
			text = EVTOPTA_RIP_29601_C
		}
		name = {
			trigger = { has_character_flag = text_unsure_future }
			text = EVTOPTA_RIP_29601_A
		}
		name = {
			trigger = { has_character_flag = text_ugly }
			text = EVTOPTA_RIP_29601_D
		}
		name = {
			trigger = { has_character_flag = text_weak }
			text = EVTOPTA_RIP_29601_E
		}
		name = {
			trigger = { has_character_flag = text_strong }
			text = EVTOPTA_RIP_29601_F
		}

		hidden_tooltip = {
			if = { 
				limit = { has_character_flag = text_firstborn_inherits }
				FROM = { prestige = 50 }
			}
		}

		if = {
			limit = {
				OR = {
					has_character_flag = text_firstborn_inherits
					has_character_flag = text_strong
				}
				NOT = { FROM = { mother = { character = ROOT } } }
			}
			
			FROM = { mother = { save_event_target_as = firstborn_mother } }

			opinion = {
				who = event_target:firstborn_mother
				modifier = opinion_mother_of_my_child
				years = 5
			}
		}

		clr_character_flag = text_bastard
		clr_character_flag = text_girl_cant_inherit
		clr_character_flag = text_firstborn_inherits
		clr_character_flag = text_unsure_future
		clr_character_flag = text_ugly
		clr_character_flag = text_weak
		clr_character_flag = text_strong
	}
}

# Event triggers for the child
# Can also be fired from event 335
character_event = {
	id = SoA.3001
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		set_character_flag = demon_child_non_pagan
		set_global_flag = demon_child_born
		add_character_modifier = {
			name = demon_child_non_pagan
			hidden = yes
			days = -1
		}
		remove_sickly = yes
		FROM = { narrative_event = { id = SoA.3002 } }
		character_event = { id = SoA.3019 days = 90 random = 90 } # Demon child tombola
	}
}

# Bring in some settlers
province_event = {
	id = 55001
	desc = "EVTDESC55001"
	picture = GFX_evt_culture_change
	
	trigger = {
		
		OR = {
			port = yes
			NOR = {
				has_game_rule = {
					name = culture_conversion
					value = restricted
				}
				has_game_rule = {
					name = culture_conversion
					value = faster_melting_pots_and_slower_normal
				}
			}
		}
		
		owner = {
			top_liege = {
				culture = PREV
			}
			NOT = { culture = ROOT }
			capital_scope = {
				province_id = ROOT
			}
			
			OR = {
				primary_title = {
					conquest_culture = PREV
				}
				ROOT = {
					county = {
						conquest_culture = PREVPREV
					}
				}
				ROOT = {
					duchy = {
						holder_scope = {
							character = PREVPREVPREV
						}
						conquest_culture = PREVPREV
					}
				}
				ROOT = {
					kingdom = {
						holder_scope = {
							character = PREVPREVPREV
						}
						conquest_culture = PREVPREV
					}
				}
				ROOT = {
					empire = {
						holder_scope = {
							character = PREVPREVPREV
						}
						conquest_culture = PREVPREV
					}
				}
			}
		}
		
		NOT = { # Exclude provinces covered by event 55000
			any_neighbor_province = {
				has_owner = yes
				ROOT = {
					owner = {
						culture = PREVPREV
					}
				}
				owner = {
					ROOT = {
						owner = {
							culture = PREVPREV
						}
					}
				}
				NOR = {
					has_province_modifier = depopulated_1
					has_province_modifier = depopulated_2
					has_province_modifier = depopulated_3
				}
			}
		}
		
		NOT = { # No flipping back to Norse culture before 1150
			AND = {
				owner = { culture = norse }
				ROOT = {
					OR = {
						culture = swedish
						culture = norwegian
						culture = danish
						culture = norman
					}
				}
				NOT = {	has_global_flag = norse_culture_flipping }
			}
		}
	}
	
	mean_time_to_happen = {
		months = 1200
		
		modifier = {
			factor = 1.5
			owner = { NOT = { stewardship = 2 } }
		}
		modifier = {
			factor = 1.5
			owner = { NOT = { stewardship = 3 } }
		}
		modifier = {
			factor = 1.5
			owner = { NOT = { stewardship = 4 } }
		}
		modifier = {
			factor = 1.5
			owner = { NOT = { stewardship = 5 } }
		}
		modifier = {
			factor = 0.95
			owner = {
				job_treasurer = {
					NOT = {
						stewardship = 10
					}
					has_job_action = action_administer_realm
				}
			}
		}
		modifier = {
			factor = 0.75
			owner = {
				job_treasurer = {
					stewardship = 10
					has_job_action = action_administer_realm
				}
			}
		}
		modifier = {
			factor = 0.75
			owner = { stewardship = 9 }
		}
		modifier = {
			factor = 0.75
			owner = { stewardship = 11 }
		}
		modifier = {
			factor = 0.75
			owner = { stewardship = 13 }
		}
		modifier = {
			factor = 0.75
			owner = { stewardship = 15 }
		}
		modifier = {
			factor = 0.9
			owner = { stewardship = 20 }
		}
		modifier = {
			factor = 0.9
			owner = { stewardship = 25 }
		}
		modifier = {
			factor = 0.9
			owner = { stewardship = 30 }
		}
		modifier = {
			factor = 0.75
			has_province_flag = recent_depopulation_1
		}
		modifier = {
			factor = 0.5
			has_province_flag = recent_depopulation_2
		}
		modifier = {
			factor = 0.25
			has_province_flag = recent_depopulation_3
		}
		modifier = {
			factor = 0.8
			has_province_modifier = devastation_1
		}
		modifier = {
			factor = 0.6
			has_province_modifier = devastation_2
		}
		modifier = {
			factor = 0.4
			has_province_modifier = devastation_3
		}
		modifier = {
			factor = 0.5 # Altaic nomad steppe bonus vs non-Altaics
			owner = {
				culture_group = altaic
			}
			OR = {
				owner = {
					is_capital = ROOT
				}
				AND = {
					NOT = { culture_group = altaic }
					terrain = steppe
				}
			}
		}
		modifier = {
			factor = 3
			OR = {
				has_game_rule = {
					name = culture_conversion
					value = slower_normal
				}
				has_game_rule = {
					name = culture_conversion
					value = faster_melting_pots_and_slower_normal
				}
			}
		}
		modifier = {
			factor = 0.25
			OR = {
				culture = zhangzhung
				culture = sumpa
			}
			owner = {
				culture = bodpa
				OR = {
					any_owned_bloodline = {
						has_bloodline_flag = bloodline_songtsen_gampo
					}
					top_liege = {
						any_owned_bloodline = {
							has_bloodline_flag = bloodline_songtsen_gampo
						}
					}
				}
			}
		}
		modifier = { #Roman Renaissance.
			factor = 0.5
			has_global_flag = flag_started_roman_renaissance
			owner = { culture = roman }
			location = { county = { culture_group = latin } }
		}
		modifier = { #Greek culture is more impervious to Romanization.
			factor = 2
			owner = { culture = roman }
			location = { county = { culture = greek } }
		}
	}

	option = {
		name = "EVTOPTA55001"
		owner = {
			ROOT = {
				culture = PREV
				if = {
					limit = {
						NOT = { religion = PREV }
					}
					religion = PREV
				}
				if = {
					limit = {
						has_province_modifier = nomad_agitation
					}
					remove_province_modifier = nomad_agitation
				}
			}
		}
	}
}

# A ruler is assimilated by the local culture
character_event = {
	id = 55010
	desc = "EVTDESC55010"
	picture = GFX_evt_stone_church
	
	only_rulers = yes
	min_age = 16
	capable_only = yes
	prisoner = no
	lacks_dlc = "Rajas of India" # Controlled by Decision: convert_to_local_culture
	
	trigger = {
		NOT = { government = nomadic_government }
		primary_title = { 
			NOT = { conquest_culture = ROOT } 
			NOT = { culture = ROOT }
			any_previous_holder = {
				NOT = { character = ROOT } # The first holder of a title does not convert
			}
		}
		capital_scope = {
			NOT = { culture = ROOT }
			OR = {
				NOT = { culture = saxon }
				NOT = { ROOT = { culture = norman } }
			}
			OR = {
				NOT = { culture_group = undead_culture_group }
				ROOT = { culture_group = undead_culture_group }
			}
			OR = {
				culture_group = undead_culture_group
				ROOT = { NOT = { culture_group = undead_culture_group } }
			}
			
			OR = { # Not when Norman culture should appear
				ROOT = { NOT = { culture = norse } }
				AND = {
					NOT = { culture = frankish }
					NOT = {	culture = breton }
					NOT = { culture = occitan }
				}
				NOT = { has_dlc = "The Old Gods" }
			}
		}
		top_liege = {
			OR = {
				character = ROOT
				ROOT = { 
					capital_scope = {
						culture = PREVPREV
					}
				}
			}
		}
		NOT = { government = chinese_imperial_government }
	}
	
	mean_time_to_happen = {
		months = 1200
		modifier = {
			factor = 0.5
			top_liege = {
				NOT = { character = ROOT }
				ROOT = { 
					capital_scope = {
						culture = PREVPREV
					}
				}
			}
		}
		modifier = {
			factor = 0.5
			primary_title = {
				ROOT = {
					capital_scope = {
						culture = PREVPREV
					}
				}
			}
		}
		modifier = {
			factor = 2.0
			capital_scope = {
				culture_group = ROOT # Same culture group: slower assimilation
			}
		}
	}

	option = {
		name = "EVTOPTA55010"
		
		# Piss off the appropriate vassals
		any_vassal = {
			limit = {
				culture = ROOT
				age = 16
			}
			opinion = {
				who = ROOT
				modifier = opinion_adopted_foreign_ways
				years = 10
			}
			hidden_tooltip = { character_event = { id = 55011 days = 0 } }
		}
		
		capital_scope = {
			reverse_culture = ROOT
		}
	}
	
	option = {
		name = "EVTOPTB55010"
		ai_chance = {
			factor = 0
		}
	}
}

### Someone does not believe in God! ###
character_event = {
	id = 100080
	desc = EVTDESC100080
	picture = GFX_evt_child_talking
	
	min_age = 4
	max_age = 14
	prisoner = no
	only_capable = yes
	only_playable = yes
	religion_group = christian
	
	is_triggered_only = yes
	
	trigger = {
		is_inaccessible_trigger = no
		trait = zealous
		NOT = { religion = the_damned }
		NOT = {
			num_of_friends = 2
		}
		NOT = {
			num_of_rivals = 2
		}
		host = {
			any_courtier = {
				is_inaccessible_trigger = no
				prisoner = no
				same_sex = ROOT
				age = 11
				NOT = {
					age = 16
				}
				at_location = ROOT
				trait = cynical
				NOT = { religion = the_damned }
				NOT = {
					sibling = ROOT
				}
				NOT = {
					num_of_friends = 2
				}
				NOT = {
					num_of_rivals = 2
				}
				NOT = {
					is_friend = ROOT
				}
				NOT = {
					is_rival = ROOT
				}
			}
		}
	}
	
	option = {
		name = EVTOPTA100080
		piety = 10
	}	
	option = {
		name = EVTOPTB100080
		host = {
			any_courtier = {
				limit = {
					is_inaccessible_trigger = no
					prisoner = no
					same_sex = ROOT
					age = 11
					NOT = {
						age = 16
					}
					at_location = ROOT
					OR = {
						trait = cynical
						NOT = {
							trait = zealous
						}
					}
					NOT = { religion = the_damned }
					NOT = {
						sibling = ROOT
					}
					NOT = {
						num_of_friends = 2
					}
					NOT = {
						num_of_rivals = 2
					}
					NOT = {
						is_friend = ROOT
					}
					NOT = {
						is_rival = ROOT
					}
				}
				score_value = { #Prioritizes selecting an interesting courtier...
		            value = 10
		            interesting_courtier_selection_score = yes
		        }
				character_event = {
					id = 100081
					days = 1
					random = 2
					tooltip = EVTTOOLTIP100081
				}
			}
		}
	}
}

# Child asks guardian about religion
character_event = {
	id = 38100
	desc = EVTDESC38100
	picture = GFX_evt_guardian
	
	min_age = 6
	max_age = 15
	only_capable = yes
	lacks_dlc = "Zeus"
	
	trigger = {
		has_guardian = yes
		guardian = { 
			NOT = { religion = ROOT }
			NOT = { religion = the_damned }
			employer = {
				religion = PREV
			}
		}
		NOT = { religion = the_damned }
	}
	
	mean_time_to_happen = {
		months = 120
		modifier = {
			factor = 0.5
			guardian = {
				trait = zealous
			}
		}
		modifier = {
			factor = 0.5
			guardian = {
				trait = diligent
			}
		}
		modifier = {
			factor = 0.2
			guardian = {
				is_priest = yes
			}
		}
		modifier = {
			factor = 2.0
			guardian = {
				trait = slothful
			}
		}
		modifier = {
			factor = 2.0
			guardian = {
				trait = cynical
			}
		}
	}
	
	option = {
		name = EVTOPTA38100 # Ask the guardian about God
		trigger = {
			NOT = {
				religion_group = muslim
			}
		}
		ai_chance = { factor = 100}
		guardian = {
			character_event = {
				id = 38101
				days = 2
				tooltip = EVTTOOLTIP38101
			}
		}
		piety = 5
	}
	option = {
		name = EVTOPTB38100 # Go play with my friends
		ai_chance = { factor = 0}
		piety = -5
	}
	option = {
		name = EVTOPTC38100 # Ask the guardian about Allah
		trigger = {
			religion_group = muslim
		}
		ai_chance = { factor = 100}
		guardian = {
			character_event = {
				id = 38101
				days = 2
				tooltip = EVTTOOLTIPA38101
			}
		}
		piety = 5
	}
}

### Mercenary captain converts to local religion
character_event = {
	id = HL.10410

	is_triggered_only = yes
	hide_window = yes

	capable_only = yes
	prisoner = no
	ai = yes
	only_rulers = yes

	trigger = {
		primary_title = {
			NOT = { has_title_flag = ze_dyn_merc }
			mercenary = yes
		}
		has_character_flag = is_mercenary_leader
		NOT = { trait = zealous }
		NOT = { religion = the_damned }
		primary_title = {
			capital_scope = {
				NOT = { religion = the_damned }
			}
		}
	}

	weight_multiplier = {
		days = 1

		modifier = {
			factor = 0
			primary_title = {
				capital_scope = {
					owner = {
						religion = ROOT
					}
				}
			}
		}

		modifier = {
			factor = 1.5
			mercenary_employer = {
				is_alive = yes
			}
		}

		modifier = {
			factor = 2
			mercenary_employer = {
				is_friend = ROOT
			}
		}

		modifier = {
			factor = 2
			primary_title = {
				capital_scope = {
					owner = {
						NOT = { religion = ROOT }
						is_friend = ROOT
					}
				}
			}
		}

		modifier = {
			factor = 4
			primary_title = {
				capital_scope = {
					owner = {
						OR = {
							AND = {
								religion_group = christian
								ROOT = {
									trait = sympathy_christendom
								}
							}
							AND = {
								religion_group = muslim
								ROOT = {
									trait = sympathy_islam
								}
							}
							AND = {
								religion_group = pagan_group
								ROOT = {
									trait = sympathy_pagans
								}
							}
							AND = {
								religion_group = zoroastrian_group
								ROOT = {
									trait = sympathy_zoroastrianism
								}
							}
							AND = {
								religion_group = jewish_group
								ROOT = {
									trait = sympathy_judaism
								}
							}
							AND = {
								religion_group = indian_group
								ROOT = {
									trait = sympathy_indian
								}
							}
						}
					}
				}
			}
		}
	}

	immediate = {
		primary_title = {
			capital_scope = {
				save_event_target_as = merc_location
			}
		}
		primary_title = {
			band_creator = {
				if = {
					limit = {
						is_alive = yes
					}
					character_event = { id = HL.10411 }
					break = yes
				}
			}
		}
		clear_event_target = merc_location
	}
}

# Convert to the physicians religion?
character_event = {
	id = RIP.4101
	desc = EVTDESC_RIP_4101
	picture = GFX_evt_court_physician
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes
	
	trigger = {
		event_target:missionary_physician_target = {
			NOT = { religion_group = ROOT }
			NOT = { religion = the_damned }
		}
		controls_religion = no
		NOT = { religion = the_damned }
		NOT = { trait = god }
	}
	
	option = {
		name = EVTOPTA_RIP_4101
		
		ai_chance = {
			factor = 60
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 2
				trait = craven
			}
		}
		
		event_target:missionary_physician_target = {
			opinion = {
				modifier = opinion_did_not_trust_me
				who = ROOT
				years = 10
			}
		}
	}

	option = {
		name = EVTOPTB_RIP_4101
		
		ai_chance = {
			factor = 5
			modifier = {
				factor = 3
				trait = cynical
			}
			modifier = {
				factor = 1.5
				trait = arbitrary
			}
			modifier = {
				factor = 1.5
				trait = trusting
			}
			modifier = {
				factor = 0.75
				NOT = {
					year = 900
				}
			}
			modifier = {
				factor = 0.25
				OR = {
					culture_group = baltic
					culture_group = finno_ugric  # The most stubborn pagans
				}
			}
			modifier = {
				factor = 0.25
				culture_group = east_slavic # Like alcohol
				event_target:missionary_physician_target = {
					religion_group = muslim
				}
			}
			modifier = {
				factor = 0.25
				culture_group = north_germanic # Vikings do like their alcohol
				event_target:missionary_physician_target = {
					religion_group = muslim
				}
			}
			modifier = {
				factor = 1.5
				event_target:missionary_physician_target = {
					has_religion_feature = religion_proselytizing
				}
			}
			modifier = {
				factor = 0.25
				trait = paranoid
			}
			modifier = {
				factor = 0
				NOT = {
					religion_group = pagan_group
				}
			}
		}
		
		event_target:missionary_physician_target = {
			opinion = {
				modifier = opinion_glad
				who = ROOT
				years = 10
			}
		}
		if = {
			limit = {
				religion_group = pagan_group
			}
			add_trait = sympathy_pagans
		}
		religion = event_target:missionary_physician_target
		prestige = -500
		piety = 250
		hidden_tooltip = {
			any_courtier = {
				limit = { 
					is_close_relative = ROOT
					NOT = { trait = zealous }
					NOT = { has_character_flag = ai_flag_refuse_conversion }
					NOT = { trait = stubborn }
				}
				religion = event_target:missionary_physician_target
			}
			any_spouse = {
				limit = { 
					is_consort = no
					NOT = { trait = zealous }
					NOT = { has_character_flag = ai_flag_refuse_conversion }
					NOT = { trait = stubborn }
				}
				religion = event_target:missionary_physician_target
			}
		}
		custom_tooltip = { text = EVTOPTB_RIP_4101_TT }
	}
	
	option = {
		name = EVTOPTC_RIP_4101
		
		ai_chance = {
			factor = 30
			modifier = {
				factor = 5
				trait = zealous
			}
			modifier = {
				factor = 2
				trait = stubborn
			}
			modifier = {
				factor = 2
				trait = cruel
			}
		}
		
		wealth = 50
		event_target:missionary_physician_target = {
			death = {
				death_reason = death_execution_burning
				killer = ROOT
			}
		}
		event_target:origin_realm_of_missionary_physician_target = {
			opinion = {
				modifier = opinion_dishonorable_scum
				who = ROOT
				years = 15
			}
		}
	}
}

#Announcement paper mill
character_event = {
    id = JD.20034
	has_dlc = "Jade Dragon"
    desc = EVTDESC_JD_20034
    picture = GFX_evt_bandits
    notification = yes

    is_triggered_only = yes

    immediate = {
        event_target:jd_build_province = {
            add_province_modifier = {
                name = jd_paper_mill
                years = 20
            }
			hidden_tooltip = {
				if = {
					limit = {
						has_dlc = "Reapers"
					}
					hidden_tooltip = {
						if = {
							limit = { NOT = { ROOT = { culture_group = undead_culture_group } } }
							change_variable = { which = prosperity_value value = 6 }
						}
						else = {
							change_variable = { which = prosperity_value value = -6 }
						}
					}
				}
			}
        }
    }

    option = { 

    }
}   

character_event = {
    id = JD.20035
	has_dlc = "Jade Dragon"
    desc = EVTDESC_JD_20035
    picture = GFX_evt_bandits
    notification = yes

    is_triggered_only = yes

    immediate = {
        event_target:jd_build_province = {
            add_province_modifier = {
                name = jd_fireworks_guild
                years = 20
            }
			hidden_tooltip = {
				if = {
					limit = {
						has_dlc = "Reapers"
					}
					hidden_tooltip = {
						if = {
							limit = { NOT = { ROOT = { culture_group = undead_culture_group } } }
							change_variable = { which = prosperity_value value = 6 }
						}
						else = {
							change_variable = { which = prosperity_value value = -6 }
						}
					}
				}
			}
        }
    }

    option = { 

    }
}   

character_event = {
    id = JD.20036
	has_dlc = "Jade Dragon"
    desc = EVTDESC_JD_20036
    picture = GFX_evt_bandits
    notification = yes

    is_triggered_only = yes

    immediate = {
        event_target:jd_build_province = {
            add_province_modifier = {
                name = jd_dry_docks
                years = 20
            }
			hidden_tooltip = {
				if = {
					limit = {
						has_dlc = "Reapers"
					}
					hidden_tooltip = {
						if = {
							limit = { NOT = { ROOT = { culture_group = undead_culture_group } } }
							change_variable = { which = prosperity_value value = 6 }
						}
						else = {
							change_variable = { which = prosperity_value value = -6 }
						}
					}
				}
			}
        }
    }

    option = { 

    }
}   

character_event = {
    id = JD.20037
	has_dlc = "Jade Dragon"
    desc = EVTDESC_JD_20037
    picture = GFX_evt_bandits
    notification = yes

    is_triggered_only = yes

    immediate = {
        event_target:jd_build_province = {
            add_province_modifier = {
                name = jd_administrative_outpost
                years = 20
            }
			hidden_tooltip = {
				if = {
					limit = {
						has_dlc = "Reapers"
					}
					hidden_tooltip = {
						if = {
							limit = { NOT = { ROOT = { culture_group = undead_culture_group } } }
							change_variable = { which = prosperity_value value = 6 }
						}
						else = {
							change_variable = { which = prosperity_value value = -6 }
						}
					}
				}
			}
        }
    }

    option = { 

    }
}   

character_event = {
    id = JD.20038
	has_dlc = "Jade Dragon"
    desc = EVTDESC_JD_20038
    picture = GFX_evt_bandits
    notification = yes

    is_triggered_only = yes

    immediate = {
        event_target:jd_build_province = {
            add_province_modifier = {
                name = jd_blast_furnace
                years = 20
            }
			hidden_tooltip = {
				if = {
					limit = {
						has_dlc = "Reapers"
					}
					hidden_tooltip = {
						if = {
							limit = { NOT = { ROOT = { culture_group = undead_culture_group } } }
							change_variable = { which = prosperity_value value = 6 }
						}
						else = {
							change_variable = { which = prosperity_value value = -6 }
						}
					}
				}
			}
        }
    }

    option = { 

    }
}

#Chancellor is good at his/her job
character_event = {
	id = 75000
	desc = EVTDESC75000
	picture = GFX_evt_spymaster
	border = GFX_event_normal_frame_diplomacy
	
	only_playable = yes
	min_age = 16
	capable_only = yes
	prisoner = no
	
	trigger = {
		is_nomadic = no
		is_tribal = no
		job_chancellor = {
			diplomacy = 12
			is_smart_trigger = yes
		}
		NOT = {
			has_character_modifier = town_appreciate
		}
		NOT = {
			has_character_modifier = castle_appreciate
		}
	}
	
	mean_time_to_happen = {
		months = 360
	}
	
	option = {
		name = "EVTOPTA75000"
		add_character_modifier = {
			name = town_appreciate
			duration = 432
		}
		if = {
			limit = {
				has_dlc = "Reapers"
			}
			custom_tooltip = {
				text = capital_prospers_custom_tooltip
				hidden_tooltip = {
					capital_scope = {
						if = {
							limit = { NOT = { ROOT = { job_chancellor = { culture_group = undead_culture_group } } } }
							change_variable = { which = prosperity_value value = 6 }
						}
						else = {
							change_variable = { which = prosperity_value value = -6 }
						}
					}
				}
			}
		}
	}
	option = {
		name = "EVTOPTB75000"
		add_character_modifier = {
			name = castle_appreciate
			duration = 432
		}
		if = {
			limit = {
				has_dlc = "Reapers"
			}
			custom_tooltip = {
				text = capital_prospers_custom_tooltip
				hidden_tooltip = {
					capital_scope = {
						if = {
							limit = { NOT = { ROOT = { job_chancellor = { culture_group = undead_culture_group } } } }
							change_variable = { which = prosperity_value value = 6 }
						}
						else = {
							change_variable = { which = prosperity_value value = -6 }
						}
					}
				}
			}
		}
	}
}

#Marshal is good at his/her job
character_event = {
	id = 75001
	desc = "EVTDESC75001"
	picture = GFX_evt_spymaster
	border = GFX_event_normal_frame_war
	
	only_rulers = yes
	min_age = 16
	capable_only = yes
	prisoner = no
	
	trigger = {
		job_marshal = {
			martial = 12
			is_smart_trigger = yes
			location = {
				NOT = {
					has_province_modifier = troops_increases
				}
			}
		}
		NOT = {
			has_character_modifier = troops_likes_marshal
		}
	}
	
	mean_time_to_happen = {
		months = 360
	}
	
	option = {
		name = "EVTOPTA75001"
		add_character_modifier = {
			name = troops_likes_marshal
			duration = 432
		}
		if = {
			limit = {
				has_dlc = "Reapers"
			}
			custom_tooltip = {
				text = capital_prospers_custom_tooltip
				hidden_tooltip = {
					capital_scope = {
						if = {
							limit = { NOT = { ROOT = { job_marshal = { culture_group = undead_culture_group } } } }
							change_variable = { which = prosperity_value value = 6 }
						}
						else = {
							change_variable = { which = prosperity_value value = -6 }
						}
					}
				}
			}
		}
	}
	option = {
		name = "EVTOPTB75001"
		job_marshal = {
			location = {
				add_province_modifier = {
					name = troops_increases
					duration = 432
				}
			}
		}
		if = {
			limit = {
				has_dlc = "Reapers"
			}
			custom_tooltip = {
				text = increase_prosperity_custom_tooltip
				hidden_tooltip = {
					job_marshal = {
						location = {
							if = {
								limit = { NOT = { ROOT = { job_marshal = { culture_group = undead_culture_group } } } }
								change_variable = { which = prosperity_value value = 6 }
							}
							else = {
								change_variable = { which = prosperity_value value = -6 }
							}
						}
					}
				}
			}
		}
	}
}

#Steward is good at his/her job
character_event = {
	id = 75002
	desc = "EVTDESC75002"
	picture = GFX_evt_spymaster
	border = GFX_event_normal_frame_economy
	
	only_rulers = yes
	min_age = 16
	capable_only = yes
	prisoner = no
	
	trigger = {
		NOT = {
			treasury = 50
		}
		any_demesne_province = { 
			revolt_risk = 0.02
		}
		job_treasurer = {
			stewardship = 12
			is_smart_trigger = yes
		}
		NOT = {
			has_character_modifier = steward_taxincome
		}
		NOT = {
			has_character_modifier = steward_revoltrisk
		}
	}
	
	mean_time_to_happen = {
		months = 360
	}
	
	option = {
		name = "EVTOPTA75002"
		add_character_modifier = {
			name = steward_taxincome
			duration = 432
		}
		if = {
			limit = {
				has_dlc = "Reapers"
			}
			custom_tooltip = {
				text = capital_prospers_custom_tooltip
				hidden_tooltip = {
					capital_scope = {
						if = {
							limit = { NOT = { ROOT = { job_treasurer = { culture_group = undead_culture_group } } } }
							change_variable = { which = prosperity_value value = 6 }
						}
						else = {
							change_variable = { which = prosperity_value value = -6 }
						}
					}
				}
			}
		}
	}
	option = {
		name = "EVTOPTB75002"
		add_character_modifier = {
			name = steward_revoltrisk
			duration = 432
		}
		if = {
			limit = {
				has_dlc = "Reapers"
			}
			custom_tooltip = {
				text = capital_prospers_custom_tooltip
				hidden_tooltip = {
					capital_scope = {
						if = {
							limit = { NOT = { ROOT = { job_treasurer = { culture_group = undead_culture_group } } } }
							change_variable = { which = prosperity_value value = 6 }
						}
						else = {
							change_variable = { which = prosperity_value value = -6 }
						}
					}
				}
			}
		}
	}
}

#Spymaster is good at his/her job
character_event = {
	id = 75003
	desc = "EVTDESC75003"
	picture = GFX_evt_spymaster
	border = GFX_event_normal_frame_intrigue
	
	only_rulers = yes
	min_age = 16
	capable_only = yes
	prisoner = no
	
	trigger = {
		job_spymaster = {
			intrigue = 12
			is_smart_trigger = yes
		}
		NOT = {
			has_character_modifier = increase_arrest_chance
		}
		NOT = {
			has_character_modifier = increase_plot_power
		}
	}
	
	mean_time_to_happen = {
		months = 360
	}
	
	option = {
		name = "EVTOPTA75003"
		add_character_modifier = {
			name = increase_arrest_chance
			duration = 432
		}
		if = {
			limit = {
				has_dlc = "Reapers"
			}
			custom_tooltip = {
				text = capital_prospers_custom_tooltip
				hidden_tooltip = {
					capital_scope = {
						if = {
							limit = { NOT = { ROOT = { job_spymaster = { culture_group = undead_culture_group } } } }
							change_variable = { which = prosperity_value value = 6 }
						}
						else = {
							change_variable = { which = prosperity_value value = -6 }
						}
					}
				}
			}
		}
	}
	option = {
		name = "EVTOPTB75003"
		add_character_modifier = {
			name = increase_plot_power
			duration = 432
		}
		if = {
			limit = {
				has_dlc = "Reapers"
			}
			custom_tooltip = {
				text = capital_prospers_custom_tooltip
				hidden_tooltip = {
					capital_scope = {
						if = {
							limit = { NOT = { ROOT = { job_spymaster = { culture_group = undead_culture_group } } } }
							change_variable = { which = prosperity_value value = 6 }
						}
						else = {
							change_variable = { which = prosperity_value value = -6 }
						}
					}
				}
			}
		}
	}
}

### Lord Spiritual is good at his/her job ###
character_event = {
	id = 75004
	desc = "EVTDESC75004"
	picture = GFX_evt_spymaster
	border = GFX_event_normal_frame_religion
	
	only_rulers = yes
	min_age = 16
	capable_only = yes
	prisoner = no
	
	trigger = {
		NOT = {
			religion_group = muslim
		}
		job_spiritual = {
			learning = 12
			NOT = {
				religion_group = muslim
			}
			is_smart_trigger = yes
		}
		NOT = {
			has_character_modifier = church_appreciates
		}
		NOT = {
			has_character_modifier = spiritual_increase_piety
		}
	}
	
	mean_time_to_happen = {
		months = 360
	}
	
	option = {
		name = "EVTOPTA75004"
		add_character_modifier = {
			name = church_appreciates
			duration = 432
		}
		if = {
			limit = {
				has_dlc = "Reapers"
			}
			custom_tooltip = {
				text = capital_prospers_custom_tooltip
				hidden_tooltip = {
					capital_scope = {
						if = {
							limit = { NOT = { ROOT = { job_spiritual = { culture_group = undead_culture_group } } } }
							change_variable = { which = prosperity_value value = 6 }
						}
						else = {
							change_variable = { which = prosperity_value value = -6 }
						}
					}
				}
			}
		}
	}
	option = {
		name = "EVTOPTB75004"
		add_character_modifier = {
			name = spiritual_increase_piety
			duration = 432
		}
		if = {
			limit = {
				has_dlc = "Reapers"
			}
			custom_tooltip = {
				text = capital_prospers_custom_tooltip
				hidden_tooltip = {
					capital_scope = {
						if = {
							limit = { NOT = { ROOT = { job_spiritual = { culture_group = undead_culture_group } } } }
							change_variable = { which = prosperity_value value = 6 }
						}
						else = {
							change_variable = { which = prosperity_value value = -6 }
						}
					}
				}
			}
		}
	}
}

### Chief Mufti is good at his/her job - Muslim ###
character_event = {
	id = 75005
	desc = "EVTDESC75005"
	picture = GFX_evt_spymaster
	border = GFX_event_normal_frame_religion
	
	only_rulers = yes
	min_age = 16
	capable_only = yes
	prisoner = no
	religion_group = muslim
	
	trigger = {
		job_spiritual = {
			learning = 12
			religion_group = muslim
			is_smart_trigger = yes
		}
		NOT = {
			has_character_modifier = church_appreciates
		}
		NOT = {
			has_character_modifier = spiritual_increase_piety
		}
	}
	
	mean_time_to_happen = {
		months = 360
	}
	
	option = {
		name = "EVTOPTA75005"
		add_character_modifier = {
			name = imam_appreciates
			duration = 432
		}
		if = {
			limit = {
				has_dlc = "Reapers"
			}
			custom_tooltip = {
				text = capital_prospers_custom_tooltip
				hidden_tooltip = {
					capital_scope = {
						if = {
							limit = { NOT = { ROOT = { job_spiritual = { culture_group = undead_culture_group } } } }
							change_variable = { which = prosperity_value value = 6 }
						}
						else = {
							change_variable = { which = prosperity_value value = -6 }
						}
					}
				}
			}
		}
	}
	option = {
		name = "EVTOPTB75005"
		add_character_modifier = {
			name = spiritual_increase_piety
			duration = 432
		}
		if = {
			limit = {
				has_dlc = "Reapers"
			}
			custom_tooltip = {
				text = capital_prospers_custom_tooltip
				hidden_tooltip = {
					capital_scope = {
						if = {
							limit = { NOT = { ROOT = { job_spiritual = { culture_group = undead_culture_group } } } }
							change_variable = { which = prosperity_value value = 6 }
						}
						else = {
							change_variable = { which = prosperity_value value = -6 }
						}
					}
				}
			}
		}
	}
}

#Steward and the Economy: Ruler
character_event = {
	id = 75085
	desc = "EVTDESC75085"
	picture = GFX_evt_throne_room
	border = GFX_event_normal_frame_economy
	
	only_rulers = yes
	capable_only = yes
	
	is_triggered_only = yes
	
	trigger = {
		job_treasurer = {
			stewardship = 15
		}
		any_demesne_province = {
			is_capital = yes
			NOT = {
				has_province_modifier = intelligent_steward
			}
		}
	}
	
	weight_multiplier = {
		days = 1
	}
	
	option = {
		name = "EVTOPTA75085" #Adapt his ideas
		scaled_wealth = -0.1
		random_demesne_province = {
			limit = {
				is_capital = yes
			}
			add_province_modifier = {
				name = intelligent_steward
				duration = 1825
			}
			if = {
				limit = {
					has_dlc = "Reapers"
				}
				custom_tooltip = {
					text = increase_prosperity_custom_tooltip
					hidden_tooltip = {
						if = {
							limit = { NOT = { ROOT = { job_treasurer = { culture_group = undead_culture_group } } } }
							change_variable = { which = prosperity_value value = 6 }
						}
						else = {
							change_variable = { which = prosperity_value value = -6 }
						}
					}
				}
			}
		}
	}
	option = {
		name = "EVTOPTB75085"
		job_treasurer = {
			show_scope_change = no
			opinion = {
				modifier = opinion_dislike
				who = ROOT
				years = 1
			}
		}
	}
}

#Ruler: Marshal has 15+ martial
character_event = {
	id = 75120
	desc = "EVTDESC75120"
	picture = GFX_evt_spymaster
	border = GFX_event_normal_frame_war
	
	only_rulers = yes
	capable_only = yes
	
	is_triggered_only = yes
	
	trigger = {
		job_marshal = {
			martial = 15
		}
		any_demesne_province = {
			is_capital = yes
			NOT = {
				has_province_modifier = marshal_improves_capital
			}
		}
	}
	
	weight_multiplier = {
		days = 1
	}
	
	option = {
		name = "EVTOPTA75120" #Adapt his ideas
		scaled_wealth = -0.1
		random_demesne_province = {
			limit = {
				is_capital = yes
			}
			add_province_modifier = {
				name = marshal_improves_capital
				duration = 1825
			}
			if = {
				limit = {
					has_dlc = "Reapers"
				}
				custom_tooltip = {
					text = increase_prosperity_custom_tooltip
					hidden_tooltip = {
						if = {
							limit = { NOT = { ROOT = { job_marshal = { culture_group = undead_culture_group } } } }
							change_variable = { which = prosperity_value value = 6 }
						}
						else = {
							change_variable = { which = prosperity_value value = -6 }
						}
					}
				}
			}
		}
	}
	option = {
		name = "EVTOPTB75120"
		job_marshal = {
			show_scope_change = no
			opinion = {
				modifier = opinion_dislike
				who = ROOT
				years = 2
			}
		}
	}
}

# 20260: The liege is informed of the success
letter_event = {
	id = 20260
	desc = "EVTDESC20260"
	border = GFX_event_letter_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA20260"
		scaled_wealth = -0.5
		culture_techpoints = 50
		if = {
			limit = {
				has_dlc = "Reapers"
			}
			custom_tooltip = {
				text = increase_prosperity_custom_tooltip
				hidden_tooltip = {
					FROM = {
						location = {
							if = {
								limit = { NOT = { FROM = { culture_group = undead_culture_group } } }
								change_variable = { which = prosperity_value value = 6 }
							}
							else = {
								change_variable = { which = prosperity_value value = -6 }
							}
						}
					}
				}
			}
		}
	}
	option = {
		name = "EVTOPTB20260"
	}
}

# 20410: Liege
character_event = {
	id = 20410
	desc = EVTDESC20410
	picture = GFX_evt_large_army
	
	is_triggered_only = yes
	
	notification = yes
	
	immediate = {
		FROM = {
			location = {
				add_province_modifier = {
					name = levy_reinforcements
					duration = 365
				}
			}
		}
		if = {
			limit = {
				has_dlc = "Reapers"
			}
			custom_tooltip = {
				text = increase_prosperity_custom_tooltip
				hidden_tooltip = {
					FROM = {
						location = {
							if = {
								limit = { NOT = { FROM = { culture_group = undead_culture_group } } }
								change_variable = { which = prosperity_value value = 6 }
							}
							else = {
								change_variable = { which = prosperity_value value = -6 }
							}
						}
					}
				}
			}
		}
	}
	
	option = {
		name = "EVTOPTA20410"
	}
}

character_event = {
	id = MNM.70006
	desc = MNM.70006.d
	picture = GFX_evt_carriage
	border = GFX_event_normal_frame_economy
	
	immediate = {
		if = {
			limit = {
				any_demesne_province = {
					can_add_admin_bonus_trigger = yes
				}
			}
			random_demesne_province = {
				limit = {
					can_add_admin_bonus_trigger = yes
				}
				save_event_target_as = admin_bonus_province
			}
			break = yes
		}
		capital_scope = {
			save_event_target_as = admin_bonus_province # For localisation
		}
		set_character_flag = no_possible_bonus
	}
	
	is_triggered_only = yes
	
	notification = yes
	
	option = {
		name = EXCELLENT 
		if = {
			limit = {
				NOT = { has_character_flag = no_possible_bonus }
			}
			event_target:admin_bonus_province = {
			random_list = {
				100 = {
					modifier = {
						factor = 0
						has_province_modifier = harvest_festivals					
					}
					add_province_modifier = { 					
						name = harvest_festivals
						years = 3
					}
					if = {
						limit = {
							has_dlc = "Reapers"
						}
						custom_tooltip = {
							text = increase_prosperity_custom_tooltip
							hidden_tooltip = {
								if = {
									limit = { NOT = { ROOT = { job_treasurer = { culture_group = undead_culture_group } } } }
									change_variable = { which = prosperity_value value = 6 }
								}
								else = {
									change_variable = { which = prosperity_value value = -6 }
								}
							}
						}
					}
				}
				100 = {
					modifier = {
						factor = 0
						has_province_modifier = inspired_peasantry					
					}
					add_province_modifier = { 					
						name = inspired_peasantry
						years = 3
					}
					if = {
						limit = {
							has_dlc = "Reapers"
						}
						custom_tooltip = {
							text = increase_prosperity_custom_tooltip
							hidden_tooltip = {
								if = {
									limit = { NOT = { ROOT = { job_treasurer = { culture_group = undead_culture_group } } } }
									change_variable = { which = prosperity_value value = 6 }
								}
								else = {
									change_variable = { which = prosperity_value value = -6 }
								}
							}
						}
					}
				}
				100 = {
					modifier = {
						factor = 0
						has_province_modifier = new_roads					
					}
					add_province_modifier = { 					
						name = new_roads
						years = 3
					}
					if = {
						limit = {
							has_dlc = "Reapers"
						}
						custom_tooltip = {
							text = increase_prosperity_custom_tooltip
							hidden_tooltip = {
								if = {
									limit = { NOT = { ROOT = { job_treasurer = { culture_group = undead_culture_group } } } }
									change_variable = { which = prosperity_value value = 6 }
								}
								else = {
									change_variable = { which = prosperity_value value = -6 }
								}
							}
						}
					}
				}
			}
		}
		}
		
		if = {
			limit = {
				has_character_flag = no_possible_bonus
			}
			scaled_wealth = { value = 0.15 min = 10 }
			clr_character_flag = no_possible_bonus
		}
	}
	
}

character_event = {
	id = MNM.78008
	title = MNM.78007.t
	desc = MNM.78008.d
	picture = GFX_evt_carriage
	border = GFX_event_normal_frame_economy
	
	is_triggered_only = yes

	min_age = 16
	capable_only = yes
	prisoner = no
	has_job_title = yes
	
	immediate = {
		random_demesne_province = {
			limit = {
				NOT = {
					has_province_modifier = smugglers_ring
				}
			}
			save_event_target_as = smuggler_province
		}	
	}
	
	option = {
		name = CURSES
		event_target:smuggler_province = {
			add_province_modifier = { 					
				name = smugglers_ring
				years = 2
			}
			if = {
				limit = {
					has_dlc = "Reapers"
				}
				custom_tooltip = {
					text = decrease_prosperity_custom_tooltip
					hidden_tooltip = {
						if = {
							limit = { NOT = { ROOT = { job_treasurer = { culture_group = undead_culture_group } } } }
							change_variable = { which = prosperity_value value = -6 }
						}
						else = {
							change_variable = { which = prosperity_value value = 6 }
						}
					}
				}
			}
		}
	}
}

# The Spymaster informs his liege of the success
letter_event = {
	id = 20320
	desc = "EVTDESC20320"
	border = GFX_event_letter_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA20320"
		random_list = {
			33 = { military_techpoints = 50 }
			33 = { economy_techpoints = 50 }
			33 = { culture_techpoints = 50 }
		}
		if = {
			limit = {
				has_dlc = "Reapers"
			}
			custom_tooltip = {
				text = capital_prospers_custom_tooltip
				hidden_tooltip = {
					capital_scope = {
						if = {
							limit = { NOT = { ROOT = { job_spymaster = { culture_group = undead_culture_group } } } }
							change_variable = { which = prosperity_value value = 6 }
						}
						else = {
							change_variable = { which = prosperity_value value = -6 }
						}
					}
				}
			}
		}
	}
}

# 20230: Liege get a letter
letter_event = {
	id = 20230
	desc = "EVTDESC20230"
	border = GFX_event_letter_frame_economy
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA20230"
		hidden_tooltip = {
			FROM = {
				remove_character_modifier = master_builder
			}
		}
		FROM = {
			add_character_modifier = {
				name = master_builder
				duration = -1
			}
		}
		if = {
			limit = {
				has_dlc = "Reapers"
			}
			custom_tooltip = {
				text = increase_prosperity_custom_tooltip
				hidden_tooltip = {
					FROM = {
						location = {
							if = {
								limit = { NOT = { FROM = { culture_group = undead_culture_group } } }
								change_variable = { which = prosperity_value value = 6 }
							}
							else = {
								change_variable = { which = prosperity_value value = -6 }
							}
						}
					}
				}
			}
		}
	}
}

#Increase prosperity level of capital
character_event = {
	id = TOG.7040
	desc = EVTDESC_TOG_7040
	border = GFX_event_normal_frame_economy
	picture = GFX_evt_tribal_lands

	is_triggered_only = yes

	trigger = {
		capital_scope = {
			NOR = {
				has_province_modifier = depopulated_1
				has_province_modifier = depopulated_2
				has_province_modifier = depopulated_3
			}
		}
	}

	option = {
		name = EVTOPTA_TOG_7040

		if = {
			limit = { 
				has_dlc = "Reapers" 
				NOT = { capital_scope = { has_province_modifier = prosperity_modifier_3 } }
				NOT = { culture_group = undead_culture_group }
			}
			capital_scope = { increase_prosperity_effect = yes }
		}

		if = {
			limit = { 
				OR = {
					NOT = { has_dlc = "Reapers" } 
					capital_scope = { has_province_modifier = prosperity_modifier_3 }
				}
			}
			scaled_wealth = { value = 1 min = 50 }
		}
	}
}

#20 stewardship, tax or prosperity
character_event = {
	id = TOG.7520
	border = GFX_event_normal_frame_economy
	picture = GFX_evt_tribal_lands
	
	desc = {
		trigger = { has_character_modifier = follower_of_zemyna }
		text = EVTDESC_TOG_7520_ZEMYNA
	}
	desc = {
		trigger = { has_character_modifier = follower_of_ukko }
		text = EVTDESC_TOG_7520_UKKO
	}
	desc = {
		trigger = { has_character_modifier = follower_of_jarilo }
		text = EVTDESC_TOG_7520_JARILO
	}
	desc = {
		trigger = { has_character_modifier = follower_of_bida }
		text = EVTDESC_TOG_7520_BIDA
		picture = GFX_evt_market_byzantine
	}

	hide_from = yes

	is_triggered_only = yes

	trigger = { capital_scope = { NOT = { has_province_modifier = blessed_lands } } } 

	option = {
		name = EVTOPTA_TOG_7520

		#Changes depopulation/prosperity
		capital_scope = {
			if = {
				limit = {
					has_dlc = "Reapers"
					NOT = { has_province_modifier = prosperity_modifier_3 }
					NOT = { culture_group = undead_culture_group }
				}
				if = {
					limit = {
						has_province_modifier = depopulated_1
						OR = {
							NOT = { has_province_modifier = undead_desolation }
							random = 20
						}
					}

					remove_province_modifier = depopulated_1
					break = yes
				}	
				if = {
					limit = {
						has_province_modifier = depopulated_2
						OR = {
							NOT = { has_province_modifier = undead_desolation }
							random = 30
						}
					}

					remove_province_modifier = depopulated_2
					add_province_modifier = { name = depopulated_1 duration = -1 }
					break = yes
				}
				if = {
					limit = {
						has_province_modifier = depopulated_3
						OR = {
							NOT = { has_province_modifier = undead_desolation }
							random = 35
						}
					}

					remove_province_modifier = depopulated_3
					add_province_modifier = { name = depopulated_2 duration = -1 }
					break = yes
				}
				increase_prosperity_effect = yes
			}
			if = {
				limit = {
					OR = {
						NOT = { has_dlc = "Reapers" }
						has_province_modifier = prosperity_modifier_3
					}
				}
				add_province_modifier = { 
					name = blessed_lands 
					years = 10
				}
			}
		}
	}
}

character_event = {
	id = TOG.3404
	desc = TOG.3404.d
	picture = GFX_evt_vikings_arriving_oldgods
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	trigger = {
		NOR = {
			capital_scope = {
				has_province_modifier = loot_prosperity_boost
			}
			culture_group = undead_culture_group
		}
	}
	
	option = {
		name = EXCELLENT
		capital_scope = {
			add_province_modifier = {
				name = loot_prosperity_boost
				duration = 1825
			}
			hidden_tooltip = {
				change_variable = { which = prosperity_value value = 12 }
			}
		}
	}
}

# Court Physician wants you to invest in provincial apothecaries
character_event = {
	id = RIP.4022
	desc = EVTDESC_RIP_4022
	picture = GFX_evt_court_physician
	border = GFX_event_normal_frame_religion
	
	min_age = 16
	capable_only = yes
	only_playable = yes
	prisoner = no
	war = no
	has_dlc = "Reapers"
	
	is_triggered_only = yes
	
	trigger = {
		higher_tier_than = COUNT
		NOT = {
			has_character_flag = physician_apothecaries
		}
		any_courtier_or_vassal = {
			liege = { character = ROOT }
			has_minor_title = title_court_physician
			OR = {
				has_character_flag = is_court_physician
				trait = physician
			}
		}
	}
	
	weight_multiplier = {
		days = 1
		
		modifier = {
			factor = 2
			trait = charitable
		}
		modifier = {
			factor = 2
			trait = diligent
		}
		modifier = {
			factor = 1.5
			any_courtier_or_vassal = {
				liege = { character = ROOT }
				has_minor_title = title_court_physician
				OR = {
					has_character_flag = is_court_physician
					trait = physician
				}
				learning = 16
			}
		}
		modifier = {
			factor = 0.2
			any_courtier_or_vassal = {
				liege = { character = ROOT }
				has_minor_title = title_court_physician
				OR = {
					has_character_flag = is_court_physician
					trait = physician
				}
				NOT = {
					learning = 14
				}
			}
		}
		modifier = {
			factor = 0.1
			any_courtier_or_vassal = {
				liege = { character = ROOT }
				has_minor_title = title_court_physician
				OR = {
					has_character_flag = is_court_physician
					trait = physician
				}
				NOT = {
					learning = 10
				}
			}
		}
	}
	
	immediate = {
		random_courtier_or_vassal = {
			limit = {
				liege = { character = ROOT }
				has_minor_title = title_court_physician
				OR = {
					has_character_flag = is_court_physician
					trait = physician
				}
			}
			save_event_target_as = physician_target
		}
		set_character_flag = physician_apothecaries
	}

	option = { # I will invest in this!
		name = EVTOPTA_RIP_4022
		
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				NOT = { treasury = 300 }
			}
		}
		
		scaled_wealth = -0.5
		
		prestige = 50
		
		custom_tooltip = {
			text = physician_apothecaries_custom_tooltip
			hidden_tooltip = {
				any_demesne_province = {
					limit = {
						NOR = {
							any_province_holding = {
								has_siege = yes
							}
							any_province_holding = {
								is_occupied = yes
							}
							has_disease = yes
						}
					}
					if = {
						limit = { NOT = { ROOT = { culture_group = undead_culture_group } } }
						change_variable = { which = prosperity_value value = 15 }
					}
					else = {
						change_variable = { which = prosperity_value value = -15 }
					}
				}
			}
		}
		
	}
	
	option = { # I can't afford it
		name = EVTOPTB_RIP_4022
		ai_chance = {
			factor = 50
		}
	}
}

# Perform charity - Make preperations
character_event = {
	id = RIP.4504
	desc = EVTDESC_RIP_4504
	picture = GFX_evt_plague_spreading
	
	min_age = 16
	capable_only = yes
	only_playable = yes
	prisoner = no
	has_dlc = "Reapers"
	war = no
	
	is_triggered_only = yes
	
	trigger = {
		any_demesne_province = {
			hospital_level = 1
		}
	}
	
	immediate = {
		random_demesne_province = {
			limit = {
				hospital_level = 1
			}
			save_event_target_as = hospital_location
		}
	}
	
	option = {
		name = EVTOPTA_RIP_4504
		scaled_wealth = -0.5
		custom_tooltip = {
			text = EVTOPTA_RIP_4504_tooltip
		}
		custom_tooltip = {
			text = increase_prosperity_custom_tooltip
			hidden_tooltip = {
				event_target:hospital_location = {
					if = {
						limit = { NOT = { ROOT = { culture_group = undead_culture_group } } }
						change_variable = { which = prosperity_value value = 6 }
					}
					else = {
						change_variable = { which = prosperity_value value = -6 }
					}
				}
			}
		}
		character_event = { id = RIP.4505 }
	}
	
	option = {
		name = EVTOPTB_RIP_4504
	}
}

province_event = { #prosperity gain
	id = RIP.11701

	hide_window = yes
	
	is_triggered_only = yes	
	
	option = {
		random = {
			chance = 50 #50/50 base chance to increase
			modifier = {
				factor = 1.5
				owner = {
					any_owned_bloodline = {
						has_bloodline_flag = bloodline_peace_prosperity 
					}
				}
			}
			modifier = {
				factor = 1.25
				owner = {
					has_character_modifier = african_adulthood_rites_1
				}
			}
			modifier = {
				factor = 1.2
				has_province_modifier = africa_heavy_rain
			}
				modifier = {
					factor = 1.1
					has_wonder = yes
					wonder = {
						wonder_stage = 1
						is_damaged = no
						is_being_looted = no
					}
				}
				modifier = {
					factor = 1.15
					has_wonder = yes
					wonder = {
						wonder_stage = 2
						is_damaged = no
						is_being_looted = no
					}
				}
				modifier = {
					factor = 1.2
					has_wonder = yes
					wonder = {
						wonder_stage = 3
						is_damaged = no
						is_being_looted = no
					}
				}
				modifier = {
					factor = 1.25
					has_wonder = yes
					wonder = {
						wonder_stage = 4
						is_damaged = no
						is_being_looted = no
					}
				}
			modifier = {
				factor = 1.5 #over 16 stewardship you have a 75% chance
				owner = {
					stewardship = 16
				}
			}
			modifier = {
				factor = 1.5 #over 20 stewardship you increase 100%
				owner = {
					stewardship = 20
				}
			}
			modifier = {
				factor = 1.2 #having trade posts increases the chance
				has_trade_post = yes
			}
			modifier = {
				factor = 0.9 #having under 10 stewardship slightly reduces the chance
				owner = {
					NOT = { stewardship = 10 }
				}
			}
			modifier = {
				factor = 0.8 #having under 4 stewardship significantly reduces the chance
				owner = {
					NOT = { stewardship = 4 }
				}
			}
			modifier = {
				factor = 0.9 #not being independent slightly reduces the chance
				owner = {
					NOT = { independent = yes }
				}
			}
			modifier = {
				factor = 0.6 #tribes prosper slower
				AND = {
					owner = {
						is_tribal = yes
					}
					any_province_holding = {
						holding_type = tribal
					}
				}
			}
			modifier = {
				factor = 0.5 #bad province modifiers decrease chance
				OR = {
					has_province_modifier = incompetent_rule
					has_province_modifier = thieves_guild
					has_province_modifier = smugglers_ring
					has_province_modifier = highway_robber_band
					has_province_modifier = heretic_stronghold
					has_province_modifier = religious_tension
					has_province_modifier = temple_corruption
					has_province_modifier = local_death_cult
					has_province_modifier = extra_tax
					has_province_modifier = undead_desolation
					has_province_modifier = africa_drought_risk
					has_province_modifier = africa_drought
				}
			}
			modifier = {
				factor = 0.7 #slightly lower chance if helping in a war
				owner = {
					war = yes
					NOR = {
						is_primary_war_defender = yes
						is_primary_war_attacker = yes
					}
				}
			}
			modifier = {
				factor = 0.5 #low chance if defending in a war
				owner = {
					is_primary_war_defender = yes
					NOT = {
						is_primary_war_attacker = yes
					}
				}
			}
			modifier = {
				factor = 0.2 #very low chance if attacking in a war
				owner = {
					is_primary_war_attacker = yes
				}
			}
			modifier = {
				factor = 0 #no chance if under siege/occupied/diseased
				OR = {
					any_province_holding = {
						has_siege = yes
					}
					any_province_holding = {
						is_occupied = yes
					}
					has_disease = yes
				}
			}
			
			if = {
				limit = { owner = { NOT = { culture_group = undead_culture_group } } }
				trigger_switch = {
					on_trigger	= terrain
					farmlands	= { change_variable = { which = prosperity_value value = 10 } } #gain depends on terrain type
					plains		= { change_variable = { which = prosperity_value value = 8 } }
					steppe 		= { change_variable = { which = prosperity_value value = 8 } }
					forest 		= { change_variable = { which = prosperity_value value = 6 } }
					hills		= { change_variable = { which = prosperity_value value = 6 } }
					jungle		= { change_variable = { which = prosperity_value value = 4 } }
					desert		= { change_variable = { which = prosperity_value value = 4 } }
					mountain	= { change_variable = { which = prosperity_value value = 2 } }
					arctic		= { change_variable = { which = prosperity_value value = 2 } }
				}
			}
			else = {
				trigger_switch = {
					on_trigger	= terrain
					farmlands	= { change_variable = { which = prosperity_value value = -2 } } #gain depends on terrain type
					plains		= { change_variable = { which = prosperity_value value = -4 } }
					steppe 		= { change_variable = { which = prosperity_value value = -4 } }
					forest 		= { change_variable = { which = prosperity_value value = -6 } }
					hills		= { change_variable = { which = prosperity_value value = -6 } }
					jungle		= { change_variable = { which = prosperity_value value = -8 } }
					desert		= { change_variable = { which = prosperity_value value = - } }
					mountain	= { change_variable = { which = prosperity_value value = -10 } }
					arctic		= { change_variable = { which = prosperity_value value = -10 } }
				}
			}
			
			if = { # Coastal provinces prosper quicker because they get more trade/disease
				limit = {
					port = yes
					any_province_holding = {
						holding_type = city
					}
				}
				if = {
					limit = { owner = { NOT = { culture_group = undead_culture_group } } }
					change_variable = { which = prosperity_value value = 2 }
				}
			}
			
			if = { # Coastal Mountains/Arctic, i.e. Aden, prosper quicker than non-coastal terrain of the same type
				limit = {
					port = yes
					any_province_holding = {
						holding_type = city
					}
					OR = {
						terrain = mountain
						terrain = arctic
					}
				}
				if = {
					limit = { owner = { NOT = { culture_group = undead_culture_group } } }
					change_variable = { which = prosperity_value value = 4 }
				}
			}
			
			if = { # Coastal Desert/Jungle, i.e. Mecca, prosper quicker than non-coastal terrain of the same type 
				limit = {
					port = yes
					any_province_holding = {
						holding_type = city
					}
					OR = {
						terrain = desert
						terrain = jungle
					}
				}
				if = {
					limit = { owner = { NOT = { culture_group = undead_culture_group } } }
					change_variable = { which = prosperity_value value = 2 }
				}
			}
		}
		if = {
			limit = {
				has_province_flag = crown_focus_province #provinces with crown focus set gain a bonus 1-5 prosperity progress per year regardless of other factors
				NOR = {
					any_province_holding = {
						is_occupied = yes
					}
					has_disease = yes
				}
			}
			if = {
				limit = { owner = { NOT = { culture_group = undead_culture_group } } }
				random_list = {
					10 = {
						change_variable = { which = prosperity_value value = 5 }
					}
					10 = {
						change_variable = { which = prosperity_value value = 4 }
					}
					10 = {
						change_variable = { which = prosperity_value value = 3 }
					}
					10 = {
						change_variable = { which = prosperity_value value = 2 }
					}
					10 = {
						change_variable = { which = prosperity_value value = 1 }
					}
				}
			}
			else = {
				random_list = {
					10 = {
						change_variable = { which = prosperity_value value = -5 }
					}
					10 = {
						change_variable = { which = prosperity_value value = -4 }
					}
					10 = {
						change_variable = { which = prosperity_value value = -3 }
					}
					10 = {
						change_variable = { which = prosperity_value value = -2 }
					}
					10 = {
						change_variable = { which = prosperity_value value = -1 }
					}
				}
			}
		}
		if = {
			limit = {
				has_province_flag = recent_depopulation_1
				owner = { NOT = { culture_group = undead_culture_group } }
			}
			change_variable = { which = prosperity_value value = 3 }
		}
		if = {
			limit = {
				has_province_flag = recent_depopulation_2
				owner = { NOT = { culture_group = undead_culture_group } }
			}
			change_variable = { which = prosperity_value value = 4 }
		}
		if = {
			limit = {
				has_province_flag = recent_depopulation_3
				owner = { NOT = { culture_group = undead_culture_group } }
			}
			change_variable = { which = prosperity_value value = 5 }
		}
		if = {
			limit = {
				check_variable = { which = prosperity_value value = 100 } #gain modifiers at 100/250/500 value
				NOR = {
					has_province_modifier = prosperity_modifier_1
					has_province_modifier = prosperity_modifier_2
					has_province_modifier = prosperity_modifier_3
				}
			}
			add_province_modifier = { name = prosperity_modifier_1 duration = -1 }
			owner = { character_event = { id = RIP.11712 } }
			break = yes
		}
		if = {
			limit = {
				check_variable = { which = prosperity_value value = 250 }
				NOR = {
					has_province_modifier = prosperity_modifier_2
					has_province_modifier = prosperity_modifier_3
				}
			}
			remove_province_modifier = prosperity_modifier_1
			add_province_modifier = { name = prosperity_modifier_2 duration = -1 }
			owner = { character_event = { id = RIP.11712 } }
			break = yes
		}
		if = {
			limit = {
				check_variable = { which = prosperity_value value = 500 }
				NOT = {
					has_province_modifier = prosperity_modifier_3
				}
			}
			remove_province_modifier = prosperity_modifier_2
			add_province_modifier = { name = prosperity_modifier_3 duration = -1 }
			owner = { character_event = { id = RIP.11712 } }
			break = yes
		}
		if = {
			limit = {
				NOT = { check_variable = { which = prosperity_value value = -250 } }
				has_province_modifier = depopulated_2
			}
			remove_province_modifier = depopulated_2
			add_province_modifier = { name = depopulated_3 duration = -1 }
			break = yes
		}
		if = {
			limit = {
				NOT = { check_variable = { which = prosperity_value value = -100 } }
				has_province_modifier = depopulated_1
			}
			remove_province_modifier = depopulated_1
			add_province_modifier = { name = depopulated_2 duration = -1 }
			break = yes
		}
		if = {
			limit = {
				NOT = { check_variable = { which = prosperity_value value = 0 } }
				NOR = {
					has_province_modifier = prosperity_modifier_1
					has_province_modifier = prosperity_modifier_2
					has_province_modifier = prosperity_modifier_3
					has_province_modifier = depopulated_1
					has_province_modifier = depopulated_2
					has_province_modifier = depopulated_3
				}
			}
			add_province_modifier = { name = depopulated_1 duration = -1 }
			break = yes
		}
		if = {
			limit = {
				NOT = { check_variable = { which = prosperity_value value = 100 } }
				has_province_modifier = prosperity_modifier_1
			}
			remove_province_modifier = prosperity_modifier_1
			break = yes
		}
		if = {
			limit = {
				NOT = { check_variable = { which = prosperity_value value = 250 } }
				has_province_modifier = prosperity_modifier_2
			}
			remove_province_modifier = prosperity_modifier_2
			add_province_modifier = { name = prosperity_modifier_1 duration = -1 }
			break = yes
		}
		if = {
			limit = {
				NOT = { check_variable = { which = prosperity_value value = 500 } }
				has_province_modifier = prosperity_modifier_3
			}
			remove_province_modifier = prosperity_modifier_3
			add_province_modifier = { name = prosperity_modifier_2 duration = -1 }
			break = yes
		}
	}
}

character_event = {
	id = MNM.70013
	desc =  MNM.70013.d
	picture = GFX_evt_large_army
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				gender_equality_trigger = yes
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				female = 50
				attributes = {
					martial = 10
				}
			}
		}
		else_if = {
			limit = {
				has_religion_feature = religion_matriarchal
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				female = 90
				attributes = {
					martial = 10
				}
			}
		}
		else = {
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				female = no
				attributes = {
					martial = 10
				}
			}
		}
		new_character = {
			remove_trait = weak
			remove_trait = slow
			remove_trait = imbecile
			remove_trait = dull
			remove_trait = craven
			
			if = {
				limit = { graphical_culture = dragongfx }
				add_trait = dragon
			}
			else_if = {
				limit = { graphical_culture = demongfx }
				add_trait = demon_trait
			}
			else_if = {
				limit = { graphical_culture = etherealgfx }
				add_trait = ethereal_trait
			}
			else_if = {
				limit = {
					OR = {
						graphical_culture = undeadgfx
						culture_group = undead_culture_group
					}
				}
				add_trait = zombie
				set_graphical_culture = undead_revenant
				set_undead_culture = yes
				religion = the_damned
				any_claim = { remove_claim = PREV }
			}
			
			if = {
				limit = {
					trait = misguided_warrior
				}
				remove_trait = misguided_warrior
				add_trait = tough_soldier
			}
			
			remove_trait = mystic
			remove_trait = socializer
			remove_trait = gamer
			remove_trait = hedonist
			remove_trait = duelist
			remove_trait = hunter
			remove_trait = strategist
			remove_trait = administrator
			remove_trait = architect
			remove_trait = gardener
			remove_trait = schemer
			remove_trait = impaler
			remove_trait = seducer
			remove_trait = seductress
			remove_trait = theologian
			remove_trait = scholar
			
			random_list = { # Flavor Randomization
				15 = {
					change_martial = 2
				}
				10 = {
					add_trait = robust
				}
				10 = {
					add_trait = duelist
				}
				10 = {
					add_trait = hunter
				}
				5 = {
					modifier = {
						factor = 4
						ROOT = { any_owned_bloodline = { has_bloodline_flag = bloodline_effect_strategist } }
					}
					add_trait = strategist
				}
				5 = {
					change_martial = 4
				}
				5 = {
					if = {
						limit = {
							has_dlc = "Reapers"
						}
						add_trait = one_eyed
						change_martial = 1
					}
				}
				5 = { 
					add_trait = shrewd
				}
			}
			character_event = { id = SPECIES.2 }
			hidden_tooltip = {
				if = {
					limit = {
						has_dharmic_religion_trigger = yes
					}
					add_trait = kshatriya
					character_event = { id = RoI.30121 }
				}
			}
			save_event_target_as = found_commander
		}
	}

	
	option = {
		name = EXCELLENT 
		event_target:found_commander = {
			opinion = {
				modifier = opinion_loyal_servant
				who = ROOT
				years = 5
			}
		}
		if = {
			limit = {
				OR = {
					NOT = { ROOT = { has_law = succ_byzantine_elective } }  #Either not Imperial...
					NOT = { #...Or there are no valid vassal candidates that can be commanders.
						any_vassal = { 
							higher_real_tier_than = BARON
							NOT = { 
								primary_title = { temporary = yes } 
							}
							OR = {
								AND = {
									OR = {
										male_can_hold_minor_title_trigger = yes
										female_can_hold_minor_commander_title_trigger = yes
									}
									OR = {
										NOT = { religion = hindu }
										trait = kshatriya
									}
									is_adult = yes
								}
								has_character_flag = special_marshal
							}
					
							prisoner = no
							NOT = { trait = incapable }
							NOT = { is_inaccessible_trigger = yes }
							NOT = { has_character_flag = guru }
							NOT = { has_character_modifier = refusing_to_lead }
							NOR = {
								has_job_title = job_chancellor
								has_job_title = job_marshal
								has_job_title = job_treasurer
								has_job_title = job_spymaster
								has_job_title = job_spiritual
								has_minor_title = title_commander
							}
						} 
					}
				}
				OR = {
					AND = {
						tier = COUNT
						NOT = {
							any_realm_character = {
								count = 2
								liege = { character = ROOT }
								has_minor_title = title_commander
							}
						}
					}
					AND = {
						tier = DUKE
						NOT = {
							any_realm_character = {
								count = 4
								liege = { character = ROOT }
								has_minor_title = title_commander
							}
						}
					}
					AND = {
						tier = KING
						is_nomadic = no
						NOT = {
							any_realm_character = {
								count = 6
								liege = { character = ROOT }
								has_minor_title = title_commander
							}
						}
					}
					AND = {
						tier = EMPEROR
						is_nomadic = no
						NOT = {
							any_realm_character = {
								count = 8
								liege = { character = ROOT }
								has_minor_title = title_commander
							}
						}
					}
					AND = {
						tier = KING
						is_nomadic = yes
						NOT = {
							any_realm_character = {
								count = 2
								liege = { character = ROOT }
								has_minor_title = title_commander
							}
						}
					}
					AND = {
						tier = EMPEROR
						is_nomadic = yes
						NOT = {
							any_realm_character = {
								count = 4
								liege = { character = ROOT }
								has_minor_title = title_commander
							}
						}
					}
				}
			}
			event_target:found_commander = {
				give_minor_title = title_commander
			}
		}
	}
	
	option = {
		name = MNM.70013.o
		
		trigger = {
			OR = { 
				NOT = { ROOT = { has_law = succ_byzantine_elective } }  #Either not Imperial...
				higher_real_tier_than = BARON #...Or potential commander is vassal...
				NOT = { #...Or there are no valid vassal candidates that can be commanders.
					any_vassal = { 
						higher_real_tier_than = BARON
						NOT = { 
							primary_title = { temporary = yes } 
						}
						OR = {
							AND = {
								OR = {
									male_can_hold_minor_title_trigger = yes
									female_can_hold_minor_commander_title_trigger = yes
								}
								OR = {
									NOT = { religion = hindu }
									trait = kshatriya
								}
								is_adult = yes
							}
							has_character_flag = special_marshal
						}
				
						prisoner = no
						NOT = { trait = incapable }
						NOT = { is_inaccessible_trigger = yes }
						NOT = { has_character_flag = guru }
						NOT = { has_character_modifier = refusing_to_lead }
						NOR = {
							has_job_title = job_chancellor
							has_job_title = job_marshal
							has_job_title = job_treasurer
							has_job_title = job_spymaster
							has_job_title = job_spiritual
							has_minor_title = title_commander
						}
					} 
				}
			}
			any_realm_character = {
				NOT = {
					higher_tier_than = BARON
				}
				liege = { character = ROOT }
				has_minor_title = title_commander
				NOT = {
					martial = 10
				}
			}
			OR = {
				AND = {
					tier = COUNT
					any_realm_character = {
						count = 2
						liege = { character = ROOT }
						has_minor_title = title_commander
					}
				}
				AND = {
					tier = DUKE
					any_realm_character = {
						count = 4
						liege = { character = ROOT }
						has_minor_title = title_commander
					}
				}
				AND = {
					tier = KING
					is_nomadic = no
					any_realm_character = {
						count = 6
						liege = { character = ROOT }
						has_minor_title = title_commander
					}
				}
				AND = {
					tier = EMPEROR
					is_nomadic = no
					any_realm_character = {
						count = 8
						liege = { character = ROOT }
						has_minor_title = title_commander
					}
				}
				AND = {
					tier = KING
					is_nomadic = yes
					any_realm_character = {
						count = 2
						liege = { character = ROOT }
						has_minor_title = title_commander
					}
				}
				AND = {
					tier = EMPEROR
					is_nomadic = yes
					any_realm_character = {
						count = 4
						liege = { character = ROOT }
						has_minor_title = title_commander
					}
				}
			}
		}
		
		random_realm_character = {
			limit = {
				NOT = {
					higher_tier_than = BARON
				}
				liege = { character = ROOT }
				has_minor_title = title_commander
				NOT = {
					martial = 10
				}
			}
			remove_title = title_commander
			opinion = {
				modifier = insulted
				who = ROOT
				years = 2
			}
		}
		
		event_target:found_commander = {
			give_minor_title = title_commander
			opinion = {
				modifier = opinion_loyal_servant
				who = ROOT
				years = 5
			}
		}
	}
}

#depopulation modifier dissipating
province_event = {
	id = RIP.10030
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		OR = {
			has_province_modifier = depopulated_1
			has_province_modifier = depopulated_2
			has_province_modifier = depopulated_3
		}
		NOT = {
			has_disease = yes
			holder_scope = { trait = zombie }
		}
	}
	
	immediate = {
		random_list = {
			30 = {
				modifier = {
					factor = 1.5
					is_capital = yes
				}
				modifier = {
					factor = 1.3
					port = yes
				}
				modifier = {
					factor = 1.3
					has_trade_post = yes
				}
				modifier = {
					factor = 1.3
					holder_scope = {
						stewardship = 20
					}
				}
				modifier = {
					factor = 1.2
					holder_scope = {
						stewardship = 15
					}
				}
				modifier = {
					factor = 1.1
					holder_scope = {
						stewardship = 10
					}
				}
				modifier = {
					factor = 1.1
					num_of_settlements = 2
				}
				modifier = {
					factor = 1.1
					num_of_settlements = 3
				}
				modifier = {
					factor = 1.1
					num_of_settlements = 4
				}
				modifier = {
					factor = 1.1
					num_of_settlements = 5
				}
				modifier = {
					factor = 1.1
					num_of_settlements = 6
				}
				modifier = {
					factor = 1.1
					num_of_settlements = 7
				}
				modifier = {
					factor = 1.1
					hospital_level = 1
				}
				modifier = {
					factor = 1.1
					hospital_level = 2
				}
				modifier = {
					factor = 1.1
					hospital_level = 3
				}
				modifier = {
					factor = 1.1
					hospital_level = 4
				}
				modifier = {
					factor = 1.1
					hospital_level = 5
				}
				modifier = {
					factor = 1.1
					hospital_level = 6
				}
				decrease_depopulation_effect = yes
			}
			70 = { # Nothing Happens
				modifier = {
					factor = 3
					any_province_holding = {
						OR = {
							is_occupied = yes
							has_siege = yes
						}
					}
				}
				modifier = {
					factor = 3
					has_province_modifier = undead_desolation
				}
				modifier = {
					factor = 5
					culture_group = undead_culture_group
				}
				modifier = {
					factor = 1.2
					is_winter = yes
				}
				modifier = {
					factor = 1.5
					has_province_modifier = depopulated_2
				}
				modifier = {
					factor = 2
					has_province_modifier = depopulated_3
				}
			}
		}
	}
}

# On-action event: Pregnancy starts showing
character_event = {
	id = 400
	desc = { 
		text = EVTDESC400 
		trigger = { #The father is alive and a spouse
			is_married = yes			
			father_of_unborn = {
				is_alive = yes
				any_spouse = { character = ROOT }
			}
		}
	}
	desc = { 
		text = EVTDESC400_widow
		trigger = { #The father is dead and a spouse
			is_married = no
			father_of_unborn = {
				is_alive = no
				ROOT = {
					any_spouse_even_if_dead = {
						character = PREVPREV
					}
				}
			}
		}
	}
	desc = { 
		text = EVTDESC400_CONSORT
		trigger = { #Not married, but is consort
			is_married = no
			NOT = { num_of_consorts = 2 }
			NOT = {
				father_of_unborn = {
					is_alive = no
					ROOT = {
						any_spouse_even_if_dead = {
							character = PREVPREV
						}
					}
				}
			}
		}
	}
	desc = { 
		text = EVTDESC400_CONSORTS
		trigger = { #Not married, and multiple consorts
			is_married = no
			num_of_consorts = 2
			NOT = {
				father_of_unborn = {
					is_alive = no
					ROOT = {
						any_spouse_even_if_dead = {
							character = PREVPREV
						}
					}
				}
			}
		}
	}
	picture = GFX_evt_pregnancy
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	trigger = {
		NOR = {
			trait = pregnant
			trait = vampire
		}
		is_consort = no
		father_of_unborn = {
			OR = {
				AND = { #The father is alive and a spouse
					is_alive = yes
					any_spouse = { character = ROOT }
				}
				AND = { #The father is dead and a spouse
					is_alive = no
					ROOT = {
						any_spouse_even_if_dead = {
							character = PREVPREV
						}
					}
				}
				any_consort = {
					character = ROOT
					is_senior_consort_party = yes
				}
			}
			NOT = { trait = vampire }
		}
	}
	fail_trigger_effect = {
		if = {
			limit = {
				OR = {
					trait = vampire
					father_of_unborn = { trait = vampire }
				}
			}
			cancel_pregnancy = yes
		}
	}
	
	immediate = {
		add_trait = pregnant
	}
	
	option = {
		name = OK
		tooltip = { add_trait = pregnant }
		prestige = 10
		hidden_tooltip = { 
			if = { 
				limit = {
					ai = no
					NOT = { 
						any_courtier = { has_minor_title = title_appointed_regent } 
						has_dynasty_flag = pregnancy_regent_warning 
					} 
				}
				character_event = { id = HFP.20400 } 
			}
		}
		hidden_tooltip = { 
			random_list = { 
				80 = { 
					modifier = { 
						factor = 0.8
						trait = shy 
					}
					modifier = { 
						factor = 0.8
						is_ill = yes
					}
					modifier = { 
						factor = 0.9
						trait = possessed 
					}
					modifier = { 
						factor = 0.9
						trait = paranoid 
					}
					modifier = { 
						factor = 0.9
						trait = lunatic 
					}
					modifier = { 
						factor = 0.8
						trait = weak 
					}
					modifier = { 
						factor = 0.9
						age = 37 
					}
					modifier = { 
						factor = 0.9
						NOT = { age = 20 } 
					}
					modifier = { 
						factor = 0.8
						num_of_children = 4 
					}
					modifier = { 
						factor = 0.8
						num_of_children = 5 
					}
					modifier = { 
						factor = 0.8
						num_of_children = 6 
					}
					modifier = { 
						factor = 0.8
						num_of_children = 7 
					}
					modifier = { 
						factor = 0.8
						num_of_children = 8 
					}
					modifier = { 
						factor = 0.8
						has_character_flag = special_marshal
					}
					modifier = { 
						factor = 1.5
						is_tribal = yes
					}
					modifier = { 
						factor = 1.5
						is_nomadic = yes
					}
					modifier = { 
						factor = 0.6
						trait = feeble
					}
					modifier = { 
						factor = 0.5
						trait = is_malnourished
					}
					modifier = { 
						factor = 1.75
						trait = robust
					}
					modifier = { 
						factor = 1.5
						trait = strong
					}
					modifier = { 
						factor = 1.5
						trait = sturdy
					}
				} 
				20 = { 
					modifier = { 
						factor = 0.5
						is_ill = no
					}
					modifier = { 
						factor = 0.25
						age = 18
						NOT = { is_40 = yes }
					}
					modifier = { 
						factor = 2
						trait = drunkard
					}
					modifier = { 
						factor = 2
						has_character_modifier = hashish_addict
					}
					modifier = { 
						factor = 3
						has_character_modifier = withdrawal_symptoms
					}
					character_event = { id = HFP.20404	days = 10 random = 5 } #Hard pregnancy
				}
			}
		}
		
		if = {
			limit = {
				father_of_unborn = {
					is_alive = yes
				}
			}
			
			hidden_tooltip = {
				if = {
					limit = {
						father_of_unborn = {
							trait = paranoid
							is_consort = no #No authority to be paranoid. Indeed, he has no way of knowing the child is his.
						}
					}
					random = {
						chance = 50
						father_of_unborn = { character_event = { id = 404 } }
						break = yes
					}
				}
				if = {
					limit = {
						father_of_unborn = {
							NOT = { trait = paranoid }
							NOT = { trait = trusting }
						}
					}
					random = {
						chance = 1
						father_of_unborn = { character_event = { id = 404 } }
						break = yes
					}
				}
			}
			
			father_of_unborn = {
				show_scope_change = no
				character_event = { id = 403 tooltip = EVTTOOLTIP403 }
			}
		}
	}
}

# On-action event: Pregnancy out of wedlock!
character_event = {
	id = 401
	desc = EVTDESC401
	picture = GFX_evt_pregnancy
	border = GFX_event_normal_frame_intrigue
	
	is_married = no
	
	is_triggered_only = yes
	
	trigger = {
		NOR = {
			trait = pregnant
			trait = vampire
		}
		is_consort = no
		father_of_unborn = {
			NOR = {
				any_spouse = {
					character = ROOT
				}	
				any_consort = {
					character = ROOT
					is_senior_consort_party = yes
				}
				trait = vampire			
			}
		}
	}
	fail_trigger_effect = {
		if = {
			limit = {
				OR = {
					trait = vampire
					father_of_unborn = { trait = vampire }
				}
			}
			cancel_pregnancy = yes
		}
	}
	
	immediate = {
		add_trait = pregnant
	}
	
	option = {
		name = OK
		tooltip = { add_trait = pregnant }
		piety = -50
		prestige = -50
		hidden_tooltip = { 
			if = { 
				limit = {
					ai = no
					NOT = { any_courtier = { has_minor_title = title_appointed_regent } 
					has_global_flag = pregnancy_regent_warning } 
					}
				character_event = { id = HFP.20400 } 
			}
		}
		hidden_tooltip = { 
			random_list = { 
				50 = { 
					modifier = { 
						factor = 0.8
						trait = shy 
					}
					modifier = { 
						factor = 0.8
						is_ill = yes
					}
					modifier = { 
						factor = 0.8
						trait = possessed 
					}
					modifier = { 
						factor = 0.8
						trait = paranoid 
					}
					modifier = { 
						factor = 0.8
						trait = lunatic 
					}
					modifier = { 
						factor = 0.8
						trait = weak 
					}
					modifier = { 
						factor = 0.8
						age = 37 
					}
					modifier = { 
						factor = 0.8
						NOT = { age = 20 } 
					}
					modifier = { 
						factor = 0.8
						num_of_children = 3 
					}
					modifier = { 
						factor = 0.8
						num_of_children = 4 
					}
					modifier = { 
						factor = 0.8
						num_of_children = 5 
					}
					modifier = { 
						factor = 0.8
						num_of_children = 6 
					}
					modifier = { 
						factor = 0.8
						num_of_children = 7 
					}
					modifier = { 
						factor = 0.8
						has_character_flag = special_marshal
					}
					modifier = { 
						factor = 0.8
						trait = shieldmaiden
					}
					modifier = { 
						factor = 0.6
						trait = feeble
					}
					modifier = { 
						factor = 1.75
						trait = robust
					}
					modifier = { 
						factor = 1.5
						trait = strong
					}
				} 
				50 = { 
					modifier = { 
						factor = 0.5
						is_ill = no
					}
					modifier = { 
						factor = 0.25
						age = 18
						NOT = { is_40 = yes }
					}
					modifier = { 
						factor = 2
						trait = drunkard
					}
					modifier = { 
						factor = 2
						has_character_modifier = hashish_addict
					}
					modifier = { 
						factor = 3
						has_character_modifier = withdrawal_symptoms
					}
					character_event = { id = HFP.20404	days = 10 random = 5 } #Hard pregnancy
				}
			}
		}
	}
}

# On-action event: Pregnancy in matrimony, with another father!
character_event = {
	id = 402
	desc = EVTDESC402
	picture = GFX_evt_pregnancy
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes

	is_married = yes
	
	trigger = {
		NOR = {
			trait = pregnant
			trait = vampire
		}
		father_of_unborn = {
			NOR = {
				any_spouse = {
					character = ROOT
				}
				trait = vampire
			}
		}
	}
	fail_trigger_effect = {
		if = {
			limit = {
				OR = {
					trait = vampire
					father_of_unborn = { trait = vampire }
				}
			}
			cancel_pregnancy = yes
		}
	}
	
	immediate = {
		add_trait = pregnant
	}
	
	option = {
		name = EVTOPTA402
		tooltip = { add_trait = pregnant }
		
#		log = "402: [Root.GetTitledName], wife of [Root.Spouse.GetTitledName] in [Root.Employer.PrimaryTitle.GetName] gets pregnant with [Root.FatherOfUnborn.GetTitledName]."
		
		spouse = {
			show_scope_change = no
			character_event = { id = 404 tooltip = EVTTOOLTIP404 }
		}
		hidden_tooltip = { 
			if = { 
				limit = {
					ai = no
					NOT = { any_courtier = { has_minor_title = title_appointed_regent } 
					has_global_flag = pregnancy_regent_warning } 
					}
				character_event = { id = HFP.20400 } 
			}
		}
		hidden_tooltip = { 
			random_list = { 
				70 = { 
					modifier = { 
						factor = 0.8
						trait = shy 
					}
					modifier = { 
						factor = 0.8
						is_ill = yes
					}
					modifier = { 
						factor = 0.8
						trait = possessed 
					}
					modifier = { 
						factor = 0.8
						trait = paranoid 
					}
					modifier = { 
						factor = 0.8
						trait = lunatic 
					}
					modifier = { 
						factor = 0.8
						trait = weak 
					}
					modifier = { 
						factor = 0.8
						age = 37 
					}
					modifier = { 
						factor = 0.8
						NOT = { age = 20 } 
					}
					modifier = { 
						factor = 0.8
						num_of_children = 3 
					}
					modifier = { 
						factor = 0.8
						num_of_children = 4 
					}
					modifier = { 
						factor = 0.8
						num_of_children = 5 
					}
					modifier = { 
						factor = 0.8
						num_of_children = 6 
					}
					modifier = { 
						factor = 0.8
						num_of_children = 7 
					}
					modifier = { 
						factor = 0.8
						has_character_flag = special_marshal
					}
					modifier = { 
						factor = 0.8
						trait = shieldmaiden
					}
					modifier = { 
						factor = 0.6
						trait = feeble
					}
					modifier = { 
						factor = 1.75
						trait = robust
					}
					modifier = { 
						factor = 1.5
						trait = strong
					}
				} 
				30 = { 
					modifier = { 
						factor = 0.5
						is_ill = no
					}
					modifier = { 
						factor = 0.25
						age = 18
						NOT = { is_40 = yes }
					}
					modifier = { 
						factor = 2
						trait = drunkard
					}
					modifier = { 
						factor = 2
						has_character_modifier = hashish_addict
					}
					modifier = { 
						factor = 3
						has_character_modifier = withdrawal_symptoms
					}
					character_event = { id = HFP.20404	days = 10 random = 5 } #Hard pregnancy
				}
			}
		}
	}
}

# Consort: Pregnancy starts showing
character_event = {
	id = 410
	desc = EVTDESC410
	picture = GFX_evt_pregnancy
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	trigger = {
		NOT = {
			trait = pregnant
			trait = vampire
		}
		father_of_unborn = {
			ROOT = {
				is_consort = PREV
			}
			NOT = { trait = vampire }
		}
	}
	fail_trigger_effect = {
		if = {
			limit = {
				OR = {
					trait = vampire
					father_of_unborn = { trait = vampire }
				}
			}
			cancel_pregnancy = yes
		}
	}
	
	immediate = {
		add_trait = pregnant
	}
	
	option = {
		name = ALAS
		tooltip = { add_trait = pregnant }
		prestige = 10
		
		hidden_tooltip = { 
			random_list = { 
				70 = { 
					modifier = { 
						factor = 0.8
						trait = shy 
					}
					modifier = { 
						factor = 0.8
						is_ill = yes
					}
					modifier = { 
						factor = 0.8
						trait = possessed 
					}
					modifier = { 
						factor = 0.8
						trait = paranoid 
					}
					modifier = { 
						factor = 0.8
						trait = lunatic 
					}
					modifier = { 
						factor = 0.8
						trait = weak 
					}
					modifier = { 
						factor = 0.8
						age = 37 
					}
					modifier = { 
						factor = 0.8
						NOT = { age = 20 } 
					}
					modifier = { 
						factor = 0.8
						num_of_children = 3 
					}
					modifier = { 
						factor = 0.8
						num_of_children = 4 
					}
					modifier = { 
						factor = 0.8
						num_of_children = 5 
					}
					modifier = { 
						factor = 0.8
						num_of_children = 6 
					}
					modifier = { 
						factor = 0.8
						num_of_children = 7 
					}
					modifier = { 
						factor = 0.8
						has_character_flag = special_marshal
					}
					modifier = { 
						factor = 0.8
						trait = shieldmaiden
					}
					modifier = { 
						factor = 0.6
						trait = feeble
					}
					modifier = { 
						factor = 1.75
						trait = robust
					}
					modifier = { 
						factor = 1.5
						trait = strong
					}
				} 
				30 = { 
					modifier = { 
						factor = 0.5
						is_ill = no
					}
					modifier = { 
						factor = 0.25
						age = 18
						NOT = { age = 40 }
					}
					modifier = { 
						factor = 2
						trait = drunkard
					}
					modifier = { 
						factor = 2
						has_character_modifier = hashish_addict
					}
					modifier = { 
						factor = 3
						has_character_modifier = withdrawal_symptoms
					}
					character_event = { id = HFP.20404	days = 10 random = 5 } #Hard pregnancy
				}
			}
		}
		if = {
			limit = {
				father_of_unborn = {
					is_alive = yes
				}
			}
			
			hidden_tooltip = {
				if = {
					limit = {
						father_of_unborn = {
							trait = paranoid
						}
					}
					random = {
						chance = 50
						father_of_unborn = { character_event = { id = 404 } }
						break = yes
					}
				}
				if = {
					limit = {
						father_of_unborn = {
							NOT = { trait = paranoid }
							NOT = { trait = trusting }
						}
					}
					random = {
						chance = 1
						father_of_unborn = { character_event = { id = 404 } }
						break = yes
					}
				}
			}
			
			if = {
				limit = {
					father_of_unborn = { is_lover = ROOT }		
				}
				custom_tooltip = { text = EVTTOOLTIP413 }
			}
			else = {
				father_of_unborn = {
					show_scope_change = no
					character_event = { id = 413 tooltip = EVTTOOLTIP413 }
				}
			}
		}
	}
}

# Consort: Pregnancy with another father!
character_event = {
	id = 412
	desc = EVTDESC412
	picture = "GFX_evt_pregnancy"
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	trigger = {
		NOR = {
			trait = pregnant
			trait = vampire
		}
		is_consort = yes
		NOT = {
			father_of_unborn = {
				OR = {
					ROOT = {
						is_consort = PREV
					}
					trait = vampire
				}
			}
		}
	}
	fail_trigger_effect = {
		if = {
			limit = {
				OR = {
					trait = vampire
					father_of_unborn = { trait = vampire }
				}
			}
			cancel_pregnancy = yes
		}
	}
	
	immediate = {
		add_trait = pregnant
	}
	
	option = {
		name = EVTOPTA412
		tooltip = { add_trait = pregnant }
		consort = { character_event = { id = 404 tooltip = EVTTOOLTIP404 } }
		hidden_tooltip = { 
			random_list = { 
				70 = { 
					modifier = { 
						factor = 0.8
						trait = shy 
					}
					modifier = { 
						factor = 0.8
						is_ill = yes
					}
					modifier = { 
						factor = 0.8
						trait = possessed 
					}
					modifier = { 
						factor = 0.8
						trait = paranoid 
					}
					modifier = { 
						factor = 0.8
						trait = lunatic 
					}
					modifier = { 
						factor = 0.8
						trait = weak 
					}
					modifier = { 
						factor = 0.8
						age = 37 
					}
					modifier = { 
						factor = 0.8
						NOT = { age = 20 } 
					}
					modifier = { 
						factor = 0.8
						num_of_children = 3 
					}
					modifier = { 
						factor = 0.8
						num_of_children = 4 
					}
					modifier = { 
						factor = 0.8
						num_of_children = 5 
					}
					modifier = { 
						factor = 0.8
						num_of_children = 6 
					}
					modifier = { 
						factor = 0.8
						num_of_children = 7 
					}
					modifier = { 
						factor = 0.8
						has_character_flag = special_marshal
					}
					modifier = { 
						factor = 0.8
						trait = shieldmaiden
					}
					modifier = { 
						factor = 0.6
						trait = feeble
					}
					modifier = { 
						factor = 1.75
						trait = robust
					}
					modifier = { 
						factor = 1.5
						trait = strong
					}
				} 
				30 = { 
					modifier = { 
						factor = 0.5
						is_ill = no
					}
					modifier = { 
						factor = 0.25
						age = 18
						NOT = { age = 40 }
					}
					modifier = { 
						factor = 2
						trait = drunkard
					}
					modifier = { 
						factor = 2
						has_character_modifier = hashish_addict
					}
					modifier = { 
						factor = 3
						has_character_modifier = withdrawal_symptoms
					}
					character_event = { id = HFP.20404	days = 10 random = 5 } #Hard pregnancy
				}
			}
		}
	}
}

#on_pregnancy, set clock for finishing phase at 2 months
character_event = {
	id = HFP.20401
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		NOR = {
			trait = vampire
			father_of_unborn = { trait = vampire }
		}
	}

	immediate = { 
		character_event = { id = HFP.20402 days = 170 }
	}
}

#on_pregnancy positive events.
character_event = {
	id = HFP.20556
	hide_window = yes

	trigger = { 
		NOR = {
			trait = vampire
			father_of_unborn = { trait = vampire }
		}
		OR = {
			has_game_rule = {
				name = pregnancy_flavor
				value = on
			}
			has_game_rule = {
				name = pregnancy_flavor
				value = limited
			}
		}
	}
	
	is_triggered_only = yes

	immediate = { 
		clr_character_flag = flag_mother_dark_rest
		clr_character_flag = mother_gossip_listening #Safety check, they should already have been removed
		clr_character_flag = mother_gossip_talking
		clr_character_flag = mother_gossip_trusting
		clr_character_flag = mother_gossip_plotting
		clr_character_flag = mother_gossip_envious
		clr_character_flag = mother_gossip_shy
		clr_character_flag = mother_gossip_learning
		clr_character_flag = mother_gossip_content
		clr_character_flag = mother_gossip_gluttonous
		clr_character_flag = flag_mother_festival_gregarious
		clr_character_flag = flag_mother_festival_kind
		clr_character_flag = flag_mother_festival_piety
		clr_character_flag = flag_mother_festival_proud
		clr_character_flag = flag_mother_festival_ambitious
		clr_character_flag = flag_mother_festival_prestige
		clr_character_flag = flag_mother_festival_peasants
		clr_character_flag = flag_mother_festival_vassals
		clr_character_flag = flag_mother_festival_gluttonous
		clr_character_flag = flag_mother_festival_drunkard
		clr_character_flag = flag_mother_festival_chaste
		clr_character_flag = flag_mother_festival_lustful
		any_lover = {  
			limit = {
				ai = no
				is_female = no # So lesbian lovers will not believe the child is theirs.
			}
			character_event = { id = HFP.20067 }
		}
		#First pregnancy scare. 
		random_list = {
			20 = {}
			80 = {
				modifier = { 
					factor = 0.5
					has_game_rule = {
						name = pregnancy_flavor
						value = limited
					}
				}
				modifier = { 
					factor = 1.5
					NOT = { age = 20 }
				}
				modifier = { 
					factor = 0
					num_of_children = 1
				}
				modifier = { 
					factor = 1.5
					is_married = no
				}
				modifier = { 
					factor = 1.75
					trait = craven
				}
				modifier = { 
					factor = 0.5
					trait = brave
				}

				character_event = { id = HFP.20557 days = 7 random = 5 }
			}
		}
		#Random stuff 
		random_list = {
			#Pregnancy Glow
			10 = {
				modifier = { 
					factor = 0.5
					has_game_rule = {
						name = pregnancy_flavor
						value = limited
					}
				}
				modifier = { #Make events less likely to become recurring at every pregnancy.
					factor = 0.5
					num_of_children = 2
				}
				modifier = { #Make events less likely to become recurring at every pregnancy.
					factor = 0.35
					num_of_children = 3
				}
				modifier = { #Make events less likely to become recurring at every pregnancy.
					factor = 0.25
					num_of_children = 4
				}
				modifier = { #Make events less likely to become recurring at every pregnancy.
					factor = 0.15
					num_of_children = 5
				}
				modifier = { 
					factor = 1.5
					NOT = { age = 25 }
				}
				modifier = { 
					factor = 0.25
					age = 35
				}
				modifier = { 
					factor = 0.1
					age = 45
				}
				character_event = { id = HFP.20003 days = 25 random = 10 }
			}
			#Dark Rest
			10 = {
				modifier = { 
					factor = 0.5
					has_game_rule = {
						name = pregnancy_flavor
						value = limited
					}
				}
				modifier = { #Make events less likely to become recurring at every pregnancy.
					factor = 0.5
					num_of_children = 2
				}
				modifier = { #Make events less likely to become recurring at every pregnancy.
					factor = 0.35
					num_of_children = 3
				}
				modifier = { #Make events less likely to become recurring at every pregnancy.
					factor = 0.25
					num_of_children = 4
				}
				modifier = { #Make events less likely to become recurring at every pregnancy.
					factor = 0.15
					num_of_children = 5
				}
				modifier = { 
					factor = 1.5
					NOT = { age = 25 }
				}
				modifier = { 
					factor = 0
					NOT = { higher_tier_than = BARON }
					spouse = { lower_tier_than = COUNT }
				}
				modifier = { 
					factor = 0.25
					age = 35
				}
				modifier = { 
					factor = 0.1
					age = 45
				}
				#Fires for woman if landed, otherwise husband.
				if = { 
					limit = { is_ruler = yes } 
					character_event = { id = HFP.20030 days = 60 random = 10 }
				}
				else = { spouse = { character_event = { id = HFP.20030 days = 60 random = 10 } } } 
			}
			#Baby kicks
			20 = {
				modifier = { 
					factor = 0.5
					has_game_rule = {
						name = pregnancy_flavor
						value = limited
					}
				}
				modifier = { #Make events less likely to become recurring at every pregnancy.
					factor = 0.5
					num_of_children = 2
				}
				modifier = { #Make events less likely to become recurring at every pregnancy.
					factor = 0.35
					num_of_children = 3
				}
				modifier = { #Make events less likely to become recurring at every pregnancy.
					factor = 0.25
					num_of_children = 4
				}
				modifier = { #Make events less likely to become recurring at every pregnancy.
					factor = 0.15
					num_of_children = 5
				}
				character_event = { id = HFP.20558 days = 80 random = 20 }
			}
			#Gender wager
			30 = {
				modifier = { 
					factor = 0.5
					has_game_rule = {
						name = pregnancy_flavor
						value = limited
					}
				}
				modifier = { #Make events less likely to become recurring at every pregnancy.
					factor = 0.5
					num_of_children = 2
				}
				modifier = { #Make events less likely to become recurring at every pregnancy.
					factor = 0.35
					num_of_children = 3
				}
				modifier = { #Make events less likely to become recurring at every pregnancy.
					factor = 0.25
					num_of_children = 4
				}
				modifier = { #Make events less likely to become recurring at every pregnancy.
					factor = 0.15
					num_of_children = 5
				}
				modifier = { 
					factor = 0
					NOT = { num_of_children = 1 }
				}
				modifier = { #Already have an heir
					factor = 0
					any_child = { 
						is_female = no
					}
					OR = { 
						has_law = agnatic_succession
						has_law = cognatic_succession
					}
				}
				modifier = { #Already have an heir
					factor = 0
					any_child = { 
						is_female = yes
					}
					OR = { 
						has_law = enatic_cognatic_succession
						has_law = enatic_succession
					}
				}
				modifier = { #Doesn't really matter.
					factor = 0.5
					OR = { 
						has_law = status_of_women_4
						has_law = true_cognatic_succession
					}
				}
				character_event = { id = HFP.20559 days = 60 random = 10 }
			}
			#Ordering new dresses
			15 = {
				modifier = { 
					factor = 0.5
					has_game_rule = {
						name = pregnancy_flavor
						value = limited
					}
				}
				modifier = { #Make events less likely to become recurring at every pregnancy.
					factor = 0.5
					num_of_children = 2
				}
				modifier = { #Make events less likely to become recurring at every pregnancy.
					factor = 0.35
					num_of_children = 3
				}
				modifier = { #Make events less likely to become recurring at every pregnancy.
					factor = 0.25
					num_of_children = 4
				}
				modifier = { #Make events less likely to become recurring at every pregnancy.
					factor = 0.15
					num_of_children = 5
				}
				modifier = { 
					factor = 0.5
					trait = temperate
				}
				modifier = { 
					factor = 1.5
					trait = gluttonous
				}
				modifier = { 
					factor = 0.25
					trait = is_malnourished
				}
				modifier = { 
					factor = 1.75
					trait = is_fat
				}
				modifier = { 
					factor = 1.5
					trait = sturdy
				}
				modifier = { 
					factor = 0.5
					trait = feeble
				}
				character_event = { id = HFP.20560 days = 80 random = 100 }
			}
			#Positive omen
			5 = {
				modifier = { 
					factor = 0.5
					has_game_rule = {
						name = pregnancy_flavor
						value = limited
					}
				}
				modifier = { #Make events less likely to become recurring at every pregnancy.
					factor = 0.5
					num_of_children = 2
				}
				modifier = { #Make events less likely to become recurring at every pregnancy.
					factor = 0.35
					num_of_children = 3
				}
				modifier = { #Make events less likely to become recurring at every pregnancy.
					factor = 0.25
					num_of_children = 4
				}
				modifier = { #Make events less likely to become recurring at every pregnancy.
					factor = 0.15
					num_of_children = 5
				}
				modifier = { 
					factor = 1.5
					trait = zealous
				}
				modifier = { 
					factor = 0.5
					trait = cynical
				}
				modifier = { 
					factor = 1.5
					is_tribal = yes
				}
				modifier = { 
					factor = 1.5
					is_nomadic = yes
				}
				character_event = { id = HFP.20565 days = 65 random = 20 }
			}
			#Negative omen
			5 = {
				modifier = { 
					factor = 0.5
					has_game_rule = {
						name = pregnancy_flavor
						value = limited
					}
				}
				modifier = { #Make events less likely to become recurring at every pregnancy.
					factor = 0.5
					num_of_children = 2
				}
				modifier = { #Make events less likely to become recurring at every pregnancy.
					factor = 0.35
					num_of_children = 3
				}
				modifier = { #Make events less likely to become recurring at every pregnancy.
					factor = 0.25
					num_of_children = 4
				}
				modifier = { #Make events less likely to become recurring at every pregnancy.
					factor = 0.15
					num_of_children = 5
				}
				modifier = { 
					factor = 1.5
					trait = zealous
				}
				modifier = { 
					factor = 0.5
					trait = cynical
				}
				modifier = { 
					factor = 1.5
					is_tribal = yes
				}
				modifier = { 
					factor = 1.5
					is_nomadic = yes
				}
				character_event = { id = HFP.20567 days = 65 random = 20 }
			}
			#Nothing
			15 = {
				modifier = { 
					factor = 0.5
					NOT = { num_of_children = 1 }
				}
				modifier = { #Make events less likely to become recurring at every pregnancy.
					factor = 1.5
					num_of_children = 1
				}
				modifier = { #Make events less likely to become recurring at every pregnancy.
					factor = 1.5
					num_of_children = 2
				}
				modifier = { #Make events less likely to become recurring at every pregnancy.
					factor = 1.5
					num_of_children = 3
				}
				modifier = { #Make events less likely to become recurring at every pregnancy.
					factor = 1.75
					num_of_children = 4
				}
				modifier = { #Make events less likely to become recurring at every pregnancy.
					factor = 1.8
					num_of_children = 5
				}
				modifier = { 
					factor = 1.5
					age = 35
				}
				modifier = { 
					factor = 1.75
					age = 40
				}
			}
		}
		#Vows and sacrifices for healthy child (rulers only).
		random_list = {
			#Holy Virgin for Christians
			45 = {
				trigger = { 
					is_ruler = yes
					religion_group = christian
					NOT = { society_member_of = the_satanists }
					NOT = { num_of_children = 3 }
					NOT = { is_devil_worshiper_trigger = yes }
				}
				modifier = { 
					factor = 0.5
					has_game_rule = {
						name = pregnancy_flavor
						value = limited
					}
				}
				modifier = { 
					factor = 0.25
					num_of_children = 1
				}
				character_event = { id = HFP.20569 days = 15 random = 8 }
			}
			#Fertility festival for baltic, norse, finnish pagans.
			90 = {
				trigger = { 
					is_married = yes
					is_main_spouse = yes
					NOR = { 
						num_of_children = 3 
						has_character_modifier = mother_fertility_festival_1
						has_character_modifier = mother_fertility_festival_2
						has_character_modifier = mother_festival_blessing
					}
					OR = { 
						higher_real_tier_than = COUNT
						spouse = { higher_real_tier_than = COUNT } 
					} 
					spouse = { 
						OR = { 
							religion = norse_pagan
							religion = norse_pagan_reformed
							religion = baltic_pagan
							religion = baltic_pagan_reformed
							religion = finnish_pagan
							religion = finnish_pagan_reformed 
						}  
						NOR = { 
							trait = incapable 
							prisoner = yes
							is_inaccessible_trigger = yes
						}
					}
					OR = { 
						religion = norse_pagan
						religion = norse_pagan_reformed
						religion = baltic_pagan
						religion = baltic_pagan_reformed
						religion = finnish_pagan
						religion = finnish_pagan_reformed 
					} 
				}
				modifier = { 
					factor = 0.5
					has_game_rule = {
						name = pregnancy_flavor
						value = limited
					}
				}
				modifier = { 
					factor = 0.25
					num_of_children = 1
				}
				modifier = { 
					factor = 1.5
					is_attractive_trigger = yes
				}
				modifier = { 
					factor = 1.5
					NOT = { age = 30 }
				}
				modifier = { 
					factor = 1.5
					OR = { 
						real_tier = KING
						spouse = { real_tier = KING }
					}
				}
				modifier = { 
					factor = 1.75
					OR = { 
						real_tier = EMPEROR
						spouse = { real_tier = EMPEROR }
					}
				}
				modifier = { 
					factor = 0.85
					is_ill = yes
				}
				spouse = { character_event = { id = HFP.20043 days = 15 random = 8 } }
			}
			#Sacrifices for Pagans
			50 = {
				trigger = { 
					is_ruler = yes
					religion_group = pagan_group
					OR = { 
						is_tribal = yes
						is_nomadic = yes
					}
				}
				modifier = { 
					factor = 0.5
					has_game_rule = {
						name = pregnancy_flavor
						value = limited
					}
				}
				modifier = { #If she qualifies for Fertility Festival, prioritize that instead.
					factor = 0.2
					is_married = yes
					is_main_spouse = yes
					NOR = { 
						num_of_children = 3 
						has_character_modifier = mother_fertility_festival_1
						has_character_modifier = mother_fertility_festival_2
						has_character_modifier = mother_festival_blessing
					}
					OR = { 
						higher_real_tier_than = COUNT
						spouse = { higher_real_tier_than = COUNT } 
					} 
					spouse = { 
						OR = { 
							religion = norse_pagan
							religion = norse_pagan_reformed
							religion = baltic_pagan
							religion = baltic_pagan_reformed
							religion = finnish_pagan
							religion = finnish_pagan_reformed 
						}  
						NOR = { 
							trait = incapable 
							prisoner = yes
							is_inaccessible_trigger = yes
						}
					}
					OR = { 
						religion = norse_pagan
						religion = norse_pagan_reformed
						religion = baltic_pagan
						religion = baltic_pagan_reformed
						religion = finnish_pagan
						religion = finnish_pagan_reformed 
					} 
				}
				modifier = { 
					factor = 0.5
					num_of_children = 1
				}
				modifier = { 
					factor = 1.25
					trait = weak
				}
				modifier = { 
					factor = 1.25
					trait = feeble
				}
				modifier = { 
					factor = 1.5
					trait = inbred
				}
				modifier = { 
					factor = 1.25
					trait = hunchback
				}
				modifier = { 
					factor = 1.25
					trait = dwarf
				}
				modifier = { 
					factor = 1.25
					father_even_if_dead = { trait = weak }
				}
				modifier = { 
					factor = 1.25
					father_even_if_dead = { trait = feeble }
				}
				modifier = { 
					factor = 1.25
					father_even_if_dead = { trait = inbred }
				}
				modifier = { 
					factor = 1.25
					father_even_if_dead = { trait = hunchback }
				}
				modifier = { 
					factor = 1.25
					father_even_if_dead = { trait = dwarf }
				}
				character_event = { id = HFP.20571 days = 15 random = 8 }
			}
			#Nothing
			45 = {
				modifier = { 
					factor = 0.5
					NOT = { num_of_children = 1 }
				}
				modifier = { 
					factor = 0.75	#Young mom is scared.
					NOT = { age = 20 }
				}
				modifier = { 
					factor = 0.75	#Old mom is scared.
					age = 37
				}
				modifier = { 
					factor = 1.5
					is_ill = no
				}
				modifier = { 
					factor = 0.75
					trait = zealous
				}
				modifier = { 
					factor = 1.5
					trait = cynical
				}
				modifier = { 
					factor = 2
					num_of_children = 4
				}
				modifier = { 
					factor = 3
					num_of_children = 5
				}
				modifier = { 
					factor = 1.5
					age = 35
				}
			}
		}
		# Selection of events that can give the child different traits on birth
		# First, find appropraite characters to make things easier
		# Evil sorcerer
		random_list = {
			1 = { # Jealous heir
				trigger = {
					is_landed = yes
					current_heir = { trait = enchanter }
					NOT = { has_law = succ_seniority }
					NOT = { has_law = succ_appointment }
					NOT = { has_law = succ_patrician_elective }
					OR = {
						NOT = { has_law = succ_primogeniture }
						current_heir = { mother = { NOT = { character = ROOT } } }
						AND = {
							current_heir = { is_female = yes }
							has_law = cognatic_succession
						}
						AND = {
							current_heir = { is_female = no }
							has_law = enatic_cognatic_succession
						}
					}
				}
				current_heir = { save_event_target_as = evil_sorcerer }
			}
			1 = { # Jelous heir of spouse
				trigger = {
					any_spouse = {
						is_landed = yes
						current_heir = {
							trait = enchanter
							NOT = { character = ROOT }
						}
					}
				}
				random_spouse = {
					limit = {
						is_landed = yes
						current_heir = {
							trait = enchanter
							NOT = { character = ROOT }
						}
					}
					current_heir = { save_event_target_as = evil_sorcerer }
				}
			}
			1 = { # Rival
				trigger = {
					any_rival = { trait = enchanter }
				}
				random_rival = {
					limit = { trait = enchanter }
					save_event_target_as = evil_sorcerer
				}
			}
			1 = { # Father's rival
				trigger = {
					father_of_unborn = {
						any_rival = {
							NOT = { character = ROOT }
							NOT = { any_spouse = { character = ROOT } }
							trait = enchanter
						}
					}
				}
				father_of_unborn = {
					random_rival = {
						limit = {
							NOT = { character = ROOT }
							NOT = { any_spouse = { character = ROOT } }
							trait = enchanter
						}
						save_event_target_as = evil_sorcerer
					}
				}
			}
			1 = { # Spouse's rival
				trigger = {
					any_spouse = {
						any_rival = {
							NOT = { character = ROOT }
							trait = enchanter
						}
					}
				}
				random_spouse = {
					random_rival = {
						limit = {
							NOT = { character = ROOT }
							trait = enchanter
						}
						save_event_target_as = evil_sorcerer
					}
				}
			}
			1 = { # Rival Wife
				trigger = {
					any_spouse = {
						any_spouse = {
							NOT = { character = ROOT }
							trait = enchanter
						}
					}
				}
				random_spouse = {
					random_spouse = {
						limit = {
							NOT = { character = ROOT }
							trait = enchanter
						}
						save_event_target_as = evil_sorcerer
					}
				}
			}
		}
		# Evil poisoner
		random_list = {
			1 = { # Jealous heir
				trigger = {
					is_landed = yes
					current_heir = {
						trait = herbalist
						same_realm = ROOT
						has_any_ingredient = yes
					}
				}
				current_heir = { save_event_target_as = evil_herbalist }
			}
			1 = { # Jelous heir of spouse
				trigger = {
					any_spouse = {
						is_landed = yes
						current_heir = {
							trait = herbalist
							NOT = { character = ROOT }
							same_realm = ROOT
							has_any_ingredient = yes
						}
					}
				}
				random_spouse = {
					limit = {
						is_landed = yes
						current_heir = {
							trait = herbalist
							NOT = { character = ROOT }
							same_realm = ROOT
							has_any_ingredient = yes
						}
					}
					current_heir = { save_event_target_as = evil_herbalist }
				}
			}
			1 = { # Rival
				trigger = {
					any_rival = {
						trait = herbalist
						same_realm = ROOT
						has_any_ingredient = yes
					}
				}
				random_rival = {
					limit = {
						trait = herbalist
						same_realm = ROOT
						has_any_ingredient = yes
					}
					save_event_target_as = evil_herbalist
				}
			}
			1 = { # Father's rival
				trigger = {
					father_of_unborn = {
						any_rival = {
							NOT = { character = ROOT }
							NOT = { any_spouse = { character = ROOT } }
							trait = herbalist
							same_realm = ROOT
							has_any_ingredient = yes
						}
					}
				}
				father_of_unborn = {
					random_rival = {
						limit = {
							NOT = { character = ROOT }
							NOT = { any_spouse = { character = ROOT } }
							trait = herbalist
							same_realm = ROOT
							has_any_ingredient = yes
						}
						save_event_target_as = evil_herbalist
					}
				}
			}
			1 = { # Spouse's rival
				trigger = {
					any_spouse = {
						any_rival = {
							NOT = { character = ROOT }
							trait = herbalist
							same_realm = ROOT
							has_any_ingredient = yes
						}
					}
				}
				random_spouse = {
					random_rival = {
						limit = {
							NOT = { character = ROOT }
							trait = herbalist
							same_realm = ROOT
							has_any_ingredient = yes
						}
						save_event_target_as = evil_herbalist
					}
				}
			}
			1 = { # Rival Wife
				trigger = {
					any_spouse = {
						any_spouse = {
							NOT = { character = ROOT }
							trait = herbalist
							same_realm = ROOT
							has_any_ingredient = yes
						}
					}
				}
				random_spouse = {
					random_spouse = {
						limit = {
							NOT = { character = ROOT }
							trait = herbalist
							same_realm = ROOT
							has_any_ingredient = yes
						}
						save_event_target_as = evil_herbalist
					}
				}
			}
		}
		# Good sorcerer
		random_list = {
			1 = {
				trigger = {
					any_courtier_or_vassal = {
						has_minor_title = title_court_physician
						liege = { character = ROOT }
						trait = enchanter
					}
				}
				random_courtier_or_vassal = {
					limit = {
						has_minor_title = title_court_physician
						liege = { character = ROOT }
						trait = enchanter
					}
					save_event_target_as = good_sorcerer
				}
			}
			1 = {
				trigger = {
					any_spouse = {
						any_courtier_or_vassal = {
							has_minor_title = title_court_physician
							liege = { character = ROOT }
							trait = enchanter
						}
					}
				}
				random_spouse = {
					limit = {
						any_courtier_or_vassal = {
							has_minor_title = title_court_physician
							liege = { character = ROOT }
							trait = enchanter
						}
					}
					random_courtier_or_vassal = {
						limit = {
							has_minor_title = title_court_physician
							liege = { character = ROOT }
							trait = enchanter
						}
						save_event_target_as = good_sorcerer
					}
				}
			}
			1 = {
				trigger = {
					any_friend = { trait = enchanter }
				}
				random_friend = {
					limit = { trait = enchanter }
					save_event_target_as = good_sorcerer
				}
			}
			1 = {
				trigger = {
					father_of_unborn = { trait = enchanter }
				}
				father_of_unborn = {
					save_event_target_as = good_sorcerer
				}
			}
			1 = {
				trigger = {
					any_spouse = {
						any_friend = {
							trait = enchanter
						}
					}
				}
				random_spouse = {
					limit = {
						any_friend = { trait = enchanter }
					}
					random_friend = {
						limit = { trait = enchanter }
						save_event_target_as = good_sorcerer
					}
				}
			}
			1 = {
				trigger = {
					father_of_unborn = {
						any_friend = { trait = enchanter }
					}
				}
				father_of_unborn = {
					random_friend = {
						limit = { trait = enchanter }
						save_event_target_as = good_sorcerer
					}
				}
			}
		}
		# Good Herbalist
		random_list = {
			1 = {
				trigger = {
					any_courtier_or_vassal = {
						has_minor_title = title_court_physician
						liege = { character = ROOT }
						trait = herbalist
						has_any_ingredient = yes
					}
				}
				random_courtier_or_vassal = {
					limit = {
						has_minor_title = title_court_physician
						liege = { character = ROOT }
						trait = herbalist
						has_any_ingredient = yes
					}
					save_event_target_as = good_herbalist
				}
			}
			1 = {
				trigger = {
					any_spouse = {
						any_courtier_or_vassal = {
							has_minor_title = title_court_physician
							liege = { character = ROOT }
							trait = herbalist
							has_any_ingredient = yes
						}
					}
				}
				random_spouse = {
					limit = {
						any_courtier_or_vassal = {
							has_minor_title = title_court_physician
							liege = { character = ROOT }
							trait = herbalist
							has_any_ingredient = yes
						}
					}
					random_courtier_or_vassal = {
						limit = {
							has_minor_title = title_court_physician
							liege = { character = ROOT }
							trait = herbalist
							has_any_ingredient = yes
						}
						save_event_target_as = good_herbalist
					}
				}
			}
			1 = {
				trigger = {
					any_friend = { trait = herbalist has_any_ingredient = yes }
				}
				random_friend = {
					limit = { trait = herbalist has_any_ingredient = yes }
					save_event_target_as = good_herbalist
				}
			}
			1 = {
				trigger = {
					father_of_unborn = { trait = herbalist has_any_ingredient = yes }
				}
				father_of_unborn = {
					save_event_target_as = good_herbalist
				}
			}
			1 = {
				trigger = {
					any_spouse = {
						any_friend = {
							trait = herbalist
							has_any_ingredient = yes
						}
					}
				}
				random_spouse = {
					limit = {
						any_friend = { trait = herbalist has_any_ingredient = yes }
					}
					random_friend = {
						limit = { trait = herbalist has_any_ingredient = yes }
						save_event_target_as = good_herbalist
					}
				}
			}
			1 = {
				trigger = {
					father_of_unborn = {
						any_friend = { trait = herbalist has_any_ingredient = yes }
					}
				}
				father_of_unborn = {
					random_friend = {
						limit = { trait = herbalist has_any_ingredient = yes }
						save_event_target_as = good_herbalist
					}
				}
			}
		}
		random_list = {
			#Mother has weird cravings.
			5 = {
				modifier = { 
					factor = 1.5
					NOR = { num_of_children = 3 } 
					NOR = { 
						any_child = { trait = harelip } 
						any_child = { trait = cleft_lip } 
						any_child = { trait = ugly } 
						any_child = { trait = uncouth } 
						any_child = { trait = clubfooted } 
						any_child = { trait = quailfooted } 
					}
				}
				modifier = { 
					factor = 0.5
					has_game_rule = {
						name = pregnancy_flavor
						value = limited
					}
				}
				modifier = { 
					factor = 1.75
					trait = hedonist
				}
				modifier = { 
					factor = 1.5
					trait = gluttonous
				}
				modifier = { 
					factor = 0.35
					trait = temperate
				}
				character_event = { id = HFP.20573 days = 40 random = 10 }
			}
			#Sorcerer tries to curse the child
			5 = {
				trigger = {
					event_target:evil_sorcerer = { is_alive = yes }
				}
				additive_opinion_modifier = {
					factor = -0.2
					who = ROOT
					this = event_target:evil_sorcerer
				}
				modifier = {
					factor = 1.5
					is_foe = ROOT
				}
				modifier = { # Heir that may lose position
					factor = 2
					ROOT = {
						is_landed = yes
						current_heir = { character = event_target:evil_sorcerer }
						OR = {
							has_law = succ_ultimogeniture
							AND = {
								has_law = succ_primogeniture
								NOT = {
									any_child = { character = event_target:evil_sorcerer }
								}
							}
							has_law = succ_gavelkind
							has_law = succ_elective_gavelkind
						}
					}
				}
				modifier = {
					factor = 2
					ROOT = {
						spouse = {
							is_landed = yes
							current_heir = { character = event_target:evil_sorcerer }
							OR = {
								has_law = succ_ultimogeniture
								AND = {
									has_law = succ_primogeniture
									NOT = {
										any_child = { character = event_target:evil_sorcerer }
									}
								}
								has_law = succ_gavelkind
								has_law = succ_elective_gavelkind
							}
						}
					}
				}
				modifier = {
					factor = 1.3
					trait = paranoid
				}
				event_target:evil_sorcerer = {
					character_event = { id = MYTHMORE.63 days = 40 random = 10 }
				}
			}
			# Herbalist tries to poison the mother
			5 = {
				trigger = {
					event_target:evil_herbalist = { is_alive = yes }
				}
				additive_opinion_modifier = {
					factor = -0.2
					who = ROOT
					this = event_target:evil_herbalist
				}
				modifier = {
					factor = 1.5
					is_foe = ROOT
				}
				modifier = { # Heir that may lose position
					factor = 2
					ROOT = {
						is_landed = yes
						current_heir = { character = event_target:evil_sorcerer }
						OR = {
							has_law = succ_ultimogeniture
							AND = {
								has_law = succ_primogeniture
								NOT = {
									any_child = { character = event_target:evil_sorcerer }
								}
							}
							has_law = succ_gavelkind
							has_law = succ_elective_gavelkind
						}
					}
				}
				modifier = {
					factor = 2
					ROOT = {
						spouse = {
							is_landed = yes
							current_heir = { character = event_target:evil_sorcerer }
							OR = {
								has_law = succ_ultimogeniture
								AND = {
									has_law = succ_primogeniture
									NOT = {
										any_child = { character = event_target:evil_sorcerer }
									}
								}
								has_law = succ_gavelkind
								has_law = succ_elective_gavelkind
							}
						}
					}
				}
				modifier = {
					factor = 1.3
					trait = paranoid
				}
				event_target:evil_sorcerer = {
					character_event = { id = MYTHMORE.64 days = 40 random = 10 }
				}
			}
			# Sorcerer tries to bless the child
			4 = {
				trigger = {
					event_target:good_sorcerer = { is_alive = yes }
				}
				additive_opinion_modifier = {
					factor = 0.1
					who = ROOT
					this = event_target:good_sorcerer
				}
				modifier = {
					factor = 1.2
					father_of_unborn = { character = event_target:good_sorcerer }
				}
				modifier = {
					factor = 1.2
					any_spouse = { character = event_target:good_sorcerer }
					NOR = {
						reverse_has_opinion_modifier = { who = event_target:good_sorcerer modifier = opinion_unfaithful_private }
						reverse_has_opinion_modifier = { who = event_target:good_sorcerer modifier = opinion_unfaithful_wife }
						reverse_has_opinion_modifier = { who = event_target:good_sorcerer modifier = opinion_unfaithful_husband }
						reverse_has_opinion_modifier = { who = event_target:good_sorcerer modifier = opinion_unfaithful_husband_crime }
					}
				}
				event_target:good_sorcerer = {
					character_event = { id = MYTHMORE.65 days = 40 random = 10 }
				}
			}
			# Herbalist tries to aid the mother
			5 = {
				trigger = {
					event_target:good_herbalist = { is_alive = yes }
				}
				additive_opinion_modifier = {
					factor = 0.1
					who = ROOT
					this = event_target:good_herbalist
				}
				modifier = {
					factor = 1.2
					father_of_unborn = { character = event_target:good_herbalist }
				}
				modifier = {
					factor = 1.2
					any_spouse = { character = event_target:good_herbalist }
					NOR = {
						reverse_has_opinion_modifier = { who = event_target:good_herbalist modifier = opinion_unfaithful_private }
						reverse_has_opinion_modifier = { who = event_target:good_herbalist modifier = opinion_unfaithful_wife }
						reverse_has_opinion_modifier = { who = event_target:good_herbalist modifier = opinion_unfaithful_husband }
						reverse_has_opinion_modifier = { who = event_target:good_herbalist modifier = opinion_unfaithful_husband_crime }
					}
				}
				event_target:good_herbalist = {
					character_event = { id = MYTHMORE.66 days = 40 random = 10 }
				}
			}
				
			#None
			90 = {
				modifier = { 
					factor = 0.5
					NOT = { num_of_children = 1 }
				}
				modifier = { 
					factor = 1.75
					num_of_children = 3
				}
				modifier = { 
					factor = 2
					num_of_children = 4
				}
				modifier = { 
					factor = 3
					num_of_children = 5
				}

			}
		}
		#Mother receives solace from...
		random_list = {
			#Other sons
			30 = {
				modifier = { 
					factor = 0.5
					has_game_rule = {
						name = pregnancy_flavor
						value = limited
					}
				}
				modifier = { 
					factor = 0
					NOT = { 
						any_child = { 
							is_alive = yes 
							age = 6
							is_inaccessible_trigger = no
							NOT = { trait = incapable }
							prisoner = no
						}
					}
				}
				modifier = { 
					factor = 0.75
					NOT = { 
						any_child = { 
							is_alive = yes 
							age = 6
							is_inaccessible_trigger = no
							NOT = { trait = incapable }
							prisoner = no
							trait = kind
						}
					}
				}
				random_child = { 
					limit = { 
						is_alive = yes 
						age = 6
						is_inaccessible_trigger = no
						NOT = { trait = incapable }
						prisoner = no
					}
					character_event = { id = HFP.20574 days = 120 random = 20 }
				}
			}
			#Spouse 
			30 = {
				modifier = { 
					factor = 0.5
					has_game_rule = {
						name = pregnancy_flavor
						value = limited
					}
				}
				modifier = { 
					factor = 0.15
					is_ruler = no
					is_main_spouse = no
				}
				modifier = { 
					factor = 0.25
					has_character_modifier = adulteress
				}
				modifier = { 
					factor = 0.25
					has_character_modifier = incestuous_adulteress
				}
				modifier = { 
					factor = 0
					NOT = { 
						any_spouse = { 
							is_alive = yes 
							is_inaccessible_trigger = no
							NOT = { trait = incapable }
							prisoner = no
						}
					}
				}
				modifier = { 
					factor = 0.75
					NOT = { 
						any_spouse = { 
							is_alive = yes 
							is_inaccessible_trigger = no
							NOT = { trait = incapable }
							prisoner = no
							trait = kind
						}
					}
				}
				random_spouse = { 
					limit = { 
						is_alive = yes 
						is_inaccessible_trigger = no
						NOT = { trait = incapable }
						prisoner = no
					}
					character_event = { id = HFP.20574 days = 120 random = 20 }
				}
			}
			#Lover
			30 = {
				modifier = { 
					factor = 0.5
					has_game_rule = {
						name = pregnancy_flavor
						value = limited
					}
				}
				modifier = { 
					factor = 0
					is_consort = yes
				}
				modifier = { 
					factor = 0
					NOT = { 
						any_lover = { 
							is_alive = yes 
							is_inaccessible_trigger = no
							NOT = { trait = incapable }
							NOT = { is_married = ROOT } #Loving husbands get event above.
							prisoner = no
						}
					}
				}
				random_lover = { 
					limit = { 
						is_alive = yes 
						is_inaccessible_trigger = no
						NOT = { trait = incapable }
						NOT = { is_married = ROOT }
						prisoner = no
					}
					character_event = { id = HFP.20575 days = 120 random = 20 }
				}
			}
			#Spouse organizes Gossiping
			40 = {
				modifier = { 
					factor = 0.5
					has_game_rule = {
						name = pregnancy_flavor
						value = limited
					}
				}
				modifier = { 
					factor = 0
					is_main_spouse = no
				}
				modifier = { 
					factor = 0
					is_married = no
				}
				modifier = {
					factor = 0
					spouse = { trait = incapable }
				}
				modifier = {
					factor = 0
					spouse = { prisoner = yes }
				}
				modifier = { #Only for rulers with vassals (or spouses of rulers)
					factor = 0
					spouse = { lower_tier_than = COUNT }
					lower_tier_than = COUNT
				}
				modifier = { #Make events less likely to become recurring at every pregnancy.
					factor = 0.5
					num_of_children = 2
				}
				modifier = { #Make events less likely to become recurring at every pregnancy.
					factor = 0.35
					num_of_children = 3
				}
				modifier = { #Make events less likely to become recurring at every pregnancy.
					factor = 0.25
					num_of_children = 4
				}
				modifier = { #Make events less likely to become recurring at every pregnancy.
					factor = 0.15
					num_of_children = 5
				}
				modifier = { 
					factor = 1.65
					trait = gregarious
				}
				modifier = { 
					factor = 1.5
					NOT = { age = 25 }
				}
				modifier = { 
					factor = 0.25
					age = 35
				}
				modifier = { 
					factor = 0.1
					age = 45
				}
				spouse = { character_event = { id = HFP.20005 days = 120 random = 20 } } #Fires on husband first.
			}
			#Nobody
			40 = {
				modifier = { 
					factor = 0.85
					NOT = { num_of_children = 1 }
				}
				modifier = { 
					factor = 1.25
					num_of_children = 1
				}
				modifier = { 
					factor = 1.5
					num_of_children = 2
				}
				modifier = { 
					factor = 1.75
					num_of_children = 3
				}
				modifier = { 
					factor = 2
					num_of_children = 4
				}
				modifier = { 
					factor = 3
					num_of_children = 5
				}

			}
		}
	}
}

character_event = { # immortal suspicions 
	id = RIP.30315
	desc = placeholdername_43 #RIP.30315.d
	border = GFX_event_normal_frame_intrigue 
	picture = GFX_evt_suspicious_noble
	
	immediate = {
		most_popular_vassal = {
			limit = {
				ai = yes
				immortal = no
				NOT = { opinion = { who = ROOT value = 50 } }
				intrigue = 12 
			}
			save_event_target_as = immortal_suspector
		}
	}

	is_triggered_only = yes
	
	only_playable = yes
	only_capable = yes
	
	trigger = {
		immortal = yes
		NOR = {
			trait = djinn
			trait = known_vampire
			trait = god
			trait = zombie
			trait = mummy
			trait = demon_trait
			trait = ethereal_trait
			trait = dragon # These two live long enough that suspicions would fire long before they are relevant
			trait = demi_god
		}
		is_70 = yes
		NOR = { 
			has_character_flag = immortal_crisis
			has_character_flag = immortal_crisis_confirmed
		}
	}
	
	weight_multiplier = {
		days = 1
		
		modifier = {
			factor = 2
			is_100 = yes
		}
		modifier = {
			factor = 2
			age = 150
		}
		
		modifier = {
			factor = 2
			age = 200
		}
		
		modifier = {
			factor = 2
			age = 300
		}		

	}

	option = {
		name = EVTOPTA_CM_6000 #Sweet text reuse
		set_character_flag = immortal_crisis
		event_target:immortal_suspector = {
			opinion = { modifier = immortal_suspicions who = ROOT years = 100 } 
		}
	}
	
}

#A friendly visit from spouse can result in non-aggression pact
character_event = {
	id = ZE.8000
	picture = GFX_evt_feast
	border = GFX_event_normal_frame_diplomacy
	desc = EVTDESC_ZE_8000

	only_rulers = yes
	capable_only = yes
	prisoner = no
	only_independent = yes

	is_triggered_only = yes

	trigger = {
		mercenary = no
		primary_title = {
			is_landless_type_title = no
		}
		controls_religion = no
		holy_order = no
		NOT = { is_inaccessible_trigger = yes }
		any_independent_ruler = {
			NOR = { 
				is_inaccessible_trigger = yes
				trait = incapable
				has_non_aggression_pact_with = ROOT
				war_with = ROOT
				trait = zombie
			}
			primary_title = {
				is_landless_type_title = no
			}
			controls_religion = no
			holy_order = no
			mercenary = no
			is_landed = yes
			prisoner = no
			is_married = yes
			is_within_diplo_range = ROOT
			spouse = {
				NOR = { 
					trait = incapable
					is_inaccessible_trigger = yes
					prisoner = yes
				}
			}
		}
		NOT = { trait = zombie }
	}

	immediate = {
		ROOT = { capital_scope = { save_event_target_as = capital } }
		random_independent_ruler = {
			limit = {
				NOR = { 
					is_inaccessible_trigger = yes
					trait = incapable
					has_non_aggression_pact_with = ROOT
					war_with = ROOT
				}

				primary_title = {
					is_landless_type_title = no
				}
				controls_religion = no
				holy_order = no
				mercenary = no
				is_landed = yes
				prisoner = no
				is_married = yes
				is_within_diplo_range = ROOT
				spouse = {
					NOR = { 
						trait = incapable
						is_inaccessible_trigger = yes
						prisoner = yes
					}
				}
			}
			spouse = { save_event_target_as = target_spouse }
			save_event_target_as = target_ruler
		}
	}
	
	option = {
		name = EVTOPTA_ZE_8000
		ai_chance = { 
			factor = 90
		}
		custom_tooltip = {
			text = EVTOPTA_ZE_8000_TOOLTIP
			hidden_tooltip = {
				event_target:target_ruler = {
					letter_event = { id = ZE.8001 days = 3 }
				}
			}
		}
	}

	option = {
		name = EVTOPTB_ZE_8000
		ai_chance = { 
			factor = 10
		}
	}
}

#Adult crossroad for pure Murder Bloodline.
character_event = {
	id = HF.24027
	desc = EVTDESCAHF24027
	picture = GFX_evt_whispers
	border = GFX_event_normal_frame_intrigue
	
	trigger = { 
		has_dlc = "Holy Fury"
		NOT = {
			any_owned_bloodline = { 
				has_bloodline_flag = created_bloodline
			}
		}
		has_ambition = obj_forge_bloodline
	}

	is_triggered_only = yes
	
	# Lunatic Dragon-King Bloodline.
	# Prop up embalmed corpses in Macabre Feast.
	# Hide everything.
	# Entrap next victim.

	option = {
		name = EVTOPTZHF24027
		custom_tooltip = { text = TT_EVTOPTZHF24027 }
		trigger = {  
			OR = {
				trait = lunatic
				trait = possessed
				trait = cannibal_trait
				trait = dragon
			}
			trait = cruel
		}
		if = { 
			limit = {
				NOR = {
					trait = cannibal_trait
					trait = dragon
				} 
			} 
			add_trait = cannibal_trait
		}
		if = { 
			limit = { 
				this_has_super_cool_nickname_trigger = no 
				is_female = no
			}
			ROOT = { give_nickname = nick_the_dragon }
		}
		if = { 
			limit = { 
				this_has_super_cool_nickname_trigger = no 
				is_female = yes
			}
			ROOT = { give_nickname = nick_the_dragoness }
		}
		tooltip = { #Show bloodline effects
			create_bloodline = {
				type = pure_murder_bloodline_05
			}		
		}
		hidden_tooltip = { narrative_event = { id = HF.24231 } }
		ai_chance = { 
			factor = 20
		}
	}
	option = {
		name = EVTOPTAHF24027
		custom_tooltip = { text = TT_EVTOPTAHF24027 }
		if = { 
			limit = { NOT = { trait = cruel } } 
			add_trait = cruel
		}
		if = { 
			limit = { NOT = { trait = lunatic } } 
			random = { 
				chance = 5 
				add_trait = lunatic
			}
		}
		if = { 
			limit = { 
				this_has_super_cool_nickname_trigger = no 
				culture_group = latin
			}
			ROOT = { give_nickname = nick_the_ferrante }
		}
		if = { 
			limit = { 
				this_has_super_cool_nickname_trigger = no 
				NOT = { culture_group = latin }
			}
			ROOT = { give_nickname = nick_the_iron_heart }
		}
		tooltip = { #Show bloodline effects
			create_bloodline = {
				type = pure_murder_bloodline_02
			}		
		}
		hidden_tooltip = { narrative_event = { id = HF.24028 } }
		ai_chance = { 
			factor = 20
		}
	}
	option = {
		name = EVTOPTBHF24027
		custom_tooltip = { text = TT_EVTOPTBHF24027 }
		if = { 
			limit = { NOT = { trait = paranoid } } 
			add_trait = paranoid
		}
		if = { 
			limit = { 
				this_has_super_cool_nickname_trigger = no 
				is_female = no
			}
			ROOT = { give_nickname = nick_the_pale_spider }
		}
		if = { 
			limit = { 
				this_has_super_cool_nickname_trigger = no 
				is_female = yes
			}
			ROOT = { give_nickname = nick_the_grim_mistress }
		}
		tooltip = { #Show bloodline effects
			create_bloodline = {
				type = pure_murder_bloodline_03
			}		
		}
		hidden_tooltip = { narrative_event = { id = HF.24029 } }
		ai_chance = { 
			factor = 20
		}
	}
	option = {
		name = EVTOPTCHF24027
		custom_tooltip = { text = TT_EVTOPTCHF24027 }
		trigger = { 
			NOR = { 
				is_unattractive_trigger = yes
				trait = celibate
				trait = eunuch
			} 
		} 
		if = { 
			limit = { NOT = { trait = cruel } } 
			add_trait = cruel
		}
		if = { 
			limit = { 
				this_has_super_cool_nickname_trigger = no 
				is_female = no
			}
			ROOT = { give_nickname = nick_the_ripper }
		}
		if = { 
			limit = { 
				this_has_super_cool_nickname_trigger = no 
				is_female = yes
			}
			ROOT = { give_nickname = nick_the_black_widow }
		}
		tooltip = { #Show bloodline effects
			create_bloodline = {
				type = pure_murder_bloodline_04
			}		
		}
		hidden_tooltip = { narrative_event = { id = HF.24030 } }
		ai_chance = { 
			factor = 20
		}
	}
}

#Adult gains pure Murder Bloodline (Dragon Lunatic)
narrative_event = {
	id = HF.24231
	title = EVTTITLEHF24231
	desc = EVTDESCHF24231
	picture = GFX_evt_feast_hf
	border = GFX_event_narrative_frame_intrigue
	sound = bloodline_added
	hide_from = yes
	show_from_from = no
	
	is_triggered_only = yes

	trigger = { 
		has_dlc = "Holy Fury"
		NOT = {
			any_owned_bloodline = { 
				has_bloodline_flag = created_bloodline
			}
		}
		has_ambition = obj_forge_bloodline
	}
	
	option = { #Gain Murder bloodline.
		name = EVTOPTAHF24231
		if = { 
			limit = { is_female = no }
			create_bloodline = {
				type = pure_murder_bloodline_05
			}		
		}
		if = { 
			limit = { is_female = yes }
			create_bloodline = {
				type = pure_murder_bloodline_05
				inheritance = matrilineal
			}		
		}
		ai_chance = { 
			factor = 100
		}
	}
}

character_event = { # Generate 'Fake Family' for characters without any
	id = GR.30
	
	hide_window = yes
	
	is_triggered_only = yes
	
	only_playable = yes
	min_age = 16
	only_men = yes
	
	trigger = {
		OR = {
			AND = {
				ai = yes
				has_game_rule = {
					name = generate_families
					value = ai_only
				}
			}
			has_game_rule = {
				name = generate_families
				value = on
			} 
		}
		is_save_game = no
		OR = {
			is_married = no
			AND = {
				is_married = yes
				num_of_children < 1
				spouse = {
					is_lowborn = yes
				}
			}
		}
		mercenary = no
    	holy_order = no
    	is_landed = yes
		OR = {
			is_feudal = yes
			is_nomadic = yes
			is_tribal = yes
		}
		NOR = {
			government = confucian_bureaucracy
			government = order_government
			trait = eunuch
			trait = celibate
			has_nickname = nick_the_chaste
		}
		OR = {
			NOT = { num_of_dynasty_members = 2 }
			#NOT = {
			#	any_dynasty_member = {
			#		NOR = {
			#			character = ROOT
			#			is_child_of = ROOT
			#		}
			#		is_alive = yes
			#	}
			#}
			NOT = {
				any_close_relative = {
					NOR = {
						character = ROOT
						is_child_of = ROOT
					}
					is_alive = yes
				}
			}
			AND = {
				num_of_children >= 1
				NOT = {
					any_child = {
						mother = { always = yes }
					}
				}
				NOT = {
					any_dynasty_member = {
						NOT = {
							ROOT = {
								is_father = PREV
							}
						}
					}
				}
			}
		}
	}
	
	immediate = {
		
		# Generate a fitting spouse, first and foremost
		# Rulers with really old children might still end up with no mother, but that should be rare
		if = {
			limit = {
				is_married = no
				can_marry = yes
				age >= 44
			}
			set_character_flag = recieved_royal_marriage_aid_duty
			create_character = {
				age = 44
				female = yes
				religion = ROOT
				culture = ROOT
				dynasty = actually_culture
				random_traits = yes
			}
			new_character = {
				add_spouse = ROOT
				save_event_target_as = mother_target
				if = {
					limit = { ROOT = { trait = dragon } }
					add_trait = dragon
				}
				else_if = {
					limit = { ROOT = { trait = djinn } }
					add_trait = djinn
				}
				else_if = {
					limit = { ROOT = { trait = giant } }
					add_trait = giant
				}
				else_if = {
					limit = { ROOT = { trait = werewolf } }
					add_trait = werewolf
					add_trait = secret_werewolf
				}
				else_if = {
					limit = { ROOT = { trait = vampire } }
					add_trait = vampire
					add_trait = secret_vampire
				}
			}
			trigger_switch = {
    			on_trigger = tier
    			EMPEROR = { prestige = 400 }
    			KING = { prestige = 300 }
    			DUKE = { prestige = 200 }
    			COUNT = { prestige = 100 }
    		}
		}
		else_if = {
			limit = {
				is_married = no
				can_marry = yes
				age >= 40
			}
			set_character_flag = recieved_royal_marriage_aid_duty
			create_character = {
				age = 40
				female = yes
				religion = ROOT
				culture = ROOT
				dynasty = actually_culture
				random_traits = yes
			}
			new_character = {
				add_spouse = ROOT
				save_event_target_as = mother_target
				if = {
					limit = { ROOT = { trait = dragon } }
					add_trait = dragon
				}
				else_if = {
					limit = { ROOT = { trait = djinn } }
					add_trait = djinn
				}
				else_if = {
					limit = { ROOT = { trait = giant } }
					add_trait = giant
				}
				else_if = {
					limit = { ROOT = { trait = werewolf } }
					add_trait = werewolf
					add_trait = secret_werewolf
				}
				else_if = {
					limit = { ROOT = { trait = vampire } }
					add_trait = vampire
					add_trait = secret_vampire
				}
			}
			trigger_switch = {
    			on_trigger = tier
    			EMPEROR = { prestige = 400 }
    			KING = { prestige = 300 }
    			DUKE = { prestige = 200 }
    			COUNT = { prestige = 100 }
    		}
		}
		else_if = {
			limit = {
				is_married = no
				can_marry = yes
				age >= 35
			}
			set_character_flag = recieved_royal_marriage_aid_duty
			create_character = {
				age = 35
				female = yes
				religion = ROOT
				culture = ROOT
				dynasty = actually_culture
				random_traits = yes
			}
			new_character = {
				add_spouse = ROOT
				save_event_target_as = mother_target
				if = {
					limit = { ROOT = { trait = dragon } }
					add_trait = dragon
				}
				else_if = {
					limit = { ROOT = { trait = djinn } }
					add_trait = djinn
				}
				else_if = {
					limit = { ROOT = { trait = giant } }
					add_trait = giant
				}
				else_if = {
					limit = { ROOT = { trait = werewolf } }
					add_trait = werewolf
					add_trait = secret_werewolf
				}
				else_if = {
					limit = { ROOT = { trait = vampire } }
					add_trait = vampire
					add_trait = secret_vampire
				}
			}
			trigger_switch = {
    			on_trigger = tier
    			EMPEROR = { prestige = 400 }
    			KING = { prestige = 300 }
    			DUKE = { prestige = 200 }
    			COUNT = { prestige = 100 }
    		}
		}
		else_if = {
			limit = {
				is_married = no
				can_marry = yes
				age >= 30
			}
			set_character_flag = recieved_royal_marriage_aid_duty
			create_character = {
				age = 30
				female = yes
				religion = ROOT
				culture = ROOT
				dynasty = actually_culture
				random_traits = yes
			}
			new_character = {
				add_spouse = ROOT
				save_event_target_as = mother_target
				if = {
					limit = { ROOT = { trait = dragon } }
					add_trait = dragon
				}
				else_if = {
					limit = { ROOT = { trait = djinn } }
					add_trait = djinn
				}
				else_if = {
					limit = { ROOT = { trait = giant } }
					add_trait = giant
				}
				else_if = {
					limit = { ROOT = { trait = werewolf } }
					add_trait = werewolf
					add_trait = secret_werewolf
				}
				else_if = {
					limit = { ROOT = { trait = vampire } }
					add_trait = vampire
					add_trait = secret_vampire
				}
			}
			trigger_switch = {
    			on_trigger = tier
    			EMPEROR = { prestige = 400 }
    			KING = { prestige = 300 }
    			DUKE = { prestige = 200 }
    			COUNT = { prestige = 100 }
    		}
		}
		else_if = {
			limit = {
				is_married = no
				can_marry = yes
				age >= 27
			}
			set_character_flag = recieved_royal_marriage_aid_duty
			create_character = {
				age = 27
				female = yes
				religion = ROOT
				culture = ROOT
				dynasty = actually_culture
				random_traits = yes
			}
			new_character = {
				add_spouse = ROOT
				save_event_target_as = mother_target
				if = {
					limit = { ROOT = { trait = dragon } }
					add_trait = dragon
				}
				else_if = {
					limit = { ROOT = { trait = djinn } }
					add_trait = djinn
				}
				else_if = {
					limit = { ROOT = { trait = giant } }
					add_trait = giant
				}
				else_if = {
					limit = { ROOT = { trait = werewolf } }
					add_trait = werewolf
					add_trait = secret_werewolf
				}
				else_if = {
					limit = { ROOT = { trait = vampire } }
					add_trait = vampire
					add_trait = secret_vampire
				}
			}
			trigger_switch = {
    			on_trigger = tier
    			EMPEROR = { prestige = 400 }
    			KING = { prestige = 300 }
    			DUKE = { prestige = 200 }
    			COUNT = { prestige = 100 }
    		}
		}
		else_if = {
			limit = {
				is_married = no
				can_marry = yes
				age >= 25
			}
			set_character_flag = recieved_royal_marriage_aid_duty
			create_character = {
				age = 25
				female = yes
				religion = ROOT
				culture = ROOT
				dynasty = actually_culture
				random_traits = yes
			}
			new_character = {
				add_spouse = ROOT
				save_event_target_as = mother_target
				if = {
					limit = { ROOT = { trait = dragon } }
					add_trait = dragon
				}
				else_if = {
					limit = { ROOT = { trait = djinn } }
					add_trait = djinn
				}
				else_if = {
					limit = { ROOT = { trait = giant } }
					add_trait = giant
				}
				else_if = {
					limit = { ROOT = { trait = werewolf } }
					add_trait = werewolf
					add_trait = secret_werewolf
				}
				else_if = {
					limit = { ROOT = { trait = vampire } }
					add_trait = vampire
					add_trait = secret_vampire
				}
			}
			trigger_switch = {
    			on_trigger = tier
    			EMPEROR = { prestige = 400 }
    			KING = { prestige = 300 }
    			DUKE = { prestige = 200 }
    			COUNT = { prestige = 100 }
    		}
		}
		else_if = {
			limit = {
				is_married = no
				can_marry = yes
				age >= 20
			}
			set_character_flag = recieved_royal_marriage_aid_duty
			create_character = {
				age = 20
				female = yes
				religion = ROOT
				culture = ROOT
				dynasty = actually_culture
				random_traits = yes
			}
			new_character = {
				add_spouse = ROOT
				save_event_target_as = mother_target
				if = {
					limit = { ROOT = { trait = dragon } }
					add_trait = dragon
				}
				else_if = {
					limit = { ROOT = { trait = djinn } }
					add_trait = djinn
				}
				else_if = {
					limit = { ROOT = { trait = giant } }
					add_trait = giant
				}
				else_if = {
					limit = { ROOT = { trait = werewolf } }
					add_trait = werewolf
					add_trait = secret_werewolf
				}
				else_if = {
					limit = { ROOT = { trait = vampire } }
					add_trait = vampire
					add_trait = secret_vampire
				}
			}
			trigger_switch = {
    			on_trigger = tier
    			EMPEROR = { prestige = 400 }
    			KING = { prestige = 300 }
    			DUKE = { prestige = 200 }
    			COUNT = { prestige = 100 }
    		}
		}
		else_if = {
			limit = {
				is_married = no
				can_marry = yes
				age >= 18
			}
			set_character_flag = recieved_royal_marriage_aid_duty
			create_character = {
				age = 18
				female = yes
				religion = ROOT
				culture = ROOT
				dynasty = actually_culture
				random_traits = yes
			}
			new_character = {
				add_spouse = ROOT
				save_event_target_as = mother_target
				if = {
					limit = { ROOT = { trait = dragon } }
					add_trait = dragon
				}
				else_if = {
					limit = { ROOT = { trait = djinn } }
					add_trait = djinn
				}
				else_if = {
					limit = { ROOT = { trait = giant } }
					add_trait = giant
				}
				else_if = {
					limit = { ROOT = { trait = werewolf } }
					add_trait = werewolf
					add_trait = secret_werewolf
				}
				else_if = {
					limit = { ROOT = { trait = vampire } }
					add_trait = vampire
					add_trait = secret_vampire
				}
			}
			trigger_switch = {
    			on_trigger = tier
    			EMPEROR = { prestige = 400 }
    			KING = { prestige = 300 }
    			DUKE = { prestige = 200 }
    			COUNT = { prestige = 100 }
    		}
		}
		else_if = {
			limit = {
				is_married = no
				can_marry = yes
			}
			set_character_flag = recieved_royal_marriage_aid_duty
			create_character = {
				age = 16
				female = yes
				religion = ROOT
				culture = ROOT
				dynasty = actually_culture
				random_traits = yes
			}
			new_character = {
				add_spouse = ROOT
				save_event_target_as = mother_target
				if = {
					limit = { ROOT = { trait = dragon } }
					add_trait = dragon
				}
				else_if = {
					limit = { ROOT = { trait = djinn } }
					add_trait = djinn
				}
				else_if = {
					limit = { ROOT = { trait = giant } }
					add_trait = giant
				}
				else_if = {
					limit = { ROOT = { trait = werewolf } }
					add_trait = werewolf
					add_trait = secret_werewolf
				}
				else_if = {
					limit = { ROOT = { trait = vampire } }
					add_trait = vampire
					add_trait = secret_vampire
				}
			}
			trigger_switch = {
    			on_trigger = tier
    			EMPEROR = { prestige = 400 }
    			KING = { prestige = 300 }
    			DUKE = { prestige = 200 }
    			COUNT = { prestige = 100 }
    		}
		}
		
		# Then, generate a sort of random amount of children
		if = {
			limit = {
				num_of_children < 1
				age >= 40
			}
			
			random_list = {
				5 = {
					create_character = {
						age = 24
						religion = ROOT
						culture = ROOT
						female = no
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
				}
				2 = {
					create_character = {
						age = 24
						religion = ROOT
						culture = ROOT
						female = yes
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
				}
				10 = {
					create_character = {
						age = 24
						religion = ROOT
						culture = ROOT
						female = no
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
					create_character = {
						age = 23
						religion = ROOT
						culture = ROOT
						female = yes
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
				}
				10 = {
					create_character = {
						age = 24
						religion = ROOT
						culture = ROOT
						female = yes
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
					create_character = {
						age = 23
						religion = ROOT
						culture = ROOT
						female = no
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
				}
				10 = {
					create_character = {
						age = 24
						religion = ROOT
						culture = ROOT
						female = no
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
					create_character = {
						age = 23
						religion = ROOT
						culture = ROOT
						female = yes
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
					create_character = {
						age = 22
						religion = ROOT
						culture = ROOT
						female = yes
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
				}
				10 = {
					create_character = {
						age = 24
						religion = ROOT
						culture = ROOT
						female = no
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
					create_character = {
						age = 23
						religion = ROOT
						culture = ROOT
						female = no
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
					create_character = {
						age = 22
						religion = ROOT
						culture = ROOT
						female = yes
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
				}
				10 = {
					create_character = {
						age = 24
						religion = ROOT
						culture = ROOT
						female = no
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
					create_character = {
						age = 23
						religion = ROOT
						culture = ROOT
						female = yes
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
					create_character = {
						age = 22
						religion = ROOT
						culture = ROOT
						female = yes
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
					create_character = {
						age = 21
						religion = ROOT
						culture = ROOT
						female = no
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
				}
				10 = {
					create_character = {
						age = 24
						religion = ROOT
						culture = ROOT
						female = yes
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
					create_character = {
						age = 23
						religion = ROOT
						culture = ROOT
						female = no
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
					create_character = {
						age = 22
						religion = ROOT
						culture = ROOT
						female = no
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
					create_character = {
						age = 21
						religion = ROOT
						culture = ROOT
						female = no
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
				}
			}
		}
		else_if = {
			limit = {
				num_of_children < 1
				age >= 30
			}
			random_list = {
				5 = {
					create_character = {
						age = 13
						religion = ROOT
						culture = ROOT
						female = no
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
				}
				2 = {
					create_character = {
						age = 13
						religion = ROOT
						culture = ROOT
						female = yes
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
				}
				10 = {
					create_character = {
						age = 13
						religion = ROOT
						culture = ROOT
						female = no
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
					create_character = {
						age = 12
						religion = ROOT
						culture = ROOT
						female = yes
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
				}
				10 = {
					create_character = {
						age = 13
						religion = ROOT
						culture = ROOT
						female = yes
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
					create_character = {
						age = 12
						religion = ROOT
						culture = ROOT
						female = no
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
				}
				5 = {
					create_character = {
						age = 13
						religion = ROOT
						culture = ROOT
						female = no
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
					create_character = {
						age = 12
						religion = ROOT
						culture = ROOT
						female = yes
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
					create_character = {
						age = 11
						religion = ROOT
						culture = ROOT
						female = yes
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
				}
				5 = {
					create_character = {
						age = 13
						religion = ROOT
						culture = ROOT
						female = no
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
					create_character = {
						age = 12
						religion = ROOT
						culture = ROOT
						female = no
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
					create_character = {
						age = 11
						religion = ROOT
						culture = ROOT
						female = yes
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
				}
			}
		}
		else_if = {
			limit = {
				num_of_children < 1
				age >= 25
			}
			random_list = {
				5 = {
					create_character = {
						age = 8
						religion = ROOT
						culture = ROOT
						female = no
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
				}
				2 = {
					create_character = {
						age = 8
						religion = ROOT
						culture = ROOT
						female = yes
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
				}
				10 = {
					create_character = {
						age = 8
						religion = ROOT
						culture = ROOT
						female = no
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
					create_character = {
						age = 7
						religion = ROOT
						culture = ROOT
						female = yes
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
				}
				10 = {
					create_character = {
						age = 8
						religion = ROOT
						culture = ROOT
						female = yes
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
					create_character = {
						age = 7
						religion = ROOT
						culture = ROOT
						female = no
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
				}
				5 = {
					create_character = {
						age = 8
						religion = ROOT
						culture = ROOT
						female = no
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
					create_character = {
						age = 7
						religion = ROOT
						culture = ROOT
						female = yes
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
					create_character = {
						age = 6
						religion = ROOT
						culture = ROOT
						female = yes
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
				}
				5 = {
					create_character = {
						age = 8
						religion = ROOT
						culture = ROOT
						female = no
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
					create_character = {
						age = 7
						religion = ROOT
						culture = ROOT
						female = no
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
					create_character = {
						age = 6
						religion = ROOT
						culture = ROOT
						female = yes
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
				}
			}
		}
		else_if = {
			limit = {
				num_of_children < 1
				age >= 20
			}
			random_list = {
				15 = {
					create_character = {
						age = 1
						religion = ROOT
						culture = ROOT
						female = no
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
				}
				5 = {
					create_character = {
						age = 1
						religion = ROOT
						culture = ROOT
						female = yes
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
				}
				2 = {
					create_character = {
						age = 1
						religion = ROOT
						culture = ROOT
						female = no
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
					create_character = {
						age = 0
						religion = ROOT
						culture = ROOT
						female = yes
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
				}
				2 = {
					create_character = {
						age = 1
						religion = ROOT
						culture = ROOT
						female = yes
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
					create_character = {
						age = 0
						religion = ROOT
						culture = ROOT
						female = no
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
				}
			}
		}
		else_if = {
			limit = {
				num_of_children < 1
				age >= 18
			}
			random_list = {
				15 = {
					create_character = {
						age = 0
						religion = ROOT
						culture = ROOT
						female = no
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
				}
				5 = {
					create_character = {
						age = 0
						religion = ROOT
						culture = ROOT
						female = yes
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
				}
				2 = {
					create_character = {
						age = 1
						religion = ROOT
						culture = ROOT
						female = no
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
					create_character = {
						age = 0
						religion = ROOT
						culture = ROOT
						female = yes
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
				}
				2 = {
					create_character = {
						age = 1
						religion = ROOT
						culture = ROOT
						female = yes
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
					create_character = {
						age = 0
						religion = ROOT
						culture = ROOT
						female = no
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
				}
			}
		}
		else_if = {
			limit = {
				num_of_children < 1
			}
			random_list = {
				18 = {
					create_character = {
						age = 0
						religion = ROOT
						culture = ROOT
						female = no
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
				}
				2 = {
					create_character = {
						age = 0
						religion = ROOT
						culture = ROOT
						female = yes
					}
					new_character = {
						dynasty = ROOT
						set_father = ROOT
						set_mother = event_target:mother_target
					}
				}
			}
		}
		
		# Set orphaned historical children to new mother
		any_child = {
			limit = {
				NOR = {
					mother = { always = no }
					trait = legit_bastard
					trait = bastard
				}
				ROOT = {
					spouse = {
						could_be_parent_of = PREVPREV
					}
				}
			}
			ROOT = {
				spouse = {
					save_event_target_as = new_mother
				}
			}
			set_mother = event_target:new_mother
		}
		
		if = { # Caste fix
			limit = {
				religion = hindu
				trait = kshatriya
			}
			any_child = {
				limit = {
					religion = hindu
					NOT = { trait = kshatriya }
				}
				add_trait = kshatriya
			}
		}
		
		any_child = {
			character_event = { id = RoI.30121 } # Set religious branch to liege's branch
		}
		
		any_child = { # Fix for children not getting any traits
			limit = {
				age = 16
				NOR = {
					has_education_diplomacy_trigger = yes
					has_education_martial_trigger = yes
					has_education_learning_trigger = yes
					has_education_stewardship_trigger = yes
				}
			}
			add_random_education_trait = yes
			random_independent_ruler = {
				limit = {
					PREV = {
						can_copy_personality_trait_from = PREV
					}
				}
				PREV = {
					copy_random_personality_trait = PREV
				}
			}
			random_independent_ruler = {
				limit = {
					PREV = {
						can_copy_personality_trait_from = PREV
					}
				}
				PREV = {
					copy_random_personality_trait = PREV
				}
			}
			random_independent_ruler = {
				limit = {
					PREV = {
						can_copy_personality_trait_from = PREV
					}
				}
				PREV = {
					copy_random_personality_trait = PREV
				}
			}
		}
		
		any_child = {
			limit = {
				age = 10
				NOT = { age = 16 }
				NOT = { personality_traits = 2 }
			}
			random_independent_ruler = {
				limit = {
					PREV = {
						can_copy_personality_trait_from = PREV
					}
				}
				PREV = {
					copy_random_personality_trait = PREV
				}
			}
			random_independent_ruler = {
				limit = {
					PREV = {
						can_copy_personality_trait_from = PREV
					}
				}
				PREV = {
					copy_random_personality_trait = PREV
				}
			}
		}
		
		any_child = {
			limit = {
				age = 6
				NOT = { age = 10 }
				NOT = { personality_traits = 1 }
			}
			random_independent_ruler = {
				limit = {
					PREV = {
						can_copy_personality_trait_from = PREV
					}
				}
				PREV = {
					copy_random_personality_trait = PREV
				}
			}
		}
		recalc_succession = yes
	}
}

# Fertility treatment outcome tombola
character_event = {
	id = RIP.4014
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		random_list = {
			10 = { # Physician seduces and impregnates your spouse
				modifier = {
					factor = 0
					event_target:physician_target = {
						is_female = yes
					}
				}
				modifier = {
					factor = 0
					event_target:spouse_target = {
						is_lover = FROM
					}
				}
				modifier = {
					factor = 0
					event_target:spouse_target = {
						is_friend = FROM
					}
				}
				modifier = {
					factor = 0
					OR = {
						is_ascetic_trigger = yes
						trait = celibate
						trait = eunuch
						trait = chaste
						is_infertile = yes
					}
				}
				modifier = {
					factor = 0.1
					NOR = {
						trait = deceitful
						trait = lustful
						trait = hedonist
						trait = seducer
					}
				}
				modifier = {
					factor = 5
					AND = {
						OR = { 
							trait = deceitful
							trait = lustful
							trait = hedonist
							trait = seducer
						}
						event_target:spouse_target = {
							OR = { 
								trait = deceitful
								trait = lustful
								trait = hedonist
								trait = seductress
							}
						}
					}
				}
				
				FROM = { character_event = { id = RIP.4015 } }
			}
			
			10 = { # Physician concocts a herbal mixture that is TOO effective...
				modifier = {
					factor = 0
					has_game_rule = {
						name = supernatural_events
						value = off
					}
				}
				modifier = {
					factor = 0.5
					FROM = { ai = yes }
				}
				modifier = {
					factor = 5
					trait = lunatic
				}
				modifier = {
					factor = 5
					trait = possessed
				}
				
				FROM = {
					set_character_flag = fertility_increased_too_much
					character_event = { id = RIP.4016 days = 14 random = 7 }
				}
			}
			
			50 = { # Physician concocts a herbal mixture that increases your fertility
				modifier = {
					factor = 2
					learning = 14
				}
				modifier = {
					factor = 2
					learning = 18
				}
				
				FROM = {
					set_character_flag = fertility_increased
					character_event = { id = RIP.4016 days = 14 random = 7 }
				}
			}
			
			30 = { # Physician concocts a herbal mixture that DECREASES your fertility
				modifier = {
					factor = 0.1
					learning = 12
				}
				modifier = {
					factor = 2
					NOT = { learning = 10 }
				}
				modifier = {
					factor = 2
					NOT = { learning = 8 }
				}
				modifier = {
					factor = 2
					has_character_flag = physician_is_quack
				}
				
				FROM = {
					set_character_flag = fertility_decreased
					character_event = { id = RIP.4016 days = 14 random = 7 }
				}
			}
		}
	}
}

# Court Physician Friend teaches you medicine
character_event = {
	id = RIP.4020
	desc = EVTDESC_RIP_4020
	picture = GFX_evt_court_physician
	border = GFX_event_normal_frame_religion
	
	min_age = 16
	capable_only = yes
	only_playable = yes
	prisoner = no
	war = no
	has_dlc = "Reapers"
	
	is_triggered_only = yes
	
	trigger = {
		NOT = {
			has_character_flag = physician_learning
		}
		any_courtier_or_vassal = {
			liege = { character = ROOT }
			has_minor_title = title_court_physician
			OR = {
				has_character_flag = is_court_physician
				trait = physician
			}
			is_friend = ROOT
		}
	}
	
	weight_multiplier = {
		days = 1
		
		modifier = {
			factor = 2
			trait = scholar
		}
		modifier = {
			factor = 2
			trait = mystic
		}
		modifier = {
			factor = 1.5
			any_courtier_or_vassal = {
				liege = { character = ROOT }
				has_minor_title = title_court_physician
				OR = {
					has_character_flag = is_court_physician
					trait = physician
				}
				is_friend = ROOT
				learning = 16
			}
		}
		modifier = {
			factor = 1.5
			any_owned_bloodline = { has_bloodline_flag = bloodline_effect_better_physicians }
		}
		modifier = {
			factor = 0.2
			any_courtier_or_vassal = {
				liege = { character = ROOT }
				has_minor_title = title_court_physician
				OR = {
					has_character_flag = is_court_physician
					trait = physician
				}
				is_friend = ROOT
				NOT = {
					learning = 14
				}
			}
		}
		modifier = {
			factor = 0.1
			any_courtier_or_vassal = {
				liege = { character = ROOT }
				has_minor_title = title_court_physician
				OR = {
					has_character_flag = is_court_physician
					trait = physician
				}
				is_friend = ROOT
				NOT = {
					learning = 10
				}
			}
		}
	}
	
	immediate = {
		random_courtier_or_vassal = {
			limit = {
				liege = { character = ROOT }
				has_minor_title = title_court_physician
				OR = {
					has_character_flag = is_court_physician
					trait = physician
				}
				is_friend = ROOT
			}
			save_event_target_as = physician_target
		}
		set_character_flag = physician_learning
	}

	option = { # This seems interesting!
		name = EVTOPTA_RIP_4020
		
		custom_tooltip = {
		text = physician_learning_custom_tooltip
			hidden_tooltip = {
				random_list = {
					15 = {
						modifier = {
							factor = 3
							trait = scholar
						}
						modifier = {
							factor = 2
							trait = mystic
						}
						modifier = {
							factor = 2
							trait = diligent
						}
						modifier = {
							factor = 2
							trait = patient
						}
						modifier = {
							factor = 2
							any_owned_bloodline = { has_bloodline_flag = bloodline_effect_better_physicians }
						}
						set_character_flag = physician_learning_excellent_outcome
					}
					20 = {
						modifier = {
							factor = 3
							trait = scholar
						}
						modifier = {
							factor = 2
							trait = mystic
						}
						modifier = {
							factor = 2
							trait = diligent
						}
						modifier = {
							factor = 2
							trait = patient
						}
						modifier = {
							factor = 2
							any_owned_bloodline = { has_bloodline_flag = bloodline_effect_better_physicians }
						}
						set_character_flag = physician_learning_good_outcome
					}
					50 = {
						set_character_flag = physician_learning_middling_outcome
					}
					10 = {
						modifier = {
							factor = 2
							trait = wroth
						}
						modifier = {
							factor = 2
							trait = arbitrary
						}
						set_character_flag = physician_learning_poor_outcome
					}
					5 = {
						modifier = {
							factor = 2
							trait = wroth
						}
						modifier = {
							factor = 2
							trait = arbitrary
						}
						set_character_flag = physician_learning_disastrous_outcome
					}
				}
				character_event = { id = RIP.4021 days = 7 random = 10 }
			}
		}

	}
	
	option = { # Rather not disturb
		name = EVTOPTB_RIP_4020
		
		prestige = 5
	}
}


###Court Physician training events###
character_event = {
	id = RIP.4040

	hide_window = yes
	is_triggered_only = yes

	trigger = {
		any_courtier_or_vassal = {
			liege = { character = ROOT }
			has_minor_title = title_court_physician
		}
	}
	
	weight_multiplier = {
		days = 1
		modifier = {
			factor = 1.5
			any_owned_bloodline = { has_bloodline_flag = bloodline_effect_better_physicians }
		}
		modifier = {
			factor = 1.5
			any_courtier_or_vassal = {
				liege = { character = ROOT }
				has_minor_title = title_court_physician
				any_owned_bloodline = { has_bloodline_flag = bloodline_effect_better_physicians }
			}
		}
	}

	immediate = {
		random_courtier_or_vassal = {
			limit = {
				liege = { character = ROOT }
				has_minor_title = title_court_physician
			}

			random_list = {

				#Nothing happens
				20 = { }
				#Receives training
				10 = {
					modifier = { 
						factor = 1.8
						NOT = { learning = 6 }
					}
					modifier = { 
						factor = 1.6
						NOT = { learning = 8 }
					}
					modifier = {
						factor = 1.5
						NOT = { learning = 10 }
					}
					modifier = {
						factor = 1.4
						NOT = { learning = 12 }
					}
					modifier = {
						factor = 1.2
						NOT = { learning = 14 }
					}
					modifier = {
						factor = 1.2
						NOT = { learning = 16 }
					}
					modifier = {
						factor = 1.4
						any_owned_bloodline = { has_bloodline_flag = bloodline_effect_better_physicians }
					}
					modifier = {
						factor = 0
						trait = physician
					}
					ROOT = { character_event = { id = RIP.4041 } }
				}
			}
		}
	}
}

#Training: buy herbs/tools/books/
character_event = {
	id = RIP.4041
	picture = GFX_evt_court_physician
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	desc = {
		trigger = { has_character_flag = physician_books }
		text = EVTDESC_RIP_4041_BOOKS
		picture = GFX_evt_court_physician
	}
	desc = {
		trigger = { has_character_flag = physician_herbs }
		text = EVTDESC_RIP_4041_HERBS
		picture = GFX_evt_garden

	}
	desc = {
		trigger = { has_character_flag = physician_tools }
		text = EVTDESC_RIP_4041_TOOLS
		picture = GFX_evt_bloody_tools
	}
	desc = {
		trigger = { has_character_flag = physician_lab_equipment }
		text = EVTDESC_RIP_4041_LAB_EQUIPMENT
		picture = GFX_evt_performing_experiments
	}

	immediate = {
		random_courtier_or_vassal = {
			limit = {
				liege = { character = ROOT }
				has_minor_title = title_court_physician
			}
			save_event_target_as = physician
		}

		random_list = {
			10 = { set_character_flag = physician_books }
			10 = { set_character_flag = physician_herbs }
			10 = { set_character_flag = physician_tools }
			10 = { set_character_flag = physician_lab_equipment }
		}
	}

	#Yes
	option = {
		name = EVTOPTA_RIP_4041
		custom_tooltip = { text = EVTOPTA_RIP_4041_TOOLTIP }

		scaled_wealth = { value = -0.15 min = -10 }

		ai_chance = {
			factor = 10
			modifier = {
				factor = 1.5
				trait = charitable
			}
			modifier = {
				factor = 1.5
				is_smart_trigger = yes
			}
			modifier = {
				factor = 1.5
				has_disease_trigger = yes
			}
			modifier = { 
				factor = 0
				NOT = { treasury = 10 }
			}
		}

		#Outcome
		hidden_tooltip = {
			save_event_target_as = physician_liege

			#outcome
			event_target:physician = {
				random_list = {
					#Best outcome 
					25 = {
						modifier = {
							factor = 1.5
							is_smart_trigger = yes
						}
						modifier = {
							factor = 1.5
							physician_good_trigger = yes
						}
						modifier = {
							factor = 1.5
							any_owned_bloodline = { has_bloodline_flag = bloodline_effect_better_physicians }
						}
						modifier = {
							factor = 1.5
							ROOT = { any_owned_bloodline = { has_bloodline_flag = bloodline_effect_better_physicians } }
						}
						modifier = {
							factor = 1.2
							learning = 25
						}
						modifier = {
							factor = 1.2
							learning = 20
						}
						modifier = {
							factor = 1.2
							learning = 15
						}
						modifier = {
							factor = 0.8
							NOT = { learning = 15 }
						}
						modifier = {
							factor = 0.8
							NOT = { learning = 10 }
						}

						character_event = { id = RIP.4042 days = 30 } 
					}
					#Good outcome
					50 = {
						modifier = {
							factor = 1.5
							is_dumb_trigger = yes
						}
						modifier = {
							factor = 1.5
							physician_bad_trigger = yes
						}
						modifier = {
							factor = 0.8
							learning = 25
						}
						modifier = {
							factor = 0.8
							learning = 20
						}
						modifier = {
							factor = 0.8
							learning = 15
						}
						modifier = {
							factor = 1.2
							NOT = { learning = 15 }
						}
						modifier = {
							factor = 1.2
							NOT = { learning = 10 }
						}

						character_event = { id = RIP.4044 days = 30 } 
					}
					#Fail
					25 = {
						character_event = { id = RIP.4046 days = 30 } 
					}
				}
			}
		}
	}

	#No
	option = {
		name = EVTOPTB_RIP_4041
		custom_tooltip = { text = EVTOPTB_RIP_4041_TOOLTIP }

		ai_chance = {
			factor = 10
			modifier = {
				factor = 1.5
				trait = greedy
			}
			modifier = {
				factor = 1.5
				is_dumb_trigger = yes
			}
		}

		clr_character_flag = physician_books
		clr_character_flag = physician_herbs
		clr_character_flag = physician_tools
		clr_character_flag = physician_lab_equipment
	}
}


# A Physician-Missionary arrives in a Tribal or Nomadic Court
character_event = {
	id = RIP.4100
	desc = EVTDESC_RIP_4100
	picture = GFX_evt_court_physician
	border = GFX_event_normal_frame_religion

	min_age = 16
	capable_only = yes
	only_playable = yes
	prisoner = no
	
	is_triggered_only = yes
	
	trigger = {
		has_dlc = "Reapers"
		higher_tier_than = BARON
		OR = {
			is_tribal = yes
			is_nomadic = yes
		}
		OR = {
			NOT = {
				has_character_flag = tribal_physician
			}
			had_character_flag = { flag = tribal_physician days = 9125 }
		}
		NOT = {
			any_courtier_or_vassal = {
				liege = { character = ROOT }
				has_minor_title = title_court_physician
			}
		}
		any_independent_ruler = {
			ai = yes
			is_adult = yes
			is_feudal = yes
			higher_tier_than = DUKE
			NOT = { religion_group = ROOT }
			is_within_diplo_range = ROOT
			mercenary = no
			holy_order = no
			controls_religion = no
			primary_title = {
				is_landless_type_title = no
			}
			OR = {
				NOT = { religion_group = pagan_group }
				AND = {
					religion_group = pagan_group
					is_reformed_religion = yes
				}
			}
		}
	}
	
	weight_multiplier = {
		days = 1
		
		modifier = {
			factor = 2.5
			num_of_symptoms = 1
		}
		modifier = {
			factor = 2.5
			is_ill = yes
		}
		modifier = {
			factor = 1.5
			trait = cynical
		}
		modifier = {
			factor = 1.5
			any_owned_bloodline = { has_bloodline_flag = bloodline_effect_better_physicians }
		}
	}
	
	immediate = {
		set_character_flag = tribal_physician
		random_independent_ruler = {
			limit = {
				ai = yes
				is_adult = yes
				is_feudal = yes
				higher_tier_than = DUKE
				NOT = { religion_group = ROOT }
				is_within_diplo_range = ROOT
				mercenary = no
				holy_order = no
				controls_religion = no
				primary_title = {
					is_landless_type_title = no
				}
				OR = {
					NOT = { religion_group = pagan_group }
					AND = {
						religion_group = pagan_group
						is_reformed_religion = yes
					}
				}
			}
			create_character = {
				religion = THIS
				culture = THIS
				dynasty = none
				age = 35
				random_traits = yes
				female = no
				attributes = {
					learning = 6
				}
				health = 6
				trait = scholarly_theologian
				trait = zealous
				trait = physician
				flag = is_court_physician
			}
			new_character = {
				remove_trait = cynical
				remove_trait = mystic
				remove_trait = poet
				remove_trait = socializer
				remove_trait = gamer
				remove_trait = hedonist
				remove_trait = duelist
				remove_trait = hunter
				remove_trait = strategist
				remove_trait = administrator
				remove_trait = architect
				remove_trait = gardener
				remove_trait = schemer
				remove_trait = impaler
				remove_trait = seducer
				remove_trait = seductress
				remove_trait = theologian
				remove_trait = scholar
				save_event_target_as = missionary_physician_target
				move_character = ROOT
			}
			save_event_target_as = origin_realm_of_missionary_physician_target
		}
	}

	option = { # Recruit him
		name = EVTOPTA_RIP_4100
		
		ai_chance = {
			factor = 70
			modifier = {
				factor = 5
				trait = cynical
			}
		}
		
		event_target:missionary_physician_target = {
			show_scope_change = no
			opinion = {
				modifier = opinion_loyal_servant
				who = ROOT
				years = 10
			}
			give_minor_title = title_court_physician
		}
		
		if = {
			limit = { controls_religion = no }
			hidden_tooltip = {
				character_event = { id = RIP.4101 days = 30 random = 30 }
			}
		}
		
	}
	
	option = { # Seize his assets and execute him!
		name = EVTOPTB_RIP_4100
		
		ai_chance = {
			factor = 30
			modifier = {
				factor = 5
				trait = zealous
			}
		}
		
		wealth = 50
		event_target:missionary_physician_target = {
			show_scope_change = no
			death = {
				death_reason = death_execution_burning
				killer = ROOT
			}
		}
		event_target:origin_realm_of_missionary_physician_target = {
			show_scope_change = no
			opinion = {
				modifier = opinion_dishonorable_scum
				who = ROOT
				years = 15
			}
		}
	}
}

# Gift 4
character_event = {
	id = LoR.890
	desc = EVTDESCLoR.887
	picture = GFX_evt_emissary
	
	hide_from = yes
	
	is_triggered_only = yes
	
	immediate = {
		create_random_soldier = {
			random_traits = no
			dynasty = NONE
			female = no
			age = 22
			religion = ROOT
			culture = bedouin_arabic
			attributes = {
				martial = 6
			}
			trait = eunuch
			trait = diligent
			trait = temperate
			trait = humble
		}
		new_character = {
			opinion = {
				modifier = opinion_loyal_servant
				who = ROOT
			}
			random_list = {
				25 = {
					add_trait = brave
				}
				25 = {
					add_trait = wroth
				}
				25 = {
					add_trait = cruel
				}
				25 = {
					add_trait = robust
				}
			}
			random_list = {
				25 = {
					add_trait = organizer
				}
				25 = {
					add_trait = inspiring_leader
				}
				25 = {
					add_trait = defensive_leader
				}
				25 = {
					add_trait = desert_terrain_leader
				}
			}
			random_list = {
				33 = {
					add_trait = duelist
				}
				33 = {
					modifier = {
						factor = 3
						ROOT = { any_owned_bloodline = { has_bloodline_flag = bloodline_effect_strategist } }
					}
					add_trait = strategist
				}
				33 = {
					add_trait = hunter
				}
			}
			save_event_target_as = eunuch_gift
			set_character_flag = eunuch_gift
		}
	}
	
	option = {
		name = EVTOPTALoR.887
		custom_tooltip = {
			text = eunuch_gift_tooltip
		}
	}
	option = {
		name = EVTOPTBLoR.887
		custom_tooltip = { text = eunuch_declined }
		hidden_tooltip = {
			event_target:eunuch_gift = {
				death = {
					death_reason = death_missing
				}
			}
		}
	}
}

#Creates the councillor
character_event = {
	id = 77777

	is_triggered_only = yes
	
	only_playable = yes
	capable_only = yes
	min_age = 16
	prisoner = no

	trigger = {
		NOR = {
			is_inaccessible_trigger = yes 
			has_religion_feature = religion_matriarchal
			has_religion_feature = religion_patriarchal
			has_religion_feature = religion_equal
			has_religion_feature = religion_feature_bon
			has_game_rule = {
				name = gender
				value = all
			}
		}
	}
	
	hide_window = yes

	immediate = {
		random_list = {
			#Chancellor
			25 = {
				modifier = {
					factor = 5
					has_dlc = "Conclave"
					NOR = {
						has_law = status_of_women_2
						has_law = status_of_women_3
						has_law = status_of_women_4
					}
				}
				modifier = {
					factor = 0
					job_chancellor = { diplomacy = 12 }
				}
				
				create_character = {
					female = yes
					age = 35
					attributes = { 
						martial = 2
						diplomacy = 10
						stewardship = 2
						intrigue = 2
						learning = 2 
					}
					dynasty = random
					religion = ROOT
					culture = ROOT
					trait = charismatic_negotiator
					random_traits = yes
				}
				new_character = {
					set_character_flag = female_councillor_chancellor
					character_event = { id = 77778 }

					remove_trait = slow
					remove_trait = imbecile
					remove_trait = dull
					remove_trait = shy
					remove_trait = deceitful
					remove_trait = socializer
					remove_trait = gamer
					remove_trait = hedonist
					remove_trait = duelist
					remove_trait = hunter
					remove_trait = strategist
					remove_trait = administrator
					remove_trait = architect
					remove_trait = gardener
					remove_trait = schemer
					remove_trait = impaler
					remove_trait = seductress
					remove_trait = scholar
					remove_trait = theologian
					remove_trait = mystic

					if = {
						limit = { has_dharmic_religion_trigger = yes }
						remove_trait = brahmin
						remove_trait = vaishya
						add_trait = kshatriya
					}

					#Adds some more traits
					random_list = {
						#Attractive
						20 = {
							add_trait = fair
						}
						#Poet
						20 = {
							add_trait = poet
						}
						#Socializer
						20 = {
							add_trait = socializer
						}
						#Gamer
						20 = {
							add_trait = gamer
						}
						#Party
						20 = {
							add_trait = hedonist
						}
					}
				}
			}
			#Marshal
			25 = {
				modifier = {
					factor = 5
					has_dlc = "Conclave"
					NOR = {
						has_law = status_of_women_3
						has_law = status_of_women_4
					}
				}

				modifier = {
					factor = 0
					job_marshal = { martial = 12 }
				}

				create_character = {
					age = 37
					female = yes
					attributes = { 
						martial = 10
						diplomacy = 2
						stewardship = 2
						intrigue = 2
						learning = 2 
					}
					dynasty = random
					religion = ROOT
					culture = ROOT
					trait = skilled_tactician
					trait = brave
					random_traits = yes
				}
				new_character = {
					set_character_flag = female_councillor_marshal
					character_event = { id = 77778 }

					remove_trait = slow
					remove_trait = imbecile
					remove_trait = dull
					remove_trait = craven
					remove_trait = feeble
					remove_trait = weak
					remove_trait = socializer
					remove_trait = gamer
					remove_trait = hedonist
					remove_trait = duelist
					remove_trait = hunter
					remove_trait = strategist
					remove_trait = administrator
					remove_trait = architect
					remove_trait = gardener
					remove_trait = schemer
					remove_trait = impaler
					remove_trait = seductress
					remove_trait = scholar
					remove_trait = theologian
					remove_trait = mystic

					if = {
						limit = { has_dharmic_religion_trigger = yes }
						remove_trait = brahmin
						remove_trait = vaishya
						add_trait = kshatriya
					}

					#Adds some more traits
					random_list = {
						#Brawny Tomboy
						25 = {
							add_trait = robust
							add_trait = uncouth
							add_trait = aggressive_leader
						}
						#Duelist
						25 = {
							add_trait = duelist
							add_trait = inspiring_leader
						}
						#Hunter
						25 = {
							add_trait = hunter
							add_trait = flanker
						}
						#Strategist
						25 = {
							modifier = {
								factor = 4
								ROOT = { any_owned_bloodline = { has_bloodline_flag = bloodline_effect_strategist } }
							}
							add_trait = strategist
							add_trait = unyielding_leader
						}
					}	
				}
			}
			#Steward
			25 = {
				modifier = {
					factor = 5
					has_dlc = "Conclave"
					NOR = {
						has_law = status_of_women_2
						has_law = status_of_women_3
						has_law = status_of_women_4
					}
				}
				modifier = {
					factor = 0
					job_treasurer = { stewardship = 12 }
				}

				create_character = {
					age = 38
					female = yes
					attributes = { 
						martial = 2
						diplomacy = 2
						stewardship = 10
						intrigue = 2
						learning = 2 
					}
					dynasty = random
					religion = ROOT
					culture = ROOT
					trait = fortune_builder
					random_traits = yes
				}
				new_character = {
					set_character_flag = female_councillor_treasurer
					character_event = { id = 77778 }

					remove_trait = slow
					remove_trait = imbecile
					remove_trait = dull
					remove_trait = arbitrary
					remove_trait = socializer
					remove_trait = gamer
					remove_trait = hedonist
					remove_trait = duelist
					remove_trait = hunter
					remove_trait = strategist
					remove_trait = administrator
					remove_trait = architect
					remove_trait = gardener
					remove_trait = schemer
					remove_trait = impaler
					remove_trait = seductress
					remove_trait = scholar
					remove_trait = theologian
					remove_trait = mystic

					if = {
						limit = { has_dharmic_religion_trigger = yes }
						remove_trait = brahmin
						remove_trait = kshatriya
						add_trait = vaishya
					}

					#Adds some more traits
					random_list = {
						#Administrator
						25 = {
							add_trait = administrator
						}
						#Architect
						25 = {
							add_trait = architect
						}
						#Gardener
						25 = {
							add_trait = gardener
						}
						#Shrewd
						25 = {
							add_trait = gardener
						}
					}
				}
			}
			#Spymaster
			25 = {
				modifier = {
					factor = 5
					has_dlc = "Conclave"
					NOR = {
						has_law = status_of_women_1
						has_law = status_of_women_2
						has_law = status_of_women_3
						has_law = status_of_women_4
					}
				}
				modifier = {
					factor = 0
					job_spymaster = { intrigue = 12 }
				}

				create_character = {
					age = 42
					female = yes
					attributes = { 
						martial = 2
						diplomacy = 2
						stewardship = 2
						intrigue = 10
						learning = 2 
					}
					dynasty = random
					religion = ROOT
					culture = ROOT
					trait = intricate_webweaver
					random_traits = yes
				}
				new_character = {	
					set_character_flag = female_councillor_spymaster
					character_event = { id = 77778 }

					remove_trait = slow
					remove_trait = imbecile
					remove_trait = dull
					remove_trait = trusting
					remove_trait = honest
					remove_trait = socializer
					remove_trait = gamer
					remove_trait = hedonist
					remove_trait = duelist
					remove_trait = hunter
					remove_trait = strategist
					remove_trait = administrator
					remove_trait = architect
					remove_trait = gardener
					remove_trait = schemer
					remove_trait = impaler
					remove_trait = seductress
					remove_trait = scholar
					remove_trait = theologian
					remove_trait = mystic

					if = {
						limit = { has_dharmic_religion_trigger = yes }
						remove_trait = brahmin
						remove_trait = kshatriya
						add_trait = vaishya
					}

					#Adds some more traits
					random_list = {
						#Schemer
						33 = {
							add_trait = schemer
						}
						#Impaler
						33 = {
							add_trait = impaler
						}
						#Seductress
						33 = {
							add_trait = seductress
							add_trait = lustful
							add_trait = fair
							remove_trait = chaste
						}
						#Deceitful, paranoid & ugly
						33 = {
							add_trait = ugly
							add_trait = shrewd
						}
					}
				} 
			}
		}
	}
}

# Reconquista Preparation Event - Great Commander ahoy!
character_event = {
    id = HF.49243
    desc = EVTDESC_HF_49243
    picture = GFX_evt_dueling_knights_hf
    border = GFX_event_normal_frame_religion
    is_triggered_only = yes
    has_dlc = "Holy Fury"
    trigger = {
    
    }

    immediate = {
    	hidden_tooltip = {
    		create_character = {
    			dynasty = random
    			culture = catalan
    			religion = ROOT
    			health = 5
    			attributes = {
    				martial = 4
    				diplomacy = 0
    				stewardship = 2
    				intrigue = 0
    				learning = 0
    			}
    		}

    		new_character = {
    			save_event_target_as = new_commander
    			opinion = {
    				modifier = opinion_loyal_servant
    				who = ROOT
    			}

    			add_trait = brilliant_strategist
    			# Randomize Culture
    			random_list = {
    				# Keep Catalan
    				3 = {
    				}
    				# Other Iberian Cultures
    				3 = {
    					culture = basque
    				}
    				3 = {
    					culture = castillan
    				}
    				3 = {
    					trigger = {
    						year = 950
    					}
    					culture = portuguese
    				}
    				3 = {
    					trigger = {
    						NOT = {
    							year = 900
    						}
    					}
    					culture = visigothic
    				}
    				# Other close by (normally Catholic) cultures
    				3 = {
    					trigger = {
    						NOT = {
    							year = 850
    						}
    					}
    					culture = suebi
    				}
    				2 = {
    					culture = occitan
    				}
    				1 = {
    					trigger = {
    						year = 850
    					}
    					culture = frankish
    				}
    				1 = {
    					culture = italian
    				}
    				1 = {
    					trigger = {
    						NOT = {
    							year = 900
    						}
    					}
    					culture = lombard
    				}
    				1 = {
    					culture = german
    				}
    				2 = {
    					trigger = {
    						NOT = {
    							year = 850
    						}
    					}
    					culture = old_frankish
    				}
    				2 = {
    					trigger = {
    						year = 950
    					}
    					culture = norman
    				}
    			}
    			# Some sort of huge
    			random_list = {
    				1 = {
    					add_trait = strong
    				}
    				1 = {
    					add_trait = robust
    				}
    			}
    			# Some sort of lifestyle
    			random_list = {
    				1 = {
						modifier = {
							factor = 3
							ROOT = { any_owned_bloodline = { has_bloodline_flag = bloodline_effect_strategist } }
						}
    					add_trait = strategist
    				}
    				1 = {
    					add_trait = duelist
    				}
    				1 = {
    					add_trait = hunter
    				}
    			}
    			# Some sort of good trait
    			random_list = {
    				1 = {
    					add_trait = patient
    				}
    				1 = {
    					add_trait = diligent 
    				}
    			}
    			# Some sort of bad trait 
    			random_list = {
    				1 = {
    					add_trait = proud
    				}
    				1 = {
    					add_trait = envious
    				}
    			}
    			# Some potential traits
    			random = {
    				chance = 40
    				add_trait = ambitious
    			}
    			random = {
    				chance = 40
    				add_trait = brave
    			}
    			random = {
    				chance = 40 
    				add_trait = zealous
    			}
    			# One Commander trait 
    			add_random_commander_trait_effect = yes
    		}
    	}
    }

    option = {      
        name = EVTOPTA_HF_49243
    }
    option = {      
        name = EVTOPTB_HF_49243

        trigger = {
			OR = { 
				NOT = { ROOT = { has_law = succ_byzantine_elective } }  #Either not Imperial...
				NOT = { #...Or there are no valid vassal candidates that can be commanders.
					any_vassal = { 
						higher_real_tier_than = BARON
						NOT = { 
							primary_title = { temporary = yes } 
						}
						OR = {
							AND = {
								OR = {
									male_can_hold_minor_title_trigger = yes
									female_can_hold_minor_commander_title_trigger = yes
								}
								OR = {
									NOT = { religion = hindu }
									trait = kshatriya
								}
								is_adult = yes
							}
							has_character_flag = special_marshal
						}
				
						prisoner = no
						NOT = { trait = incapable }
						NOT = { is_inaccessible_trigger = yes }
						NOT = { has_character_flag = guru }
						NOT = { has_character_modifier = refusing_to_lead }
						NOR = {
							has_job_title = job_chancellor
							has_job_title = job_marshal
							has_job_title = job_treasurer
							has_job_title = job_spymaster
							has_job_title = job_spiritual
							has_minor_title = title_commander
						}
					} 
				}
			}
        	OR = {
				AND = {
					tier = COUNT
					NOT = {
						any_realm_character = {
							count = 2
							liege = { character = ROOT }
							has_minor_title = title_commander
						}
					}
				}
				AND = {
					tier = DUKE
					NOT = {
						any_realm_character = {
							count = 4
							liege = { character = ROOT }
							has_minor_title = title_commander
						}
					}
				}
				AND = {
					tier = KING
					is_nomadic = no
					NOT = {
						any_realm_character = {
							count = 6
							liege = { character = ROOT }
							has_minor_title = title_commander
						}
					}
				}
				AND = {
					tier = EMPEROR
					is_nomadic = no
					NOT = {
						any_realm_character = {
							count = 8
							liege = { character = ROOT }
							has_minor_title = title_commander
						}
					}
				}
				AND = {
					tier = KING
					is_nomadic = yes
					NOT = {
						any_realm_character = {
							count = 2
							liege = { character = ROOT }
							has_minor_title = title_commander
						}
					}
				}
				AND = {
					tier = EMPEROR
					is_nomadic = yes
					NOT = {
						any_realm_character = {
							count = 4
							liege = { character = ROOT }
							has_minor_title = title_commander
						}
					}
				}
			}
        }

        event_target:new_commander = {
        	give_minor_title = title_commander
        }
    }
    option = {
    	name = EVTOPTC_HF_49243 
    	trigger = {
    		NOT = {
    			has_character_flag = reconquista_adventurer
    		}
    	}

    	hidden_tooltip = {
			event_target:new_commander = { 
				death = {
					death_reason = death_missing
				}
			}
		}
    }

    after = {
    	if = {
    		limit = {
    			has_character_flag = reconquista_adventurer
    		}
    		add_character_modifier = {
    			name = reconquista_commander_event_cooldown
    			hidden = yes
    			days = 15
    		}
    	}
    	else = {
    		add_character_modifier = {
    		name = reconquista_commander_event_cooldown
	    		hidden = yes
	    		months = 4
	    	}
    	}
    }
}

#Random event for Saintly Bloodline - Defender of the Faith, Random Zealots crashing your Capital
character_event = {
    id = HF.43300
    desc = EVTDESC_HF_43300
    picture = GFX_evt_secluded_in_prayer
    min_age = 16
    only_playable = yes
    is_triggered_only = yes
    has_dlc = "Holy Fury"

    trigger = {
        any_owned_bloodline = {
            has_bloodline_flag = defender_of_the_faith
        }
    }

    immediate = {
        any_owned_bloodline = {
            if = {
                limit = {
                    has_bloodline_flag = defender_of_the_faith
                }
                founder = {
                    save_event_target_as = founder_of_zealots
                }
            }
        }
    }

    option = {
        name = EVTOPTA_HF_43300
        trigger = {
            trait = cynical
        }
        tooltip_info = cynical
        piety = -25
        random_list = {
            50 = {
                modifier = {
                    factor = 0.3
                    martial >= 10
                }
                prestige = -50
                custom_tooltip = { text = EVTOPTA_HF_43300_CUSTOM_1 }
                hidden_tooltip = {
                    capital_scope = {
                        add_province_modifier = {
                            name = zealots_running_amok
                            duration = 1095
                        }
                    }
                    character_event = { id = HF.43301 }
                }
            }
            50 = {
                prestige = 50
                custom_tooltip = { text = EVTOPTA_HF_43300_CUSTOM_2 }
                hidden_tooltip = {
                    add_character_modifier = {
                        name = removed_zealots
                        duration = 1825
                    }
                    character_event = { id = HF.43302 }
                }
            }
        }
    }

    option = {
        name = EVTOPTB_HF_43300
        trigger = {
            trait = zealous
        }
        tooltip_info = zealous
        wealth = -50
        piety = 25
        random_list = {
            40 = {
                prestige = -50
                modifier = {
                    factor = 0.5
                    diplomacy >= 10
                }
                custom_tooltip = { text = EVTOPTB_HF_43300_CUSTOM_1 }
                hidden_tooltip = {
                    capital_scope = {
                        add_province_modifier = {
                            name = zealots_running_amok 
                            duration = 1095
                        }
                    }
                    character_event = { id = HF.43303 }
                }
            }
            40 = {
                prestige = 50
                custom_tooltip = { text = EVTOPTB_HF_43300_CUSTOM_2 }
                hidden_tooltip = {
                    capital_scope = {
                        ROOT = {
                            spawn_unit = {
                                owner = THIS
                                province = PREV
                                home = PREV
                                troops = {
                                    archers = { 200 200 }
                                    light_infantry = { 500 500 }
                                }
                                attrition = 1
                                maintenance_multiplier = 0
                                can_toggle_looting = yes
                            }
                        }
                    }
                    character_event = { id = HF.43304 }
                }
            }
            20 = {
                prestige = 100
                custom_tooltip = { text = EVTOPTB_HF_43300_CUSTOM_3 }
                hidden_tooltip = {
                    create_random_soldier = {
                        random_traits = yes
                        dynasty = random
                        female = no
                        attributes = {
                            diplomacy = 1
                            learning = 6
                            stewardship = 3
                            intrigue = 3
                            martial = 10
                        }
                    }
                    new_character = {
                        remove_trait = slow
                        remove_trait = imbecile
                        remove_trait = dull
                        remove_trait = inbred
                        remove_trait = cannibal_trait
                        
                        remove_trait = mystic
                        remove_trait = socializer
                        remove_trait = gamer
                        remove_trait = hedonist
                        remove_trait = duelist
                        remove_trait = hunter
                        remove_trait = strategist
                        remove_trait = administrator
                        remove_trait = architect
                        remove_trait = gardener
                        remove_trait = schemer
                        remove_trait = impaler
                        remove_trait = seducer
                        remove_trait = seductress
                        remove_trait = theologian
                        remove_trait = scholar

                        random_list = { # Flavor Randomization
                            15 = {
                                change_martial = 1
                            }
                            20 = {
                                add_trait = duelist
                            }
                            5 = {
								modifier = {
									factor = 4
									ROOT = { any_owned_bloodline = { has_bloodline_flag = bloodline_effect_strategist } }
								}
                                add_trait = strategist
                            }
                            5 = {
                                add_trait = theologian
                            }
                            10 = {
                                change_learning = 3
                            }
                            5 = {
                                change_learning = 5
                            }
                            5 = {
                                add_trait = shrewd
                            }
                        }

                        save_event_target_as = zealot_general

                        random_list = {
                            25 = {
                                give_nickname = nick_the_pious
                            }
                            25 = {
                                give_nickname = nick_the_cleansing_flame
                            }
                            25 = {
                                give_nickname = nick_the_witch_hunter
                            }
                            25 = {
                                give_nickname = nick_the_purifier
                            }
                            25 = {
                                give_nickname = nick_the_fearless
                            }
                            25 = {
                                give_nickname = nick_the_ruthless
                            }
                        }
                    }
                    capital_scope = {
                        ROOT = {
                            spawn_unit = {
                                owner = THIS
                                province = PREV
                                home = PREV
                                troops = {
                                    archers = { 200 200 }
                                    light_infantry = { 500 500 }
                                }
                                attrition = 1
                                maintenance_multiplier = 0
                                can_toggle_looting = yes
                            }
                        }
                    }
                    character_event = { id = HF.43305}
                }
            }
        }
    }

    option = {
        name = EVTOPTC_HF_43300
        trigger = {
            learning >= 10
        }
        tooltip_info = learning
        piety = 50
        random_list = {
            50 = {
                modifier = {
                    factor = 0.5
                    learning >= 15
                }
                prestige = -50
                custom_tooltip = { text = EVTOPTC_HF_43300_CUSTOM_1 }
                hidden_tooltip = {
                    capital_scope = {
                        add_province_modifier = {
                            name = zealots_running_amok
                            duration = 1095
                        }
                    }
                    character_event = { id = HF.43306 }
                }
            }
            50 = {
                prestige = 50                
                custom_tooltip = { text = EVTOPTC_HF_43300_CUSTOM_2 }
                hidden_tooltip = {
                    add_character_modifier = {
                        name = removed_zealots
                        duration = 1825
                    }
                    character_event = { id = HF.43307 }
                }
            }
        }
    }

    option = {
        name = EVTOPTD_HF_43300
        capital_scope = {
            add_province_modifier = {
                name = zealots_running_amok
                duration = 1095
            }
        }
    }
}

#War Sacrifice power.
character_event = {
	id = HF.25021
	desc = {
		trigger = {
			religion_group = pagan_group
		}
		text = EVTDESCAHF25021
	}
	desc = {
		trigger = { 
			NOT = {
				religion_group = pagan_group
			}
		}
		text = EVTDESCBHF25021
	}
	picture = GFX_evt_religious_exultation
	border = GFX_event_normal_frame_religion
	hide_new = yes

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			random_dynasty_member = {
				limit = {
					is_ruler = no
					is_adult = yes
					host = { character = ROOT }
					NOT = { is_heir = ROOT }
					NAND = {
						trait = god
						OR = {
							AND = {
								religion_group = ROOT
								NOT = { religion_group = pagan_group }
							}
							religion = ROOT
							is_heresy_of = ROOT
						}
					}
				}
				save_event_target_as = scoped_war_sacrifice
			}
			random_courtier = { 
				limit = {
					NOT = { dynasty = ROOT }
					is_ruler = no 
					is_adult = yes 
					is_alive = yes 
					NAND = {
						trait = god
						OR = {
							AND = {
								religion_group = ROOT
								NOT = { religion_group = pagan_group }
							}
							religion = ROOT
							is_heresy_of = ROOT
						}
					}
				} 
				preferred_limit = {
					is_unimportant_trigger = yes
				}
				save_event_target_as = sacrificed_courtier
			}
			clr_character_flag = flag_painted_by_norse #Safety cleanup
			clr_character_flag = flag_painted_by_tengri
			clr_character_flag = flag_painted_by_baltic
			clr_character_flag = flag_painted_by_finnish
			clr_character_flag = flag_painted_by_slavic
			clr_character_flag = flag_painted_by_west_african
			clr_character_flag = flag_painted_by_zun
			clr_character_flag = flag_painted_by_bon
			clr_character_flag = flag_painted_by_hellenic
			#Bon and Hellenics would not paint their faces. They only get the blood splatter effect when sacrificing. Flags only used for localization.
			if = {
				limit = { 
					society_member_of = warrior_lodge_norse		#Tie to flag to avoid potential multiplayer delay issues.
				}
				set_character_flag = flag_painted_by_norse
			}
			if = {
				limit = { 
					society_member_of = warrior_lodge_tengri
				}
				set_character_flag = flag_painted_by_tengri
			}
			if = {
				limit = { 
					society_member_of = warrior_lodge_baltic
				}
				set_character_flag = flag_painted_by_baltic
			}
			if = {
				limit = { 
					society_member_of = warrior_lodge_finnish
				}
				set_character_flag = flag_painted_by_finnish
			}
			if = {
				limit = { 
					society_member_of = warrior_lodge_slavic
				}
				set_character_flag = flag_painted_by_slavic
			}
			if = {
				limit = { 
					society_member_of = warrior_lodge_west_african
				}
				set_character_flag = flag_painted_by_west_african
			}
			if = {
				limit = { 
					society_member_of = warrior_lodge_zun
				}
				set_character_flag = flag_painted_by_zun
			}
			if = {
				limit = { 
					society_member_of = warrior_lodge_bon
				}
				set_character_flag = flag_painted_by_bon
			}
			if = {
				limit = { 
					society_member_of = warrior_lodge_hellenic
				}
				set_character_flag = flag_painted_by_hellenic
			}
		}
	}
	option = { #Sacrifice family member
		name = EVTOPTAHF25021
		trigger = { 
			event_target:scoped_war_sacrifice = { is_alive = yes } 
			OR = { 
				religion = norse_pagan 
				religion = norse_pagan_reformed
				religion = slavic_pagan
				religion = slavic_pagan_reformed
				religion = baltic_pagan
				religion = baltic_pagan_reformed
				religion = tengri_pagan
				religion = tengri_pagan_reformed
				religion = finnish_pagan
				religion = finnish_pagan_reformed
				religion = zun_pagan
				religion = zun_pagan_reformed
				religion = west_african_pagan
				religion = west_african_pagan_reformed
				has_religion_feature = religion_ritual_sacrifice
			} 
		}
		add_character_modifier = { 
			modifier = lodge_war_sacrifice_4
			years = 5 
		}
		add_blood_splatter_effect = yes
		event_target:scoped_war_sacrifice = { 
			show_scope_change = no
			save_event_target_as = kinslayer_target
			death = { 
				death_reason = death_execution_aztec_sacrifice 
				killer = ROOT
			} 
		} 
		add_kinslayer_trait_effect = yes
		pacifists_lose_piety_effect = yes
		hidden_tooltip = { character_event = { id = HF.25022 } } 
		hidden_tooltip = {
			clr_character_flag = flag_picking_war_sacrifice
			add_character_modifier = { 
				modifier = lodge_war_sacrifice_cooldown
				years = 10
				hidden = yes
			}
			event_target:scoped_war_sacrifice = {
				mother = {
					opinion = {
						modifier = opinion_killed_close_kin
						who = ROOT
					}
				}
				father = {
					opinion = {
						modifier = opinion_killed_close_kin
						who = ROOT
					}
				}
				spouse = {
					opinion = {
						modifier = opinion_spouse_slayer
						who = ROOT
					}
				}
				any_child = {
					opinion = {
						modifier = opinion_killed_close_kin
						who = ROOT
					}
				}
			}
		}
	}
	option = { #Sacrifice servant
		name = EVTOPTBHF25021
		trigger = { 
			any_courtier = {
				NOT = { dynasty = ROOT }
				is_ruler = no 
				is_adult = yes 
				is_alive = yes 
			} 
			OR = { 
				religion = norse_pagan 
				religion = norse_pagan_reformed
				religion = slavic_pagan
				religion = slavic_pagan_reformed
				religion = baltic_pagan
				religion = baltic_pagan_reformed
				religion = tengri_pagan
				religion = tengri_pagan_reformed
				religion = finnish_pagan
				religion = finnish_pagan_reformed
				religion = zun_pagan
				religion = zun_pagan_reformed
				religion = west_african_pagan
				religion = west_african_pagan_reformed
				has_religion_feature = religion_ritual_sacrifice
			} 
		}
		add_character_modifier = { 
			modifier = lodge_war_sacrifice_3
			years = 5 
		}
		event_target:sacrificed_courtier = { 
			show_scope_change = no
			death = { 
				death_reason = death_execution_aztec_sacrifice 
				killer = ROOT
			} 
		} 
		custom_tooltip = { 
			text = tooltip_EVTOPTBHF25021
			hidden_tooltip = { 
				any_courtier_or_vassal = {
					limit = {
						NOR = {
							trait = impaler
							trait = cruel
							is_member_of_any_warrior_lodge_trigger = yes
						} 
					}
					opinion = {
						who = ROOT
						modifier = opinion_savage_butcher
						years = 5
					}
				}
				event_target:scoped_war_sacrifice = {
					mother = {
						opinion = {
							modifier = opinion_killed_close_kin
							who = ROOT
						}
					}
					father = {
						opinion = {
							modifier = opinion_killed_close_kin
							who = ROOT
						}
					}
					spouse = {
						opinion = {
							modifier = opinion_spouse_slayer
							who = ROOT
						}
					}
					any_child = {
						opinion = {
							modifier = opinion_killed_close_kin
							who = ROOT
						}
					}
				}
			} 
		} 
		pacifists_lose_piety_effect = yes
		add_blood_splatter_effect = yes
		hidden_tooltip = { character_event = { id = HF.25023 } } 
		hidden_tooltip = {
			clr_character_flag = flag_picking_war_sacrifice
			add_character_modifier = { 
				modifier = lodge_war_sacrifice_cooldown
				years = 10
				hidden = yes
			}
		}
	}
	option = { #Sacrifice livestock
		name = {
			text = EVTOPTCHF25021_A
			trigger = {
				is_nomadic = no
			}
		}
		name = {
			text = EVTOPTCHF25021_B
			trigger = {
				is_nomadic = yes
			}
		}
		add_character_modifier = { 
			modifier = lodge_war_sacrifice_2
			years = 5 
		}
		if = { 
			limit = { ai = no is_nomadic = no }
			scaled_wealth = { value = -0.75 min = -50 max = -150 } 
		}
		if = { 
			limit = { ai = no is_nomadic = yes }
			manpower = -150
		}
		if = { 
			limit = { NOR = { religion_group = pagan_group has_religion_feature = religion_ritual_sacrifice } }
			tiered_high_piety_negative_effect = yes 
		}
		add_blood_splatter_effect = yes
		hidden_tooltip = { character_event = { id = HF.25024 } } 
		hidden_tooltip = {
			clr_character_flag = flag_picking_war_sacrifice
			add_character_modifier = { 
				modifier = lodge_war_sacrifice_cooldown
				years = 10
				hidden = yes
			}
		}
	}
	option = { #Never mind.
		name = EVTOPTEHF25021
		trigger = { ai = no }
		add_society_currency_medium_effect = yes
		clr_character_flag = flag_picking_war_sacrifice
	}
#	option = { #Sacrifice wealth
#		name = EVTOPTDHF25021
#		if = { 
#			limit = { ai = no }
#			scaled_wealth = { value = -0.25 min = -25 max = -75 } 
#		}
#		if = { 
#			limit = { NOT = { religion_group = pagan_group } }
#			tiered_piety_negative_effect = yes 
#		}
#		hidden_tooltip = { character_event = { id = HF.25025 } } 
#		add_character_modifier = { 
#			modifier = lodge_war_sacrifice_1
#			years = 5 
#		}
#	}
}

#On_looted_settlement: Destroying large city as a Ravager/Seaking.
character_event = {
	id = HF.23210
	desc = EVTDESCHF23210
	picture = { 
		trigger = { is_female = no } 
		picture = GFX_evt_vikings_arriving_oldgods
	}
	picture = { 
		trigger = { is_female = yes } 
		picture = GFX_evt_norse_tempest
	}
	border = GFX_event_normal_frame_war
	
	has_dlc = "Holy Fury"

	is_triggered_only = yes

	trigger = {
		OR = {
			trait = ravager
			trait = seaking
			trait = sea_queen
		}
		FROM = {
			location = { capital_holding = { title = FROM } } #Do not reiterate the event after taking the capital holding.
			location = { num_of_settlements = 5 } #Only fires for big cities. 
			is_tribal = no
			is_nomadic = no
			location = { port = yes } 		#Coastal provinces are what the Seaking should be terrorizing.
		}
		location = { 
			ROOT = {
				any_realm_province = { #Avoid the event firing for raiders who raided on land all the way to the port of a sea they do not have access to.
					port = yes 
					TECH_NAVAL = 1
					OR = { 
						has_building = tb_shipyard_1
						has_building = ca_shipyard_1
						has_building = tp_shipyard_1
						has_building = ct_shipyard_1
					} 
					can_naval_path_to = PREVPREV
				} 
			} 
		}
		# Not on eternal flames in random worlds
		NAND = {
			has_alternate_start_parameter = { key = religion_names value = random }
			k_draconic_pagan_reformed = { 
				OR = {
					persistent_event_target:draconic_holy_site_1 = { title = FROM }
					persistent_event_target:draconic_holy_site_2 = { title = FROM }
					persistent_event_target:draconic_holy_site_3 = { title = FROM }
					persistent_event_target:draconic_holy_site_4 = { title = FROM }
					persistent_event_target:draconic_holy_site_5 = { title = FROM }
				}
			}
		}
	}
	
	#Burn it all to the ground.
	#Steal weapons and tools.
	#Scare villagers into telling tales of your fearsome army. (Prestige)
	#Nothing.

	option = { #Destroy
		name = EVTOPTAHF23210
		add_blood_splatter_effect = yes
		if = { 
			limit = { 
				NOR = {
					trait = kind
					trait = cruel
				}
			}
			random = { chance = 5 add_trait = cruel }
		}
		if = { 
			limit = { 
					trait = kind
			}
			random = { chance = 25 remove_trait = kind }
		}
		if = { 
			limit = {
				trait = ravager
			}
			custom_tooltip = {
				text = "TOOLTIP_EVTOPTAHF230210"
				hidden_tooltip = {
					FROM = {
						destroy_random_building = THIS
						destroy_random_building = THIS
						add_holding_modifier = {
							modifier = recently_burnt_the_land
							months = 7
						}
					}
				}
			}
		}
		if = { 
			limit = {
				OR = {
					trait = seaking
					trait = sea_queen
				}
			}
			custom_tooltip = {
				text = "TOOLTIP_EVTOPTAHF230210"
				hidden_tooltip = {
					FROM = {
						destroy_random_building = THIS
						destroy_random_building = THIS
						destroy_random_building = THIS
						destroy_random_building = THIS
						destroy_random_building = THIS
						add_holding_modifier = {
							modifier = recently_burnt_the_land
							months = 20
						}
					}
				}
			}
		}
		hidden_tooltip = {
			change_variable = { which = viking_raids value = 5 } #Exp bump.
			if = {
				limit = {
					FROM = { NOT = { has_any_building = yes } }
				}
				hidden_tooltip = {
					location = {
						province_event = { id = HF.23211 days = 1 } #Inform owner that his holding has been destroyed.
					}
				}
				FROM = { destroy_settlement = THIS }
			}
		}
	}
	option = { #Steal
		name = EVTOPTBHF23210
		if = { 
			limit = {
				trait = ravager
			}
			wealth = 100
			if = { 
				limit = {
					FROM = { location = { has_higher_tech_than = ROOT } }
				}
				military_techpoints = 25
			}
		}
		if = { 
			limit = {
				OR = {
					trait = seaking
					trait = sea_queen
				}
			}
			wealth = 200
			if = { 
				limit = {
					FROM = { location = { has_higher_tech_than = ROOT } }
				}
				military_techpoints = 50
			}
		}
	}
	option = { #Scare
		name = EVTOPTCHF23210
		if = { 
			limit = {
				trait = ravager
			}
			prestige = 150
		}
		if = { 
			limit = {
				OR = {
					trait = seaking
					trait = sea_queen
				}
			}
			prestige = 300
		}
		hidden_tooltip = {
			change_variable = { which = viking_raids value = 4 } #Exp bump.
		}
	}
	option = { #Nothing
		name = EVTOPTDHF23210
		trigger = { ai = no }
	}
}

#Mother craved for quail's leg: child is good at talking but clubfooted.
character_event = {
	id = HFP.20582
	desc = EVTDESCHFPA20582
	picture = GFX_evt_birth
	
	trigger = {
		FROM = { 
			OR = {
				trait = clubfooted 
				trait = quailfooted
			}
			is_alive = yes
		}
	}

	is_triggered_only = yes

	option = { 
		name = EVTOPTAHFP20582
		FROM = { change_diplomacy = 2 } 
		ai_chance = { factor = 100 }
	}
}

#Mother craved for hare's head: child is good at spying but harelipped.
character_event = {
	id = HFP.20583
	desc = EVTDESCHFPA20583
	picture = GFX_evt_birth
	
	trigger = { 
		FROM = { 
			OR = {
				trait = harelip
				trait = cleft_lip
			}
			is_alive = yes
			}
		}

	is_triggered_only = yes

	option = { 
		name = EVTOPTAHFP20583
		FROM = { change_intrigue = 2 } 
		ai_chance = { factor = 100 }
	}
}

#Mother craved for trout's eye: child is good at learning but ugly.
character_event = {
	id = HFP.20584
	desc = EVTDESCHFPA20584
	picture = GFX_evt_birth
	
	trigger = { 
		FROM = { 
			OR = {
				trait = ugly 
				trait = uncouth
			}
			is_alive = yes
		} 
	}

	is_triggered_only = yes

	option = { 
		name = EVTOPTAHFP20584
		FROM = { change_learning = 2 } 
		ai_chance = { factor = 100 }
	}
}

#on_birth (fired on the child), remove the trait and check all flavor flags.
character_event = {
	id = HFP.20403
	hide_window = yes
	
	#trigger = { 
#		mother = { trait = pregnancy_finishing } 
#	}

	is_triggered_only = yes

	immediate = { 
		mother = { 
			remove_trait = pregnancy_finishing
			remove_trait = in_hiding
			remove_trait = travelling
			remove_character_modifier = mother_praying_health
			remove_character_modifier = mother_resting_health
			remove_character_modifier = mother_partying_health
			clr_character_flag = mother_asked_retirement 
			clr_character_flag = flag_mother_dark_rest
			clr_character_flag = mother_gossip_listening #Safety check, they should already have been removed
			clr_character_flag = mother_gossip_talking
			clr_character_flag = mother_gossip_trusting
			clr_character_flag = mother_gossip_plotting
			clr_character_flag = mother_gossip_envious
			clr_character_flag = mother_gossip_shy
			clr_character_flag = mother_gossip_learning
			clr_character_flag = mother_gossip_content
			clr_character_flag = mother_gossip_gluttonous

			character_event = { id = HFP.20597 days = 35 } #Clears persistent Physician targets. They are still on on_birth since post-partum complications may require their services.
		} 
		#Mother took part in fertility feast, chance of blessed girl.
		if = { 
			limit = { 
				mother = { 
					has_character_modifier = mother_fertility_festival_2
				}
				is_female = yes
			}
			random_list = { 
				40 = { 
					modifier = {  
						factor = 1.75
						mother_even_if_dead = { trait = ugly }
					}
					modifier = {  
						factor = 1.75
						father_even_if_dead = { trait = ugly }
					}
					modifier = {  
						factor = 0.5
						mother_even_if_dead = { trait = fair }
					}
					modifier = {  
						factor = 0.5
						father_even_if_dead = { trait = fair }
					}
					modifier = {  
						factor = 1.75
						mother_even_if_dead = { any_child = { trait = fair } } #Avoid entire litters of them.
					}
					modifier = {  
						factor = 1.75
						father_even_if_dead = { any_child = { trait = fair } } #Avoid entire litters of them.
					}
				}
				60 = { 
					remove_trait = hunchback
					remove_trait = dwarf
					remove_trait = ugly
					remove_trait = inbred
					remove_sickly = yes
					remove_trait = harelip
					remove_trait = lisp
					mother = { character_event = { id = HFP.20055 days = 3600 random = 200 } } 
					father = { character_event = { id = HFP.20055 days = 3600 random = 200 } } 
				}
			}
		} 

		#Catholic/Orthodox Kings/Emperors: chance for special baptism.
		father = { save_event_target_as = scoped_father }
		mother = { save_event_target_as = scoped_mother }
		ROOT = { save_event_target_as = scoped_baby }
		if = { 
			limit = { 
				OR = { 
					event_target:scoped_father = { higher_tier_than = event_target:scoped_mother }
					event_target:scoped_father = { 
						real_tier = event_target:scoped_mother 
						is_married_matrilineally = no
					}
				}
			}
			event_target:scoped_father = { character_event = { id = HF.20100 days = 12 } }
		}
		if = { 
			limit = { 
				OR = { 
					event_target:scoped_mother = { higher_tier_than = event_target:scoped_father }
					event_target:scoped_mother = { 
						real_tier = event_target:scoped_father 
						is_married_matrilineally = yes
					}
				}
			}
			event_target:scoped_mother = { character_event = { id = HF.20100 days = 12 } }
		} 
		father = { clear_event_target = scoped_father }
		mother = { clear_event_target = scoped_mother }
		ROOT = { clear_event_target = scoped_baby }

		#Catholic/Orthodox rulers: chance of Churching after the first pregnancy is over.
		if = { 
			limit = { 
				mother = { 
					OR = { 
						religion = catholic
						religion = orthodox
					}
					is_married = yes
					NOT = { num_of_children = 2 }
					NOT = { society_member_of = the_satanists }
					OR = { 
						is_ruler = yes
						spouse = { is_ruler = yes }
					}
					NOR = { 
						has_character_modifier = adulteress
						has_character_modifier = incestuous_adulteress 
					}
				}
			}
			mother = { character_event = { id = HFP.20018 days = 24 } }
		} 

		#Mother drunk/had drugs during pregnancy, chance of dumb child.
		if = {
			limit = { 
				mother = { 
					trait = drunkard 
				} 
			}
			random = { 
				chance = 30
				set_character_flag = flag_drunk_birth
				if = { 
					limit = { trait = slow }
					remove_trait = slow
					add_trait = imbecile
					mother = { character_event = { id = HFP.20001 days = 451 } }
					father = { character_event = { id = HFP.20002 days = 450 } }
				}
				if = { 
					limit = { trait = dull }
					remove_trait = dull
					add_trait = imbecile
					mother = { character_event = { id = HFP.20001 days = 451 } }
					father = { character_event = { id = HFP.20002 days = 450 } }
				}
				if = { 
					limit = { 
						NOR = { 
							trait = genius 
							trait = quick 
							trait = slow 
							trait = dull
							trait = imbecile 
						} 
					}
					add_trait = dull
					mother = { character_event = { id = HFP.20001 days = 451 } }
					father = { character_event = { id = HFP.20002 days = 450 } }
				}
				if = { 
					limit = { trait = quick }
					remove_trait = quick
				}
				if = { 
					limit = { trait = genius }
					remove_trait = genius
					add_trait = quick 
				}
			}
		}
		if = {
			limit = { 
				mother = { 
					has_character_modifier = hashish_addict
				} 
			}
			random = { 
				chance = 30
				set_character_flag = flag_drugged_birth
				if = { 
					limit = { trait = slow }
					remove_trait = slow
					add_trait = imbecile
					mother = { character_event = { id = HFP.20001 days = 551 } }
					father = { character_event = { id = HFP.20002 days = 550 } }
				}
				if = { 
					limit = { trait = dull }
					remove_trait = dull
					add_trait = imbecile
					mother = { character_event = { id = HFP.20001 days = 551 } }
					father = { character_event = { id = HFP.20002 days = 550 } }
				}
				if = { 
					limit = { 
						NOR = { 
							trait = genius 
							trait = quick 
							trait = slow 
							trait = dull
							trait = imbecile 
						} 
					}
					add_trait = dull
					mother = { character_event = { id = HFP.20001 days = 551 } }
					father = { character_event = { id = HFP.20002 days = 550 } }
				}
				if = { 
					limit = { trait = quick }
					remove_trait = quick
				}
				if = { 
					limit = { trait = genius }
					remove_trait = genius
					add_trait = quick 
				}
			}
		}
		random_list = { #Chance of imprinting (mother)
			50 = { 
				modifier = {  
					factor = 0.5
					mother = { num_of_children = 2 }
				}
				modifier = {  
					factor = 0.35
					mother = { num_of_children = 3 }
				}
				modifier = {  
					factor = 0.25
					mother = { num_of_children = 4 }
				}
				modifier = {  
					factor = 0.1
					mother = { num_of_children = 5 }
				}
				modifier = {  
					factor = 0.5
					mother = { age = 30 }
				}
				modifier = {  
					factor = 1.5
					mother = { trait = kind }
				}
				modifier = {  
					factor = 1.5
					mother = { trait = charitable }
				}
				modifier = {  
					factor = 0.5
					mother = { trait = envious }
				}
				modifier = {  
					factor = 0.5
					mother = { trait = cruel }
				}
				mother = { character_event = { id = HFP.20599 days = 70 } } 
			} 
			50 = {  } 
		}
		random_list = { #Chance of imprinting (father)
			50 = { 
				modifier = {  
					factor = 0.5
					father = { num_of_children = 2 }
				}
				modifier = {  
					factor = 0.35
					father = { num_of_children = 3 }
				}
				modifier = {  
					factor = 0.25
					father = { num_of_children = 4 }
				}
				modifier = {  
					factor = 0.1
					father = { num_of_children = 5 }
				}
				modifier = {  
					factor = 0.5
					father = { age = 30 }
				}
				modifier = {  
					factor = 1.5
					father = { trait = kind }
				}
				modifier = {  
					factor = 1.5
					father = { trait = charitable }
				}
				modifier = {  
					factor = 0.5
					father = { trait = envious }
				}
				modifier = {  
					factor = 0.5
					father = { trait = cruel }
				}
				father = { character_event = { id = HFP.20000 days = 700 random = 500 } } 
			} 
			50 = {  } 
		}

		if = { 
			limit = { #The Papal orgy bears fruits.
				mother = { has_character_flag = flag_vatican_prince } 
			} 
			mother = { 
				clr_character_flag = flag_vatican_prince 
				character_event = { id = HFP.20598 days = 7 random = 7 } #Notify mother.
			} 
		}
		if = { 
			limit = { 
				mother = { trait = troubled_pregnancy } 
			} 
			random_list = {
				80 = { set_character_flag = flag_troubled_pregnancy_child
				}
				20 = { } #Nothing happens
			} 
		}
		if = { 
			limit = { 
				mother = { trait = stressed } 
			} 
			random_list = {
				30 = { 
					mother = { 
						character_event = { id = HFP.20581 days = 30 random = 50 } #chance to recover from stressed.
					}
				}
				70 = { } #Nothing happens
			} 
		}
		if = { 
			limit = { 
				mother = { has_character_flag = mother_craved_quail } 
			} 
			random_list = {
				70 = { 
					add_trait = quailfooted
					mother = { 
						character_event = { id = HFP.20582 days = 950 random = 550 } #Notify mother child gains 2 diplomacy.
						clr_character_flag = mother_craved_quail 
					}
				}
				30 = { mother = { clr_character_flag = mother_craved_quail } } #Nothing happens
			} 
		}
		if = { 
			limit = { 
				mother = { has_character_flag = mother_craved_hare } 
			} 
			random_list = {
				70 = { 
					add_trait = cleft_lip
					mother = { 
						character_event = { id = HFP.20583 days = 950 random = 550 } #Notify mother child gains 2 intrigue.
						clr_character_flag = mother_craved_hare 
					}
				}
				30 = { mother = { clr_character_flag = mother_craved_hare } } #Nothing happens
			} 
		}
		if = { 
			limit = { 
				mother = { has_character_flag = mother_craved_trout } 
			} 
			random_list = {
				70 = { 
					add_trait = uncouth
					mother = { 
						character_event = { id = HFP.20584 days = 950 random = 550 } #Notify mother child gains 2 learning.
						clr_character_flag = mother_craved_trout 
					}
				}
				30 = { mother = { clr_character_flag = mother_craved_trout } } #Nothing happens
			} 
		}
		# Cursed child
		if = {
			limit = {
				mother = { has_character_flag = baby_cursed_body }
			}
			mother = { clr_character_flag = baby_cursed_body }
			random_list = {
				40 = {
					modifier = {
						factor = 1.2
						mother = { has_character_flag = curse_1 }
					}
					modifier = {
						factor = 1.4
						mother = { has_character_flag = curse_2 }
					}
					modifier = {
						factor = 1.5
						mother = { has_character_flag = curse_3 }
					}
					modifier = {
						factor = 1.6
						mother = { has_character_flag = curse_4 }
					}
					add_trait = twisted
				}
				10 = {
					modifier = {
						factor = 0
						mother = {
							NOR = {
								has_character_flag = curse_1
								has_character_flag = curse_2
								has_character_flag = curse_3
								has_character_flag = curse_4
							}
						}
					}
					modifier = {
						factor = 2
						trait = twisted
					}
					modifier = {
						factor = 1.2
						mother = { has_character_flag = curse_2 }
					}
					modifier = {
						factor = 2
						mother = { has_character_flag = curse_3 }
					}
					modifier = {
						factor = 3
						mother = { has_character_flag = curse_4 }
					}
					remove_trait = twisted
					add_trait = hunchback
				}
				50 = {}
			}
			mother = {
				clr_character_flag = bless_1
				clr_character_flag = bless_2
				clr_character_flag = bless_3
				clr_character_flag = bless_4
			}
		}
		if = {
			limit = {
				mother = { has_character_flag = baby_cursed_mouth }
			}
			mother = { clr_character_flag = baby_cursed_mouth }
			random_list = {
				40 = {
					modifier = {
						factor = 1.2
						mother = { has_character_flag = curse_1 }
					}
					modifier = {
						factor = 1.4
						mother = { has_character_flag = curse_2 }
					}
					modifier = {
						factor = 1.5
						mother = { has_character_flag = curse_3 }
					}
					modifier = {
						factor = 1.6
						mother = { has_character_flag = curse_4 }
					}
					add_trait = cleft_lip
				}
				10 = {
					modifier = {
						factor = 0
						mother = {
							NOR = {
								has_character_flag = curse_1
								has_character_flag = curse_2
								has_character_flag = curse_3
								has_character_flag = curse_4
							}
						}
					}
					modifier = {
						factor = 2
						trait = cleft_lip
					}
					modifier = {
						factor = 1.2
						mother = { has_character_flag = curse_2 }
					}
					modifier = {
						factor = 2
						mother = { has_character_flag = curse_3 }
					}
					modifier = {
						factor = 3
						mother = { has_character_flag = curse_4 }
					}
					random_list = {
						3 = { remove_trait = cleft_lip add_trait = harelip }
						1 = { add_trait = stutter }
						1 = { add_trait = lisp }
					}
				}
				50 = {}
			}
			mother = {
				clr_character_flag = bless_1
				clr_character_flag = bless_2
				clr_character_flag = bless_3
				clr_character_flag = bless_4
			}
		}
		if = {
			limit = {
				mother = { has_character_flag = baby_cursed_legs }
			}
			mother = { clr_character_flag = baby_cursed_legs }
			random_list = {
				40 = {
					modifier = {
						factor = 1.2
						mother = { has_character_flag = curse_1 }
					}
					modifier = {
						factor = 1.4
						mother = { has_character_flag = curse_2 }
					}
					modifier = {
						factor = 1.5
						mother = { has_character_flag = curse_3 }
					}
					modifier = {
						factor = 1.6
						mother = { has_character_flag = curse_4 }
					}
					add_trait = quailfooted
				}
				10 = {
					modifier = {
						factor = 0
						mother = {
							NOR = {
								has_character_flag = curse_1
								has_character_flag = curse_2
								has_character_flag = curse_3
								has_character_flag = curse_4
							}
						}
					}
					modifier = {
						factor = 2
						trait = quailfooted
					}
					modifier = {
						factor = 1.2
						mother = { has_character_flag = curse_2 }
					}
					modifier = {
						factor = 2
						mother = { has_character_flag = curse_3 }
					}
					modifier = {
						factor = 3
						mother = { has_character_flag = curse_4 }
					}
					remove_trait = quailfooted
					add_trait = clubfooted
				}
				50 = {}
			}
			mother = {
				clr_character_flag = bless_1
				clr_character_flag = bless_2
				clr_character_flag = bless_3
				clr_character_flag = bless_4
			}
		}
		if = {
			limit = {
				mother = { has_character_flag = baby_cursed_mind }
			}
			mother = { clr_character_flag = baby_cursed_mind }
			random_list = {
				40 = {
					modifier = {
						factor = 1.2
						mother = { has_character_flag = curse_1 }
					}
					modifier = {
						factor = 1.4
						mother = { has_character_flag = curse_2 }
					}
					modifier = {
						factor = 1.5
						mother = { has_character_flag = curse_3 }
					}
					modifier = {
						factor = 1.6
						mother = { has_character_flag = curse_4 }
					}
					if = {
						limit = { trait = genius }
						remove_trait = genius
						add_trait = quick
					}
					else_if = { 
						limit = { trait = quick }
						remove_trait = quick
					}
					else_if = { 
						limit = { trait = shrewd }
						remove_trait = shrewd
					}
					else_if = {
						limit = { trait = dull }
						remove_trait = dull
						add_trait = imbecile
					}
					else_if = {
						limit = { trait = slow }
						remove_trait = slow
						add_trait = imbecile
					}
					else_if = {
						limit = { NOT = { trait = imbecile } }
						add_trait = dull
					}
				}
				10 = {
					modifier = {
						factor = 0
						mother = {
							NOR = {
								has_character_flag = curse_1
								has_character_flag = curse_2
								has_character_flag = curse_3
								has_character_flag = curse_4
							}
						}
					}
					modifier = {
						factor = 1.2
						mother = { has_character_flag = curse_2 }
					}
					modifier = {
						factor = 2
						mother = { has_character_flag = curse_3 }
					}
					modifier = {
						factor = 3
						mother = { has_character_flag = curse_4 }
					}
					if = {
						limit = { trait = genius }
						remove_trait = genius
						add_trait = shrewd
					}
					else_if = { 
						limit = { trait = quick }
						remove_trait = quick
					}
					else_if = { 
						limit = { trait = shrewd }
						remove_trait = shrewd
					}
					else_if = {
						limit = { trait = dull }
						remove_trait = dull
						add_trait = imbecile
					}
					else_if = {
						limit = { trait = slow }
						remove_trait = slow
						add_trait = imbecile
					}
					else_if = {
						limit = { NOT = { trait = imbecile } }
						add_trait = slow
					}
				}
				50 = {}
			}
			mother = {
				clr_character_flag = bless_1
				clr_character_flag = bless_2
				clr_character_flag = bless_3
				clr_character_flag = bless_4
			}
		}
		if = {
			limit = {
				mother = { has_character_flag = baby_cursed_muscles }
			}
			mother = { clr_character_flag = baby_cursed_muscles }
			random_list = {
				40 = {
					modifier = {
						factor = 1.2
						mother = { has_character_flag = curse_1 }
					}
					modifier = {
						factor = 1.4
						mother = { has_character_flag = curse_2 }
					}
					modifier = {
						factor = 1.5
						mother = { has_character_flag = curse_3 }
					}
					modifier = {
						factor = 1.6
						mother = { has_character_flag = curse_4 }
					}
					if = {
						limit = { trait = strong }
						remove_trait = strong
					}
					else_if = {
						limit = { trait = robust }
						remove_trait = robust
					}
					else_if = {
						limit = { trait = sturdy }
						remove_trait = sturdy
					}
					else_if = {
						limit = {
							NOR = {
								trait = feeble
								trait = weak
							}
						}
						add_trait = feeble
					}
				}
				10 = {
					modifier = {
						factor = 0
						mother = {
							NOR = {
								has_character_flag = curse_1
								has_character_flag = curse_2
								has_character_flag = curse_3
								has_character_flag = curse_4
							}
						}
					}
					modifier = {
						factor = 2
						trait = feeble
					}
					modifier = {
						factor = 1.2
						mother = { has_character_flag = curse_2 }
					}
					modifier = {
						factor = 2
						mother = { has_character_flag = curse_3 }
					}
					modifier = {
						factor = 3
						mother = { has_character_flag = curse_4 }
					}
					if = {
						limit = { trait = strong }
						remove_trait = strong
					}
					else_if = {
						limit = { trait = sturdy }
						remove_trait = sturdy
					}
					else_if = {
						limit = { trait = robust }
						remove_trait = robust
					}
					else = {
						remove_trait = feeble
						add_trait = weak
					}
				}
				50 = {}
			}
			mother = {
				clr_character_flag = bless_1
				clr_character_flag = bless_2
				clr_character_flag = bless_3
				clr_character_flag = bless_4
			}
		}
		if = {
			limit = {
				mother = { has_character_flag = baby_cursed_appearance }
			}
			mother = { clr_character_flag = baby_cursed_appearance }
			random_list = {
				40 = {
					modifier = {
						factor = 1.2
						mother = { has_character_flag = curse_1 }
					}
					modifier = {
						factor = 1.4
						mother = { has_character_flag = curse_2 }
					}
					modifier = {
						factor = 1.5
						mother = { has_character_flag = curse_3 }
					}
					modifier = {
						factor = 1.6
						mother = { has_character_flag = curse_4 }
					}
					if = {
						limit = { trait = fair }
						remove_trait = fair
					}
					else_if = {
						limit = { trait = groomed }
						remove_trait = groomed
					}
					else_if = {
						limit = {
							NOR = {
								trait = ugly
								trait = uncouth
							}
						}
						add_trait = uncouth
					}
				}
				10 = {
					modifier = {
						factor = 0
						mother = {
							NOR = {
								has_character_flag = curse_1
								has_character_flag = curse_2
								has_character_flag = curse_3
								has_character_flag = curse_4
							}
						}
					}
					modifier = {
						factor = 2
						trait = uncouth
					}
					modifier = {
						factor = 1.2
						mother = { has_character_flag = curse_2 }
					}
					modifier = {
						factor = 2
						mother = { has_character_flag = curse_3 }
					}
					modifier = {
						factor = 3
						mother = { has_character_flag = curse_4 }
					}
					if = {
						limit = { trait = fair }
						remove_trait = fair
					}
					else_if = {
						limit = { trait = groomed }
						remove_trait = groomed
					}
					else = {
						remove_trait = uncouth
						add_trait = ugly
					}
				}
				50 = {}
			}
			mother = {
				clr_character_flag = bless_1
				clr_character_flag = bless_2
				clr_character_flag = bless_3
				clr_character_flag = bless_4
			}
		}
		if = {
			limit = {
				mother = { has_character_flag = baby_cursed_size }
				NOR = {
					trait = giant
					trait = mythos_giant
					trait = dwarf
				}
			}
			mother = { clr_character_flag = baby_cursed_size }
			random_list = {
				25 = {
					modifier = {
						factor = 1.2
						mother = { has_character_flag = curse_1 }
					}
					modifier = {
						factor = 1.4
						mother = { has_character_flag = curse_2 }
					}
					modifier = {
						factor = 1.5
						mother = { has_character_flag = curse_3 }
					}
					modifier = {
						factor = 1.6
						mother = { has_character_flag = curse_4 }
					}
					add_trait = giant
				}
				25 = {
					modifier = {
						factor = 1.2
						mother = { has_character_flag = curse_1 }
					}
					modifier = {
						factor = 1.4
						mother = { has_character_flag = curse_2 }
					}
					modifier = {
						factor = 1.5
						mother = { has_character_flag = curse_3 }
					}
					modifier = {
						factor = 1.6
						mother = { has_character_flag = curse_4 }
					}
					add_trait = dwarf
				}
				50 = {}
			}
			mother = {
				clr_character_flag = bless_1
				clr_character_flag = bless_2
				clr_character_flag = bless_3
				clr_character_flag = bless_4
			}
		}
		if = {
			limit = {
				mother = { has_character_flag = baby_poisoned_feeble }
			}
			clr_character_flag = baby_poisoned_feeble
			if = {
				limit = { trait = strong }
				remove_trait = strong
			}
			else_if = {
				limit = { trait = robust }
				remove_trait = robust
			}
			else_if = {
				limit = { trait = sturdy }
				remove_trait = sturdy
			}
			else_if = {
				limit = {
					NOR = {
						trait = weak
						trait = feeble
					}
				}
				add_trait = feeble
			}
		}
		if = {
			limit = {
				mother = { has_character_flag = baby_poisoned_weak }
			}
			clr_character_flag = baby_poisoned_weak
			if = {
				limit = { trait = strong }
				remove_trait = strong
			}
			else_if = {
				limit = { trait = robust }
				remove_trait = robust
			}
			else_if = {
				limit = { trait = sturdy }
				remove_trait = sturdy
			}
			else_if = {
				limit = {
					NOR = {
						trait = weak
						trait = feeble
					}
				}
				add_trait = weak
			}
		}
		if = {
			limit = {
				mother = { has_character_flag = baby_poisoned_dull }
			}
			clr_character_flag = baby_poisoned_dull
			if = {
				limit = { trait = genius }
				remove_trait = genius
				add_trait = quick
			}
			else_if = {
				limit = { trait = quick }
				remove_trait = quick
			}
			else_if = {
				limit = { trait = shrewd }
				remove_trait = shrewd
			}
			else_if = {
				limit = {
					NOR = {
						trait = dull
						trait = slow
						trait = imbecile
					}
				}
				add_trait = dull
			}
		}
		if = {
			limit = {
				mother = { has_character_flag = baby_poisoned_slow }
			}
			clr_character_flag = baby_poisoned_slow
			if = {
				limit = { trait = genius }
				remove_trait = genius
				add_trait = quick
			}
			else_if = {
				limit = { trait = quick }
				remove_trait = quick
			}
			else_if = {
				limit = { trait = shrewd }
				remove_trait = shrewd
			}
			else_if = {
				limit = {
					trait = slow
				}
				remove_trait = slow
				add_trait = imbecile
			}
			else = {
				remove_trait = dull
				add_trait = slow
			}
		}
		if = {
			limit = {
				mother = { has_character_flag = baby_poisoned_quailfooted }
			}
			clr_character_flag = baby_poisoned_quailfooted
			if = {
				limit = {
					NOR = {
						trait = quailfooted
						trait = clubfooted
					}
				}
				add_trait = quailfooted
			}
		}
		if = {
			limit = {
				mother = { has_character_flag = baby_poisoned_clubfooted }
			}
			clr_character_flag = baby_poisoned_clubfooted
			if = {
				limit = {
					NOT = { trait = clubfooted }
				}
				remove_trait = quailfooted
				add_trait = clubfooted
			}
		}
		if = {
			limit = {
				mother = { has_character_flag = baby_poisoned_sickly }
			}
			clr_character_flag = baby_poisoned_sickly
			if = {
				limit = {
					NOT = { trait = sickly }
				}
				add_trait = sickly
				update_sickly_trait = yes
			}
		}
		if = {
			limit = {
				mother = { has_character_flag = baby_poisoned_craven }
			}
			clr_character_flag = baby_poisoned_sickly
			add_trait = craven
		}
		if = {
			limit = {
				mother = { has_character_flag = baby_poisoned_slothful }
			}
			clr_character_flag = baby_poisoned_sickly
			add_trait = slothful
		}
		if = {
			limit = {
				mother = { has_character_flag = baby_poisoned_magic }
			}
			clr_character_flag = baby_poisoned_magic
			remove_trait = magic_heritage
		}
		
		if = {
			limit = {
				mother = { has_character_flag = baby_blessed_strength }
			}
			mother = { clr_character_flag = baby_blessed_strength }
			random_list = {
				45 = {
					if = {
						limit = { trait = weak }
						remove_trait = weak
					}
					else_if = {
						limit = { trait = feeble }
						remove_trait = feeble
					}
					else_if = {
						limit = { NOT = { trait = strong } }
						random_list = {
							1 = {
								trigger = { NOT = { trait = robust } }
								add_trait = robust
							}
							1 = {
								trigger = { NOT = { trait = sturdy } }
								add_trait = sturdy
							}
						}
					}
					else = {
						add_trait = sturdy
					}
				}
				5 = {
					modifier = {
						factor = 0
						mother = {
							NOR = {
								has_character_flag = bless_1
								has_character_flag = bless_2
								has_character_flag = bless_3
								has_character_flag = bless_4
							}
						}
					}
					modifier = {
						factor = 2
						trait = robust
					}
					modifier = {
						factor = 1.2
						mother = { has_character_flag = bless_2 }
					}
					modifier = {
						factor = 2
						mother = { has_character_flag = bless_3 }
					}
					modifier = {
						factor = 3
						mother = { has_character_flag = bless_4 }
					}
					if = {
						limit = { trait = weak }
						remove_trait = weak
					}
					else_if = {
						limit = { trait = robust }
						remove_trait = robust
						add_trait = strong
					}
					else_if = {
						limit = { trait = strong }
						add_trait = sturdy
					}
					else = {
						add_trait = strong
					}
				}
				50 = {}
			}
			mother = {
				clr_character_flag = bless_1
				clr_character_flag = bless_2
				clr_character_flag = bless_3
				clr_character_flag = bless_4
			}
		}
		if = {
			limit = {
				mother = { has_character_flag = can_bless_mind }
			}
			mother = { clr_character_flag = can_bless_mind }
			random_list = {
				45 = {
					if = {
						limit = { trait = imbecile }
						remove_trait = imbecile
						add_trait = slow
					}
					else_if = {
						limit = { trait = slow }
						remove_trait = slow
					}
					else_if = {
						limit = { trait = dull }
						remove_trait = dull						
					}
					else_if = {
						limit = {
							NOR = {
								trait = genius
								trait = quick
								trait = shrewd
							}
						}
						add_trait = shrewd
					}
				}
				5 = {
					modifier = {
						factor = 0
						mother = {
							NOR = {
								has_character_flag = bless_1
								has_character_flag = bless_2
								has_character_flag = bless_3
								has_character_flag = bless_4
							}
						}
					}
					modifier = {
						factor = 2
						trait = robust
					}
					modifier = {
						factor = 1.2
						mother = { has_character_flag = bless_2 }
					}
					modifier = {
						factor = 2
						mother = { has_character_flag = bless_3 }
					}
					modifier = {
						factor = 3
						mother = { has_character_flag = bless_4 }
					}
					if = {
						limit = { trait = imbecile }
						remove_trait = imbecile
						add_trait = slow
					}
					else_if = {
						limit = { trait = slow }
						remove_trait = slow
					}
					else_if = {
						limit = { trait = dull }
						remove_trait = dull						
					}
					else_if = {
						limit = { trait = quick }
						remove_trait = quick
						add_trait = genius
					}
					else_if = {
						limit = { trait = shrewd }
						remove_trait = shrewd
						add_trait = quick
					}
					else_if = {
						limit = {
							NOR = {
								trait = genius
								trait = quick
								trait = shrewd
							}
						}
						add_trait = quick
					}
				}
				50 = {}
			}
			mother = {
				clr_character_flag = bless_1
				clr_character_flag = bless_2
				clr_character_flag = bless_3
				clr_character_flag = bless_4
			}
		}
		if = {
			limit = {
				mother = { has_character_flag = can_bless_beauty }
			}
			mother = { clr_character_flag = can_bless_beauty }
			random_list = {
				45 = {
					if = {
						limit = { trait = ugly }
						remove_trait = ugly
					}
					else_if = {
						limit = { trait = uncouth }
						remove_trait = uncouth
					}
					else_if = {
						limit = {
							NOR = {
								trait = fair
								trait = groomed
							}
						}
						add_trait = groomed				
					}
				}
				5 = {
					modifier = {
						factor = 0
						mother = {
							NOR = {
								has_character_flag = bless_1
								has_character_flag = bless_2
								has_character_flag = bless_3
								has_character_flag = bless_4
							}
						}
					}
					modifier = {
						factor = 2
						trait = robust
					}
					modifier = {
						factor = 1.2
						mother = { has_character_flag = bless_2 }
					}
					modifier = {
						factor = 2
						mother = { has_character_flag = bless_3 }
					}
					modifier = {
						factor = 3
						mother = { has_character_flag = bless_4 }
					}
					if = {
						limit = { trait = ugly }
						remove_trait = ugly
					}
					else_if = {
						limit = { trait = uncouth }
						remove_trait = uncouth
					}
					else_if = {
						limit = { trait = groomed }
						remove_trait = groomed
						add_trait = fair
					}
					else_if = {
						limit = {
							NOT = { trait = fair }
						}
						add_trait = fair				
					}
				}
				50 = {}
			}
			mother = {
				clr_character_flag = bless_1
				clr_character_flag = bless_2
				clr_character_flag = bless_3
				clr_character_flag = bless_4
			}
		}
		if = {
			limit = {
				mother = { has_character_flag = can_bless_health }
			}
			mother = { clr_character_flag = can_bless_health }
			random_list = {
				
				1 = {
					trigger = { trait = clubfooted }
					remove_trait = clubfooted
				}
				1 = {
					trigger = { trait = quailfooted }
					remove_trait = quailfooted
				}
				1 = {
					trigger = { trait = dwarf }
					remove_trait = dwarf
				}
				1 = {
					trigger = { trait = harelip }
					remove_trait = harelip
				}
				1 = {
					trigger = { trait = cleft_lip }
					remove_trait = cleft_lip
				}
				1 = {
					trigger = { trait = hunchback }
					remove_trait = hunchback
				}
				1 = {
					trigger = { trait = twisted }
					remove_trait = twisted
				}
				1 = {
					trigger = { trait = imbecile }
					remove_trait = imbecile
					add_trait = slow
				}
				1 = {
					trigger = { trait = inbred }
					remove_trait = inbred
				}
				1 = {
					trigger = { trait = lisp }
					remove_trait = lisp
				}
				1 = {
					trigger = { trait = slow }
					remove_trait = slow
				}
				1 = {
					trigger = { trait = dull }
					remove_trait = dull
				}
				1 = {
					trigger = { trait = stutter }
					remove_trait = stutter
				}
				1 = {
					trigger = { trait = ugly }
					remove_trait = ugly
				}
				1 = {
					trigger = { trait = uncouth }
					remove_trait = uncouth
				}
				1 = {
					trigger = { trait = weak }
					remove_trait = weak
				}
				1 = {
					trigger = { trait = feeble }
					remove_trait = feeble
				}
				1 = {
					trigger = { trait = giant }
					remove_trait = giant
				}
				1 = {
					trigger = { trait = sickly }
					remove_trait = sickly
				}
				1 = {
					add_trait = sturdy
				}
			}
			mother = {
				clr_character_flag = bless_1
				clr_character_flag = bless_2
				clr_character_flag = bless_3
				clr_character_flag = bless_4
			}
		}
		
		if = {
			limit = {
				mother = { has_character_flag = baby_prevent_sickly }
			}
			mother = { clr_character_flag = baby_prevent_sickly }
			if = {
				limit = { is_sickly = yes }
				remove_sickly = yes
			}
		}
		
		if = {
			limit = {
				mother = { has_character_flag = baby_all_traits }
			}
			mother = { clr_character_flag = baby_all_traits }
			random = {
				chance = 35
				if = {
					limit = { trait = ugly }
					remove_trait = ugly
				}
				else_if = {
					limit = { trait = uncouth }
					remove_trait = uncouth
				}
				else = {
					remove_trait = groomed
					add_trait = fair
				}
			}
			random = {
				chance = 35
				if = {
					limit = { trait = imbecile }
					remove_trait = imbecile
					add_trait = slow
				}
				else_if = {
					limit = {
						OR = {
							trait = slow
							trait = dull
						}
					}
					remove_trait = slow
					remove_trait = dull
				}
				else_if = {
					limit = {
						OR = {
							trait = quick
							trait = shrewd
						}
					}
					remove_trait = quick
					remove_trait = shrewd
					add_trait = genius
				}
				else_if = {
					limit = { NOT = { trait = genius } }
					add_trait = quick
				}
			}
			random = {
				chance = 35
				if = {
					limit = { trait = weak }
					remove_trait = weak
				}
				else_if = {
					limit = { trait = feeble }
					remove_trait = feeble
				}
				else = {
					remove_trait = robust
					add_trait = strong
				}
			}
		}
		if = {
			limit = {
				mother = { has_character_flag = baby_patient }
			}
			mother = { clr_character_flag = baby_patient }
			add_trait = patient
		}
		if = {
			limit = {
				mother = { has_character_flag = baby_brave }
			}
			mother = { clr_character_flag = baby_brave }
			add_trait = brave
		}
		
		if = { 
			limit = { 
				mother = { has_character_flag = mom_hopes_child_warrior } 
			} 
			#Small chance of child actually gaining positive trait.
			random_list = {
				20 = { 
					modifier = { 
						factor = 0.5
						mother_even_if_dead = { trait = weak } 
					} 
					modifier = { 
						factor = 0.5
						mother_even_if_dead = { trait = feeble } 
					} 
					modifier = { 
						factor = 0.5
						mother_even_if_dead = { trait = inbred } 
					} 
					modifier = { 
						factor = 0.5
						mother_even_if_dead = { trait = hunchback } 
					} 
					modifier = { 
						factor = 0.5
						mother_even_if_dead = { trait = twisted } 
					} 
					modifier = { 
						factor = 0.5
						mother_even_if_dead = { trait = dwarf } 
					} 
					modifier = { 
						factor = 0.5
						father_even_if_dead = { trait = weak } 
					} 
					modifier = { 
						factor = 0.5
						father_even_if_dead = { trait = feeble } 
					} 
					modifier = { 
						factor = 0.5
						father_even_if_dead = { trait = inbred } 
					} 
					modifier = { 
						factor = 0.5
						father_even_if_dead = { trait = hunchback } 
					} 
					modifier = { 
						factor = 0.5
						father_even_if_dead = { trait = twisted } 
					} 
					modifier = { 
						factor = 0.5
						father_even_if_dead = { trait = dwarf } 
					} 
					if = { 
						limit = { trait = weak } 
						remove_trait = weak
					} 
					if = { 
						limit = { trait = feeble } 
						remove_trait = feeble
					} 
					if = { 
						limit = { trait = inbred } 
						remove_trait = inbred
					} 
					if = { 
						limit = { trait = hunchback } 
						remove_trait = hunchback
					} 
					if = { 
						limit = { trait = twisted } 
						remove_trait = twisted
					} 
					if = { 
						limit = { trait = dwarf } 
						remove_trait = dwarf
					} 
					if = { 
						limit = { trait = sickly } 
						remove_sickly = yes
					} 

				} 
				80 = { #No luck.

				} 
			}
			#Notify mother. 
			if = { 
				limit = { 
					NOR = { 
						trait = weak
						trait = feeble
						trait = inbred
						trait = hunchback
						trait = twisted
						trait = dwarf
						trait = sickly
					}
				}
				mother = { 
					character_event = { id = HFP.20585 days = 250 random = 250 } #Notify mother child gains 2 martial.
					clr_character_flag = mom_hopes_child_warrior
				} 
			} 
		} #Close what if warrior child

		#Mother offered sacrifice for strong child
		if = { 
			limit = { 
				mother = { has_character_flag = mom_hopes_child_strong } 
			} 
			#Small chance of child actually gaining positive trait.
			random_list = {
				20 = { 
					modifier = { 
						factor = 0.5
						mother_even_if_dead = { trait = weak } 
					} 
					modifier = { 
						factor = 0.5
						mother_even_if_dead = { trait = feeble } 
					} 
					modifier = { 
						factor = 0.5
						mother_even_if_dead = { trait = inbred } 
					} 
					modifier = { 
						factor = 0.5
						mother_even_if_dead = { trait = hunchback } 
					} 
					modifier = { 
						factor = 0.5
						mother_even_if_dead = { trait = twisted } 
					} 
					modifier = { 
						factor = 0.5
						mother_even_if_dead = { trait = dwarf } 
					} 
					modifier = { 
						factor = 0.5
						father_even_if_dead = { trait = weak } 
					} 
					modifier = { 
						factor = 0.5
						father_even_if_dead = { trait = feeble } 
					} 
					modifier = { 
						factor = 0.5
						father_even_if_dead = { trait = inbred } 
					}   
					remove_trait = weak
					remove_sickly = yes
					add_trait = robust

				} 
				80 = { #No luck.
					modifier = { 
						factor = 0.5
						father_even_if_dead = { trait = strong } 
					}   
					modifier = { 
						factor = 0.5
						mother_even_if_dead = { trait = strong } 
					}   

				} 
			}
			#Notify mother. 
			if = { 
				limit = {
					OR = {
						trait = robust
						trait = strong
					}
				}
				mother = { 
					character_event = { id = HFP.20586 days = 250 random = 250 } #Notify mother child is growing strong.
					clr_character_flag = mom_hopes_child_strong
				} 
			} 
			mother = { clr_character_flag = mom_hopes_child_strong }
		} 
		#Mother offered sacrifice for pretty child
		if = { 
			limit = { 
				mother = { has_character_flag = mom_hopes_child_pretty } 
			} 
			#Small chance of child actually gaining positive trait.
			random_list = {
				20 = { 
					modifier = { 
						factor = 0.5
						mother_even_if_dead = { trait = ugly } 
					} 
					modifier = { 
						factor = 2
						mother_even_if_dead = { trait = fair } 
					} 
					modifier = { 
						factor = 0.5
						father_even_if_dead = { trait = ugly } 
					} 
					modifier = { 
						factor = 2
						father_even_if_dead = { trait = fair } 
					}   
					remove_trait = harelip
					remove_trait = cleft_lip
					remove_trait = ugly
					remove_trait = uncouth
					add_trait = groomed

				} 
				80 = { #No luck.

				} 
			}
			#Notify mother. 
			if = { 
				limit = { trait = fair }
				mother = { 
					character_event = { id = HFP.20587 days = 250 random = 250 } #Notify mother child is growing strong.
					clr_character_flag = mom_hopes_child_pretty
				} 
			} 
			mother = { clr_character_flag = mom_hopes_child_pretty }
		}
		#Mother offered sacrifice for smart child
		if = { 
			limit = { 
				mother = { has_character_flag = mom_hopes_child_smart } 
			} 
			#Small chance of child actually gaining positive trait.
			random_list = {
				20 = { 
					modifier = { 
						factor = 0.5
						mother_even_if_dead = { trait = slow } 
					} 
					modifier = { 
						factor = 0.25
						mother_even_if_dead = { trait = imbecile } 
					} 
					modifier = { 
						factor = 1.5
						mother_even_if_dead = { trait = quick } 
					} 
					modifier = { 
						factor = 2
						mother_even_if_dead = { trait = genius } 
					} 
					modifier = { 
						factor = 0.5
						father_even_if_dead = { trait = slow } 
					} 
					modifier = { 
						factor = 0.25
						father_even_if_dead = { trait = imbecile } 
					} 
					modifier = { 
						factor = 0.5
						father_even_if_dead = { trait = ugly } 
					} 
					modifier = { 
						factor = 1.5
						father_even_if_dead = { trait = quick } 
					} 
					modifier = { 
						factor = 2
						father_even_if_dead = { trait = genius } 
					} 
					remove_trait = slow
					remove_trait = imbecile
					if = { 
						limit = { trait = quick } 
						remove_trait = quick
						add_trait = genius
					} 
					if = { 
						limit = { trait = shrewd } 
						remove_trait = shrewd
						add_trait = genius
					} 
					if = { 
						limit = { NOR = { trait = quick trait = shrewd } } 
						add_trait = shrewd
					} 
				} 
				80 = { #No luck.

				} 
			}
			#Notify mother. 
			if = { 
				limit = { 
					OR = { 
						trait = quick 
						trait = genius
						trait = shrewd
					} 
				}
				mother = { 
					character_event = { id = HFP.20588 days = 450 random = 450 } #Notify mother child is growing smart.
					clr_character_flag = mom_hopes_child_smart
				} 
			} 
			mother = { clr_character_flag = mom_hopes_child_smart }
		}
		#Mother wanted a boy/girl 
		if = { 
			limit = { 
				mother = { 
					OR = { 
						has_character_flag = mom_hopes_child_boy
						has_character_flag = mom_hopes_child_girl
					}
				} 
			}
			mother = { 
				character_event = { id = HFP.20589 days = 15 random = 15 } #Did the bet pay out?
			} 
		}
		#Mother made a vow to the Holy Virgin
		if = { 
			limit = { 
				mother = { 
					OR = { 
						has_character_modifier = mother_vow_chastity
						has_character_modifier = mother_vow_humility
						has_character_modifier = mother_vow_charity
						has_character_modifier = mother_vow_temperance
					}
				} 
			}
			#Possible divine intervention
			random_list = { 
				70 = { #Nothing happens
				}
				30 = { 
					#Broke the vow, decreased chance.
					modifier = { 
						factor = 0.5
						mother = { 
							has_character_modifier = mother_vow_temperance 
							OR = { 
								trait = gluttonous
								trait = hedonist
							} 
						} 
					}
					modifier = { 
						factor = 0.5
						mother = { 
							has_character_modifier = mother_vow_charity 
							trait = greedy
						} 
					}
					modifier = { 
						factor = 0.5
						mother = { 
							has_character_modifier = mother_vow_humility 
							trait = proud
						} 
					}
					modifier = { 
						factor = 0.5
						mother = { 
							has_character_modifier = mother_vow_chastity 
							trait = lustful
						} 
					}


					#Remained true to the vow, increased chance.
					modifier = { 
						factor = 1.75
						mother = { 
							has_character_modifier = mother_vow_temperance 
							trait = temperate
						} 
					}
					modifier = { 
						factor = 1.75
						mother = { 
							has_character_modifier = mother_vow_charity 
							trait = charitable
						} 
					}
					modifier = { 
						factor = 1.75
						mother = { 
							has_character_modifier = mother_vow_humility 
							trait = humble
						} 
					}
					modifier = { 
						factor = 1.75
						mother = { 
							has_character_modifier = mother_vow_chastity 
							OR = { 
								trait = chaste
								trait = celibate
							} 
						} 
					} 
					remove_sickly = yes
					remove_trait = inbred
					remove_trait = harelip
					remove_trait = cleft_lip
					remove_trait = clubfooted
					remove_trait = quailfooted
					remove_trait = hunchback
					remove_trait = twisted
					remove_trait = lisp
					remove_trait = stutter
					remove_trait = ugly
					remove_trait = dwarf
					remove_trait = slow
					remove_trait = imbecile
					remove_trait = weak
				}
			}
			mother = { 
				character_event = { id = HFP.20590 days = 25 random = 25 } #Did it work? If so, does she keep her word?
			} 
		}
	}
}

#Troubled pregnancy: DEATH before birth
character_event = {
	id = HFP.20537
	desc = EVTDESCHFPA20537	
	picture = GFX_evt_illness

	trigger = { 
		trait = troubled_pregnancy
		trait = pregnant 
	}

	is_triggered_only = yes

	option = { 
		name = EVTOPTAHFP20537
		hidden_tooltip = { 
			remove_trait = cough
			remove_trait = fever
			remove_trait = diarrhea
			remove_trait = vomiting
			remove_trait = chest_pain
			remove_trait = cramps
			remove_trait = rash
			remove_trait = headache
			remove_trait = abdominal_pain
			remove_trait = fatigue
			remove_trait = malaise
			remove_trait = infection
		}
		if = {
			limit = { any_spouse = { always = yes } }
			spouse = { save_event_target_as = scoped_father }
		}
		#Hollow child is born in this circumstance, giving another chance to avoid game over.
		custom_tooltip = { text = tooltip_HFP20537_A }
		hidden_tooltip = {
			random_list = { 
				50 = {
					create_character = {
						random_traits = no
						dynasty = ROOT
						culture = ROOT
						religion = ROOT
						female = no
						age = 0
					}
				} 
				50 = {
					create_character = {
						random_traits = no
						dynasty = ROOT
						culture = ROOT
						religion = ROOT
						female = yes
						age = 0
					}
				}
			}
			new_character = {
				set_mother = ROOT
				random = { 
					chance = 5
					add_trait = quailfooted
				}
				random = { 
					chance = 5 
					add_trait = uncouth
				}
				lose_weight_large_effect = yes
				lose_weight_medium_effect = yes
				add_trait = is_malnourished
				save_event_target_as = hollow_baby
				set_character_flag = flag_hollow_child_primed
				if = { #If a dad exists...
					limit = { event_target:scoped_father = { always = yes } }
					set_father = event_target:scoped_father
					if = { # and mom is not matrilineally married...
						limit = { ROOT = { is_married_matrilineally = no } }
						event_target:hollow_baby = { 
							dynasty = event_target:scoped_father 
							culture = event_target:scoped_father
							religion = event_target:scoped_father
						}  
					}
				}
			}
			#event_target:hollow_baby = { character_event = { id = HFP.20057 days = 820 } } 
		}
		hidden_tooltip = { 
			event_target:scoped_father = { #Check if father likes mother
				if = { 
					limit = { 
						opinion = { 
							who = ROOT
							value = 40 
						} 
					}
					set_character_flag = flag_loved_dead_mother 
				}
				character_event = { id = HFP.20056 } 
			} 	
			death = { death_reason = death_troubled_pregnancy }
		}
	}
}

#on_birth baby vision child event
character_event = {
	id = HFP.20538
	desc = EVTDESCHFP20538
	picture = GFX_evt_comet
	
	is_triggered_only = yes

	option = { 
		name = EVTOPTAHFP20538 #Yay! I'm vision baby!"
	if = { 
		limit = { 
			mother = { has_character_flag = gabriel_baby } 
		}
		change_diplomacy = 2
		mother = { character_event = { id = HFP.20539 days = 1 } }
		father = { character_event = { id = HFP.20539 days = 1 } }
		remove_trait = hunchback
		remove_trait = twisted
		remove_trait = dwarf
		remove_trait = inbred
		remove_trait = lisp
		remove_trait = stutter
		#remove_trait = blind_birth
		remove_trait = freckles
		remove_trait = clubfooted
		remove_trait = quailfooted
		remove_trait = slow
		remove_trait = dull
		remove_trait = imbecile
		remove_trait = harelip
		remove_trait = cleft_lip
		remove_trait = ugly
		remove_trait = uncouth
		remove_trait = weak
		remove_trait = feeble
		remove_sickly = yes
		random_list = { 
			50 = { add_trait = fair }
			50 = { 
				if = { 
					limit = { 
						NOT = { trait = genius } 
					}
					add_trait = quick 
				}
			}
		}
	}
	if = { 
		limit = { mother = { has_character_flag = lucifer_baby } }
		change_intrigue = 1
		mother = { character_event = { id = HFP.20540 days = 1 } }
		father = { character_event = { id = HFP.20540 days = 1 } }
		add_trait = lefthanded
	}
	if = { 
		limit = { mother = { has_character_flag = iblis_baby } }
		change_learning = 1
		mother = { character_event = { id = HFP.20540 days = 1 } }
		father = { character_event = { id = HFP.20540 days = 1 } }
		add_trait = hunchback
	}
	if = { 
		limit = { mother = { has_character_flag = thor_baby } }
		change_martial = 2
		mother = { character_event = { id = HFP.20539 days = 1 } }
		father = { character_event = { id = HFP.20539 days = 1 } }
		remove_trait = hunchback
		remove_trait = twisted
		remove_trait = dwarf
		remove_trait = inbred
		remove_trait = lisp
		remove_trait = stutter
		#remove_trait = blind_birth
		remove_trait = freckles
		remove_trait = clubfooted
		remove_trait = quailfooted
		remove_trait = slow
		remove_trait = imbecile
		remove_trait = harelip
		remove_trait = cleft_lip
		remove_trait = ugly
		remove_trait = uncouth
		remove_trait = weak
		remove_trait = feeble
		remove_sickly = yes
		add_trait = strong
	}
	if = { 
		limit = { mother = { has_character_flag = loki_baby } }
		change_intrigue = 1
		mother = { character_event = { id = HFP.20540 days = 1 } }
		father = { character_event = { id = HFP.20540 days = 1 } }
		add_trait = blinded
		if = {
			limit = { NOT = { trait = mythos_giant } }
			random_list = {
				1 = { add_trait = mythos_giant }
				9 = { add_trait = giant  }
			}
		}
	}
	if = { 
		limit = { mother = { has_character_flag = tengri_baby } }
		change_martial = 2
		mother = { character_event = { id = HFP.20539 days = 1 } }
		father = { character_event = { id = HFP.20539 days = 1 } }
		remove_trait = hunchback
		remove_trait = twisted
		remove_trait = dwarf
		remove_trait = inbred
		remove_trait = lisp
		remove_trait = stutter
		#remove_trait = blind_birth
		remove_trait = freckles
		remove_trait = clubfooted
		remove_trait = quailfooted
		remove_trait = slow
		remove_trait = imbecile
		remove_trait = harelip
		remove_trait = cleft_lip
		remove_trait = ugly
		remove_trait = uncouth
		remove_trait = weak
		remove_trait = feeble
		remove_sickly = yes
		add_trait = shrewd
	}
	if = { 
		limit = { mother = { has_character_flag = erlik_baby } }
		change_stewardship = 1
		mother = { character_event = { id = HFP.20540 days = 1 } }
		father = { character_event = { id = HFP.20540 days = 1 } }
		add_trait = feeble
		}
	}
}

# Forging Claim on Alexander the Great's Bloodline.

#Opportunity arises.
narrative_event = {
	id = HF.24200
	title = EVTTITLEHF24200 
	desc = EVTDESCAHF24200
	picture = GFX_evt_hippodrome_byzantine
	border = GFX_event_narrative_frame_war
	
	is_triggered_only = yes

	ai = no
	capable_only = yes
	prisoner = no

	trigger = { 
		real_tier = EMPEROR
		prestige = 15000
		is_adult = yes
		ai = no
		is_alternate_start = no
		NOT = { trait = content }
		NOT = { has_character_flag = flag_chance_for_alexander_blood } #Opportunity only once per character.
		NOT = { has_global_flag = flag_alexander_blood_restored } #Bloodline unlocked only once per playthrough.
		capital_scope = { 
			OR = { 
				region = world_europe_west
				region = world_europe_north
				region = world_europe_south
				region = world_europe_east
				region = world_asia_minor
				region = world_middle_east_jerusalem
				region = world_middle_east_arabia
			}
		}
		OR = {
			NOR = {
				trait = dragon
				trait = mythos_giant
			}
			mother_even_if_dead = {
				NOR = {
					trait = dragon
					trait = mythos_giant
				}
			}
			true_father_even_if_head = {
				NOR = {
					trait = dragon
					trait = mythos_giant
				}
			}
		}
	}

	weight_multiplier = { 
		days = 1
		
		modifier = {
			factor = 0.35
			capital_scope = { 
				NOR = { 
					region = world_europe_south
					region = world_asia_minor
				}
			}
		}
		modifier = {
			factor = 0.35
			NOR = { 
				culture_group = latin
				culture_group = byzantine
				culture_group = arabic
			}
		}
		modifier = {
			factor = 0.35
			NOR = {
				religion_group = christian
				religion_group = muslim
				religion = hellenic_pagan
				religion = hellenic_pagan_reformed
			}
		}
		modifier = {
			factor = 3
			trait = ambitious
		}
		modifier = {
			factor = 2
			religion_group = christian
		}
		modifier = {
			factor = 3
			religion = hellenic_pagan_reformed
		}
		modifier = {
			factor = 2
			religion = hellenic_pagan
		}
		modifier = {
			factor = 3
			culture = greek
		}
		modifier = {
			factor = 1.5
			culture_group = latin
		}
		modifier = {
			factor = 0.5
			age = 50
		}
		modifier = {
			factor = 2
			trait = brave
		}
		modifier = {
			factor = 2
			has_education_martial_trigger = yes
		}
		modifier = {
			factor = 2
			has_lifestyle_martial_trigger = yes
		}
		modifier = {
			factor = 2
			capital_scope = { region = world_asia_minor }
		}
		modifier = {
			factor = 2
			trait = scholar
		}
		modifier = {
			factor = 2
			has_ambition = obj_forge_bloodline
		}
		modifier = {
			factor = 2
			learning = 8
		}
		modifier = {
			factor = 2
			learning = 10
		}
		modifier = {
			factor = 2
			learning = 12
		}
		modifier = {
			factor = 2
			learning = 14
		}
		modifier = {
			factor = 2
			learning = 16
		}
		modifier = {
			factor = 2
			learning = 18
		}
		modifier = {
			factor = 2
			learning = 20
		}
		modifier = {
			factor = 2
			learning = 22
		}
		modifier = {
			factor = 2
			learning = 24
		}
		modifier = {
			factor = 2
			learning = 26
		}
		modifier = {
			factor = 2
			learning = 28
		}
		modifier = {
			factor = 2
			learning = 30
		}
		modifier = {
			factor = 1.5
			prestige = 22000
		}
		modifier = {
			factor = 1.5
			prestige = 24000
		}
		modifier = {
			factor = 1.5
			prestige = 26000
		}
		modifier = {
			factor = 1.5
			prestige = 28000
		}
		modifier = {
			factor = 1.5
			prestige = 30000
		}
		modifier = {
			factor = 1.5
			prestige = 40000
		}
		modifier = {
			factor = 1.5
			prestige = 50000
		}
		modifier = {
			factor = 1.5
			piety = 1000
			OR = {
				religion = hellenic_pagan
				religion = hellenic_pagan_reformed
			}
		}
		modifier = {
			factor = 1.5
			piety = 1500
			OR = {
				religion = hellenic_pagan
				religion = hellenic_pagan_reformed
			}
		}
		modifier = {
			factor = 1.75
			piety = 2000
			OR = {
				religion = hellenic_pagan
				religion = hellenic_pagan_reformed
			}
		}
		modifier = {
			factor = 1.75
			check_variable = { which = bloodline_won_wars value = 5 }
		}
		modifier = {
			factor = 1.75
			check_variable = { which = bloodline_won_wars value = 10 }
		}
		modifier = {
			factor = 0.25
			trait = dragon
		}
	}

	immediate = { 
		set_character_flag = flag_chance_for_alexander_blood
	}

	option = { #Pursue.
		name = EVTOPTAHF24200
		custom_tooltip = { text = TT_EVTOPTAHF24200 }
		hidden_tooltip = { narrative_event = { id = HF.24201 days = 25 random = 25 } }
	}
	option = { #Abandon.
		name = EVTOPTBHF24200
	}
}

# Forging Claim on Ashoka's Bloodline.

#Opportunity arises.
narrative_event = {
	id = HF.24220
	title = EVTTITLEHF24220
	desc = { 
		trigger = { 
			any_owned_bloodline = {  
				has_bloodline_flag = samrat_chakravartin_bloodline
			}
		} 
		text = EVTDESCAHF24220
	}
	desc = { 
		trigger = { 
			NOT = { 
				any_owned_bloodline = {  
					has_bloodline_flag = samrat_chakravartin_bloodline
				}
			}
		} 
		text = EVTDESCBHF24220
	}
	picture = GFX_evt_bishop_hindu
	border = GFX_event_narrative_frame_religion
	
	is_triggered_only = yes

	ai = no
	capable_only = yes
	prisoner = no

	trigger = { 
		real_tier = EMPEROR
		prestige = 15000
		is_adult = yes
		ai = no
		is_alternate_start = no
		religion_group = indian_group
		NOT = { trait = content }
		NOT = { has_character_flag = flag_chance_for_ashoka_blood } #Opportunity only once per character.
		NOT = { has_global_flag = flag_ashoka_blood_restored } #Bloodline unlocked only once per playthrough.
		capital_scope = { 
			region = world_india
		}
		OR = {
			NOR = {
				trait = dragon
				trait = mythos_giant
			}
			mother_even_if_dead = {
				NOR = {
					trait = dragon
					trait = mythos_giant
				}
			}
			true_father_even_if_head = {
				NOR = {
					trait = dragon
					trait = mythos_giant
				}
			}
		}
	}

	weight_multiplier = { 
		days = 1
		
		modifier = {
			factor = 4
			any_owned_bloodline = {  
				has_bloodline_flag = samrat_chakravartin_bloodline
			}
		}
		modifier = {
			factor = 3
			trait = charitable
		}
		modifier = {
			factor = 3
			trait = brave
		}
		modifier = {
			factor = 3
			religion = buddhist
		}
		modifier = {
			factor = 0.5
			age = 50
		}
		modifier = {
			factor = 2
			has_education_learning_trigger = yes
		}
		modifier = {
			factor = 2
			has_lifestyle_learning_trigger = yes
		}
		modifier = {
			factor = 2
			trait = scholar
		}
		modifier = {
			factor = 2
			has_ambition = obj_forge_bloodline
		}
		modifier = {
			factor = 2
			learning = 8
		}
		modifier = {
			factor = 2
			learning = 10
		}
		modifier = {
			factor = 2
			learning = 12
		}
		modifier = {
			factor = 2
			learning = 14
		}
		modifier = {
			factor = 2
			learning = 16
		}
		modifier = {
			factor = 2
			learning = 18
		}
		modifier = {
			factor = 2
			learning = 20
		}
		modifier = {
			factor = 2
			learning = 22
		}
		modifier = {
			factor = 2
			learning = 24
		}
		modifier = {
			factor = 2
			learning = 26
		}
		modifier = {
			factor = 2
			learning = 28
		}
		modifier = {
			factor = 2
			learning = 30
		}
		modifier = {
			factor = 1.5
			prestige = 22000
		}
		modifier = {
			factor = 1.5
			prestige = 24000
		}
		modifier = {
			factor = 1.5
			prestige = 26000
		}
		modifier = {
			factor = 1.5
			prestige = 28000
		}
		modifier = {
			factor = 1.5
			prestige = 30000
		}
		modifier = {
			factor = 1.5
			prestige = 40000
		}
		modifier = {
			factor = 1.5
			prestige = 50000
		}
		modifier = {
			factor = 1.5
			piety = 1000
			religion = buddhist
		}
		modifier = {
			factor = 1.5
			piety = 1500
			religion = buddhist
		}
		modifier = {
			factor = 1.75
			piety = 2000
			religion = buddhist
		}
		modifier = {
			factor = 1.75
			check_variable = { which = bloodline_won_wars value = 5 }
		}
		modifier = {
			factor = 1.75
			check_variable = { which = bloodline_won_wars value = 10 }
		}
		modifier = {
			factor = 0.25
			trait = dragon
		}
	}

	immediate = { 
		set_character_flag = flag_chance_for_ashoka_blood
	}

	option = { #Pursue.
		name = EVTOPTAHF24220
		custom_tooltip = { text = TT_EVTOPTAHF24220 }
		hidden_tooltip = { narrative_event = { id = HF.24221 days = 25 random = 25 } }
	}
	option = { #Abandon.
		name = EVTOPTBHF24220
	}
}