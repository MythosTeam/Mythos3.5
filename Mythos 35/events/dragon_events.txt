namespace = DRAGON
### Dragon events

# DRAGON.1 - was MYTH.78 - Dragon angers locals
province_event = {
	id = DRAGON.1
	title = EVTNAME_DRAGON.1
	desc = EVTDESC_DRAGON.1
	picture = GFX_evt_dragon_castle
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	trigger = {
		NOT = { culture = draconic }
		owner = { 
			NOT = { trait = incapable }
			top_liege = { trait = dragon}
		}
	}	

	option = {
		name = EVTOPTA_DRAGON.1
		owner = { top_liege = { scaled_wealth = { value = -0.3 min = -10 max = -300 } } }
	}
	option = {
		name = EVTOPTB_DRAGON.1
		add_province_modifier = {
			name = recently_burnt_the_land_not_owner
			duration = 365
		}
	}
	option = {
		name = EVTOPTC_DRAGON.1
		tooltip_info = diplomacy
		trigger = {
			owner = { 
				top_liege = { 
					NOT = { trait = "wroth" }
					diplomacy = 15 
				} 
			}
		}
	}
	option = {
		name = EVTOPTD_DRAGON.1
		add_province_modifier = {
			name = recently_burnt_the_land_not_owner
			duration = 182
		}
		trigger = {
			OR = {
				owner = { top_liege = { dynasty = 1049229 } }
				owner = { top_liege = { trait = heldragon } }
			}

		}
	}
}

# DRAGON.2 - was MYTH.79 - Dragon with small horde
character_event = {
	id = DRAGON.2
	title = EVTNAME_DRAGON.2
	desc = EVTDESC_DRAGON.2
	picture = GFX_evt_dragon_horde
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	trigger = {
		trait = dragon
		NOT = { wealth = 500 }
	}
	
	weight_multiplier = {
		days = 3
		modifier = {
			factor = 4
			trait = greedy
		}
		modifier = {
			factor = 1.5
			NOT = { wealth = 250 }
		}
		modifier = {
			factor = 1.5
			NOT = { wealth = 125 }
		}
		modifier = {
			factor = 2
			NOT = { wealth = 50 }
		}
		modifier = {
			factor = 10
			NOT = { wealth = 0 }
		}
		modifier = {
			factor = 4
			trait = envious
		}
		modifier = {
			factor = 0.2
			trait = humble
		}
		modifier = {
			factor = 2
			trait = zealous
			OR = {
				true_religion = draconic_pagan_reformed
				true_religion = draconic_pagan
			}
		}
	}
	
	option = {
		name = EVTOPTA_DRAGON.2
		scaled_wealth = { value = 0.5 max = 200 }
		any_vassal = {
			opinion = {
				who = ROOT
				modifier = opinion_tyrant
				months = 24
			}
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 1.5
				trait = greedy
			}
			modifier = {
				factor = 1.5
				trait = wroth
			}
			modifier = {
				factor = 2
				ai_greed = 50
			}
			modifier = {
				factor = 1.5
				OR = {
					true_religion = draconic_pagan
					true_religion = draconic_pagan_reformed
				}
				ai_zeal = 50
			}
		}
	}
	option = {
		name = EVTOPTB_DRAGON.2
		tooltip_info = stewardship
		trigger = { stewardship = 15 }
		scaled_wealth = { value = 0.3 max = 150 }
		ai_chance = {
			factor = 1000
		}
	}
	option = {
		name = EVTOPTC_DRAGON.2
		prestige = -20
		if = {
			limit = {
				OR = {
					true_religion = draconic_pagan
					true_religion = draconic_pagan_reformed
				}
			}
			piety = -20
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 2
				trait = charitable
			}
			modifier = {
				factor = 2
				trait = just
			}
			modifier = {
				factor = 1.5
				trait = humble
			}
			modifier = {
				factor = 1.5
				ai_honor = 20
			}
		}
	}
}

# DRAGON.3 - was MYTH.89 - Dragon aging
character_event = {
	id = "DRAGON.3"
	title = EVTNAME_DRAGON.3
	desc = "EVTDESC_DRAGON.3"
	picture = GFX_evt_dragon_face
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	min_age = 20
	capable_only = yes
	
	trigger = {
		trait = dragon
	}
	
	weight_multiplier = {
		days = 1
		modifier = {
			factor = 1.2
			age = 50
		}
		modifier = {
			factor = 1.2
			age = 100
		}
		modifier = {
			factor = 1.2
			age = 150
		}
		modifier = {
			factor = 1.3
			age = 200
		}
	}
	
	option = {
		name = "EVTOPTA_DRAGON.3"
		change_martial = 1
		change_stewardship = 1
		change_learning = 2
		economy_techpoints = 100
		health = 1
	}
}

# DRAGON.4 - Set up DRAGON.1
character_event = {
	id = DRAGON.4
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		NOT = { trait = incapable }
		trait = dragon
	}
	
	weight_multiplier = {
		days = 1
		modifier = {
			factor = 5
			trait = arbitrary
		}
		modifier = {
			factor = 0.5
			trait = just
		}
		modifier = {
			factor = 2
			trait = wroth
		}
		modifier = {
			factor = 4
			trait = gluttonous
		}
		modifier = {
			factor = 5
			OR = { 
				trait = possessed
				trait = lunatic
			}
		}
		modifier = {
			factor = 4
			OR = { 
				trait = drunkard
				trait = hedonist
			}
		}
		modifier = {
			factor = 0.5
			trait = temperate
		}
		modifier = {
			factor = 0.3
			trait = gregarious
		}
		modifier = {
			factor = 0
			NOT = { trait = dragon }
		}
	}
	
	immediate = {
		random_demesne_province = {
			limit = {
				NOT = { culture = draconic }
			}
			province_event = { id = DRAGON.1 }
		}
	}
}

# DRAGON.7 - Seize an artifact as tribute
character_event = {
	id = DRAGON.7
	desc = EVTDESC_DRAGON.7
	picture = GFX_evt_relic_box
    border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	trigger = {
		event_target:artifact_owner = {
			any_artifact = {
				quality == 1
				NOT = {
					artifact_type_owned_by = ROOT
				}
			}
		}
	}
			
	
	immediate = {
		event_target:artifact_owner = {
			random_artifact = {
				limit = {
					quality == 1
					NOT = {
						artifact_type_owned_by = ROOT
					}
				}
				set_artifact_flag = looted_artifact_tooltip_1
				set_artifact_flag = looted_artifact_tooltip_2
				transfer_artifact = {
					from = event_target:artifact_owner
					to = ROOT
				}
				ROOT = { character_event = { id = MNM.9903 } }
				if = {
					limit = { artifact_type = philosopher_stone }
					ROOT = { add_trait = philosopher_stone_trait }
					event_target:artifact_owner = { remove_trait = philosopher_stone_trait }
				}
			}
		}
	}
	
	option = {
		name = EXCELLENT
		tooltip = {
			random_artifact = {
				limit = {
					has_artifact_flag = looted_artifact_tooltip_1
				}
				transfer_artifact = {
					from = event_target:artifact_owner
					to = ROOT
				}
			}
		}
		hidden_effect = {
			random_artifact = {
				limit = {
					has_artifact_flag = looted_artifact_tooltip_1
				}
				clr_artifact_flag = looted_artifact_tooltip_1
			}
		}
	}
}

# DRAGON.8 - On ruler death of draconic tribal tribute, slightly delayed event to main heir
character_event = {
	id = DRAGON.8
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		is_tributary = yes
		suzerain = {
			government = tribal_government
			trait = dragon
			culture = draconic
		}
	}
	
	immediate = {
		suzerain = {
			save_event_target_as = dragon_suzerain
		}
		#current_heir = {
		#	character_event = { id = DRAGON.9 days = 2 }
		#}
		# Use capital to bounce to the new ruler to avoid issues with gavelkind
		capital_scope = { province_event = { id = DRAGON.55 days = 1 } }
	}
}

# DRAGON.9 - Old ruler paid tribute to a dragon. You now have the same choice
character_event = {
	id = DRAGON.9
	desc = EVTDESC_DRAGON.9
	picture = GFX_evt_war_planning
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	immediate = {
		event_target:dragon_suzerain = {
			make_tributary = { who = ROOT percentage = 0.4 tributary_type = draconic_tribute }
		}
		add_character_modifier = { name = draconic_tributary duration = -1 }
		character_event = { id = DRAGON.169 }
	}
	
	# Continue paying tribute
	option = {
		name = EVTOPTA_DRAGON.9
		hidden_tooltip = {
			event_target:dragon_suzerain = {
				character_event = { id = DRAGON.10 }
			}
		}
		ai_chance = {
			factor = 6
			additive_modifier = {
				value = 1
				trait = content
			}
			additive_modifier = {
				value = 1
				trait = slothful
			}
			additive_modifier = {
				value = 2
				opinion = {
					who = event_target:dragon_suzerain
					value = 50 
				}
			}
		}
	}
	
	# Pay them off
	option = {
		name = EVTOPTB_DRAGON.9
		trigger = {
			scaled_wealth = 2
		}
		transfer_scaled_wealth = { to = event_target:dragon_suzerain value = 2 }
		suzerain = {
			remove_tributary = ROOT
		}
		hidden_tooltip = {
			remove_character_modifier = draconic_tributary
			clr_character_flag = lost_tributary_independence_war
			clr_character_flag = predicessor_lost_tributary_independence_war
			event_target:dragon_suzerain = { character_event = { id = DRAGON.11 } }
		}
		ai_chance = {
			factor = 4
			additive_modifier = {
				value = 1
				reverse_has_truce = event_target:dragon_suzerain
			}
			additive_modifier = {
				value = 1
				scaled_wealth = 3
			}
			additive_modifier = {
				value = 1
				scaled_wealth = 4
			}
			additive_modifier = {
				value = 1
				scaled_wealth = 6
			}
		}
	}
	
	# Vassal
	option = {
		trigger = { 
			independent = yes
			lower_tier_than = event_target:dragon_suzerain
		}
		name = EVTOPTC_DRAGON.9
		tooltip = {
			suzerain = {
				remove_tributary = ROOT
			}
			set_defacto_liege = event_target:dragon_suzerain
		}
		hidden_tooltip = {
			event_target:dragon_suzerain = { character_event = { id = DRAGON.12 } }
		}
		ai_chance = {
			factor = 4
			additive_modifier = {
				value = 1
				NOT = { ai_ambition = 0 }
			}
			additive_modifier = {
				value = 1
				true_religion = event_target:dragon_suzerain
			}
			additive_modifier = {
				value = 1
				culture = event_target:dragon_suzerain
			}
			additive_modifier = {
				value = 2
				dynasty = event_target:dragon_suzerain
			}
			additive_modifier = {
				value = 2
				is_incapable = yes
			}
			additive_modifier = {
				value = 1
				is_lover = event_target:dragon_suzerain
			}
			additive_modifier = {
				value = -1
				is_tribal = no
			}
			additive_modifier = {
				value = 1
				opinion = { who = event_target:dragon_suzerain value = 75 }
			}
			additive_modifier = {
				value = 2
				opinion = { who = event_target:dragon_suzerain value = 100 }
			}
			additive_modifier = {
				value = 2
				NOT = { realm_size = 2}
				event_target:dragon_suzerain = { realm_size = 4 }
			}
			additive_modifier = {
				value = 1
				NOT = { relative_power = { who = event_target:dragon_suzerain power = 0.5 } }
			}
			additive_modifier = {
				value = 1
				NOT = { relative_power = { who = event_target:dragon_suzerain power = 0.25 } }
			}
			additive_modifier = {
				# Single province count, and suzerain has at least 2 counties in your dejure duchy
				value = 1
				NOT = { realm_size = 2 }
				tier = count
				capital_scope = {
					duchy = {
						any_de_jure_vassal_title = {
							count = 2
							tier = count
							owner = {
								top_liege = {
									character = event_target:dragon_suzerain
								}
							}
						}
					}
				}
			}
			additive_modifier = {
				value = 2
				de_jure_liege_or_above = event_target:dragon_suzerain
			}
			additive_modifier = {
				value = -1
				trait = proud
			}
			additive_modifier = {
				value = 1
				trait = humble
			}
			additive_modifier = {
				value = -2
				trait = ambitious
			}
		}
	}
	
	# Revolt
	option = {
		name = EVTOPTD_DRAGON.9
		trigger = {
			OR = {
				war = no
				ai = no
			}
			suzerain = {
				NOT = { war_with = ROOT }
				NOT = { reverse_has_truce = ROOT }
			}
		}
		hidden_tooltip = {
			event_target:dragon_suzerain = { character_event = { id = DRAGON.13 } }
		}
		tooltip = { war = { target = event_target:dragon_suzerain casus_belli = free_tributary_cb } }
		ai_chance = {
			factor = 4
			additive_modifier = {
				value = 1
				ai_ambition = 75 
			}
			additive_modifier = {
				value = 1
				ai_greed = 75
			}
			additive_modifier = {
				value = 1
				is_rival = event_target:dragon_suzerain
			}
			additive_modifier = {
				value = 1
				higher_tier_than = event_target:dragon_suzerain
			}
			additive_modifier = {
				value = 1
				NOT = { personal_opinion = { who = event_target:dragon_suzerain value = 0 } }
			}
			additive_modifier = {
				value = 1
				NOT = { personal_opinion = { who = event_target:dragon_suzerain value = -24 } }
			}
			additive_modifier = {
				value = 1
				NOT = { personal_opinion = { who = event_target:dragon_suzerain value = -49 } }
			}
			additive_modifier = {
				value = 1
				NOT = { personal_opinion = { who = event_target:dragon_suzerain value = -74 } }
			}
			additive_modifier = {
				value = 1
				NOT = { personal_opinion = { who = event_target:dragon_suzerain value = -99 } }
			}
			additive_modifier = {
				value = -1
				personal_opinion = { who = event_target:dragon_suzerain value = 25 }
			}
			additive_modifier = {
				value = -1
				personal_opinion = { who = event_target:dragon_suzerain value = 50 }
			}
			additive_modifier = {
				value = -1
				personal_opinion = { who = event_target:dragon_suzerain value = 75 }
			}
			additive_modifier = {
				value = -1
				personal_opinion = { who = event_target:dragon_suzerain value = 100 }
			}
			additive_modifier = {
				value = 1
				relative_power = { who = event_target:dragon_suzerain power = 1.5 }
			}
			additive_modifier = {
				value = 1
				relative_power = { who = event_target:dragon_suzerain power = 2.0 }
			}
			additive_modifier = {
				value = 2
				relative_power = { who = event_target:dragon_suzerain power = 3.0 }
			}
			additive_modifier = {
				value = 2
				relative_power = { who = event_target:dragon_suzerain power = 4.0 }
			}
			additive_modifier = {
				value = -1
				NOT = { relative_power = { who = event_target:dragon_suzerain power = 0.75 } }
			}
			additive_modifier = {
				value = -1
				NOT = { relative_power = { who = event_target:dragon_suzerain power = 0.5 } }
			}
			additive_modifier = {
				value = -1
				NOT = { relative_power = { who = event_target:dragon_suzerain power = 0.25 } }
			}
			additive_modifier = {
				value = 1
				OR = {
					trait = impaler
					trait = duelist
					trait = strategist
				}
			}
			additive_modifier = {
				value = 1
				has_ambition = obj_become_king
			}
			additive_modifier = {
				value = -2
				has_ambition = obj_see_the_realm_prosper
			}
			additive_modifier = {
				value = -2
				NOT = { realm_size = 2 }
			}
			additive_modifier = {
				value = -2
				OR = {
					has_character_flag = lost_tributary_independence_war
					has_character_flag = predicessor_lost_tributary_independence_war
				}
			}
			additive_modifier = {
				value = -2
				in_revolt = yes
			}
			additive_modifier = {
				value = 1
				trait = wroth
			}
			additive_modifier = {
				value = 1
				trait = brave
			}
			additive_modifier = {
				value = -3
				trait = craven
			}
		}
	}
}

# DRAGON.10 - New ruler will continue paying tribure
character_event = {
	id = DRAGON.10
	desc = EVTDESC_DRAGON.10
	picture = GFX_evt_dragon_horde
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_DRAGON.10
	}
}

# DRAGON.11 - New ruler pays lump tribute
character_event = {
	id = DRAGON.11
	desc = EVTDESC_DRAGON.11
	picture = GFX_evt_dragon_horde
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_DRAGON.11
		custom_tooltip = {
			text = EVTTT_DRAGON.11
			FROM = { transfer_scaled_wealth = { to = ROOT value = 3 } }
		}
		set_truce = { who = FROM years = 5 }
	}
}

# DRAGON.12 - New ruler becomes a vassal
character_event = {
	id = DRAGON.12
	desc = EVTDESC_DRAGON.12
	picture = GFX_evt_throne_room
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	# Accept
	option = {
		name = EVTOPTA_DRAGON.12
		remove_tributary = FROM
		FROM = {
			set_defacto_liege = ROOT
			remove_character_modifier = draconic_tributary
			clr_character_flag = lost_tributary_independence_war
			clr_character_flag = predicessor_lost_tributary_independence_war
		}
	}
	
	# Refuse
	option = {
		name = EVTOPTB_DRAGON.12
		custom_tooltip = {
			text = EVTTT_DRAGON.12
		}
		hidden_tooltip = {
			FROM = { letter_event = { id = DRAGON.167 } }
		}
	}
}

# DRAGON.13 - New ruler revolts to end tribute
character_event = {
	id = DRAGON.13
	desc = EVTDESC_DRAGON.13
	picture = GFX_evt_throne_room
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_DRAGON.13
		FROM = { war = { target = event_target:dragon_suzerain casus_belli = free_tributary_cb } }
		ai_chance = {
			factor = 3
			modifier = {
				factor = 1.5
				trait = proud
			}
			modifier = {
				factor = 1.5
				trait = greedy
			}
			modifier = {
				factor = 1.5
				trait = brave
			}
			modifier = {
				factor = 2
				relative_power = { who = FROM power = 2.0 }
			}
			modifier = {
				factor = 2
				relative_power = { who = FROM power = 4.0 }
			}
		}
	}
	
	# Concede
	option = {
		name = EVTOPTB_DRAGON.13
		remove_tributary = FROM
		set_truce = { who = FROM years = 1 }
		FROM = {
			set_truce = { who = ROOT years = 1 }
			remove_character_modifier = draconic_tributary
			clr_character_flag = lost_tributary_independence_war
			clr_character_flag = predicessor_lost_tributary_independence_war
		}
		hidden_tooltip = {
			FROM = { letter_event = { id = DRAGON.168 } }
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 3
				trait = craven
			}
			modifier = {
				factor = 3
				NOT = { relative_power = { who = FROM power = 1.0 } }
			}
			modifier = {
				factor = 4
				NOT = { relative_power = { who = FROM power = 0.5 } }
			}
			modifier = {
				factor = 2
				war = yes
			}
			modifier = {
				factor = 2
				any_war = { NOT = { war_score = -25 } }
			}
		}
	}
}

# DRAGON.14-19 removed

# DRAGON.20 - Handle unfit flame controller
character_event = {
	id = DRAGON.20
	hide_window = yes
	is_triggered_only = yes
	
	only_rulers = yes
	
	immediate = {
		if = {
			limit = {
				religion_openly_draconic_or_reformed_trigger = no
			}
			remove_character_modifier = unfit_flame_controller
			break = yes
		}
		if = {
			limit = {
				OR = {
					trait = dragon
					trait = flametender
				}
			}
			remove_character_modifier = unfit_flame_controller
			break = yes
		}
		remove_character_modifier = unfit_flame_controller
	}
}


# DRAGON.55 - Bounce to Dragon.9 to alert the new ruler
province_event = {
	id = DRAGON.55
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		owner = { character_event = { id = DRAGON.9  days = 1 } }
	}
}

# DRAGON.58 - Single dragon with desire for a pure marriage approached by appropriate lowborn
character_event = {
	id = DRAGON.58
	hide_window = yes
	
	is_triggered_only = yes
	only_playable = yes
	only_capable = yes
	prisoner = no
	min_age = 16
	
	trigger = {
		trait = dragon
		is_married = no
		is_landed = yes
		is_pregnant = no
		has_regent = no
		
		OR = {
			religion = draconic_pagan
			religion = draconic_pagan_reformed
		}
		
		OR = {
			is_female = no
			NOT = { trait = infertile }
		}
		
		NOR = {
			trait = infirm
			trait = celibate
			trait = eunuch
			trait = in_hiding
			trait = disfigured
		}
	}
	
	weight_multiplier = {
		days = 1
		modifier = {
			factor = 2
			trait = zealous
		}
		# More likely with human domination
		# Much more likely with human extermination
	}
	
	immediate = {
		any_courtier = {
			limit = {
				trait = dragon
				ai = yes
				is_pregnant = no
				prisoner = no
				NOR = {
					trait = incapable
					trait = infirm
					trait = celibate
					trait = eunuch
					trait = chaste
					trait = in_hiding
					trait = disfigured
				}
				OR = {
					is_female = no
					NOT = { trait = infertile }
				}
				is_consort = no
				is_married = no
				can_marry = ROOT
				is_marriage_adult = yes
				NOT = { is_rival = ROOT }
				religion = ROOT
				culture = ROOT
				
				opinion = { who = ROOT value = 20 }
			}
			score_value = {
				value = 10
				romantic_courtier_selection_score = yes
			}
			character_event = { id = DRAGON.59 }
		}
	}
}

# DRAGON.59 - Dragon courtier approaches character about marriage
character_event = {
	id = DRAGON.59
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		FROM = { character_event = { id = DRAGON.60 } }
	}
}

# DRAGON.60 - Single Dragon looking for marriageable dragon, approached
character_event = {
	id = DRAGON.60
	desc = EVTDESC_DRAGON.60
	picture = GFX_evt_dragon_face
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}
	
	option = {
		name = EVTOPTA_DRAGON.60 # Marry her
		add_spouse = FROM
		ai_chance = {
			factor = 70
			# Less likely with human integration
			# More likely with human domination
			# Much more likely with human extermination
		}
	}
	option = {
		name = EVTOPTB_DRAGON.60 # Refuse
		ai_chance = {
			factor = 20
			modifier = {
				factor = 2
				trait = homosexual
			}
			modifier = {
				factor = 2
				trait = shy
			}
		}
	}
	option = {
		name = EVTOPTC_DRAGON.60 # Perhaps something less permanent...
		FROM = { character_event = { id = 452 days = 7 tooltip = EVTTOOLTIP452 } }
		ai_chance = {
			factor = 10
			modifier = {
				factor = 2
				trait = lustful
			}
			modifier = {
				factor = 3
				trait = hedonist
			}
		}
	}
}

# DRAGON.61 - Ping for divorce suggestion
character_event = {
	id = DRAGON.61
	hide_window = yes
	is_triggered_only = yes
	
	only_playable = yes
	only_capable = yes
	prisoner = no
	min_age = 16
	is_married = yes
	
	trigger = {
		trait = dragon
		spouse = { NOT = { trait = dragon } }
		OR = {
			religion = draconic_pagan
			religion = draconic_pagan_reformed
		}
		trait = zealous
		# Not human integration
	}
	
	# More likely with human domination
	# Much more likely with human extermination
	
	immediate = {
		any_vassal = {
			limit = {
				is_priest = yes
				OR = {
					religion = draconic_pagan
					religion = draconic_pagan_reformed
				}
				NOR = {
					trait = cynical
					trait = bad_priest_draconic
				}
			}
			score_value = {
				value = 10
				interesting_courtier_selection_score = yes
			}
			character_event = { id = DRAGON.62 }
		}
	}
}

# DRAGON.62 - Priest can speak to character about marriage
character_event = {
	id = DRAGON.62
	desc = EVTDESC_DRAGON.62
	picture = GFX_evt_courtiers_talking
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_DRAGON.62
		FROM = { character_event = { id = DRAGON.63 } }
	}
	option = {
		trigger = { ai = no }
		name = EVTOPTB_DRAGON.62
	}
}

# DRAGON.63 - Priest approached you about divorcing your human spouse
character_event = {
	id = DRAGON.63
	desc = EVTDESC_DRAGON.63
	picture = GFX_evt_dragon_spire
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_DRAGON.63
		random_spouse = {
			limit = { NOT = { trait = dragon } }
			transfer_scaled_wealth = { from = ROOT value = 0.75 }
			opinion = { modifier = opinion_divorced who = ROOT }
			any_close_relative = {
				opinion = { modifier = opinion_divorced_relative who = ROOT }
			}
			remove_spouse = ROOT
		}
		FROM = { opinion = { modifier = opinion_took_my_advice who = ROOT } }
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.2
				trait = zealous
			}
		}
	}
	option = {
		name = EVTOPTB_DRAGON.63
		FROM = {
			opinion = { modifier = opinion_did_not_take_my_advice who = ROOT }
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROM value = 0 } }
			}
			modifier = {
				factor = 1.2
				trait = cynical
			}
			modifier = {
				factor = 1.2
				trait = lustful
			}
		}
	}
}

# DRAGON.64 - Ping for friend approaching you about non-dragon lover/consorts
character_event = {
	id = DRAGON.64
	hide_window = yes
	is_triggered_only = yes
	
	min_age = 16
	only_playable = yes
	religion_group = pagan_group
	only_capable = yes
	friends = yes
	prisoner = no
	
	trigger = {
		trait = dragon
		OR = {
			religion = draconic_pagan
			religion = draconic_pagan_reformed
		}
		OR = {
			any_lover = {
				NOT = { trait = dragon }
			}
			any_consort = {
				NOT = { trait = dragon }
			}
		}
		# Not human integration
	}
	weight_multiplier = {
		days = 1
		modifier = {
			factor = 1.5
			ai_zeal = 50
		}
		modifier = {
			factor = 1.5
			any_lover = {
				NOT = { trait = zealous }
				count = 2
			}
		}
		modifier = {
			factor = 1.5
			any_consort = {
				NOT = { trait = zealous }
				NOT = { character = ROOT }
				count = 2
			}
		}
		# More likely with human domination
		# Much more likely with human extermination
	}
	immediate = {
		random_friend = {
			limit = {
				trait = dragon
				OR = {
					religion = draconic_pagan
					religion = draconic_pagan_reformed
				}
				trait = zealous
				# Don't be a hypocrite
				NOR = {
					any_lover = {
						NOT = { trait = dragon }
					}
					any_consort = {
						NOT = { trait = dragon }
					}
				}
			}
			character_event = { id = DRAGON.65 }
		}
	}
}

# DRAGON.65 - Friend can approach about impure lovers
character_event = {
	id = DRAGON.65
	desc = EVTDESC_DRAGON.65
	picture = GFX_evt_dragon_spire
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_DRAGON.65
		FROM = { character_event = { id = DRAGON.66 } }
	}
	option = {
		name = EVTOPTB_DRAGON.65
		trigger = { ai = no }
	}
}

# DRAGON.66 - Friend approaches about impure lovers
character_event = {
	id = DRAGON.66
	desc = EVTDESC_DRAGON.66
	picture = GFX_evt_dragon_spire
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	# Set them aside
	option = {
		name = EVTOPTA_DRAGON.66
		any_lover = {
			limit = { NOT = { trait = dragon } }
			remove_lover = ROOT
			character_event = { id = 64046 } # Inform lover
		}
		any_consort = {
			limit = { NOT = { trait = dragon } }
			remove_consort = ROOT
		}
		FROM = { opinion = { modifier = opinion_took_my_advice who = ROOT } }
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.2
				trait = zealous
			}
		}
	}
	
	option = {
		name = EVTOPTB_DRAGON.66
		FROM = {
			opinion = { modifier = opinion_did_not_take_my_advice who = ROOT }
		}
		if = {
			limit = { NOT = { trait = lustful } }
			random = {
				chance = 20
				add_trait = lustful
				hidden_tooltip = {
					# Notify
					character_event = { id = 38272 }
				}
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROM value = 0 } }
			}
			modifier = {
				factor = 1.2
				trait = cynical
			}
			modifier = {
				factor = 1.2
				trait = lustful
			}
		}
	}
}

# DRAGON.67 - Determine if Sapphire Flame is a fit holder
character_event = {
	id = DRAGON.67
	hide_window = yes
	is_triggered_only = yes
	
	religion = draconic_pagan_reformed
	
	trigger = {
		NOR = {
			has_religion_feature = religion_temporal_head
			has_religion_feature = religion_no_leader
		}
	}
	
	immediate = {
		if = {
			limit = {
				has_landed_title = k_draconic_pagan_reformed
				NOT = { trait = dragon }
			}
			add_character_modifier = { name = unfit_sapphire_flame }
		}
		if = {
			limit = {
				OR = {
					trait = dragon
					NOT = { has_landed_title = k_draconic_pagan_reformed }
				}
			}
			remove_character_modifier = unfit_sapphire_flame
		}
	}
}

# DRAGON.68 - Call 67 for new and old holder
character_event = {
	id = DRAGON.68
	hide_window = yes
	is_triggered_only = yes
	
	only_playable = yes
	religion_group = pagan_group
	
	trigger = {
		religion = draconic_pagan_reformed
	}
	
	immediate = {
		character_event = { id = DRAGON.67 days = 1 }
		FROMFROM = { character_event = { id = DRAGON.67 days = 1 } }
	}
}

# DRAGON.69 - Trade Land for Alliance - Select province
character_event = {
	id = DRAGON.69
	desc = EVTDESC_DRAGON.69
	picture = GFX_evt_fishing
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	# Note - to call event, make sure owner has at least 1 county title that borders SF that isn't their capital
	
	immediate = {
		random_demesne_province = {
			limit = {
				NOT = { ROOT = { capital_scope = { province = PREVPREV } } }
				OR = {
					any_neighbor_province = {
						owner = { 
							top_liege = {
								has_landed_title = k_draconic_pagan_reformed
							}
						}
					}
					sea_zone = {
						any_neighbor_province = {
							owner = { 
								top_liege = {
									has_landed_title = k_draconic_pagan_reformed
								}
							}
						}
					}
					sea_zone = {
						sea_zone = {
							any_neighbor_province = {
								owner = { 
									top_liege = {
										has_landed_title = k_draconic_pagan_reformed
									}
								}
							}
						}
					}
				}
			}
			save_event_target_as = title_1
		}
		random_demesne_province = {
			limit = {
				NOT = { ROOT = { capital_scope = { province = PREVPREV } } }
				NOT = { province = event_target:title_1 }
				OR = {
					any_neighbor_province = {
						owner = { 
							top_liege = {
								has_landed_title = k_draconic_pagan_reformed
							}
						}
					}
					sea_zone = {
						any_neighbor_province = {
							owner = { 
								top_liege = {
									has_landed_title = k_draconic_pagan_reformed
								}
							}
						}
					}
					sea_zone = {
						sea_zone = {
							any_neighbor_province = {
								owner = { 
									top_liege = {
										has_landed_title = k_draconic_pagan_reformed
									}
								}
							}
						}
					}
				}
			}
			save_event_target_as = title_2
		}
		random_demesne_province = {
			limit = {
				NOT = { ROOT = { capital_scope = { province = PREVPREV } } }
				NOR = { 
					province = event_target:title_1
					province = event_target:title_2
				}
				OR = {
					any_neighbor_province = {
						owner = { 
							top_liege = {
								has_landed_title = k_draconic_pagan_reformed
							}
						}
					}
					sea_zone = {
						any_neighbor_province = {
							owner = { 
								top_liege = {
									has_landed_title = k_draconic_pagan_reformed
								}
							}
						}
					}
					sea_zone = {
						sea_zone = {
							any_neighbor_province = {
								owner = { 
									top_liege = {
										has_landed_title = k_draconic_pagan_reformed
									}
								}
							}
						}
					}
				}
			}
			save_event_target_as = title_3
		}
	}
	
	option = { # Offer province 1
		name = EVTOPTA_DRAGON.69
		trigger = {
			event_target:title_1 = { always = yes }
		}
		custom_tooltip = { text = offer_county_SF_alliance }
		hidden_tooltip = {
			# Ping to province
			event_target:title_1 = {
				county = { save_event_target_as = traded_title }
				k_draconic_pagan_reformed = { holder_scope = { character_event = { id = DRAGON.70 } } }
				#province_event = { id = DRAGON.70 }
			}
		}
	}
	option = { # Offer province 2
		name = EVTOPTB_DRAGON.69
		trigger = {
			event_target:title_2 = { always = yes }
		}
		custom_tooltip = { text = offer_county_SF_alliance }
		hidden_tooltip = {
			# Ping to province
			event_target:title_2 = {
				county = { save_event_target_as = traded_title }
				k_draconic_pagan_reformed = { holder_scope = { character_event = { id = DRAGON.70 } } }
				#province_event = { id = DRAGON.70 }
			}
		}
	}
	option = { # Offer province 3
		name = EVTOPTC_DRAGON.69
		trigger = {
			event_target:title_3 = { always = yes }
		}
		custom_tooltip = { text = offer_county_SF_alliance }
		hidden_tooltip = {
			# Ping to province
			event_target:title_3 = {
				county = { save_event_target_as = traded_title }
				k_draconic_pagan_reformed = { holder_scope = { character_event = { id = DRAGON.70 } } }
				#province_event = { id = DRAGON.70 }
			}
		}
	}
	option = { # Changed mind
		name = EVTOPTD_DRAGON.69
		trigger = {
			OR = {
				event_target:title_1 = { always = yes }
				event_target:title_2 = { always = yes }
				event_target:title_3 = { always = yes }
			}
		}
	}
	option = { # Sanity - shouldn't happen
		name = EVTOPTE_DRAGON.69
		trigger = {
			NOR = {
				event_target:title_1 = { always = yes }
				event_target:title_2 = { always = yes }
				event_target:title_3 = { always = yes }
			}
		}
	}
}

# DRAGON.70 - Trade land for alliance - Offered to Sapphire Flame
character_event = {
	id = DRAGON.70
	desc = EVTDESC_DRAGON.70
	picture = GFX_evt_cathedral
 	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	show_from_from = yes
	
	option = { # Accept
		name = EVTOPTA_DRAGON.70
		tooltip = { # Fake it here, give in in the event sent to the requestor
			event_target:traded_title = { grant_title = ROOT }
			add_alliance = { who = FROM years = 200 }
			opinion = { who = FROM modifier = opinion_granted_county months = 60 }
		}
		hidden_tooltip = {
			FROM = { letter_event = { id = DRAGON.71 days = 1 random = 2 } }
		}
		ai_chance = {
			factor = 10
			additive_opinion_modifier = {
				factor = 0.3
				who = FROM
			}
			additive_opinion_modifier = {
				factor = 0.03
				who = ROOT
				this = FROM
			}
			modifier = {
				factor = 1.2
				ai_greed = 20
			}
			modifier = {
				factor = 1.2
				ai_greed = 50
			}
			modifier = {
				factor = 1.5
				family = FROM
			}
			modifier = {
				factor = 1.1
				FROM = { trait = dragon }
			}
			modifier = {
				factor = 1.1
				event_target:traded_title = { location = { has_hospital = yes } }
			}
			modifier = {
				factor = 2
				event_target:traded_title = { is_holy_site = ROOT }
			}
			modifier = {
				factor = 2
				event_target:traded_title = { ROOT = { has_claim = PREV } }
			}
			modifier = {
				factor = 1.05
				event_target:traded_title = { location = { num_of_max_settlements = 5 } }
			}
			modifier = {
				factor = 1.05
				event_target:traded_title = { location = { num_of_max_settlements = 6 } }
			}
			modifier = {
				factor = 1.05
				event_target:traded_title = { location = { num_of_max_settlements = 7 } }
			}
			modifier = {
				factor = 1.1
				event_target:traded_title = { location = { num_of_settlements = 4 } }
			}
			modifier = {
				factor = 1.1
				event_target:traded_title = { location = { num_of_settlements = 5 } }
			}
			modifier = {
				factor = 1.1
				event_target:traded_title = { location = { num_of_settlements = 6 } }
			}
			modifier = {
				factor = 1.1
				event_target:traded_title = { location = { num_of_settlements = 7 } }
			}
			modifier = {
				factor = 1.5
				event_target:traded_title = { de_jure_liege_or_above = ROOT }
			}
		}
	}
	
	option = { # Refuse
		name = EVTOPTB_DRAGON.70
		hidden_tooltip = {
			FROM = { letter_event = { id = DRAGON.72 } }
		}
		ai_chance = {
			factor = 5
			additive_opinion_modifier = {
				factor = -0.04
				who = FROM
			}
			additive_power_diff_modifier = {
				factor = 0.75
				who = FROM
				always = yes
			}
			
			modifier = {
				factor = 2
				event_target:traded_title = { location = { NOT = { religion = ROOT } } }
			}
			modifier = {
				factor = 1.3
				event_target:traded_title = { location = { NOT = { culture = ROOT } } }
			}
			modifier = {
				factor = 1.3
				event_target:traded_title = { location = {  NOT = { culture_group = ROOT } } }
			}
			modifier = {
				factor = 1.2
				event_target:traded_title = { location = { has_disease = yes } }
			}
			modifier = {
				factor = 1.5
				event_target:traded_title = { is_contested = yes }
			}
			modifier = {
				factor = 1.3
				event_target:traded_title = { location = { NOT = { num_of_max_settlements = 3 } } }
			}
			modifier = {
				factor = 1.3
				event_target:traded_title = { location = { NOT = { num_of_max_settlements = 2 } } }
			}
		}
	}
}

# DRAGON.71 - Trade land for alliance - Offer accepted
letter_event = {
	id = DRAGON.71
	desc = EVTDESC_DRAGON.71
	border = GFX_event_letter_frame_diplomacy
	is_triggered_only = yes
	
	option = {
		name = EXCELLENT
		event_target:traded_title = { grant_title_no_opinion = FROM }
		add_alliance = { who = FROM years = 200 }
		reverse_opinion = { who = FROM modifier = opinion_granted_county months = 60 }
		piety = 100
	}
}

# DRAGON.72 - Trade land for alliance - Offer declined
letter_event = {
	id = DRAGON.72
	desc = EVTDESC_DRAGON.72
	border = GFX_event_letter_frame_diplomacy
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA63054
	}
}

# DRAGON.74 - Buy Blessing - ping to target
character_event = {
	id = DRAGON.74
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		k_draconic_pagan_reformed = {
			holder_scope = {
				letter_event = { id = DRAGON.75 }
			}
		}
	}
}

# DRAGON.75 - Buy Blessing - Sapphire Flame receives offer
letter_event = {
	id = DRAGON.75
	desc = {
		text = EVTDESCA_DRAGON.75 # Self
		trigger = {
			FROM = { character = FROMFROM }
		}
	}
	desc = {
		text = EVTDESCB_DRAGON.75 # Other
		trigger = {
			FROM = { NOT = { character = FROMFROM } }
		}
	}
	border = GFX_event_letter_frame_religion
	show_from_from = yes
	is_triggered_only = yes
	
	# Redone so you can only send the offer if it will be accepted
	
	option = {
		name = EVTOPTA_DRAGON.75
		FROM = { 
			add_character_modifier = { modifier = sapphire_flame_blessing years = 10 }
			letter_event = { id = DRAGON.76 }
		}
		FROMFROM = {
			if = {
				limit = {
					tier = count
				}
				wealth = -100
				ROOT = { wealth = 100 }
			}
			if = {
				limit = {
					tier = duke
				}
				wealth = -200
				ROOT = { wealth = 200 }
			}
			if = {
				limit = {
					tier = king
				}
				wealth = -300
				ROOT = { wealth = 300 }
			}
			if = {
				limit = {
					tier = emperor
				}
				wealth = -400
				ROOT = { wealth = 400 }
			}
			if = {
				limit = {
					NOT = { FROMFROM = { character = FROM } }
				}
				letter_event = { id = DRAGON.77 }
			}
		}
		#ai_chance = {
		#	factor = 10
		#	
		#	modifier = {
		#		factor = 0
		#		FROM = { trait = bad_priest_draconic }
		#		NOT = { trait = bad_priest_draconic }
		#	}
		#	modifier = {
		#		factor = 0
		#		is_rival = FROMFROM
		#	}
		#	modifier = {
		#		factor = 0
		#		is_rival = FROM
		#	}
		#	
		#	modifier = {
		#		factor = 1.5
		#		opinion = { who = FROM value = 25 }
		#	}
		#	modifier = {
		#		factor = 1.5
		#		opinion = { who = FROM value = 50 }
		#	}
		#	modifier = {
		#		factor = 1.5
		#		opinion = { who = FROM value = 75 }
		#	}
		#	modifier = {
		#		factor = 1.5
		#		opinion = { who = FROM value = 100 }
		#	}
		#	modifier = {
		#		factor = 1.5
		#		opinion = { who = FROMFROM value = 25 }
		#	}
		#	modifier = {
		#		factor = 1.5
		#		opinion = { who = FROMFROM value = 50 }
		#	}
		#	modifier = {
		#		factor = 1.5
		#		opinion = { who = FROMFROM value = 75 }
		#	}
		#	modifier = {
		#		factor = 1.5
		#		opinion = { who = FROMFROM value = 100 }
		#	}
		#	modifier = {
		#		factor = 1.5
		#		FROM = { has_pious_trait_trigger = yes }
		#	}
		#	modifier = {
		#		factor = 1.2
		#		FROM = { has_education_theology_trigger = yes }
		#	}
		#	modifier = {
		#		factor = 1.2
		#		ai_greed = 20
		#	}
		#	modifier = {
		#		factor = 1.2
		#		ai_greed = 40
		#	}
		#	modifier = {
		#		factor = 1.2
		#		ai_greed = 60
		#	}
		#	modifier = {
		#		factor = 1.2
		#		ai_greed = 80
		#	}
		#	modifier = {
		#		factor = 1.2
		#		ai_greed = 100
		#	}
		#}
	}
	#option = {
	#	name = EVTOPTB_DRAGON.75
	#	FROMFROM = {
	#		letter_event = { id = DRAGON.78 }
	#	}
	#	ai_chance = {
	#		factor = 5
	#		
	#		modifier = {
	#			factor = 1.5
	#			NOT = { opinion = { who = FROM value = -24 } }
	#		}
	#		modifier = {
	#			factor = 1.5
	#			NOT = { opinion = { who = FROM value = -49 } }
	#		}
	#		modifier = {
	#			factor = 1.5
	#			NOT = { opinion = { who = FROM value = -74 } }
	#		}
	#		modifier = {
	#			factor = 1.5
	#			NOT = { opinion = { who = FROM value = -99 } }
	#		}
	#		modifier = {
	#			factor = 1.5
	#			NOT = { opinion = { who = FROMFROM value = -24 } }
	#		}
	#		modifier = {
	#			factor = 1.5
	#			NOT = { opinion = { who = FROMFROM value = -49 } }
	#		}
	#		modifier = {
	#			factor = 1.5
	#			NOT = { opinion = { who = FROMFROM value = -74 } }
	#		}
	#		modifier = {
	#			factor = 1.5
	#			NOT = { opinion = { who = FROMFROM value = -99 } }
	#		}
	#		modifier = {
	#			factor = 1.5
	#			FROM = { has_impious_trait_trigger = yes }
	#		}
	#		modifier = {
	#			factor = 1.5
	#			FROM = {
	#				has_vice_trigger = yes
	#				has_virtue_trigger = no
	#			}
	#		}
	#	}
	#}
	after = {
		opinion = { who = FROMFROM modifier = opinion_asked_for_blessing }
	}
}

# DRAGON.76 - Recieve blessing from Sapphire Flame
letter_event = {
	id = DRAGON.76
	desc = EVTDESC_DRAGON.76
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_DRAGON.76
		custom_tooltip = { 
			text = purity_plus_1
			add_character_modifier = { modifier = sapphire_flame_blessing years = 10 }
		}
		if = {
			limit = { NOT = { character = FROMFROMFROM } }
			opinion = { modifier = opinion_bought_blessing who = FROMFROMFROM }
		}
	}
}

# DRAGON.77 - Sent blessing
letter_event = {
	id = DRAGON.77
	desc = EVTDESC_DRAGON.77
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_DRAGON.77
	}
}

# DRAGON.78 - Refused blessing
letter_event = {
	id = DRAGON.78
	desc = EVTDESC_DRAGON.78
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_DRAGON.78
	}
}

# DRAGON.79 - Requested Claim - FROM is title, FROMFROM is requestor
letter_event = {
	id = DRAGON.79
	desc = EVTDESC_DRAGON.79
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes
	show_from_from = yes
	
	option = {
		name = EVTOPTA_DRAGON.79
		tooltip = { FROM = { add_claim = FROMFROM } }
		FROMFROM = { letter_event = { id = DRAGON.80 } }
		ai_chance = {
			factor = 10
			
			additive_opinion_modifier = {
				factor = 0.25
				who = FROMFROM
			}
			
			modifier = {
				factor = 0
				is_rival = FROMFROM
			}
			
			modifier = {
				factor = 1.5
				FROM = { holder_scope = { NOT = { reverse_opinion = { who = ROOT value = -24 } } } }
			}
			modifier = {
				factor = 1.5
				FROM = { holder_scope = {  NOT = { reverse_opinion = { who = ROOT value = -49 } } } }
			}
			modifier = {
				factor = 1.5
				FROM = { holder_scope = { NOT = { reverse_opinion = { who = ROOT value = -74 } } } }
			}
			modifier = {
				factor = 1.5
				FROM = { holder_scope = { NOT = { reverse_opinion = { who = ROOT value = -99 } } } }
			}
			modifier = {
				factor = 2
				FROM = { is_rival = ROOT }
			}
			modifier = {
				factor = 1.5
				trait = zealous
			}
			modifier = {
				factor = 1.5
				FROMFROM = { is_pious_trigger = yes }
			}
			modifier = {
				factor = 1.2
				FROMFROM = { has_pleasant_trait_trigger = yes }
			}
			modifier = {
				factor = 1.2
				FROMFROM = { has_crusade_trait_trigger = yes }
			}
			modifier = {
				factor = 1.5
				FROMFROM = {
					has_virtue_trigger = yes
					has_vice_trigger = no
				}
			}
		}
	}

	option = {
		name = EVTOPTB_DRAGON.79
		FROMFROM = { letter_event = { id = DRAGON.81 } }
		ai_chance = {
			factor = 9
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROMFROM value = 0 } }
			}
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROMFROM value = -24 } }
			}
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROMFROM value = -49 } }
			}
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROMFROM value = -74 } }
			}
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROMFROM value = -99 } }
			}
			modifier = {
				factor = 1.5
				FROM = { reverse_opinion = { who = ROOT value = 25 } }
			}
			modifier = {
				factor = 1.5
				FROM = { reverse_opinion = { who = ROOT value = 50 } }
			}
			modifier = {
				factor = 1.5
				FROM = { reverse_opinion = { who = ROOT value = 75 } }
			}
			modifier = {
				factor = 1.5
				FROM = { reverse_opinion = { who = ROOT value = 100 } }
			}
			modifier = {
				factor = 1.5
				FROM = { is_friend = ROOT }
			}
			modifier = {
				factor = 1.5
				FROM = { is_pious_trigger = yes }
			}
			modifier = {
				factor = 1.1
				FROM = { has_pleasant_trait_trigger = yes }
			}
			modifier = {
				factor = 1.2
				FROM = { has_pleasant_personality_trigger = yes }
			}
			modifier = {
				factor = 1.2
				FROM = { has_crusade_trait_trigger = yes }
			}
			modifier = {
				factor = 1.5
				FROM = {
					has_virtue_trigger = yes
					has_vice_trigger = no
				}
			}
			modifier = {
				factor = 1.5
				trait = kind
			}
			modifier = {
				factor = 1.5
				trait = slothful
			}
			modifier = {
				factor = 1.5
				trait = cynical
			}
			modifier = {
				factor = 1.5
				trait = arbitrary
			}
		}
	}
	after = {
		opinion = { who = FROMFROM modifier = asked_for_claim }
	}
}

# DRAGON.80 - Claim granted
letter_event = {
	id = DRAGON.80
	desc = EVTDESC_DRAGON.80
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_DRAGON.80
		FROMFROM = { add_claim = ROOT }
	}
}

# DRAGON.81 - Claim denied
letter_event = {
	id = DRAGON.81
	desc = EVTDESC_DRAGON.81
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_DRAGON.81
	}
}

# DRAGON.82 - Divorce requested
letter_event = {
	id = DRAGON.82
	desc = EVTDESC_DRAGON.82
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes
	show_from_from = yes
	
	# Changed so it can't be requested unless it will be accepted
	
	option = {
		name = EVTOPTA_DRAGON.82
		FROMFROM = { 
			letter_event = { id = DRAGON.83 days = 1 }
			spouse = {
				letter_event = { id = DRAGON.84 days = 1 }
			}
		}
	}
	after = {
		opinion = { modifier = asked_for_divorce who = FROMFROM }
	}
}

# DRAGON.83 - Positive response to divorce
letter_event = {
	id = DRAGON.83
	desc = EVTDESC_DRAGON.83
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_DRAGON.83
		spouse = {
			opinion = { modifier = opinion_divorced who = ROOT }
			hidden_tooltip = {
				any_close_relative = {
					opinion = { modifier = opinion_divorced_relative who = ROOT }
				}
			}
		}
		remove_spouse = yes
	}
}

# DRAGON.84 - You were divorced
letter_event = {
	id = DRAGON.84
	desc = EVTDESC_DRAGON.84
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_DRAGON.84
		tooltip = { opinion = { modifier = opinion_divorced who = FROMFROMFROM } }
		remove_spouse = yes
	}
}

# DRAGON.85 - Divorce declined
letter_event = {
	id = DRAGON.85
	desc = EVTDESC_DRAGON.85
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_DRAGON.85
	}
}

# DRAGON.86 - Request to disinherit heir
letter_event = {
	id = DRAGON.86
	desc = EVTDESC_DRAGON.86
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes
	show_from_from = yes
	
	# Reworked so this can only be requested if it will be accepted
	
	option = {
		name = EVTOPTA_DRAGON.86
		FROMFROM = {
			letter_event = { id = DRAGON.87 days = 1 }
			current_heir = { letter_event = { id = DRAGON.88 days = 1 } }
		}
		#ai_chance = {
		#	factor = 10
		#	
		#	modifier = {
		#		factor = 1.5
		#		FROMFROM = {
		#			is_pious_trigger = yes
		#		}
		#	}
		#	modifier = {
		#		factor = 3
		#		FROMFROM = {
		#			current_heir = {
		#				NOT = { religion = draconic_pagan_reformed }
		#			}
		#		}
		#	}
		#	modifier = {
		#		factor = 1.5
		#		opinion = { who = FROMFROM value = 25 }
		#	}
		#	modifier = {
		#		factor = 1.5
		#		opinion = { who = FROMFROM value = 50 }
		#	}
		#	modifier = {
		#		factor = 1.5
		#		opinion = { who = FROMFROM value = 75 }
		#	}
		#	modifier = {
		#		factor = 1.5
		#		opinion = { who = FROMFROM value = 100 }
		#	}
		#	modifier = {
		#		factor = 1.5
		#		FROMFROM = {
		#			current_heir = {
		#				NOT = { reverse_opinion = { who = ROOT value = -24 } }
		#			}
		#		}
		#	}
		#	modifier = {
		#		factor = 1.5
		#		FROMFROM = {
		#			current_heir = {
		#				NOT = { reverse_opinion = { who = ROOT value = -49 } }
		#			}
		#		}
		#	}
		#	modifier = {
		#		factor = 1.5
		#		FROMFROM = {
		#			current_heir = {
		#				NOT = { reverse_opinion = { who = ROOT value = -74 } }
		#			}
		#		}
		#	}
		#	modifier = {
		#		factor = 1.5
		#		FROMFROM = {
		#			current_heir = {
		#				NOT = { reverse_opinion = { who = ROOT value = -99 } }
		#			}
		#		}
		#	}
		#}
	}
	#option = {
	#	name = EVTOPTB_DRAGON.86
	#	FROMFROM = { letter_event = { id = DRAGON.89 days = 1 } }
	#	ai_chance = {
	#		factor = 1
	#		
	#		modifier = {
	#			factor = 1.5
	#			FROMFROM = { 
	#				current_heir = { culture = ROOT }
	#				NOT = { culture = ROOT }
	#			}
	#		}
	#		modifier = {
	#			factor = 2
	#			is_rival = FROMFROM
	#		}
	#		modifier = {
	#			factor = 2
	#			FROMFROM = {
	#				current_heir = { is_lover = ROOT }
	#			}
	#		}
	#		modifier = {
	#			factor = 2
	#			FROMFROM = {
	#				current_heir = { is_friend = ROOT }
	#			}
	#		}
	#		modifier = {
	#			factor = 1.1
	#			FROMFROM = {
	#				current_heir = {
	#					reverse_opinion = { who = ROOT value = 25 }
	#				}
	#			}
	#		}
	#		modifier = {
	#			factor = 1.1
	#			FROMFROM = {
	#				current_heir = {
	#					reverse_opinion = { who = ROOT value = 50 }
	#				}
	#			}
	#		}
	#		modifier = {
	#			factor = 1.1
	#			FROMFROM = {
	#				current_heir = {
	#					reverse_opinion = { who = ROOT value = 75 }
	#				}
	#			}
	#		}
	#		modifier = {
	#			factor = 1.1
	#			FROMFROM = {
	#				current_heir = {
	#					reverse_opinion = { who = ROOT value = 100 }
	#				}
	#			}
	#		}
	#	}
	#}
	
	after = {
		opinion = { who = FROMFROM modifier = opinion_asked_for_disinheritance }
	}
}

# DRAGON.87 - Disinheritance granted
letter_event = {
	id = DRAGON.87
	desc = EVTDESC_DRAGON.87
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_DRAGON.87
		current_heir = { add_trait = disinherited }
	}
}

# DRAGON.88 - You were disinherited
letter_event = {
	id = DRAGON.88
	desc = EVTDESC_DRAGON.88
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_DRAGON.88
		add_trait = disinherited
		opinion = { who = FROMFROMFROM modifier = opinion_disinherited }
		add_trait = depressed
		if = {
			limit = { trait = trusting }
			remove_trait = trusting
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				trait = trusting
			}
			modifier = {
				factor = 2
				trait = slothful
			}
			modifier = {
				factor = 2
				trait = temperate
			}
			modifier = {
				factor = 2
				trait = kind
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 2
				trait = shy
			}
			modifier = {
				factor = 2
				trait = content
			}
		}
	}
	
	option = {
		name = EVTOPTB_DRAGON.88
		add_trait = disinherited
		opinion = { who = FROMFROMFROM modifier = opinion_disinherited }
		add_trait = ambitious
		add_trait = envious
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				ai_ambition = 70
			}
			modifier = {
				factor = 2
				trait = stubborn
			}
			modifier = {
				factor = 2
				trait = envious
			}
			modifier = {
				factor = 2
				trait = adventurer
			}
			modifier = {
				factor = 2
				trait = strategist
			}
			modifier = {
				factor = 2
				trait = patient
			}
			modifier = {
				factor = 2
				trait = diligent
			}
		}
	}
	
	option = {
		name = EVTOPTC_DRAGON.88
		add_trait = disinherited
		opinion = { who = FROMFROMFROM modifier = opinion_disinherited }
		add_rival = FROMFROMFROM
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				trait = duelist
			}
			modifier = {
				factor = 2
				trait = schemer
			}
			modifier = {
				factor = 2
				trait = proud
			}
			modifier = {
				factor = 2
				trait = deceitful
			}
			modifier = {
				factor = 2
				is_any_kinslayer_trigger = yes
			}
		}
	}
	
	option = {
		name = EVTOPTD_DRAGON.88
		add_trait = disinherited
		opinion = { who = FROMFROMFROM modifier = opinion_disinherited }
		add_trait = wroth
		add_trait = envious
		add_trait = greedy
		add_trait = deceitful
		add_trait = paranoid
		add_rival = FROMFROMFROM
		add_rival = FROM
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				trait = impaler
			}
			modifier = {
				factor = 2
				trait = wroth
			}
			modifier = {
				factor = 2
				trait = cruel
			}
			modifier = {
				factor = 2
				trait = paranoid
			}
			modifier = {
				factor = 2
				trait = lunatic
			}
			modifier = {
				factor = 2
				trait = possessed
			}
			modifier = {
				factor = 2
				is_any_kinslayer_trigger = yes
			}
		}
	}
	
	after = {
		hidden_tooltip = {
			character_event = { id = MYTH.56 }
		}
	}
}

# DRAGON.89 - Disinheritance refused
letter_event = {
	id = DRAGON.89
	desc = EVTDESC_DRAGON.89
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_DRAGON.89
	}
}

# DRAGON.90 - Requested Gold
letter_event = {
	id = DRAGON.90
	desc = EVTDESC_DRAGON.90
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes
	show_from_from = yes
	
	option = {
		name = EVTOPTA_DRAGON.90
		FROMFROMFROM = { letter_event = { id = DRAGON.91 days = 1 } }
		tooltip = {
			FROMFROMFROM = {
				transfer_scaled_wealth = { from = ROOT value = 2 } 
				add_character_modifier = { modifier = SF_loan years = 10 }
			}
		}
	}
	
	after = {
		opinion = { who = FROMFROM modifier = opinion_asked_for_gold }
		FROMFROMFROM = { character_event = { id = DRAGON.173 years = 1 } }
	}
}

# DRAGON.91 - Loan given
letter_event = {
	id = DRAGON.91
	desc = EVTDESC_DRAGON.91
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes
	
	option = {
		name = EVTOPT_DRAGON.91
		transfer_scaled_wealth = { from = FROM value = 2 }
		add_character_modifier = { modifier = SF_loan years = 10 }
		hidden_tooltip = { set_variable = { which = years_SF_loan value = 0 } } # Used for telling you when it's over
	}
}

# DRAGON.92 - Loan refused
letter_event = {
	id = DRAGON.92
	desc = EVTDESC_DRAGON.92
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes
	
	option = {
		name = EVTOPT_DRAGON.92
	}
}

# DRAGON.93 - Sapphire Flame can pay to build a temple in your land.
# Make sure requirements met, then bounce to Sapphire Flame
character_event = {
	id = DRAGON.93
	hide_window = yes
	is_triggered_only = yes
	
	only_playable = yes
	religion = draconic_pagan_reformed
	min_age = 16
	only_capable = yes
	
	trigger = {
		NOR = { 
			has_religion_feature = religion_temporal_head
			has_religion_feature = religion_no_leader
		}
		higher_real_tier_than = baron
		any_demesne_province = {
			has_empty_holding = yes
			religion = draconic_pagan_reformed
		}
		k_draconic_pagan_reformed = {
			holder_scope = {
				wealth = 350
			}
		}
	}
	
	immediate = {
		k_draconic_pagan_reformed = {
			holder_scope = {
				character_event = { id = DRAGON.94 }
			}
		}
	}
}

# DRAGON.94 - Sapphire Flame can offer to build a temple
character_event = {
	id = DRAGON.94
	desc = EVTDESC_DRAGON.94
	picture = GFX_evt_cathedral
	border = GFX_event_normal_frame_religion
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_DRAGON.94
		FROM = {
			random_demesne_province = {
				limit = { 
					has_empty_holding = yes
					religion = draconic_pagan_reformed
				}
				province_event = { id = DRAGON.95 days = 1}
			}
		}
		ai_chance = {
			factor = 10
			modifier = {
				factor = 1.5
				wealth = 700
			}
			modifier = {
				factor = 1.5
				wealth = 1000
			}
		}
	}
	option = {
		name = EVTOPTB_DRAGON.94
		ai_chance = {
			factor = 1
			modifier = {
				factor = 3
				NOT = { wealth = 400 }
			}
			modifier = {
				factor = 2
				NOT = { wealth = 500 }
			}
			modifier = {
				factor = 2
				NOT = { wealth = 600 }
			}
		}
	}
}

# DRAGON.95 - Offer to build temple - ping province
province_event = {
	id = DRAGON.95
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		holder_scope = {
			letter_event = { id = DRAGON.96 }
		}
	}
}

# DRAGON.96 - Offer to build temple
letter_event = {
	id = DRAGON.96
	desc = EVTDESC_DRAGON.96
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes
	show_from_from = yes
	
	option = {
		name = EVTOPTA_DRAGON.96
		wealth = 350
		FROMFROM = {
			letter_event = { id = DRAGON.97 days = 1 }
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				ai_greed = 40
			}
			modifier = {
				factor = 2
				ai_zeal = 40
			}
			modifier = {
				factor = 2
				NOT = { wealth = 100 }
			}
			modifier = {
				factor = 2
				NOT = { wealth = 0 }
			}
		}
	}
	option = {
		name = EVTOPTB_DRAGON.96
		FROMFROM = {
			letter_event = { id = DRAGON.98 days = 1 }
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				trait = cynical
			}
			modifier = {
				factor = 2
				trait = proud
			}
			modifier = {
				factor = 2
				NOT = { opinion = { who = FROMFROM  value = 0 } }
			}
		}
	}
}

# DRAGON.97 - Positive response - build temple
letter_event = {
	id = DRAGON.97
	desc = EVTDESC_DRAGON.97
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_DRAGON.97
		wealth = -350
		FROMFROM = {
			build_holding = {
				type = temple
				holder = ROOT
			}
		}
	}
}

# DRAGON.98 - Negative response - don't build temple
letter_event = {
	id = DRAGON.98
	desc = EVTDESC_DRAGON.98
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_DRAGON.98
	}
}

# DRAGON.99 - Sapphire Flame can offer to buy a province they hold a temple in
character_event = {
	id = DRAGON.99
	desc = EVTDESC_DRAGON.99
	picture = GFX_evt_cathedral
	border = GFX_event_normal_frame_religion
	is_triggered_only = yes
	
	only_playable = yes
	religion = draconic_pagan_reformed
	only_capable = yes
	
	trigger = {
		NOT = { has_religion_feature = religion_temporal_head }
		has_landed_title = k_draconic_pagan_reformed
		wealth = 750
		any_playable_ruler = {
			religion = draconic_pagan_reformed
			num_of_count_titles = 2
			is_within_diplo_range = ROOT
			any_realm_title = {
				tier = baron
				holding_type = temple
				county = {
					holder_scope = {
						NOT = { character = ROOT }
						character = PREVPREV
						OR = {
							AND = {
								independent = yes
								ROOT = { independent = yes }
							}
							same_liege = ROOT
						}
						num_of_count_titles = 2
					}
				}
			}
		}
	}
	
	immediate = {
		random_playable_ruler = {
			limit = {
				religion = draconic_pagan_reformed
				num_of_count_titles = 2
				higher_tier_than = BARON
				is_within_diplo_range = ROOT
				any_realm_title = {
					tier = baron
					holding_type = temple
					county = {
						holder_scope = {
							NOT = { character = ROOT }
							character = PREVPREV
							OR = {
								AND = {
									independent = yes
									ROOT = { independent = yes }
								}
								same_liege = ROOT
							}
							num_of_count_titles = 2
						}
					}
				}
			}
			random_realm_title = {
				limit = {
					tier = baron
					holding_type = temple
					county = {
						holder_scope = {
							NOT = { character = ROOT }
							character = PREVPREV
							OR = {
									AND = {
										independent = yes
										ROOT = { independent = yes }
									}
									same_liege = ROOT
								}
							num_of_count_titles = 2
						}
					}
				}
				county = {
					save_event_target_as = targetted_county
					holder_scope = {
						save_event_target_as = county_holder
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTA_DRAGON.99
		event_target:county_holder = { letter_event = { id = DRAGON.100 days = 2 } }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				wealth = 2000
			}
			modifier = {
				factor = 3
				wealth = 3000
			}
			modifier = {
				factor = 2
				ai_ambition = 50
			}
		}
	}
	option = {
		name = EVTOPTB_DRAGON.99
		ai_chance = {
			factor = 1
			modifier = {
				factor = 10
				event_target:targetted_county = {
					NOT = {
						location = {
							any_neighbor_province = {
								holder_scope = { 
									OR = {
										character = ROOT 
										top_liege = {
											character = ROOT
										}
									}
								}
							}
						}
					}
				}
			}
			modifier = {
				factor = 2
				ai_greed = 50
			}
			modifier = {
				factor = 2
				NOT = { wealth = 1000 }
			}
			modifier = {
				factor = 2
				trait = content
			}
		}
	}
}

# DRAGON.100 - Sapphire Flame tries to purchase county
letter_event = {
	id = DRAGON.100
	desc = EVTDESC_DRAGON.100
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes
	
	option = { # Accept
		name = EVTOPTA_DRAGON.100
		FROM = {
			letter_event = { id = DRAGON.101 }
		}
		event_target:targetted_county = {
			gain_title = FROM
			hidden_tooltip = { remove_claim = ROOT }
		}
		wealth = 750
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				NOT = { wealth = 0 }
				wealth = -750
			}
			modifier = {
				factor = 2
				ai_greed = 100
				NOT = { ai_ambition = 0 }
			}
			modifier = {
				factor = 2
				religion = FROM
				trait = zealous
			}
		}
	}
	option = { # Not worth the money
		name = EVTOPTB_DRAGON.100
		trigger = {
			OR = {
				religion = draconic_pagan_reformed
				religion = draconic_pagan
				trait = cynical
			}
		}
		FROM = { letter_event = { id = DRAGON.102 } }
		ai_chance = {
			factor = 5
			modifier = {
				factor = 2
				wealth = 1000
			}
			modifier = {
				factor = 2
				ai_ambition = 50
			}
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROM value = 0 } }
			}
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROM value = -24 } }
			}
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROM value = -49 } }
			}
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROM value = -74 } }
			}
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROM value = -99 } }
			}
		}
	}
	option = { # Refuse the heathen's offer
		name = EVTOPTC_DRAGON.100
		trigger = {
			NOR = {
				religion = draconic_pagan_reformed
				religion = draconic_pagan
				trait = cynical
			}
		}
		FROM = { letter_event = { id = DRAGON.103 } }
		ai_chance = {
			factor = 10
			modifier = {
				factor = 2
				wealth = 1000
			}
			modifier = {
				factor = 2
				ai_ambition = 50
			}
			modifier = {
				factor = 2
				trait = zealous
			}
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROM value = 0 } }
			}
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROM value = -24 } }
			}
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROM value = -49 } }
			}
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROM value = -74 } }
			}
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROM value = -99 } }
			}
		}
	}
}

# DRAGON.101 - Sapphire Flame purchases county
letter_event = {
	id = DRAGON.101
	desc = EVTDESC_DRAGON.101
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_DRAGON.101
		wealth = -750
		tooltip = {
			event_target:targetted_count = { gain_title = ROOT } 
		}
	}
}

# DRAGON.102 - County purchase refused
letter_event = {
	id = DRAGON.102
	desc = EVTDESC_DRAGON.102
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_DRAGON.98
	}
}

# DRAGON.103 - County purchase refused zealously
letter_event = {
	id = DRAGON.103
	desc = EVTDESC_DRAGON.103
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_DRAGON.103
	}
}

## DRAGON.104 - On reformation, the Sapphire Flame is always created from one of your vassals instead of leaving it to the decision. So, remove it.
## Can't simply remove it.  Using an event to set a flag, then a separate event the removes it when received and unsets it
#character_event = {
#	id = DRAGON.104
#	hide_window = yes
#	is_triggered_only = yes
#	
#	religion = draconic_pagan_reformed
#	
#	trigger = {
#		OR = {
#			NOT = { has_dlc = "Holy Fury" }
#			has_religion_feature = religion_theocratic_head
#		}
#	}
#	
#	immediate = {
#		#k_draconic_pagan_reformed = {
#		#	holder_scope = {
#		#		activate_title = { title = k_draconic_pagan_reformed status = no }
#		#		set_defacto_liege = ROOT
#		#	}
#		#}
#		set_global_flag = deactivate_sapphire_flame
#		set_character_flag = reformed_draconic_paganism
#		k_draconic_pagan_reformed = {
#			holder_scope = {
#				k_draconic_pagan_reformed = {
#					activate_title = { title = THIS status = no }
#					destroy_landed_title = THIS
#				}
#				set_defacto_liege = ROOT
#			}
#		}
#		piety = 500
#	}
#}

# Take half of a character's wealth after draconic tribute war
character_event = {
	id = DRAGON.105
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		FROMFROM = {
			export_to_variable = { which = local_wealth value = wealth }
			divide_variable = { which = local_wealth value = 2 }
			if = {
				limit = { NOT = { check_variable = { which = local_wealth value = 0 } } }
				set_variable = { which = local_wealth value = 0 }
			}
		}
		wealth = local_wealth
		multiply_variable = { which = local_wealth value = -1 }
		FROMFROM = {
			wealth = local_wealth
		}
	}
}

# 106-140 are in dragon_raid.txt

# DRAGON.141 - Sapphire Flame gives money to someone defending against infidels
character_event = {
	id = DRAGON.141
	desc = EVTDESC_DRAGON.141
	picture = GFX_evt_battle
	border = GFX_event_normal_frame_religion
	
	min_age = 16
	only_playable = yes
	religion = draconic_pagan_reformed
	war = no
	
	trigger = {
		controls_religion = yes
		OR = {
			NOT = { has_dlc = "Holy Fury" }
			has_religion_feature = religion_theocratic_head
			has_religion_feature = religion_autocephaly
		}
		
		wealth = 500
		any_playable_ruler = {
			religion = draconic_pagan_reformed
			religion_head = { character = ROOT }
			NOT = { wealth = 500 }
			religion_head = {
				character = ROOT
			}
			NOT = { excommunicated_for = ROOT }
			any_current_enemy = {
				any_defender = { character = ROOT }
				NOR = {
					religion = draconic_pagan_reformed
					religion = draconic_pagan
				}
			}
			NOT = { war_with = ROOT }
			reverse_opinion = { who = ROOT value = 0 }
			OR = {
				NOT = { has_character_flag = money_from_the_pope }
				OR = {
					had_character_flag = { flag = money_from_the_pope days = 730 }
					AND = {
						ai = yes
						had_character_flag = { flag = money_from_the_pope days = 365 }
						any_war = {
							using_cb = religious
							OR = {
								attacker = {
									character = PREVPREV
									NOT = { war_score = -15 }
								}
								defender = {
									character = PREVPREV
									war_score = 15
								}
							}
						}
					}
				}
			}
		}
	}
	
	mean_time_to_happen = {
		months = 80
		modifier = {
			factor = 0.5
			wealth = 1000
		}
		modifier = {
			factor = 0.5
			wealth = 2000
		}
	}
	
	option = {
		name = EVTOPTA_DRAGON.141
		ai_chance = { factor = 100 }
		wealth = -200
		
		random_playable_ruler = {
			limit = {
				religion = draconic_pagan_reformed
				NOT = { wealth = 500 }
				religion_head = {
					character = ROOT
				}
				NOT = { excommunicated_for = ROOT }
				any_current_enemy = {
					any_defender = { character = ROOT }
					NOR = {
						religion = draconic_pagan_reformed
						religion = draconic_pagan
					}
				}
				NOT = { war_with = ROOT }
				reverse_opinion = { who = ROOT value = 0 }
			}
			
			letter_event = { id = DRAGON.142 tooltip = EVTTOOLTIP39201 }
		}
	}
	
	option = {
		name = EVTOPTB_DRAGON.141
		ai_chance = { factor = 0 }
	}
}

letter_event = {
	id = DRAGON.142
	desc = EVTDESC_DRAGON.142
	border = GFX_event_letter_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_DRAGON.142
		wealth = 200
		set_character_flag = money_from_the_pope
	}
}

character_event = {
	id = DRAGON.143
	desc = EVTDESC_DRAGON.143
	picture = GFX_evt_dragon_face
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_DRAGON.143
		ai_chance = { factor = 100 }
		trigger_switch = {
			on_trigger = trait
			kinslayer = {
				piety = -100
				wealth = -300
				remove_trait = kinslayer
				hidden_tooltip = {
					FROM = {
						set_variable = { which = local_payment value = 300 }
					}
				}
			}
			familial_kinslayer = {
				piety = -50
				wealth = -200
				remove_trait = familial_kinslayer
				hidden_tooltip = {
					FROM = {
						set_variable = { which = local_payment value = 200 }
					}
				}
			}
			dynastic_kinslayer = {
				piety = -25
				wealth = -100
				remove_trait = dynastic_kinslayer
				hidden_tooltip = {
					FROM = {
						set_variable = { which = local_payment value = 100 }
					}
				}
			}
		}
		FROM = { character_event = { id = DRAGON.144 days = 1 } }
	}
	
	option = {
		name = EVTOPTB_DRAGON.143
		ai_chance = { factor = 0 }
		FROM = { character_event = { id = DRAGON.143 days = 1 } }
	}
}

character_event = {
	id = DRAGON.144
	desc = EVTDESC_DRAGON.144
	picture = GFX_evt_dragon_horde
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	option = {
		name = EVTOPTA_DRAGON.144
		wealth = local_payment
	}
}

character_event = {
	id = DRAGON.145
	desc = EVTDESC_DRAGON.145
	picture = GFX_evt_torture
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_DRAGON.145
		prestige = -10
	}
}

# Sapphire Flame does not like it if you have heathens in your employ
character_event = {
	id = DRAGON.146
	desc = EVTDESC_DRAGON.146
	picture = GFX_evt_heretic
	border = GFX_event_normal_frame_religion
	
	religion = draconic_pagan_reformed
	has_global_flag = draconic_pagan_reformation
	min_age = 16
	only_capable = yes
	prisoner = no
	war = no
	
	trigger = {
		controls_religion = yes
		OR = {
			NOT = { has_dlc = "Holy Fury" }
			has_religion_feature = religion_theocratic_head
			has_religion_feature = religion_autocephaly
		}
		
		religion_authority = 0.20

		any_playable_ruler = {
			religion = ROOT
			rightful_religious_head = ROOT
			NOT = { has_character_flag = pope_dislikes_heathen_employed }
			any_courtier = {
				prisoner = no
				OR = {
					religion_group = muslim
					religion_group = christian
					religion_group = jewish_group
					religion_group = other_group
					religion_group = zoroastrian_group
				}
				OR = {
					has_job_title = job_chancellor
					has_job_title = job_marshal
					has_job_title = job_treasurer
					has_job_title = job_spymaster
					has_job_title = job_spiritual
				}
			}
		}
	}
	
	mean_time_to_happen = {
		months = 50
		modifier = {
			factor = 0.25
			trait = zealous
		}
	}

	option = {
		name = EVTOPTA_DRAGON.146	#ask them
		ai_chance = { factor = 100 }
		random_playable_ruler = {
			limit = {
				religion = ROOT
				rightful_religious_head = ROOT
				NOT = { has_character_flag = pope_dislikes_heathen_employed }

				any_courtier = {
					prisoner = no
					OR = {
						religion_group = muslim
						religion_group = christian
						religion_group = jewish_group
						religion_group = other_group
						religion_group = zoroastrian_group
					}
					OR = {
						has_job_title = job_chancellor
						has_job_title = job_marshal
						has_job_title = job_treasurer
						has_job_title = job_spymaster
						has_job_title = job_spiritual
					} 
				}
			}
			character_event = { id = DRAGON.147 days = 14 tooltip = EVTTOOLTIP392401 }
			set_character_flag = pope_dislikes_heathen_employed
		}
	}
	
	option = {
		name = EVTOPTB_DRAGON.146	#ignore it.
		ai_chance = { factor = 0 }
		religion_authority = {
			modifier = head_of_religion_neglect
			years = 10
		}
	}
}

character_event = {
	id = DRAGON.147
	desc = EVTDESC_DRAGON.147	
	picture = GFX_evt_dragon_meeting
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		random_courtier = {
			limit = {
				prisoner = no
				OR = {
					religion_group = muslim
					religion_group = christian
					religion_group = jewish_group
					religion_group = other_group
					religion_group = zoroastrian_group
				}
				OR = {
					has_job_title = job_chancellor
					has_job_title = job_marshal
					has_job_title = job_treasurer
					has_job_title = job_spymaster
					has_job_title = job_spiritual
				} 
			}
			set_character_flag = heathen_to_target
		}
	}
	
	option = {
		name = EVTOPTB_DRAGON.147 #imprison
		tooltip_info = intrigue
		trigger = {
			realm_intrigue = 15
		}
		random_courtier = {
			limit = { has_character_flag = heathen_to_target }
			clr_character_flag = heathen_to_target
			imprison = yes
		}
		FROM = {
			opinion = {
				modifier = pope_heathen_removal_approve_2
				who = ROOT
				months = 36
			}
		}
		hidden_tooltip = {
			FROM = {  character_event = { id = DRAGON.148 days = 1  } }
		}	
		clr_character_flag = pope_dislikes_heathen_employed
	}
	option = {
		name = EVTOPTC_DRAGON.147	#Ignore Sapphire Flame
		ai_chance = {
			factor = 1
			modifier = {
				factor =  0
				NOT = {
					trait = cynical
					trait = excommunicated
				}
			}
		}
		FROM = {
			opinion = {
				modifier = opinion_ignore_SF_demands
				who = ROOT
				months = 60
			}
		}
		random_courtier = {
			limit = { has_character_flag = heathen_to_target }
			clr_character_flag = heathen_to_target
			
			opinion = {
				modifier = opinion_defended_me
				who = ROOT
				years = 5
			}
		}
		piety = -50
		hidden_tooltip = {
			FROM = {  character_event = { id = DRAGON.149 days = 1 } }
		}
	}
}

# They imprisoned the heathen
character_event = {
	id = DRAGON.148
	desc = EVTDESC_DRAGON.148
	picture = GFX_evt_into_the_dungeon
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_DRAGON.148 
		prestige = 5
	}
}

#they ignored us.
character_event = {
	id = DRAGON.149
	desc = EVTDESC_DRAGON.149
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_DRAGON.149
		prestige = -10
	}
}

# DRAGON.150 - Gain a rival
# Runs yearly, but only gain a rival if it points to another dragon. This way, it's more common the more dragons there are
character_event = {
	id = DRAGON.150
	hide_window = yes
	is_triggered_only = yes
	
	only_playable = yes
	min_age = 16
	only_capable = yes
	
	trigger = {
		trait = dragon
		NOT = {
			any_rival = {
				count = 3
				trait = dragon
			}
		}
	}
	
	immediate = {
		# Independent dragons usually rival other independent dragons
		random_list = {
			7 = {
				trigger = {
					independent = yes
				}
				random_independent_ruler = {
					if = {
						limit = {
							trait = dragon
							is_adult = yes
							NOR = { 
								is_rival = ROOT
								is_close_relative = ROOT
								is_cousin_of = ROOT
								is_friend = ROOT
								is_lover = ROOT
								is_nibling_of = ROOT
								any_spouse = { character = ROOT }
							}
						}
						character_event = { id = DRAGON.151 }
					}
				}
			}
			1 = {
				random_realm_character = {
					limit = { is_incapable = no }
					if = {
						limit = {
							trait = dragon
							is_adult = yes
							NOR = { 
								is_rival = ROOT
								is_close_relative = ROOT
								is_cousin_of = ROOT
								is_friend = ROOT
								is_lover = ROOT
								is_nibling_of = ROOT
								any_spouse = { character = ROOT }
							}
							# Liege or same liege
							OR = {
								liege = { character = ROOT }
								is_liege_of = ROOT
								same_liege = ROOT
							}
						}
						character_event = { id = DRAGON.151 }
					}
				}
			}
			2 = {}
		}
	}
}

character_event = {
	id = DRAGON.151
	desc = EVTDESC_DRAGON.151
	picture = GFX_evt_dragon_spire
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_DRAGON.151
		add_rival = FROM
		hidden_tooltip = {
			FROM = { character_event = { id = DRAGON.152 } }
		}
	}
}

character_event = {
	id = DRAGON.152
	desc = {
		trigger = {
			OR = {
				liege = { character = FROM }
				same_liege = FROM
				is_liege_of = FROM
			}
		}
		text = EVTDESCA_DRAGON.152
	}
	desc = {
		trigger = {
			NOR = {
				liege = { character = FROM }
				same_liege = FROM
				is_liege_of = FROM
			}
		}
		text = EVTDESCB_DRAGON.152
	}
	picture = GFX_evt_dragon_spire
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_DRAGON.152
		tooltip = { add_rival = FROM }
	}
}


# Sapphire Flame sells absolution for kinslaying
character_event = {
	id = DRAGON.153
	desc = EVTDESC_DRAGON.153
	picture = GFX_evt_dragon_face
	border = GFX_event_normal_frame_religion
	
	min_age = 16
	only_capable = yes
	prisoner = no
	religion = draconic_pagan_reformed
	war = no
	
	trigger = {
		controls_religion = yes
		OR = {
			NOT = { has_dlc = "Holy Fury" }
			has_religion_feature = religion_theocratic_head
			has_religion_feature = religion_autocephaly
		}
		
		any_independent_ruler = {
			religion = ROOT
			rightful_religious_head = ROOT
			OR = {
				AND = {
					trait = dynastic_kinslayer
					wealth = 100
				}
				AND = {
					trait = familial_kinslayer
					wealth = 200
				}
				AND = {
					trait = kinslayer
					wealth = 300
				}
			}
			piety = 100
			reverse_opinion  = { who = ROOT value = 0 }
			NOT = { has_character_flag = kinslaying_offered }
		}
	}
	
	mean_time_to_happen = {
		months = 48
	}
	immediate = {
		random_independent_ruler = {
			limit = {
				religion = ROOT
				rightful_religious_head = ROOT
				OR = {
					AND = {
						trait = dynastic_kinslayer
						wealth = 100
					}
					AND = {
						trait = familial_kinslayer
						wealth = 200
					}
					AND = {
						trait = kinslayer
						wealth = 300
					}
				}
				piety = 100
				reverse_opinion  = { who = ROOT value = 0 }
			}
			set_character_flag = kinslaying_offered
		}
	}
	
	option = {
		name = EVTOPTA_DRAGON.153
		ai_chance = { factor = 100 }
		
		random_independent_ruler = {
			limit = {
				religion = ROOT
				rightful_religious_head = ROOT
				OR = {
					AND = {
						trait = dynastic_kinslayer
						wealth = 100
					}
					AND = {
						trait = familial_kinslayer
						wealth = 200
					}
					AND = {
						trait = kinslayer
						wealth = 300
					}
				}
				piety = 100
				reverse_opinion  = { who = ROOT value = 0 }
			}
			
			character_event = { id = DRAGON.143 tooltip = EVTTOOLTIP39211 }
		}
	}
	
	option = {
		name = EVTOPTB_DRAGON.153	#incase someone plays the Sapphire Flame... players will mod it in, so might as well give them a fun option here...
		ai_chance = { factor = 0 }
	}
}


# Dragon child adopts dragon culture - start
character_event = {
	id = DRAGON.155
	hide_window = yes
	
	min_age = 6
	max_age = 11
	prisoner = no
	
	is_triggered_only = yes
	
	trigger = {
		trait = dragon
		OR = {
			NOT = { has_dlc = Conclave }
			has_focus = focus_ch_heritage
		}
		NOT = { culture = draconic }
		NOT = { has_character_flag = dragon_culture_childhood_event }
	}
	
	weight_multiplier = {
		days = 1
		modifier = {
			factor = 1.5
			OR = {
				religion = draconic_pagan
				religion = draconic_pagan_reformed
			}
		}
	}
	
	immediate = {
		set_character_flag = dragon_culture_childhood_event
		# Ping for localization
		educator = {
			character_event = { id = DRAGON.156 }
		}
	}
}

character_event = {
	id = DRAGON.156
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		FROM = {
			character_event = { id = DRAGON.157 }
		}
	}
}

character_event = {
	id = DRAGON.157
	desc = EVTDESC_DRAGON.157
	picture = GFX_evt_child_play
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_DRAGON.157
		hidden_tooltip = {
			educator = {
				character_event = {
					id = DRAGON.158
					days = 3
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_DRAGON.157
		trigger = { ai = no }
	}
}

character_event = {
	id = DRAGON.158
	desc = EVTDESC_DRAGON.158
	picture = GFX_evt_child_play
	
	is_triggered_only = yes
	
	# Encourage
	option = {
		name = EVTOPTA_DRAGON.158
		tooltip = {
			FROM = { culture = draconic }
		}
		hidden_tooltip = {
			FROM = {
				character_event = { id = DRAGON.159 }
			}
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 4
				culture = draconic
			}
			modifier = {
				factor = 2
				trait = dragon
			}
			modifier = {
				factor = 3
				OR = {
					religion = draconic_pagan
					religion = draconic_pagan_reformed
				}
			}
		}
	}
	
	# Discourage
	option = {
		name = EVTOPTB_DRAGON.158
		hidden_tooltip = {
			FROM = {
				character_event = { id = DRAGON.160 }
			}
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 3
				trait = monster_hunter
				NOR = { 
					trait = dragon
					trait = dragonborn
					culture = draconic
					religion = draconic_pagan
					religion = draconic_pagan_reformed
				}
			}
			modifier = {
				factor = 2
				OR = {
					religion_group = christian
					religion_group = muslim
					religion_group = jewish_group
				}
			}
		}
	}
}

character_event = {
	id = DRAGON.159
	desc = EVTDESC_DRAGON.159
	picture = GFX_evt_child_play
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_DRAGON.159
		culture = draconic
	}
}

character_event = {
	id = DRAGON.160
	desc = EVTDESC_DRAGON.160
	picture = GFX_evt_child_play
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_DRAGON.160
	}
}

# Dragon child adopts dragon religion - start
character_event = {
	id = DRAGON.161
	hide_window = yes
	
	min_age = 6
	max_age = 11
	prisoner = no
	
	is_triggered_only = yes
	
	trigger = {
		trait = dragon
		OR = {
			NOT = { has_dlc = Conclave }
			has_focus = focus_ch_heritage
		}
		NOR = {
			religion = draconic_pagan
			religion = draconic_pagan_reformed
		}
		NOT = { has_character_flag = dragon_religion_childhood_event }
	}
	weight_multiplier = {
		days = 1
		modifier = {
			factor = 0.3
			is_reformed_religion = yes
		}
		modifier = {
			factor = 0.5
			father = {
				is_reformed_religion = yes
				NOT = { religion = draconic_pagan_reformed }
			}
		}
		modifier = {
			factor = 0.5
			mother = {
				is_reformed_religion = yes
				NOT = { religion = draconic_pagan_reformed }
			}
		}
		modifier = {
			factor = 2
			religion_group = pagan_group
		}
		modifier = {
			factor = 1.5
			father = { religion_group = pagan_group }
		}
		modifier = {
			factor = 1.5
			mother = { religion_group = pagan_group }
		}
	}
	
	immediate = {
		# Ping for localization
		set_character_flag = dragon_religion_childhood_event
		educator = {
			character_event = { id = DRAGON.162 }
		}
	}
}

character_event = {
	id = DRAGON.162
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		FROM = {
			character_event = { id = DRAGON.163 }
		}
	}
}

character_event = {
	id = DRAGON.163
	desc = EVTDESC_DRAGON.163
	picture = GFX_evt_child_play
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_DRAGON.163
		hidden_tooltip = {
			educator = {
				character_event = {
					id = DRAGON.164
					days = 3
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_DRAGON.163
		trigger = { ai = no }
	}
}

character_event = {
	id = DRAGON.164
	desc = EVTDESC_DRAGON.164
	picture = GFX_evt_child_play
	
	is_triggered_only = yes
	
	# Encourage
	option = {
		name = EVTOPTA_DRAGON.164
		tooltip = {
			FROM = {
				if = {
					limit = { has_global_flag = draconic_pagan_reformation  }
					religion = draconic_pagan_reformed
				}
				else = {
					religion = draconic_pagan
				}
			}
		}
		hidden_tooltip = {
			FROM = {
				character_event = { id = DRAGON.165 }
			}
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 4
				OR = {
					religion = draconic_pagan
					religion = draconic_pagan_reformed
				}
			}
			modifier = {
				factor = 4
				culture = draconic
			}
			modifier = {
				factor = 2
				trait = dragon
			}
		}
	}
	
	# Discourage
	option = {
		name = EVTOPTB_DRAGON.164
		hidden_tooltip = {
			FROM = {
				character_event = { id = DRAGON.166 }
			}
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 3
				trait = monster_hunter
				NOR = { 
					trait = dragon
					culture = draconic
					religion = draconic_pagan
					religion = draconic_pagan_reformed
				}
			}
			modifier = {
				factor = 3
				is_reformed_religion = yes
				NOT = { religion = draconic_pagan_reformed }
			}
			modifier = {
				factor = 2
				is_priest = yes
				NOR = {
					religion = draconic_pagan
					religion = draconic_pagan_reformed
				}
			}
			modifier = {
				factor = 2
				trait = zealous
				NOR = {
					religion = draconic_pagan
					religion = draconic_pagan_reformed
				}
			}
		}
	}
}

character_event = {
	id = DRAGON.165
	desc = EVTDESC_DRAGON.165
	picture = GFX_evt_child_play
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_DRAGON.165
		if = {
			limit = { has_global_flag = draconic_pagan_reformation  }
			religion = draconic_pagan_reformed
		}
		else = {
			religion = draconic_pagan
		}
	}
}

character_event = {
	id = DRAGON.166
	desc = EVTDESC_DRAGON.166
	picture = GFX_evt_child_play
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_DRAGON.166
	}
}

letter_event = {
	id = DRAGON.167
	desc = EVTDESC_DRAGON.167
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_DRAGON.167
		tooltip = { FROM = { make_tributary = { who = ROOT tributary_type = draconic_tribute } } }
	}
}

letter_event = {
	id = DRAGON.168
	desc = EVTDESC_DRAGON.168
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_DRAGON.168
		tooltip = {
			set_truce = { who = FROM years = 1 }
			FROM = { set_truce = { who = ROOT years = 1 } }
		}
	}
}

# Yearly maintenance event for draconic tributes
character_event = {
	id = DRAGON.169
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		OR = {
			is_tributary = { type = draconic_tribute }
			has_character_modifier = draconic_tributary
		}
	}
	
	immediate = {
		# Remove modifier if character is not a tributary
		if = {
			limit = { NOT = { is_tributary = { type = draconic_tribute } } }
			remove_character_modifier = draconic_tributary
			break = yes
		}
		# Add modifier if missing
		if = {
			limit = { NOT = { has_character_modifier = draconic_tributary } }
			add_character_modifier = { name = draconic_tributary duration = -1 }
		}
		# Set event target
		suzerain = {
			save_event_target_as = dragon_suzerain
		}
		# Set variables
		# Continue
		set_variable = { which = tribute_continue_percent value = 6 }
		if = {
			limit = { trait = content }
			change_variable = { which = tribute_continue_percent value = 1 }
		}
		if = {
			limit = { trait = slothful }
			change_variable = { which = tribute_continue_percent value = 1 }
		}
		if = {
			limit = { opinion = { who = event_target:dragon_suzerain value = 50 } }
			change_variable = { which = tribute_continue_percent value = 2 }
		}
		# Pay off
		if = {
			limit = { NOT = { scaled_wealth = 2 } }
			set_variable = { which = tribute_payoff_percent value = 0 }
		}
		else = {
			set_variable = { which = tribute_payoff_percent value = 4 }
			if = {
				limit = { reverse_has_truce = event_target:dragon_suzerain }
				change_variable = { which = tribute_payoff_percent value = 1 }
			}
			if = {
				limit = { scaled_wealth = 3 }
				change_variable = { which = tribute_payoff_percent value = 1 }
			}
			if = {
				limit = { scaled_wealth = 4 }
				change_variable = { which = tribute_payoff_percent value = 1 }
			}
			if = {
				limit = { scaled_wealth = 6 }
				change_variable = { which = tribute_payoff_percent value = 1 }
			}
		}
		# Vassalize
		if = {
			limit = {
				OR = {
					independent = no
					higher_tier_than = event_target:dragon_suzerain
				}
			}
			set_variable = { which = tribute_vassal_percent value = 0 }
		}
		else = {
			set_variable = { which = tribute_vassal_percent value = 4 }
			if = {
				limit = { NOT = { ai_ambition = 0 } }
				change_variable = { which = tribute_vassal_percent value = 1 }
			}
			if = {
				limit = { religion = event_target:dragon_suzerain }
				change_variable = { which = tribute_vassal_percent value = 1 }
			}
			if = {
				limit = { culture = event_target:dragon_suzerain }
				change_variable = { which = tribute_vassal_percent value = 1 }
			}
			if = {
				limit = { dynasty = event_target:dragon_suzerain }
				change_variable = { which = tribute_vassal_percent value = 2 }
			}
			if = {
				limit = { is_incapable = yes }
				change_variable = { which = tribute_vassal_percent value = 2 }
			}
			if = {
				limit = { is_lover = event_target:dragon_suzerain }
				change_variable = { which = tribute_vassal_percent value = 1 }
			}
			if = {
				limit = { is_tribal = no }
				change_variable = { which = tribute_vassal_percent value = -1 }
			}
			if = {
				limit = { opinion = { who = event_target:dragon_suzerain value = 75 } }
				change_variable = { which = tribute_vassal_percent value = 1 }
			}
			if = {
				limit = { opinion = { who = event_target:dragon_suzerain value = 100 } }
				change_variable = { which = tribute_vassal_percent value = 2 }
			}
			if = {
				limit = {
					NOT = { realm_size = 2}
					event_target:dragon_suzerain = { realm_size = 4 }
				}
				change_variable = { which = tribute_vassal_percent value = 2 }
			}
			if = {
				limit = { NOT = { relative_power = { who = event_target:dragon_suzerain power = 0.5 } } }
				change_variable = { which = tribute_vassal_percent value = 1 }
			}
			if = {
				limit = { NOT = { relative_power = { who = event_target:dragon_suzerain power = 0.25 } } }
				change_variable = { which = tribute_vassal_percent value = 1 }
			}
			if = {
				limit = {
					NOT = { realm_size = 2 }
					tier = count
					capital_scope = {
						duchy = {
							any_de_jure_vassal_title = {
								count = 2
								tier = count
								owner = {
									top_liege = {
										character = event_target:dragon_suzerain
									}
								}
							}
						}
					}
				}
				change_variable = { which = tribute_vassal_percent value = 1 }
			}
			if = {
				limit = { de_jure_liege_or_above = event_target:dragon_suzerain }
				change_variable = { which = tribute_vassal_percent value = 2 }
			}
			if = {
				limit = { trait = proud }
				change_variable = { which = tribute_vassal_percent value = -1 }
			}
			if = {
				limit = { trait = humble }
				change_variable = { which = tribute_vassal_percent value = 1 }
			}
			if = {
				limit = { trait = ambitious }
				change_variable = { which = tribute_vassal_percent value = -2 }
			}
		}
		# War
		if = {
			limit = {
				OR = {
					war = yes
					has_truce = event_target:dragon_suzerain
				}
			}
			set_variable = { which = tribute_war_percent value = 0 }
		}
		else = {
			set_variable = { which = tribute_war_percent value = 4 }
			if = {
				limit = { ai_ambition = 75 }
				change_variable = { which = tribute_war_percent value = 1 }
			}
			if = {
				limit = { ai_greed = 75 }
				change_variable = { which = tribute_war_percent value = 1 }
			}
			if = {
				limit = { is_rival = event_target:dragon_suzerain }
				change_variable = { which = tribute_war_percent value = 1 }
			}
			if = {
				limit = { NOT = { personal_opinion = { who = event_target:dragon_suzerain value = 0 } } }
				change_variable = { which = tribute_war_percent value = 1 }
			}
			if = {
				limit = { NOT = { personal_opinion = { who = event_target:dragon_suzerain value = -24 } } }
				change_variable = { which = tribute_war_percent value = 1 }
			}
			if = {
				limit = { NOT = { personal_opinion = { who = event_target:dragon_suzerain value = -49 } } }
				change_variable = { which = tribute_war_percent value = 1 }
			}
			if = {
				limit = { NOT = { personal_opinion = { who = event_target:dragon_suzerain value = -74 } } }
				change_variable = { which = tribute_war_percent value = 1 }
			}
			if = {
				limit = { NOT = { personal_opinion = { who = event_target:dragon_suzerain value = -99 } } }
				change_variable = { which = tribute_war_percent value = 1 }
			}
			if = {
				limit = { personal_opinion = { who = event_target:dragon_suzerain value = 25 } }
				change_variable = { which = tribute_war_percent value = -1 }
			}
			if = {
				limit = { personal_opinion = { who = event_target:dragon_suzerain value =50 } }
				change_variable = { which = tribute_war_percent value = -1 }
			}
			if = {
				limit = { personal_opinion = { who = event_target:dragon_suzerain value = 75 } }
				change_variable = { which = tribute_war_percent value = -1 }
			}
			if = {
				limit = { personal_opinion = { who = event_target:dragon_suzerain value = 100 } }
				change_variable = { which = tribute_war_percent value = -1 }
			}
			if = {
				limit = { relative_power = { who = event_target:dragon_suzerain power = 1.5 } }
				change_variable = { which = tribute_war_percent value = 1 }
			}
			if = {
				limit = { relative_power = { who = event_target:dragon_suzerain power = 2.0 } }
				change_variable = { which = tribute_war_percent value = 1 }
			}
			if = {
				limit = { relative_power = { who = event_target:dragon_suzerain power = 3.0 } }
				change_variable = { which = tribute_war_percent value = 1 }
			}
			if = {
				limit = { relative_power = { who = event_target:dragon_suzerain power = 4.0 } }
				change_variable = { which = tribute_war_percent value = 1 }
			}
			if = {
				limit = { NOT = { relative_power = { who = event_target:dragon_suzerain power = 0.75 } } }
				change_variable = { which = tribute_war_percent value = -1 }
			}
			if = {
				limit = { NOT = { relative_power = { who = event_target:dragon_suzerain power = 0.5 } } }
				change_variable = { which = tribute_war_percent value = -1 }
			}
			if = {
				limit = { NOT = { relative_power = { who = event_target:dragon_suzerain power = 0.25 } } }
				change_variable = { which = tribute_war_percent value = -1 }
			}
			if = {
				limit = {
					OR = {
						trait = impaler
						trait = duelist
						trait = strategist
					}
				}
				change_variable = { which = tribute_war_percent value = 1 }
			}
			if = {
				limit = { has_ambition = obj_become_king }
				change_variable = { which = tribute_war_percent value = 1 }
			}
			if = {
				limit = { has_ambition = obj_see_the_realm_prosper }
				change_variable = { which = tribute_war_percent value = -2 }
			}
			if = {
				limit = { NOT = { realm_size = 2 } }
				change_variable = { which = tribute_war_percent value = -2 }
			}
			if = {
				limit = {
					OR = {
						has_character_flag = lost_tributary_independence_war
						has_character_flag = predicessor_lost_tributary_independence_war
					}
				}
				change_variable = { which = tribute_war_percent value = -2 }
			}
			if = {
				limit = { in_revolt = yes }
				change_variable = { which = tribute_war_percent value = -2 }
			}
			if = {
				limit = { trait = wroth }
				change_variable = { which = tribute_war_percent value = 1 }
			}
			if = {
				limit = { trait = brave }
				change_variable = { which = tribute_war_percent value = 1 }
			}
			if = {
				limit = { trait = craven }
				change_variable = { which = tribute_war_percent value = -3 }
			}
		}
		# Calculate total
		set_variable = { which = local_total which = tribute_continue_percent }
		change_variable = { which = local_total which = tribute_payoff_percent }
		change_variable = { which = local_total which = tribute_vassal_percent }
		change_variable = { which = local_total which = tribute_war_percent }
		multiply_variable = { which = tribute_continue_percent value = 100 }
		multiply_variable = { which = tribute_payoff_percent value = 100 }
		multiply_variable = { which = tribute_vassal_percent value = 100 }
		multiply_variable = { which = tribute_war_percent value = 100 }
		divide_variable = { which = tribute_continue_percent which = local_total }
		divide_variable = { which = tribute_payoff_percent which = local_total }
		divide_variable = { which = tribute_vassal_percent which = local_total }
		divide_variable = { which = tribute_war_percent which = local_total }
	}
}

# On death, remove modifier for former draconic tributes
character_event = {
	id = DRAGON.170
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		any_tributary = { always = yes }
	}
	
	immediate = {
		any_tributary = {
			character_event = { id = DRAGON.170 days = 1 }
		}
	}
}

# Sapphire Flame cannot afford your requested loan
character_event = {
	id = DRAGON.171
	desc = EVTDESC_DRAGON.171
	picture = GFX_evt_dragon_horde
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTAHF20017
	}
}

# Make sure loan will be accepted.  Redo math in case of issues
character_event = {
	id = DRAGON.172
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = { NOT = { check_variable = { which = local_ai_acceptance_score value = 1 } } }
			FROMFROM = { letter_event = { id = DRAGON.92 } }
			break = yes
		}
		export_to_variable = { which = GoldAmt value = yearly_income who = FROMFROM }
		multiply_variable = { which = GoldAmt value = 2 }
		export_to_variable = { which = MyGoldAmt value = wealth }
		if = {
			limit = {
				NOT = { check_variable = { which = MyGoldAmt which = GoldAmt } }
			}
			FROMFROM = {
				character_event = { id = DRAGON.171 }
			}
			break = yes
		}
		letter_event = { id = DRAGON.90 }
	}
}

# Pay back Sapphire Flame for loan
character_event = {
	id = DRAGON.173
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		change_variable = { which = years_SF_loan value = 1 }
		transfer_scaled_wealth = { to = FROM value = 0.25 }
		if = {
			limit = { check_variable = { which = years_SF_loan value = 10 } }
			character_event = { id = DRAGON.174 }
			set_variable = { which = years_SF_loan value = 0 }
		}
		else = {
			repeat_event = { id = DRAGON.173 days = 365 }
		}
	}
}

# Announce end of loan
character_event = {
	id = DRAGON.174
	desc = EVTDESC_DRAGON.174
	picture = GFX_evt_dragon_face
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA3542
		remove_character_modifier = SF_loan
	}
}

# DRAGON.178 - Unimportant landed dragon marries an unimportant unlanded dragon
# Should help avoid dragons breeding themselves to extinction
character_event = {
	id = DRAGON.178
	hide_window = yes
	is_triggered_only = yes
	
	only_rulers = yes
	ai = yes
	min_age = 18
	capable_only = yes
	prisoner = no
	in_command = no
	
	trigger = {
		is_marriage_adult = yes
		is_pregnant = no
		NOR = {
			trait = celibate
			trait = horse
			trait = cat
		}
		NOT = { is_ascetic_trigger = yes }
		NOT = { has_character_flag = ai_flag_refuse_marriage }
		NOT = { has_character_flag = cannot_marry }
		can_marry = yes
		is_undead = no
		is_infertile = no
		NOT = {
			any_close_relative = { ai = no }
		}
		trait = dragon
		any_courtier = {
			OR = {
				AND = {
					is_female = yes
					ROOT = { is_female = no }
				}
				AND = {
					is_female = no
					ROOT = { is_female = yes }
				}
			}
			ai = yes
			is_consort = no
			is_married = no
			is_landed = no
			is_marriage_adult = yes
			is_pregnant = no
			NOR = {
				trait = celibate
				trait = horse
				trait = cat
			}
			NOT = { is_ascetic_trigger = yes }
			NOT = { has_character_flag = ai_flag_refuse_marriage }
			NOT = { has_character_flag = cannot_marry }
			is_undead = no
			is_infertile = no
			NOT = {
				any_close_relative = { ai = no }
			}
			trait = dragon
			can_marry = ROOT
		}
	}
	
	weight_multiplier = {
		days = 1
		modifier = {
			factor = 0.75
			trait = homosexual
		}
		modifier = {
			factor = 0.9
			trait = chaste
		}
		modifier = {
			factor = 1.2
			is_30 = yes
		}
		modifier = {
			factor = 1.2
			is_40 = yes
		}
	}
	
	immediate = {
		any_courtier = {
			limit = {
				OR = {
					AND = {
						is_female = yes
						ROOT = { is_female = no }
					}
					AND = {
						is_female = no
						ROOT = { is_female = yes }
					}
				}
				ai = yes
				is_consort = no
				is_married = no
				is_landed = no
				is_marriage_adult = yes
				is_pregnant = no
				NOR = {
					trait = celibate
					trait = horse
					trait = cat
				}
				NOT = { is_ascetic_trigger = yes }
				NOT = { has_character_flag = ai_flag_refuse_marriage }
				NOT = { has_character_flag = cannot_marry }
				is_undead = no
				is_infertile = no
				NOT = {
					any_close_relative = { ai = no }
				}
				trait = dragon
				can_marry = ROOT
			}
			score_value = {
				value = 10
				romantic_courtier_selection_score = yes
				additive_modifier = {
					value = 1
					trait = underhanded_rogue
				}
				additive_modifier = {
					value = 1
					trait = charismatic_negotiator
				}
				additive_modifier = {
					value = 2
					trait = grey_eminence
				}
				additive_modifier = {
					value = 1
					trait = thrifty_clerk
				}
				additive_modifier = {
					value = 2
					trait = fortune_builder
				}
				additive_modifier = {
					value = 3
					trait = midas_touched
				}
				additive_modifier = {
					value = -1
					trait = scholarly_theologian
				}
				additive_modifier = {
					value = -1
					trait = mastermind_theologian
				}
				additive_modifier = {
					value = -10
					trait = syphilitic
				}
				additive_modifier = {
					value = -10
					trait = inbred
				}
				additive_modifier = {
					value = 4
					trait = strong
				}
				additive_modifier = {
					value = -2
					trait = weak
				}
				additive_modifier = {
					value = 6
					trait = genius
				}
				additive_modifier = {
					value = 3
					trait = quick
				}
				additive_modifier = {
					value = 3
					trait = fair
				}
				additive_modifier = {
					value = 4
					trait = hedonist
				}
				additive_modifier = {
					value = -10
					trait = has_aztec_disease
				}
			}
			add_spouse = ROOT
		}
	}
}

# DRAGON.179 - Unimportant landed dragon makes a concubine of an unimportant unlanded dragon
# Should help avoid dragons breeding themselves to extinction
# This event assumes the default 3 concubines until better code exists to check if a character can take a concubine
character_event = {
	id = DRAGON.179
	hide_window = yes
	is_triggered_only = yes
	
	only_rulers = yes
	ai = yes
	min_age = 18
	capable_only = yes
	prisoner = no
	in_command = no
	
	trigger = {
		has_concubinage = yes
		is_female = no
		num_of_consorts < 3
		is_marriage_adult = yes
		NOR = {
			trait = celibate
			trait = horse
			trait = cat
		}
		NOT = { is_ascetic_trigger = yes }
		NOT = { has_character_flag = ai_flag_refuse_marriage }
		NOT = { has_character_flag = cannot_marry }
		is_undead = no
		is_infertile = no
		NOT = {
			any_close_relative = { ai = no }
		}
		trait = dragon
		any_courtier = {
			is_female = yes
			ai = yes
			is_consort = no
			is_married = no
			is_landed = no
			is_marriage_adult = yes
			is_pregnant = no
			NOR = {
				trait = celibate
				trait = horse
				trait = cat
			}
			NOT = { is_ascetic_trigger = yes }
			NOT = { has_character_flag = ai_flag_refuse_concubinage }
			is_undead = no
			is_infertile = no
			NOT = {
				any_close_relative = { ai = no }
			}
			trait = dragon
		}
	}
	
	weight_multiplier = {
		days = 1
		modifier = {
			factor = 0.75
			trait = homosexual
		}
		modifier = {
			factor = 0.9
			trait = chaste
		}
		modifier = {
			factor = 1.2
			is_30 = yes
		}
		modifier = {
			factor = 1.2
			is_40 = yes
		}
		modifier = {
			factor = 0.5
			is_married = no # Try to marry first
		}
	}
	
	immediate = {
		any_courtier = {
			limit = {
				is_female = yes
				ai = yes
				is_consort = no
				is_married = no
				is_landed = no
				is_marriage_adult = yes
				is_pregnant = no
				NOR = {
					trait = celibate
					trait = horse
					trait = cat
				}
				NOT = { is_ascetic_trigger = yes }
				NOT = { has_character_flag = ai_flag_refuse_concubinage }
				is_undead = no
				is_infertile = no
				NOT = {
					any_close_relative = { ai = no }
				}
				trait = dragon
			}
			score_value = {
				value = 10
				romantic_courtier_selection_score = yes
				additive_modifier = {
					value = 1
					trait = underhanded_rogue
				}
				additive_modifier = {
					value = 1
					trait = charismatic_negotiator
				}
				additive_modifier = {
					value = 2
					trait = grey_eminence
				}
				additive_modifier = {
					value = 1
					trait = thrifty_clerk
				}
				additive_modifier = {
					value = 2
					trait = fortune_builder
				}
				additive_modifier = {
					value = 3
					trait = midas_touched
				}
				additive_modifier = {
					value = -1
					trait = scholarly_theologian
				}
				additive_modifier = {
					value = -1
					trait = mastermind_theologian
				}
				additive_modifier = {
					value = -10
					trait = syphilitic
				}
				additive_modifier = {
					value = -10
					trait = inbred
				}
				additive_modifier = {
					value = 4
					trait = strong
				}
				additive_modifier = {
					value = -2
					trait = weak
				}
				additive_modifier = {
					value = 6
					trait = genius
				}
				additive_modifier = {
					value = 3
					trait = quick
				}
				additive_modifier = {
					value = 3
					trait = fair
				}
				additive_modifier = {
					value = 4
					trait = hedonist
				}
				additive_modifier = {
					value = -10
					trait = has_aztec_disease
				}
			}
			add_spouse = ROOT
		}
	}
}