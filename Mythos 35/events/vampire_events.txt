namespace = VAMPIRE
### Events related to Vampires.  Doesn not include events for multiple monster species.

# VAMPIRE.1 - was MYTH.6 - Vampire aging
#character_event = {
#	id = "VAMPIRE.1"
#	title = EVTNAME_VAMPIRE.1
#	desc = "EVTDESC_VAMPIRE.1"
#	picture = GFX_evt_crusaders
#	border = GFX_event_normal_frame_war
#	
#	trigger = {
#		trait = vampire
#	}
#	
#	mean_time_to_happen = {
#		months = 360
#	}
#	
#	option = {
#		name = "EVTOPTA_VAMPIRE.1"
#		change_intrigue = 1
#		change_learning = 2
#		health = 0.1
#	}
#}

# VAMPIRE.2 - was MYTH.17 - Spouse Turned
character_event = {
	id = "VAMPIRE.2"
	title = EVTNAME_VAMPIRE.2
	desc = "EVTDESC_VAMPIRE.2"
	picture = GFX_evt_lovers
	border = GFX_event_normal_frame_war
	
	only_playable = yes
	is_married = yes
	is_triggered_only = yes
	
	trigger = {
		trait = vampire 
		spouse = {
			NOR = {
				trait = vampire
				trait = werewolf
				trait = monster_hunter
				trait = god
				trait = zombie
				trait = dragon
				trait = djinn
				trait = giant
			}
			ai = yes
		}
	}
	
	weight_multiplier = {
		days = 1
		modifier = {
			factor = 2
			trait = lustful
		}
		modifier = {
			factor = 2
			OR = {
				trait = strong
				trait = robust
			}
		}
		modifier = {
			factor = 0.1
			trait = weak
		}
	}
	
	option = {
		name = "EVTOPTA_VAMPIRE.2"
		spouse = { add_trait = vampire }
		hidden_tooltip = { 
			spouse = {
				reverse_opinion = { modifier = opinion_vampire_child who = ROOT duration = -1 }
				opinion = { modifier = opinion_sire who = ROOT duration = -1 }
				ROOT = {
					any_owned_bloodline = {
						limit = {
							OR = {
								has_bloodline_flag = high_vampiric_inheritance
								has_bloodline_flag = vampiric_inheritance
							}
						}
						add_bloodline_member = PREVPREV
					}
					any_opinion_modifier_target = {
						limit = {
							reverse_has_opinion_modifier = { who = PREV modifier = opinion_sire }
						}
						opinion = { modifier = opinion_vampire_child who = PREVPREV }
						reverse_opinion = { modifier = opinion_sire who = PREVPREV }
					}
				}
				if = {
					limit = { any_owned_bloodline = { has_bloodline_flag = vampire_auto_known } }
					add_trait = known_vampire
				}
				else = {
					add_trait = secret_vampire
				}
				if = {
					limit = { any_owned_bloodline = { has_bloodline_flag = vampire_auto_ugly } }
					remove_trait = fair
					add_trait = ugly
				}
			}
		}
	}
}

# VAMPIRE.3 - was MYTH.36 - Fledgling becomes Vampire - Shouldn't occur, left just in case
character_event = {
	id = "VAMPIRE.3"
	title = EVTNAME_VAMPIRE.3
	desc = "EVTDESC_VAMPIRE.3"
	picture = GFX_evt_crusaders
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	min_age = 16
	
	trigger = {
		trait = fledgling
	}
	
	weight_multiplier = { days = 1 }
	
	option = {
		name ="EVTOPTA_VAMPIRE.3"
		remove_trait = fledgling
		add_trait = vampire
	}
}

# VAMPIRE.4 - Deleted

# VAMPIRE.5 - was MYTH.80 - Offer of vampirism
letter_event = {
	id = VAMPIRE.5
	title = EVTNAME_VAMPIRE.5
	desc = EVTDESC_VAMPIRE.5
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.5 # Accept
		trigger = { NOT = { trait = werewolf } }
		tooltip = { add_trait = vampire }
		if = {
			limit = {
				FROMFROM = {
					any_owned_bloodline = {
						OR = {
							has_bloodline_flag = high_vampiric_inheritance
							has_bloodline_flag = vampiric_inheritance
						}
					}
				}
			}
			tooltip = {
				FROMFROM = {
					any_owned_bloodline = {
						limit = {
							OR = {
								has_bloodline_flag = high_vampiric_inheritance
								has_bloodline_flag = vampiric_inheritance
							}
						}
						add_bloodline_member = ROOT
					}
				}
			}
		}
		if = {
			limit = {
				FROMFROM = {
					any_owned_bloodline = {
						has_bloodline_flag = vampire_auto_known
					}
				}
			}
			tooltip = {
				add_trait = known_vampire
			}
		}
		if = {
			limit = {
				FROMFROM = {
					any_owned_bloodline = {
						has_bloodline_flag = vampire_auto_ugly
					}
				}
			}
			tooltip = {
				add_trait = ugly
			}
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 1.5
				trait = ambitious
			}
			modifier = {
				factor = 1.2
				trait = cynical
			}
			modifier = {
				factor = 1.1
				trait = cruel
			}
			modifier = {
				factor = 1.2
				trait = impaler
			}
			modifier = {
				factor = 1.1
				trait = proud
			}
			modifier = {
				factor = 1.1
				trait = envious
			}
			modifier = {
				factor = 1.2
				opinion = { who = FROMFROM value = 40 }
			}
			modifier = {
				factor = 1.4
				opinion = { who = FROMFROM value = 60 }
			}
			modifier = {
				factor = 1.6
				opinion = { who = FROMFROM value = 80 }
			}
			modifier = {
				factor = 2
				opinion = { who = FROMFROM value = 100 }
			}
			modifier = {
				factor = 1.2
				FROMFROM = { diplomacy = 10 }
			}
			modifier = {
				factor = 1.2
				FROMFROM = { diplomacy = 20 }
			}
			modifier = {
				factor = 1.2
				FROMFROM = { diplomacy = 30 }
			}
			modifier = {
				factor = 1.2
				FROMFROM = { diplomacy = 40 }
			}
			modifier = {
				factor = 1.2
				liege = { character = FROMFROM }
				is_ruler = no
			}
			modifier = {
				factor = 1.1
				liege = { character = FROMFROM }
				is_ruler = yes
			}
			modifier = {
				factor = 5
				OR = {
					religion = satanist
					secret_religion = satanist
					is_in_society = the_satanists
				}
			}
			# Characters who need supernatural healing likely to accept. Covers less than Werewolf
			modifier = {
				factor = 2.5
				trait = infirm
			}
			# Diseases can get healed too, but only care about the most severe
			modifier = {
				factor = 1.5
				OR = {
					trait = syphilitic
					trait = leper
					trait = has_typhus
					trait = has_bubonic_plague
					trait = has_small_pox
					trait = has_aztec_disease
				}
			}
			modifier = {
				factor = 1.5
				is_friend = FROMFROM
			}
			modifier = {
				factor = 3
				culture = vampire_culture
			}
			modifier = {
				factor = 10000
				prisoner = yes
			}
			modifier = {
				factor = 1.5
				FROMFROM = {
					any_owned_bloodline = { has_bloodline_flag = high_vampiric_inheritance }
				}
			}
		}
		hidden_tooltip = { FROMFROM = { letter_event = { id = VAMPIRE.6 days = 7 } } }
	}
	option = {
		name = EVTOPTB_VAMPIRE.5 # Decline
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				OR = {
					religion_group = christian
					religion_group = muslim
					religion_group = jewish_group
				}
			}
			modifier = {
				factor = 2
				NOT = { ai_ambition = -20 }
			}
			modifier = {
				factor = 0
				prisoner = yes
				NOT = { trait = werewolf }
			}
			modifier = {
				factor = 1.5
				culture = werewolf_culture
			}
			modifier = {
				factor = 1.2
				opinion = { who = FROMFROM value < 0 }
			}
			modifier = {
				factor = 1.4
				opinion = { who = FROMFROM value < -30 }
			}
			modifier = {
				factor = 1.6
				opinion = { who = FROMFROM value < -60 }
			}
			modifier = {
				factor = 2
				opinion = { who = FROMFROM value < -80 }
			}
			modifier = {
				factor = 1.2
				trait = lustful
			}
			modifier = {
				factor = 1.2
				trait = drunkard
			}
			modifier = {
				factor = 1.1
				trait = gluttonous
			}
			modifier = {
				factor = 1.5
				trait = kind
			}
			modifier = {
				factor = 3
				FROMFROM = {
					any_owned_bloodline = { has_bloodline_flag = vampire_auto_ugly }
				}
				NOT = { trait = ugly }
				OR = {
					trait = proud
					trait = fair
					trait = groomed
				}
			}
		}
		opinion = { modifier = opinion_turn_refusal who = FROMFROM  }

		hidden_tooltip = { FROMFROM = { letter_event = { id = VAMPIRE.7 days = 7 } } }
	}
	option = {
		name = EVTOPTC_VAMPIRE.5 # Decline and Expose the Monster
		piety = 30
		prestige = 30
		trigger = {
			OR = { 
				religion_group = muslim
				religion_group = christian
				religion_group = jewish_group
			}
			trait = zealous
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 5
				OR = {
					trait = brave
					opinion = { who = ROOT value = -50 }
				}
			}
			modifier = {
				factor = 2
				ai_ambition = 50
			}
			modifier = {
				factor = 0.1
				culture = vampire_culture
			}
			modifier = {
				factor = 2
				culture = werewolf_culture
			}
			modifier = {
				factor = 2
				trait = werewolf
			}
			modifier = {
				factor = 2
				opinion = { who = FROMFROM value < -80 }
			}
			modifier = {
				factor = 2
				opinion = { who = FROMFROM value < -99 }
			}
			modifier = {
				factor = 2
				has_game_rule = { name = secrecy value = more }
			}
			modifier = {
				factor = 0.5
				has_game_rule = { name = secrecy value = fewer }
			}
			modifier = {
				factor = 0
				prisoner = yes
			}
		}
		opinion = { modifier = opinion_turn_refusal who = FROMFROM  }
		hidden_tooltip = { FROMFROM = { letter_event = { id = VAMPIRE.8 days = 7 } } }
	}
}

# VAMPIRE.6 - was MYTH.81 - Vampire receives positive answer to offer
letter_event = {
	id = VAMPIRE.6
	title = EVTNAME_VAMPIRE.6
	desc = EVTDESC_VAMPIRE.6

	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.6
		FROM = {
			add_trait = vampire
			ROOT = {
				any_owned_bloodline = {
					limit = {
						OR = {
							has_bloodline_flag = high_vampiric_inheritance
							has_bloodline_flag = vampiric_inheritance
						}
					}
					add_bloodline_member = FROM
				}
			}
			if = {
				limit = { any_owned_bloodline = { has_bloodline_flag = vampire_auto_known } }
				add_trait = known_vampire
			}
			else = {
				add_trait = secret_vampire
			}
			if = {
				limit = { any_owned_bloodline = { has_bloodline_flag = vampire_auto_ugly } }
				remove_trait = fair
				add_trait = ugly
			}
			save_persistent_event_target = { name = sire scope = ROOT }
			opinion = { who = ROOT modifier = vampire_blood_bond years = 50 }
			reverse_opinion = { modifier = opinion_vampire_child who = ROOT duration = -1 }
			opinion = { modifier = opinion_sire who = ROOT duration = -1 }
			ROOT = {
				any_opinion_modifier_target = {
					limit = {
						reverse_has_opinion_modifier = { who = PREV modifier = opinion_sire }
					}
					opinion = { modifier = opinion_vampire_child who = PREVPREV }
					reverse_opinion = { modifier = opinion_sire who = PREVPREV }
				}
			}
			if = {
				limit = { NOT = { dynasty = ROOT } }
				dynasty = ROOT
			}
			if = {
				limit = { NOT = { religion = ROOT } }
				religion = ROOT
			}
			if = {
				limit = { 
					host = { character = ROOT }
					prisoner = yes
				}
				prisoner = no
			}
			hidden_tooltip = {
				IF = {
					limit = { is_female = yes }
					set_mother = ROOT
					set_real_father = 0
					set_father = 0
				}
				IF = {
					limit = { is_female = no }
					set_father = ROOT
					set_real_father = ROOT
					set_mother = 0
				}
				clr_character_flag = considering_decision
				recalc_succession = yes
			}
			prestige = 50
		}
	}
	option = {
		name = EVTOPTB_VAMPIRE.6
		FROM = {
			add_trait = vampire
			ROOT = {
				any_owned_bloodline = {
					limit = {
						OR = {
							has_bloodline_flag = high_vampiric_inheritance
							has_bloodline_flag = vampiric_inheritance
						}
					}
					random = {
						chance = 50
						modifier = {
							factor = 0.1
							has_bloodline_flag = high_vampiric_inheritance
						}
						add_bloodline_member = FROM
					}
				}
			}
			if = {
				limit = { any_owned_bloodline = { has_bloodline_flag = vampire_auto_known } }
				add_trait = known_vampire
			}
			else = {
				add_trait = secret_vampire
			}
			if = {
				limit = { any_owned_bloodline = { has_bloodline_flag = vampire_auto_ugly } }
				remove_trait = fair
				add_trait = ugly
			}
			hidden_tooltip = { add_trait = secret_vampire }
			if = {
				limit = { host = { character = ROOT } }
				prisoner = no
			}
			hidden_tooltip = {
				FROM = { clr_character_flag = considering_decision }
			}
		}
		prestige = 20
	}
}

# VAMPIRE.7 - was MYTH.82 - Vampire receives negative answer to offer
letter_event = {
	id = VAMPIRE.7
	title = EVTNAME_VAMPIRE.7
	desc = EVTDESC_VAMPIRE.7

	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.7
		prestige = -10
		hidden_tooltip = {
			FROM = { clr_character_flag = considering_decision }
		}
	}
}

# VAMPIRE.8 - was MYTH.83 - Vampire receives negative answer and is exposed
letter_event = {
	id = VAMPIRE.8
	title = EVTNAME_VAMPIRE.8
	desc = EVTDESC_VAMPIRE.8

	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.8
		prestige = -10
		if = {
			limit = { NOT = { trait = known_vampire } }
			add_trait = known_vampire
			hidden_tooltip = { 
				remove_character_modifier = known_monster
				remove_trait = secret_vampire
			}
			any_realm_character = { character_event = { id = VAMPIRE.23 } } # Court finds out character is a werewolf
			if = {
				limit = {
					independent = no
				}
				liege = { character_event = { id = VAMPIRE.23 } } # Liege finds out character is a werewolf
			}
		}
		else = {
			any_courtier = {
				limit = { NOT = { trait = vampire } }
				random = {
					chance = 50
					opinion = {
						who = ROOT
						modifier = opinion_terrified
						years = 5
					}
				}
			}
			any_vassal = {
				limit = { NOT = { trait = vampire } }
				random = {
					chance = 50
					opinion = {
						who = ROOT
						modifier = opinion_terrified
						years = 5
					}
				}
			}
		}
		hidden_tooltip = {
			FROM = { clr_character_flag = considering_decision }
		}
	}
}

# VAMPIRE.9 - Results of feeding on someone
# ROOT is feeder, FROMFROM is being fed on
character_event = {
	id = VAMPIRE.9
	picture = GFX_evt_dark_love
	border = GFX_event_normal_frame_war
	
	desc = {
		trigger = {
			has_character_flag = vampire_feed_kill
			has_character_flag = vampire_feed_escape
			has_character_flag = vf_heal
		}
		text = EVTDESC_VAMPIRE.9a
	}
	desc = {
		trigger = {
			has_character_flag = vampire_feed_kill
			has_character_flag = vampire_feed_escape
			NOT = { has_character_flag = vf_heal }
		}
		text = EVTDESC_VAMPIRE.9b
	}
	desc = {
		trigger = {
			OR = {
				has_character_flag = vampire_feed_survive
				has_character_flag = vampire_feed_turn
			}
			has_character_flag = vampire_feed_escape
		}
		text = EVTDESCA_VAMPIRE.9
		picture = GFX_evt_shadow
	}
	desc = {
		trigger = {
			has_character_flag = vampire_feed_kill
			has_character_flag = vampire_feed_suspect
		}
		text = EVTDESCB_VAMPIRE.9
		picture = GFX_evt_suspicious_noble
	}
	desc = {
		trigger = {
			OR = {
				has_character_flag = vampire_feed_survive
				has_character_flag = vampire_feed_turn
			}
			has_character_flag = vampire_feed_suspect
		}
		text = EVTDESCC_VAMPIRE.9
		picture = GFX_evt_suspicious_noble
	}
	desc = {
		trigger = {
			has_character_flag = vampire_feed_kill
			has_character_flag = vampire_feed_caught
		}
		text = EVTDESD_VAMPIRE.9
		picture = GFX_evt_humiliation_prisoner
	}
	desc = {
		trigger = {
			OR = {
				has_character_flag = vampire_feed_survive
				has_character_flag = vampire_feed_turn
			}
			has_character_flag = vampire_feed_caught
		}
		text = EVTDESCE_VAMPIRE.9
		picture = GFX_evt_humiliation_prisoner
	}
	
	is_triggered_only = yes
	
	immediate = {
		# Clear disease flags here since they are no longer cleared at the end
		clr_character_flag = vf_sick_tuberculosis
		clr_character_flag = vf_sick_typhoid_fever
		clr_character_flag = vf_sick_typhus
		clr_character_flag = vf_sick_bubonic_plague
		clr_character_flag = vf_sick_measles
		clr_character_flag = vf_sick_small_pox
		clr_character_flag = vf_sick_aztec_disease
		clr_character_flag = vf_sick_syphilitic
		clr_character_flag = vf_sick_flu
		clr_character_flag = vf_sick_dysentery
		clr_character_flag = vf_sick_gout
		clr_character_flag = vf_sick_food_poisoning
		clr_character_flag = vf_sick_rabies
		clr_character_flag = vf_sick_cancer
		clr_character_flag = vf_sick_pneumonic
		clr_character_flag = vf_sick_dancing_plague
		clr_character_flag = vf_sick_ill
		clr_character_flag = vf_sick_leper
		clr_character_flag = vf_sick_lovers_pox
		
		# What effect does feeding give
		if = {
			limit = {
				OR = {
					trait = wounded
					trait = infirm
					trait = blinded
					trait = eunuch
					trait = severely_injured
					is_maimed_trigger = yes
					has_minor_injury = yes
					has_scarred_trait_trigger = yes
				}
			}
			random_list = {
				16 = {
					modifier = {
						factor = 0.6 # Only minor injuries
						NOR = {
							trait = wounded
							trait = infirm
							trait = blinded
							trait = eunuch
							trait = severely_injured
							is_maimed_trigger = yes
						}
					}
					set_character_flag = vf_heal
				}
				3 = {
					modifier = {
						factor = 0
						NOT = { has_character_flag = vampire_feed_kill }
					}
					set_character_flag = vf_stat
				}
				1 = {
					modifier = {
						factor = 0
						NOT = { has_character_flag = vampire_feed_kill }
					}
					set_character_flag = vf_heal
					set_character_flag = vf_stat
				}
			}
		}
		else_if = {
			limit = { has_character_flag = vampire_feed_kill }
			set_character_flag = vf_stat
		}
		# Automatic feeding can let you feed on vampires, etc.  In these cases, no healing or stats
		if = {
			limit = {
				FROM = {
					OR = {
						trait = vampire
						trait = werewolf
						trait = zombie
						trait = demon_trait
						trait = ethereal_trait
					}
					NOT = {
						any_owned_bloodline = { has_bloodline_flag = vampire_feed_any }
					}
				}
			}
			clr_character_flag = vf_heal
			clr_character_flag = vf_stat
		}
		# Heal an injury
		if = {
			limit = {
				has_character_flag = vf_heal
			}
			random_list = {
				3 = {
					trigger = { trait = wounded }
					set_character_flag = vf_heal_wounded
					set_variable = { which = healing value = 1 }
				}
				3 = {
					trigger = { trait = infirm }
					set_character_flag = vf_heal_infirm
					set_variable = { which = healing value = 1 }
				}
				3 = {
					trigger = { trait = maimed }
					set_character_flag = vf_heal_maimed
					set_variable = { which = healing value = 5 }
				}
				1 = {
					trigger = { has_scarred_trait_trigger = yes }
					set_character_flag = vf_heal_scarred
					set_variable = { which = healing value = 1 }
				}
				3 = {
					trigger = { trait = disfigured }
					set_character_flag = vf_heal_disfigured
					set_variable = { which = healing value = 6 }
				}
				3 = {
					trigger = { trait = one_eyed }
					set_character_flag = vf_heal_one_eyed
					set_variable = { which = healing value = 3 }
				}
				3 = {
					trigger = { trait = blinded }
					set_character_flag = vf_heal_blinded
					set_variable = { which = healing value = 4 }
				}
				3 = {
					trigger = { trait = one_handed }
					set_character_flag = vf_heal_one_handed
					set_variable = { which = healing value = 5 }
				}
				3 = {
					trigger = { trait = one_legged }
					set_character_flag = vf_heal_one_legged
					set_variable = { which = healing value = 5 }
				}
				3 = {
					trigger = { trait = mangled }
					set_character_flag = vf_heal_mangled
					set_variable = { which = healing value = 6 }
				}
				3 = {
					trigger = { trait = eunuch }
					set_character_flag = vf_heal_eunuch
					set_variable = { which = healing value = 1 }
				}
				3 = {
					trigger = { trait = severely_injured }
					set_character_flag = vf_heal_severely_injured
					set_variable = { which = healing value = 1 }
				}
				1 = {
					trigger = { has_minor_injury = yes }
					# Minor, so heal all of them
					set_character_flag = vf_heal_minor_injuries
					set_variable = { which = healing value = 1 }
				}
			}
			# Possibly heal a second injury
			random = {
				chance = 25
				random_list = {
					3 = {
						trigger = { 
							trait = wounded
							NOT = { has_character_flag = vf_heal_wounded }
						}
						set_character_flag = vf_heal_wounded
						change_variable = { which = healing value = 1 }
					}
					3 = {
						trigger = { 
							trait = infirm
							NOT = { has_character_flag = vf_heal_infirm }
						}
						set_character_flag = vf_heal_infirm
						change_variable = { which = healing value = 1 }
					}
					3 = {
						trigger = { 
							trait = maimed
							NOT = { has_character_flag = vf_heal_maimed }
						}
						set_character_flag = vf_heal_maimed
						change_variable = { which = healing value = 5 }
					}
					1 = {
						trigger = { 
							has_scarred_trait_trigger = yes
							NOT = { has_character_flag = vf_heal_scarred }
						}
						set_character_flag = vf_heal_scarred
						change_variable = { which = healing value = 1 }
					}
					3 = {
						trigger = { 
							trait = disfigured
							NOT = { has_character_flag = vf_heal_disfigured }
						}
						set_character_flag = vf_heal_disfigured
						change_variable = { which = healing value = 6 }
					}
					3 = {
						trigger = { 
							trait = one_eyed
							NOT = { has_character_flag = vf_heal_one_eyed }
						}
						set_character_flag = vf_heal_one_eyed
						change_variable = { which = healing value = 3 }
					}
					3 = {
						trigger = { 
							trait = blinded
							NOT = { has_character_flag = vf_heal_blinded }
						}
						set_character_flag = vf_heal_blinded
						change_variable = { which = healing value = 4 }
					}
					3 = {
						trigger = { 
							trait = one_handed
							NOT = { has_character_flag = vf_heal_one_handed }
						}
						set_character_flag = vf_heal_one_handed
						change_variable = { which = healing value = 5 }
					}
					3 = {
						trigger = { 
							trait = one_legged
							NOT = { has_character_flag = vf_heal_one_legged }
						}
						set_character_flag = vf_heal_one_legged
						change_variable = { which = healing value = 5 }
					}
					3 = {
						trigger = { 
							trait = mangled
							NOT = { has_character_flag = vf_heal_mangled }
						}
						set_character_flag = vf_heal_mangled
						change_variable = { which = healing value = 6 }
					}
					3 = {
						trigger = { 
							trait = eunuch
							NOT = { has_character_flag = vf_heal_eunuch }
						}
						set_character_flag = vf_heal_eunuch
						change_variable = { which = healing value = 1 }
					}
					3 = {
						trigger = { 
							trait = severely_injured
							NOT = { has_character_flag = vf_heal_severely_injured }
						}
						set_character_flag = vf_heal_severely_injured
						change_variable = { which = healing value = 1 }
					}
					1 = {
						trigger = {
							has_minor_injury = yes
							NOT = { has_character_flag = vf_heal_minor_injuries }
						}
						# Minor, so heal all of them
						set_character_flag = vf_heal_minor_injuries
						set_variable = { which = healing value = 1 }
					}
				}
			}
		}
		
		# Increase stats
		if = {
			limit = { has_character_flag = vf_stat }
			# Diplomacy
			export_to_variable = { which = var_diplomacy value = diplomacy }
			FROMFROM = { export_to_variable = { which = var_diplomacy value = diplomacy } }
			if = {
				limit = { any_owned_bloodline = { has_bloodline_flag = vampire_genetic_feed } }
				FROMFROM = {
					if = {
						limit = { trait = fair }
						change_variable = { which = var_diplomacy value = 2 }
					}
					if = {
						limit = { trait = genius }
						change_variable = { which = var_diplomacy value = 2 }
					}
					if = {
						limit = { trait = quick }
						change_variable = { which = var_diplomacy value = 2 }
					}
					if = {
						limit = { trait = strong }
						change_variable = { which = var_diplomacy value = 2 }
					}
				}
			}
			subtract_variable = { which = var_diplomacy which = FROMFROM }
			set_variable = { which = diff which = var_diplomacy }
			multiply_variable = { which = diff value = -1 }
			export_to_variable = { which = var_diplomacy value = diplomacy }
			if = {
				limit = { NOT = { check_variable = { which = var_diplomacy which = FROMFROM } } }
				random = {
					chance = 15
					modifier = {
						factor = 2
						check_variable = { which = diff value = 2 }
					}
					modifier = {
						factor = 1.5
						check_variable = { which = diff value = 3 }
					}
					modifier = {
						factor = 1.5
						check_variable = { which = diff value = 4 }
					}
					modifier = {
						factor = 1.5
						check_variable = { which = diff value = 5 }
					}
					modifier = {
						factor = 1.2
						check_variable = { which = diff value = 6 }
					}
					modifier = {
						factor = 1.2
						check_variable = { which = diff value = 7 }
					}
					modifier = {
						factor = 1.2
						check_variable = { which = diff value = 8 }
					}
					set_character_flag = vf_stat_diplomacy
				}
			}
			set_variable = { which = var_diplomacy value = 0 }
			FROMFROM = { set_variable = { which = var_diplomacy value = 0 } }
			# Martial
			export_to_variable = { which = var_martial value = martial }
			FROMFROM = { export_to_variable = { which = var_martial value = martial } }
			if = {
				limit = { any_owned_bloodline = { has_bloodline_flag = vampire_genetic_feed } }
				FROMFROM = {
					if = {
						limit = { trait = fair }
						change_variable = { which = var_martial value = 2 }
					}
					if = {
						limit = { trait = genius }
						change_variable = { which = var_martial value = 2 }
					}
					if = {
						limit = { trait = quick }
						change_variable = { which = var_martial value = 2 }
					}
					if = {
						limit = { trait = strong }
						change_variable = { which = var_martial value = 2 }
					}
				}
			}
			subtract_variable = { which = var_martial which = FROMFROM }
			set_variable = { which = diff which = var_martial }
			multiply_variable = { which = diff value = -1 }
			export_to_variable = { which = var_martial value = martial }
			if = {
				limit = { NOT = { check_variable = { which = var_martial which = FROMFROM } } }
				random = {
					chance = 15
					modifier = {
						factor = 2
						check_variable = { which = diff value = 2 }
					}
					modifier = {
						factor = 1.5
						check_variable = { which = diff value = 3 }
					}
					modifier = {
						factor = 1.5
						check_variable = { which = diff value = 4 }
					}
					modifier = {
						factor = 1.5
						check_variable = { which = diff value = 5 }
					}
					modifier = {
						factor = 1.2
						check_variable = { which = diff value = 6 }
					}
					modifier = {
						factor = 1.2
						check_variable = { which = diff value = 7 }
					}
					modifier = {
						factor = 1.2
						check_variable = { which = diff value = 8 }
					}
					set_character_flag = vf_stat_martial
				}
			}
			set_variable = { which = var_martial value = 0 }
			FROMFROM = { set_variable = { which = var_martial value = 0 } }
			# Stewardship
			export_to_variable = { which = var_stewardship value = stewardship }
			FROMFROM = { export_to_variable = { which = var_stewardship value = stewardship } }
			if = {
				limit = { any_owned_bloodline = { has_bloodline_flag = vampire_genetic_feed } }
				FROMFROM = {
					if = {
						limit = { trait = fair }
						change_variable = { which = var_stewardship value = 2 }
					}
					if = {
						limit = { trait = genius }
						change_variable = { which = var_stewardship value = 2 }
					}
					if = {
						limit = { trait = quick }
						change_variable = { which = var_stewardship value = 2 }
					}
					if = {
						limit = { trait = strong }
						change_variable = { which = var_stewardship value = 2 }
					}
				}
			}
			subtract_variable = { which = var_stewardship which = FROMFROM }
			set_variable = { which = diff which = var_stewardship }
			multiply_variable = { which = diff value = -1 }
			export_to_variable = { which = var_stewardship value = stewardship }
			if = {
				limit = { NOT = { check_variable = { which = var_stewardship which = FROMFROM } } }
				random = {
					chance = 15
					modifier = {
						factor = 2
						check_variable = { which = diff value = 2 }
					}
					modifier = {
						factor = 1.5
						check_variable = { which = diff value = 3 }
					}
					modifier = {
						factor = 1.5
						check_variable = { which = diff value = 4 }
					}
					modifier = {
						factor = 1.5
						check_variable = { which = diff value = 5 }
					}
					modifier = {
						factor = 1.2
						check_variable = { which = diff value = 6 }
					}
					modifier = {
						factor = 1.2
						check_variable = { which = diff value = 7 }
					}
					modifier = {
						factor = 1.2
						check_variable = { which = diff value = 8 }
					}
					set_character_flag = vf_stat_stewardship
				}
			}
			set_variable = { which = var_stewardship value = 0 }
			FROMFROM = { set_variable = { which = var_stewardship value = 0 } }
			# Intrigue
			export_to_variable = { which = var_intrigue value = intrigue }
			FROMFROM = { export_to_variable = { which = var_intrigue value = intrigue } }
			if = {
				limit = { any_owned_bloodline = { has_bloodline_flag = vampire_genetic_feed } }
				FROMFROM = {
					if = {
						limit = { trait = fair }
						change_variable = { which = var_intrigue value = 2 }
					}
					if = {
						limit = { trait = genius }
						change_variable = { which = var_intrigue value = 2 }
					}
					if = {
						limit = { trait = quick }
						change_variable = { which = var_intrigue value = 2 }
					}
					if = {
						limit = { trait = strong }
						change_variable = { which = var_intrigue value = 2 }
					}
				}
			}
			subtract_variable = { which = var_intrigue which = FROMFROM }
			set_variable = { which = diff which = var_intrigue }
			multiply_variable = { which = diff value = -1 }
			export_to_variable = { which = var_intrigue value = intrigue }
			if = {
				limit = { NOT = { check_variable = { which = var_intrigue which = FROMFROM } } }
				random = {
					chance = 15
					modifier = {
						factor = 2
						check_variable = { which = diff value = 2 }
					}
					modifier = {
						factor = 1.5
						check_variable = { which = diff value = 3 }
					}
					modifier = {
						factor = 1.5
						check_variable = { which = diff value = 4 }
					}
					modifier = {
						factor = 1.5
						check_variable = { which = diff value = 5 }
					}
					modifier = {
						factor = 1.2
						check_variable = { which = diff value = 6 }
					}
					modifier = {
						factor = 1.2
						check_variable = { which = diff value = 7 }
					}
					modifier = {
						factor = 1.2
						check_variable = { which = diff value = 8 }
					}
					set_character_flag = vf_stat_intrigue
				}
			}
			set_variable = { which = var_intrigue value = 0 }
			FROMFROM = { set_variable = { which = var_intrigue value = 0 } }
			# Learning
			export_to_variable = { which = var_learning value = learning }
			FROMFROM = { export_to_variable = { which = var_learning value = learning } }
			if = {
				limit = { any_owned_bloodline = { has_bloodline_flag = vampire_genetic_feed } }
				FROMFROM = {
					if = {
						limit = { trait = fair }
						change_variable = { which = var_learning value = 2 }
					}
					if = {
						limit = { trait = genius }
						change_variable = { which = var_learning value = 2 }
					}
					if = {
						limit = { trait = quick }
						change_variable = { which = var_learning value = 2 }
					}
					if = {
						limit = { trait = strong }
						change_variable = { which = var_learning value = 2 }
					}
				}
			}
			subtract_variable = { which = var_learning which = FROMFROM }
			set_variable = { which = diff which = var_learning }
			multiply_variable = { which = diff value = -1 }
			export_to_variable = { which = var_learning value = learning }
			if = {
				limit = { NOT = { check_variable = { which = var_learning which = FROMFROM } } }
				random = {
					chance = 15
					modifier = {
						factor = 2
						check_variable = { which = diff value = 2 }
					}
					modifier = {
						factor = 1.5
						check_variable = { which = diff value = 3 }
					}
					modifier = {
						factor = 1.5
						check_variable = { which = diff value = 4 }
					}
					modifier = {
						factor = 1.5
						check_variable = { which = diff value = 5 }
					}
					modifier = {
						factor = 1.2
						check_variable = { which = diff value = 6 }
					}
					modifier = {
						factor = 1.2
						check_variable = { which = diff value = 7 }
					}
					modifier = {
						factor = 1.2
						check_variable = { which = diff value = 8 }
					}
					set_character_flag = vf_stat_learning
				}
			}
			set_variable = { which = var_learning value = 0 }
			FROMFROM = { set_variable = { which = var_learning value = 0 } }
			# Health
			export_to_variable = { which = var_health value = base_health }
			FROMFROM = { export_to_variable = { which = var_health value = base_health } }
			if = {
				limit = { any_owned_bloodline = { has_bloodline_flag = vampire_genetic_feed } }
				FROMFROM = {
					if = {
						limit = { trait = fair }
						change_variable = { which = var_health value = 1 }
					}
					if = {
						limit = { trait = genius }
						change_variable = { which = var_health value = 1 }
					}
					if = {
						limit = { trait = quick }
						change_variable = { which = var_health value = 1 }
					}
					if = {
						limit = { trait = strong }
						change_variable = { which = var_health value = 1 }
					}
				}
			}
			subtract_variable = { which = var_health which = FROMFROM }
			set_variable = { which = diff which = var_health }
			multiply_variable = { which = diff value = -1 }
			export_to_variable = { which = var_health value = base_health }
			if = {
				limit = { NOT = { check_variable = { which = var_health which = FROMFROM } } }
				random = {
					chance = 15
					modifier = {
						factor = 2
						check_variable = { which = diff value = 2 }
					}
					modifier = {
						factor = 1.5
						check_variable = { which = diff value = 3 }
					}
					modifier = {
						factor = 1.5
						check_variable = { which = diff value = 4 }
					}
					modifier = {
						factor = 1.5
						check_variable = { which = diff value = 5 }
					}
					modifier = {
						factor = 1.2
						check_variable = { which = diff value = 6 }
					}
					modifier = {
						factor = 1.2
						check_variable = { which = diff value = 7 }
					}
					modifier = {
						factor = 1.2
						check_variable = { which = diff value = 8 }
					}
					set_character_flag = vf_stat_health
				}
			}
			set_variable = { which = var_health value = 0 }
			set_variable = { which = diff value = 0 }
			FROMFROM = { set_variable = { which = var_health value = 0 } }
		}
		
		# Gain illness
		if = {
			limit = { 
				FROMFROM = {
					OR = { 
						trait = has_tuberculosis
						has_character_flag = got_tuberculosis
					}
				}
			}
			if = {
				limit = { has_dlc = "Reapers" }
				set_character_flag = got_tuberculosis
				add_tuberculosis_symptom_effect = yes
			}
			set_character_flag = vf_sick_tuberculosis
		}
		if = {
			limit = { 
				FROMFROM = {
					OR = { 
						trait = has_typhoid_fever
						has_character_flag = got_typhoid_fever
					}
				}
				NOR = {
					has_character_flag = vf_sick_tuberculosis
				}
			}
			if = {
				limit = { has_dlc = "Reapers" }
				set_character_flag = got_typhoid_fever
				add_typhoid_symptom_effect = yes
			}
			set_character_flag = vf_sick_typhoid_fever
		}
		if = {
			limit = { 
				FROMFROM = {
					OR = { 
						trait = has_typhus
						has_character_flag = got_typhus
					}
				}
				NOR = {
					has_character_flag = vf_sick_tuberculosis
					has_character_flag = vf_sick_typhoid_fever
				}
			}
			if = {
				limit = { has_dlc = "Reapers" }
				set_character_flag = got_typhus
				add_typhus_symptom_effect = yes
			}
			set_character_flag = vf_sick_typhus
		}
		if = {
			limit = { 
				FROMFROM = {
					OR = { 
						trait = has_bubonic_plague
						has_character_flag = got_bubonic_plague
					}
				}
				NOR = {
					has_character_flag = vf_sick_tuberculosis
					has_character_flag = vf_sick_typhoid_fever
					has_character_flag = vf_sick_typhus
				}
			}
			if = {
				limit = { has_dlc = "Reapers" }
				set_character_flag = got_bubonic_plague
				add_plague_symptom_effect = yes
			}
			set_character_flag = vf_sick_bubonic_plague
		}
		if = {
			limit = { 
				FROMFROM = {
					OR = { 
						trait = has_measles
						has_character_flag = got_measles
					}
				}
				NOR = {
					has_character_flag = vf_sick_tuberculosis
					has_character_flag = vf_sick_typhoid_fever
					has_character_flag = vf_sick_typhus
					has_character_flag = vf_sick_bubonic_plague
				}
			}
			if = {
				limit = { has_dlc = "Reapers" }
				set_character_flag = got_measles
				add_measles_symptom_effect = yes
			}
			set_character_flag = vf_sick_measles
		}
		if = {
			limit = { 
				FROMFROM = {
					OR = { 
						trait = has_small_pox
						has_character_flag = got_smallpox
					}
				}
				NOR = {
					has_character_flag = vf_sick_tuberculosis
					has_character_flag = vf_sick_typhoid_fever
					has_character_flag = vf_sick_typhus
					has_character_flag = vf_sick_bubonic_plague
					has_character_flag = vf_sick_measles
				}
			}
			if = {
				limit = { has_dlc = "Reapers" }
				set_character_flag = got_smallpox
				add_smallpox_symptom_effect = yes
			}
			set_character_flag = vf_sick_small_pox
		}
		if = {
			limit = { 
				FROMFROM = {
					OR = { 
						trait = has_aztec_disease
						has_character_flag = got_aztec_disease
					}
				}
				NOR = {
					has_character_flag = vf_sick_tuberculosis
					has_character_flag = vf_sick_typhoid_fever
					has_character_flag = vf_sick_typhus
					has_character_flag = vf_sick_bubonic_plague
					has_character_flag = vf_sick_measles
					has_character_flag = vf_sick_small_pox
				}
			}
			if = {
				limit = { has_dlc = "Reapers" }
				set_character_flag = got_aztec_disease
				add_aztec_disease_symptom_effect = yes
			}
			set_character_flag = vf_sick_aztec_disease
		}
		if = {
			limit = { 
				FROMFROM = {
					OR = { 
						trait = syphilitic
						has_character_flag = got_syphilis
					}
				}
				NOR = {
					has_character_flag = vf_sick_tuberculosis
					has_character_flag = vf_sick_typhoid_fever
					has_character_flag = vf_sick_typhus
					has_character_flag = vf_sick_bubonic_plague
					has_character_flag = vf_sick_measles
					has_character_flag = vf_sick_small_pox
					has_character_flag = vf_sick_aztec_disease
				}
			}
			if = {
				limit = { has_dlc = "Reapers" }
				set_character_flag = got_syphilis
				add_syphilis_symptom_effect = yes
			}
			set_character_flag = vf_sick_syphilitic
		}
		if = {
			limit = { 
				FROMFROM = {
					OR = { 
						trait = flu
						has_character_flag = got_flu
					}
				}
				NOR = {
					has_character_flag = vf_sick_tuberculosis
					has_character_flag = vf_sick_typhoid_fever
					has_character_flag = vf_sick_typhus
					has_character_flag = vf_sick_bubonic_plague
					has_character_flag = vf_sick_measles
					has_character_flag = vf_sick_small_pox
					has_character_flag = vf_sick_aztec_disease
					has_character_flag = vf_sick_syphilitic
				}
			}
			if = {
				limit = { has_dlc = "Reapers" }
				set_character_flag = got_flu
				add_flu_symptom_effect = yes
			}
			set_character_flag = vf_sick_flu
		}
		if = {
			limit = { 
				FROMFROM = {
					OR = { 
						trait = dysentery
						has_character_flag = got_dysentery
					}
				}
				NOR = {
					has_character_flag = vf_sick_tuberculosis
					has_character_flag = vf_sick_typhoid_fever
					has_character_flag = vf_sick_typhus
					has_character_flag = vf_sick_bubonic_plague
					has_character_flag = vf_sick_measles
					has_character_flag = vf_sick_small_pox
					has_character_flag = vf_sick_aztec_disease
					has_character_flag = vf_sick_syphilitic
					has_character_flag = vf_sick_flu
				}
			}
			if = {
				limit = { has_dlc = "Reapers" }
				set_character_flag = got_dysentery
				add_dysentery_symptom_effect = yes
			}
			set_character_flag = vf_sick_dysentery
		}
		if = {
			limit = { 
				FROMFROM = {
					OR = { 
						trait = gout
						has_character_flag = got_gout
					}
				}
				NOR = {
					has_character_flag = vf_sick_tuberculosis
					has_character_flag = vf_sick_typhoid_fever
					has_character_flag = vf_sick_typhus
					has_character_flag = vf_sick_bubonic_plague
					has_character_flag = vf_sick_measles
					has_character_flag = vf_sick_small_pox
					has_character_flag = vf_sick_aztec_disease
					has_character_flag = vf_sick_syphilitic
					has_character_flag = vf_sick_flu
					has_character_flag = vf_sick_dysentery
				}
			}
			if = {
				limit = { has_dlc = "Reapers" }
				set_character_flag = got_gout
				add_gout_symptom_effect = yes
			}
			set_character_flag = vf_sick_gout
		}
		#if = {
		#	limit = { 
		#		FROMFROM = {
		#			OR = { 
		#				trait = food_poisoning
		#				has_character_flag = got_food_poisoning
		#			}
		#		}
		#		NOR = {
		#			has_character_flag = vf_sick_tuberculosis
		#			has_character_flag = vf_sick_typhoid_fever
		#			has_character_flag = vf_sick_typhus
		#			has_character_flag = vf_sick_bubonic_plague
		#			has_character_flag = vf_sick_measles
		#			has_character_flag = vf_sick_small_pox
		#			has_character_flag = vf_sick_aztec_disease
		#			has_character_flag = vf_sick_syphilitic
		#			has_character_flag = vf_sick_flu
		#			has_character_flag = vf_sick_dysentery
		#			has_character_flag = vf_sick_gout
		#		}
		#	}
		#	if = {
		#		limit = { has_dlc = "Reapers" }
		#		set_character_flag = got_food_poisoning
		#		add_food_poisoning_symptom_effect = yes
		#	}
		#	set_character_flag = vf_sick_food_poisoning
		#}
		if = {
			limit = { 
				FROMFROM = {
					OR = { 
						trait = rabies
						has_character_flag = got_rabies
					}
				}
				NOR = {
					has_character_flag = vf_sick_tuberculosis
					has_character_flag = vf_sick_typhoid_fever
					has_character_flag = vf_sick_typhus
					has_character_flag = vf_sick_bubonic_plague
					has_character_flag = vf_sick_measles
					has_character_flag = vf_sick_small_pox
					has_character_flag = vf_sick_aztec_disease
					has_character_flag = vf_sick_syphilitic
					has_character_flag = vf_sick_flu
					has_character_flag = vf_sick_dysentery
					has_character_flag = vf_sick_gout
					has_character_flag = vf_sick_food_poisoning
				}
			}
			if = {
				limit = { has_dlc = "Reapers" }
				set_character_flag = got_rabies
				add_rabies_symptom_effect = yes
			}
			set_character_flag = vf_sick_rabies
		}
		#if = {
		#	limit = { 
		#		FROMFROM = {
		#			OR = { 
		#				trait = cancer
		#				has_character_flag = got_cancer
		#			}
		#		}
		#		NOR = {
		#			has_character_flag = vf_sick_tuberculosis
		#			has_character_flag = vf_sick_typhoid_fever
		#			has_character_flag = vf_sick_typhus
		#			has_character_flag = vf_sick_bubonic_plague
		#			has_character_flag = vf_sick_measles
		#			has_character_flag = vf_sick_small_pox
		#			has_character_flag = vf_sick_aztec_disease
		#			has_character_flag = vf_sick_syphilitic
		#			has_character_flag = vf_sick_flu
		#			has_character_flag = vf_sick_dysentery
		#			has_character_flag = vf_sick_gout
		#			has_character_flag = vf_sick_food_poisoning
		#			has_character_flag = vf_sick_rabies
		#		}
		#	}
		#	if = {
		#		limit = { has_dlc = "Reapers" }
		#		set_character_flag = got_cancer
		#		add_cancer_symptom_effect = yes
		#	}
		#	set_character_flag = vf_sick_cancer
		#}
		if = {
			limit = { 
				FROMFROM = {
					OR = { 
						trait = pneumonic
						has_character_flag = got_pneumonic
					}
				}
				NOR = {
					has_character_flag = vf_sick_tuberculosis
					has_character_flag = vf_sick_typhoid_fever
					has_character_flag = vf_sick_typhus
					has_character_flag = vf_sick_bubonic_plague
					has_character_flag = vf_sick_measles
					has_character_flag = vf_sick_small_pox
					has_character_flag = vf_sick_aztec_disease
					has_character_flag = vf_sick_syphilitic
					has_character_flag = vf_sick_flu
					has_character_flag = vf_sick_dysentery
					has_character_flag = vf_sick_gout
					has_character_flag = vf_sick_food_poisoning
					has_character_flag = vf_sick_rabies
					has_character_flag = vf_sick_cancer
				}
			}
			if = {
				limit = { has_dlc = "Reapers" }
				set_character_flag = got_pneumonic
				add_pneumonia_symptom_effect = yes
			}
			set_character_flag = vf_sick_pneumonic
		}
		if = {
			limit = { 
				FROMFROM = {
					OR = { 
						trait = dancing_plague
						has_character_flag = got_dancing_plague
					}
				}
				NOR = {
					has_character_flag = vf_sick_tuberculosis
					has_character_flag = vf_sick_typhoid_fever
					has_character_flag = vf_sick_typhus
					has_character_flag = vf_sick_bubonic_plague
					has_character_flag = vf_sick_measles
					has_character_flag = vf_sick_small_pox
					has_character_flag = vf_sick_aztec_disease
					has_character_flag = vf_sick_syphilitic
					has_character_flag = vf_sick_flu
					has_character_flag = vf_sick_dysentery
					has_character_flag = vf_sick_gout
					has_character_flag = vf_sick_food_poisoning
					has_character_flag = vf_sick_rabies
					has_character_flag = vf_sick_cancer
					has_character_flag = vf_sick_pneumonic
				}
			}
			set_character_flag = vf_sick_dancing_plague
		}
		if = {
			limit = { 
				FROMFROM = {
					OR = { 
						trait = ill
					}
				}
				NOR = {
					has_character_flag = vf_sick_tuberculosis
					has_character_flag = vf_sick_typhoid_fever
					has_character_flag = vf_sick_typhus
					has_character_flag = vf_sick_bubonic_plague
					has_character_flag = vf_sick_measles
					has_character_flag = vf_sick_small_pox
					has_character_flag = vf_sick_aztec_disease
					has_character_flag = vf_sick_syphilitic
					has_character_flag = vf_sick_flu
					has_character_flag = vf_sick_dysentery
					has_character_flag = vf_sick_gout
					has_character_flag = vf_sick_food_poisoning
					has_character_flag = vf_sick_rabies
					has_character_flag = vf_sick_cancer
					has_character_flag = vf_sick_pneumonic
					has_character_flag = vf_sick_dancing_plague
				}
			}
			set_character_flag = vf_sick_ill
		}
		if = {
			limit = { 
				FROMFROM = {
					OR = { 
						trait = leper
					}
				}
			}
			set_character_flag = vf_sick_leper
		}
		if = {
			limit = { 
				FROMFROM = {
					OR = { 
						trait = lovers_pox
					}
				}
				NOR = {
					has_character_flag = vf_sick_tuberculosis
					has_character_flag = vf_sick_typhoid_fever
					has_character_flag = vf_sick_typhus
					has_character_flag = vf_sick_bubonic_plague
					has_character_flag = vf_sick_measles
					has_character_flag = vf_sick_small_pox
					has_character_flag = vf_sick_aztec_disease
					has_character_flag = vf_sick_syphilitic
					has_character_flag = vf_sick_flu
					has_character_flag = vf_sick_dysentery
					has_character_flag = vf_sick_gout
					has_character_flag = vf_sick_food_poisoning
					has_character_flag = vf_sick_rabies
					has_character_flag = vf_sick_cancer
					has_character_flag = vf_sick_pneumonic
					has_character_flag = vf_sick_dancing_plague
					has_character_flag = vf_sick_leper
				}
			}
			set_character_flag = vf_sick_lovers_pox
		}
		
		# Diseases from unsafe races
		if = {
			limit = {
				FROMFROM = { trait = zombie }
				NOT = {
					any_owned_bloodline = {
						has_bloodline_flag = vampire_feed_any
					}
				}
			}
			if = {
				limit = { has_dlc = "Reapers" }
				set_character_flag = got_bubonic_plague
				add_plague_symptom_effect = yes
			}
			set_character_flag = vf_sick_bubonic_plague
		}
		if = {
			limit = {
				FROMFROM = { trait = werewolf }
				NOT = {
					any_owned_bloodline = {
						has_bloodline_flag = vampire_feed_any
					}
				}
			}
			if = {
				limit = { has_dlc = "Reapers" }
				set_character_flag = got_rabies
				add_rabies_symptom_effect = yes
			}
			set_character_flag = vf_sick_rabies
		}
		if = {
			limit = {
				FROMFROM = { trait = demon_trait }
				NOT = {
					any_owned_bloodline = {
						has_bloodline_flag = vampire_feed_any
					}
				}
			}
			if = {
				limit = { has_dlc = "Reapers" }
				set_character_flag = got_tuberculosis
				add_tuberculosis_symptom_effect = yes
			}
			set_character_flag = vf_sick_tuberculosis
		}
		if = {
			limit = {
				FROMFROM = { trait = ethereal_trait }
				NOT = {
					any_owned_bloodline = {
						has_bloodline_flag = vampire_feed_any
					}
				}
			}
			set_character_flag = vf_sick_dancing_plague
		}
		if = {
			limit = {
				FROMFROM = { trait = vampire }
				NOT = {
					any_owned_bloodline = {
						has_bloodline_flag = vampire_feed_any
					}
				}
			}
			if = {
				limit = { has_dlc = "Reapers" }
				set_character_flag = got_food_poisoning
				add_food_poisoning_symptom_effect = yes
			}
			set_character_flag = vf_sick_food_poisoning
		}
		
		# Gain "Tainted Blood" from feeding on diseased or supernatural characters
		if = {
			limit = {
				NOT = {
					any_owned_bloodline = {
						has_bloodline_flag = no_tainted_blood
					}
				}
				OR = {
					has_character_flag = vf_sick_tuberculosis
					has_character_flag = vf_sick_typhoid_fever
					has_character_flag = vf_sick_typhus
					has_character_flag = vf_sick_bubonic_plague
					has_character_flag = vf_sick_measles
					has_character_flag = vf_sick_small_pox
					has_character_flag = vf_sick_aztec_disease
					has_character_flag = vf_sick_syphilitic
					has_character_flag = vf_sick_food_poisoning
					has_character_flag = vf_sick_flu
					has_character_flag = vf_sick_dysentery
					has_character_flag = vf_sick_gout
					has_character_flag = vf_sick_rabies
					has_character_flag = vf_sick_pneumonic
					has_character_flag = vf_sick_dancing_plague
					has_character_flag = vf_sick_leper
					FROMFROM = {
						OR = {
							trait = ill
							trait = leper
							trait = lovers_pox
						}
					}
					AND = {
						any_owned_bloodline = {
							has_bloodline_flag = vampire_restricted_feeding
						}
						FROMFROM = {
							NOR = {
								is_landed = yes
								any_owned_bloodline = { always = yes }
								trait = fair
								trait = genius
								trait = quick
								trait = strong
							}
						}
					}
				}
			}
			set_character_flag = vf_tainted_blood
		}
		
		# Spread an illness
		if = {
			limit = {
				NOT = { has_character_flag = vampire_feed_kill }
				has_vampire_spread_illness = yes
			}
			set_character_flag = vf_spread_illness
			FROMFROM = { character_event = { id = VAMPIRE.51 } }
		}
	}
	
	option = {
		name = {
			trigger = { has_character_flag = vampire_feed_escape }
			text = EVTOPTA_VAMPIRE.9
		}
		name = {
			trigger = { has_character_flag = vampire_feed_suspected }
			text = EVTOPTB_VAMPIRE.9
		}
		name = {
			trigger = { has_character_flag = vampire_feed_caught }
			text = EVTOPC_VAMPIRE.9
		}
		if = {
			limit = { has_character_flag = vf_heal_wounded }
			remove_trait = wounded
		}
		if = {
			limit = { has_character_flag = vf_heal_infirm }
			remove_trait = infirm
		}
		if = {
			limit = { has_character_flag = vf_heal_maimed }
			remove_trait = maimed
		}
		if = {
			limit = { has_character_flag = vf_heal_scarred }
			remove_scarred = yes
		}
		if = {
			limit = { has_character_flag = vf_heal_disfigured }
			remove_trait = disfigured
		}
		if = {
			limit = { has_character_flag = vf_heal_one_eyed }
			remove_trait = one_eyed
		}
		if = {
			limit = { has_character_flag = vf_heal_blinded }
			remove_trait = blinded
		}
		if = {
			limit = { has_character_flag = vf_heal_one_handed }
			remove_trait = one_handed
		}
		if = {
			limit = { has_character_flag = vf_heal_one_legged }
			remove_trait = one_legged
		}
		if = {
			limit = { has_character_flag = vf_heal_mangled }
			remove_trait = mangled
		}
		if = {
			limit = { has_character_flag = vf_heal_eunuch }
			remove_trait = eunuch
		}
		if = {
			limit = { has_character_flag = vf_heal_severely_injured }
			remove_trait = severely_injured
			clear_delayed_event = { id = RIP.11000 }
		}
		if = {
			limit = { has_character_flag = vf_heal_minor_injuries }
			remove_minor_injuries = yes
		}
		if = {
			limit = { has_character_flag = vf_stat_diplomacy }
			change_diplomacy = 1
			FROMFROM = { set_character_flag = vf_lose_diplomacy }
		}
		if = {
			limit = { has_character_flag = vf_stat_martial }
			change_martial = 1
			FROMFROM = { set_character_flag = vf_lose_martial }
		}
		if = {
			limit = { has_character_flag = vf_stat_stewardship }
			change_stewardship = 1
			FROMFROM = { set_character_flag = vf_lose_stewardship }
		}
		if = {
			limit = { has_character_flag = vf_stat_intrigue }
			change_intrigue = 1
			FROMFROM = { set_character_flag = vf_lose_intrigue }
		}
		if = {
			limit = { has_character_flag = vf_stat_learning }
			change_learning = 1
			FROMFROM = { set_character_flag = vf_lose_learning }
		}
		if = {
			limit = { has_character_flag = vf_stat_health }
			health = 0.25
			FROMFROM = { set_character_flag = vf_lose_health }
		}
		if = {
			limit = { any_owned_bloodline = { has_bloodline_flag = vampire_genetic_feed } }
			random_list = {
				3 = {}
				1 = {
					trigger = { FROMFROM = { trait = fair } }
					FROMFROM = { set_character_flag = vf_lose_fair }
				}
				1 = {
					trigger = { FROMFROM = { trait = genius } }
					FROMFROM = { set_character_flag = vf_lose_genius }
				}
				1 = {
					trigger = { FROMFROM = { trait = quick } }
					FROMFROM = { set_character_flag = vf_lose_quick }
				}
				1 = {
					trigger = { FROMFROM = { trait = strong } }
					FROMFROM = { set_character_flag = vf_lose_strong }
				}
				1 = {
					trigger = {
						FROMFROM = {
							NOR = {
								trait = fair
								trait = ugly
							}
						}
					}
					FROMFROM = { set_character_flag = vf_gain_ugly }
				}
			}
		}
		if = {
			limit = {
				has_character_flag = vf_spread_illness
				has_character_flag = vampire_feed_caught
				trait = known_vampire
				NOT = { has_character_flag = vampire_feed_kill }
				NOT = { any_owned_bloodline = { has_bloodline_flag = no_tainted_blood } }
			}
			add_character_modifier = { name = plague_vampire years = 2 }
		}
		if = {
			limit = {
				has_character_flag = vf_sick_tuberculosis
				NOT = { has_dlc = "Reapers" }
			}
			add_trait = has_tuberculosis
			clr_character_flag = developing_illness
			clr_character_flag = got_tuberculosis
		}
		if = {
			limit = {
				has_character_flag = vf_sick_typhoid_fever
				NOT = { has_dlc = "Reapers" }
			}
			add_trait = has_typhoid_fever
			clr_character_flag = developing_illness
			clr_character_flag = got_typhoid_fever
		}
		if = {
			limit = {
				has_character_flag = vf_sick_typhus
				NOT = { has_dlc = "Reapers" }
			}
			add_trait = has_typhus
			clr_character_flag = developing_illness
			clr_character_flag = got_typhus
		}
		if = {
			limit = {
				has_character_flag = vf_sick_bubonic_plague
				NOT = { has_dlc = "Reapers" }
			}
			add_trait = has_bubonic_plague
			clr_character_flag = developing_illness
			clr_character_flag = got_bubonic_plague
		}
		if = {
			limit = {
				has_character_flag = vf_sick_measles
				NOT = { has_dlc = "Reapers" }
			}
			add_trait = has_measles
			clr_character_flag = developing_illness
			clr_character_flag = got_measles
		}
		if = {
			limit = {
				has_character_flag = vf_sick_small_pox
				NOT = { has_dlc = "Reapers" }
			}
			add_trait = has_small_pox
			clr_character_flag = developing_illness
			clr_character_flag = got_smallpox
		}
		if = {
			limit = {
				has_character_flag = vf_sick_aztec_disease
				NOT = { has_dlc = "Reapers" }
			}
			add_trait = has_aztec_disease
			clr_character_flag = developing_illness
			clr_character_flag = got_aztec_disease
		}
		if = {
			limit = {
				has_character_flag = vf_sick_syphilitic
				NOT = { has_dlc = "Reapers" }
			}
			add_trait = syphilitic
			clr_character_flag = developing_illness
			clr_character_flag = got_syphilis
		}
		if = {
			limit = {
				has_character_flag = vf_sick_flu
				NOT = { has_dlc = "Reapers" }
			}
			add_trait = flu
			clr_character_flag = developing_illness
			clr_character_flag = got_flu
		}
		if = {
			limit = {
				has_character_flag = vf_sick_dysentery
				NOT = { has_dlc = "Reapers" }
			}
			add_trait = dysentery
			clr_character_flag = developing_illness
			clr_character_flag = got_dysentery
		}
		if = {
			limit = {
				has_character_flag = vf_sick_gout
				NOT = { has_dlc = "Reapers" }
			}
			add_trait = gout
			clr_character_flag = developing_illness
			clr_character_flag = got_gout
		}
		if = {
			limit = {
				has_character_flag = vf_sick_food_poisoning
				NOT = { has_dlc = "Reapers" }
			}
			add_trait = food_poisoning
			clr_character_flag = developing_illness
			clr_character_flag = got_food_poisoning
		}
		if = {
			limit = {
				has_character_flag = vf_sick_rabies
				NOT = { has_dlc = "Reapers" }
			}
			add_trait = rabies
			clr_character_flag = developing_illness
			clr_character_flag = got_rabies
		}
		if = {
			limit = {
				has_character_flag = vf_sick_cancer
				NOT = { has_dlc = "Reapers" }
			}
			add_trait = cancer
			clr_character_flag = developing_illness
			clr_character_flag = got_cancer
		}
		if = {
			limit = {
				has_character_flag = vf_sick_pneumonic
				NOT = { has_dlc = "Reapers" }
			}
			add_trait = pneumonic
			clr_character_flag = developing_illness
			clr_character_flag = got_pneumonia
		}
		if = {
			limit = {
				has_character_flag = vf_sick_dancing_plague
				NOT = { has_dlc = "Reapers" }
			}
			add_trait = dancing_plague
			clr_character_flag = developing_illness
			clr_character_flag = got_dancing_plague
		}
		if = {
			limit = {
				has_character_flag = vf_sick_ill
				NOT = { has_dlc = "Reapers" }
			}
			add_trait = ill
		}
		if = {
			limit = {
				has_character_flag = vf_sick_leper
				NOT = { has_dlc = "Reapers" }
			}
			add_trait = leper
		}
		if = {
			limit = {
				has_character_flag = vf_sick_lovers_pox
				NOT = { has_dlc = "Reapers" }
			}
			add_trait = lovers_pox
		}
		
		if = {
			limit = { has_character_flag = vf_tainted_blood }
			add_character_modifier = { name = tainted_blood duration = 180 }
		}
		
		if = {
			limit = { has_character_flag = vampire_feed_minor }
			hidden_tooltip = { set_variable = { which = hunger_progress  value = 0 } }
			remove_character_modifier = vampire_starving
			if = {
				limit = { trait = hunger_1 }
				hidden_tooltip = { remove_trait = hunger_1 }
				add_trait = hunger_0
			}
			else_if = { 
				limit = { trait = hunger_2 }
				hidden_tooltip = { remove_trait = hunger_2 }
				add_trait = hunger_0
			}
			else_if = {
				limit = { trait = hunger_3 }
				hidden_tooltip = { remove_trait = hunger_3 }
				add_trait = hunger_1
			}
			else_if = {
				limit = { trait = hunger_4 }
				hidden_tooltip = { remove_trait = hunger_4 }
				add_trait = hunger_2
			}
			else_if = {
				limit = { trait = hunger_5 }
				add_trait = hunger_3
			}
		}
		else = {
			clear_hunger_trait = yes
		}
		
		# Thrall
		if = {
			limit = {
				NOR = {
					ai = no
					trait = dragon
					trait = demon_trait
					trait = ethereal_trait
					trait = werewolf
					trait = vampire
					trait = zombie
					trait = god
					trait = demi_god
					trait = mythos_giant
					trait = half_giant
					trait = blood_of_the_gods
					trait = djinn
					trait = monster_hunter
					trait = dragonborn
					trait = novice_mage
					trait = eldritch_scholar
					trait = veteran_wizard
					trait = arcane_master
					trait = philosopher_stone_trait
					any_owned_bloodline = { has_bloodline_flag = BOTG }
				}
			}
			random = {
				chance = 10
				FROMFROM = { character_event = { id = VAMPIRE.165 days = 5 random = 15 } }
			}
		}
		
		if = {
			limit = { has_character_flag = vampire_feed_suspected }
			if = {
				limit = { trait = known_vampire }
				hidden_tooltip = {
					any_realm_character = {
						opinion = { who = ROOT modifier = suspect_of_murder years = 10 }
					}
				}
			}
			else = {
				add_character_modifier = {
					name = known_monster
					years = 10
					stacking = yes
				}
			}
			if = {
				limit = {
					FROMFROM = {
						has_minor_title = title_vampiric_protection
						NOT = { liege = { character = ROOT } }
					}
				}
				FROMFROM = {
					liege = {
						random_list = {
							4 = {
								ROOT = {
									reverse_opinion = { who = PREV modifier = suspected_attacked_protected years = 10 }
									character_event = { id = VAMPIRE.163 }
								}
							}
							1 = {
								random_courtier = {
									reverse_opinion = { who = PREV modifier = suspected_attacked_protected years = 10 }
									character_event = { id = VAMPIRE.163 }
								}
							}
						}
					}
				}
			}
		}
		if = {
			limit = { has_character_flag = vampire_feed_caught }
			if = {
				limit = { trait = secret_vampire }
				hidden_tooltip = {
					any_realm_character = { character_event = { id = VAMPIRE.23 } } # Court finds out character is a vampire
					if = {
						limit = {
							independent = no
						}
						liege = { character_event = { id = VAMPIRE.23 } } # Liege finds out character is a vampire
					}
					remove_trait = secret_vampire
				}
				add_trait = known_vampire
				hidden_tooltip = { remove_character_modifier = known_monster }
				FROMFROM = { save_event_target_as = target_victim }
				if = {
					limit = { has_character_flag = vampire_feed_kill }
					character_event = { id = 10 }
					if = {
						limit = { 
							FROMFROM = {
								has_minor_title = title_vampiric_protection
								NOT = { liege = { character = ROOT } }
							}
						}
						FROMFROM = {
							liege = {
								opinion = { who = ROOT modifier = killed_protected years = 50 }
								character_event = { id = VAMPIRE.164 }
							}
						}
					}
				}
				else = {
					character_event = { id = 11 }
					if = {
						limit = {
							FROMFROM = {
								has_minor_title = title_vampiric_protection
								NOT = { liege = { character = ROOT } }
							}
						}
						FROMFROM = {
							liege = {
								opinion = { who = ROOT modifier = attacked_protected years = 20 }
								character_event = { id = VAMPIRE.162 }
							}
						}
					}
				}
			}
		}
		if = {
			limit = { has_character_flag = vampire_feed_kill }
			if = {
				limit = { has_character_flag = vampire_feed_caught }
				FROMFROM = { death = { death_reason = death_vampire killer = ROOT } }
			}
			else = {
				FROMFROM = { death = { death_reason = death_vampire_unknown killer = ROOT } }
			}
		}
		else = {
			if = {
				limit = {
					FROMFROM = {
						OR = {
							has_character_flag = vf_lose_fair
							has_character_flag = vf_lose_genius
							has_character_flag = vf_lose_quick
							has_character_flag = vf_lose_strong
							has_character_flag = vf_gain_ugly
							has_character_flag = vf_lose_diplomacy
							has_character_flag = vf_lose_martial
							has_character_flag = vf_lose_stewardship
							has_character_flag = vf_lose_intrigue
							has_character_flag = vf_lose_learning
							has_character_flag = vf_lose_health
						}
					}
				}
				FROMFROM = { character_event = { id = VAMPIRE.198 days = 1 } }
			}
		}
	}
	
	after = {
		# If target is turned, fire an event chain
		hidden_tooltip = {
			if = {
				limit = { has_character_flag = vampire_feed_turn }
				FROMFROM = {
					character_event = { id = VAMPIRE.149 days = 3 random = 8 }
				}
			}
			# Check if people become suspicous
			# Starting at 11, detection is automatic
			# Hunger doesn't affect this one, since it occurs after feeding
			if = {
				limit = { check_variable = { which = healing value = 11 } }
				character_event = { id = VAMPIRE.24 }
				set_variable = { which = healing value = 0 }
				break = yes
			}
			random_list = {
				20 = {
					# Unnoticed
					modifier = {
						factor = 2
						NOT = { check_variable = { which = healing value = 3 } }
					}
					modifier = {
						factor = 2
						NOT = { check_variable = { which = healing value = 2 } }
					}
					modifier = {
						factor = 10
						NOT = { check_variable = { which = healing value = 1 } }
					}
					modifier = {
						factor = 1.5
						intrigue = 20 # Skilled liar
					}
					# Nothing happens
				}
				20 = {
					# Supected monster
					modifier = {
						factor = 0
						trait = known_vampire
					}
					modifier = {
						factor = 2
						check_variable = { which = healing value = 3 }
						NOT = { check_variable = { which = healing value = 5 } } 
					}
					modifier = {
						factor = 4
						check_variable = { which = healing value = 3 }
						NOT = { check_variable = { which = healing value = 5 } } 
					}
					modifier = {
						factor = 1.5
						has_game_rule = { name = secrecy value = more }
					}
					modifier = {
						factor = 0.75
						has_game_rule = { name = secrecy value = fewer }
					}
					character_event = { id = MONSTER.11 }
				}
				10 = {
					# Revealed vampire
					modifier = {
						factor = 0
						trait = known_vampire
					}
					modifier = {
						factor = 2
						check_variable = { which = healing value = 5 }
					}
					modifier = {
						factor = 2
						check_variable = { which = healing value = 6 }
					}
					modifier = {
						factor = 2
						check_variable = { which = healing value = 7 }
					}
					modifier = {
						factor = 2
						check_variable = { which = healing value = 8 }
					}
					modifier = {
						factor = 2
						check_variable = { which = healing value = 9 }
					}
					modifier = {
						factor = 2
						check_variable = { which = healing value = 10 }
					}
					modifier = {
						factor = 2
						has_game_rule = { name = secrecy value = more }
					}
					modifier = {
						factor = 0.5
						has_game_rule = { name = secrecy value = fewer }
					}
					character_event = { id = VAMPIRE.24 }
				}
			}
			# Clean up the variables we used
			set_variable = { which = healing value = 0 }
			clr_character_flag = vf_heal
			clr_character_flag = vf_stat
			clr_character_flag = vf_heal_wounded
			clr_character_flag = vf_heal_infirm
			clr_character_flag = vf_heal_maimed
			clr_character_flag = vf_heal_scarred
			clr_character_flag = vf_heal_disfigured
			clr_character_flag = vf_heal_one_eyed
			clr_character_flag = vf_heal_blinded
			clr_character_flag = vf_heal_one_handed
			clr_character_flag = vf_heal_one_legged
			clr_character_flag = vf_heal_mangled
			clr_character_flag = vf_heal_eunuch
			clr_character_flag = vf_heal_severely_injured
			clr_character_flag = vf_heal_minor_injuries
			clr_character_flag = vf_stat_diplomacy
			clr_character_flag = vf_stat_martial
			clr_character_flag = vf_stat_stewardship
			clr_character_flag = vf_stat_intrigue
			clr_character_flag = vf_stat_learning
			clr_character_flag = vf_stat_health
			# Disease spreading moved to beforehand so it will be present to check when spreading to other characters
			clr_character_flag = vampire_feed_success
			clr_character_flag = vampire_feed_failure
			clr_character_flag = vampire_feed_caught
			clr_character_flag = vampire_feed_suspected
			clr_character_flag = vampire_feed_escape
			clr_character_flag = vampire_feed_kill
			clr_character_flag = vampire_feed_survive
			clr_character_flag = vampire_feed_turn
			clr_character_flag = vampire_feed_minor
			clr_character_flag = vf_spread_illness
		}
	}
}

# VAMPIRE.10 - Determine if feeding/healing is successful
character_event = {
	id = VAMPIRE.10
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		add_character_modifier = { modifier = recently_fed days = 7 }
		evaluate_duel_result_score_effect = yes
		# Prisoner secret werewolves escape
		if = {
			limit = {
				FROM = {
					prisoner = yes
					trait = secret_werewolf
				}
			}
			FROM = { character_event = { id = VAMPIRE.46 } }
			character_event = { id = VAMPIRE.45 }
		}
		# Always succeeds on prisoners
		else_if = {
			limit = { 
				FROM =  { 
					OR = {
						prisoner = yes
						is_incapable = yes
					}
				}
			}
			set_character_flag = vampire_feed_success
		}
		else = {
			random_list = {
				# Fail
				10 = {
					# Players much more likely to avoid
					modifier = {
						factor = 10
						FROM = { ai = no }
					}
					modifier = {
						factor = 3
						FROM = { trait = genius }
					}
					modifier = {
						factor = 2
						FROM = {
							OR = {
								trait = quick
								trait = shrewd
							}
						}
					}
					modifier = {
						factor = 2
						FROM = {
							OR = {
								trait = strong
								trait = robust
							}
						}
					}
					modifier = {
						factor = 3
						FROM = {
							OR = {
								trait = duelist
								trait = strategist
								trait = schemer
							}
						}
					}
					modifier = {
						factor = 1.2
						FROM = { trait = deceitful }
					}
					modifier = {
						factor = 3
						FROM = { trait = paranoid }
					}
					modifier = {
						factor = 5
						FROM = { trait = monster_hunter }
					}
					modifier = {
						factor = 3
						FROM = {
							OR = {
								trait = werewolf
								trait = vampire
								trait = dragon
								trait = god
								trait = demi_god
								trait = mythos_giant
								trait = djinn
								trait = demon_trait
								trait = ethereal_trait
							}
						}
					}
					modifier = {
						factor = 0.75
						FROM = { intrigue < 5 }
					}
					modifier = {
						factor = 1.2
						FROM = { intrigue = 10 }
					}
					modifier = {
						factor = 1.2
						FROM = { intrigue = 15 }
					}
					modifier = {
						factor = 1.2
						FROM = { intrigue = 20 }
					}
					modifier = {
						factor = 1.2
						FROM = { intrigue = 25 }
					}
					modifier = {
						factor = 1.2
						FROM = { intrigue = 30 }
					}
					modifier = {
						factor = 1.2
						FROM = { intrigue = 35 }
					}
					modifier = {
						factor = 1.2
						FROM = { intrigue = 40 }
					}
					modifier = {
						factor = 1.2
						has_instances_of_character_modifier = { modifier = known_monster amount = 1 }
					}
					modifier = {
						factor = 1.2
						has_instances_of_character_modifier = { modifier = known_monster amount = 2 }
					}
					modifier = {
						factor = 1.2
						has_instances_of_character_modifier = { modifier = known_monster amount = 3 }
					}
					set_character_flag = vampire_feed_failure
				}
				# Feed
				10 = {
					# Slightly more likely to succeed
					modifier = {
						factor = 1.05
						trait = hunger_1
					}
					modifier = {
						factor = 1.1
						trait = hunger_2
					}
					modifier = {
						factor = 1.15
						trait = hunger_3
					}
					modifier = {
						factor = 1.2
						trait = hunger_4
					}
					modifier = {
						factor = 1.25
						trait = hunger_5
					}
					modifier = {
						factor = 0.5
						duel_result_score_the_worst_trigger = yes
					}
					modifier = {
						factor = 0.6
						duel_result_score_terrible_trigger = yes
					}
					modifier = {
						factor = 0.8
						duel_result_score_bad_trigger = yes
					}
					modifier = {
						factor = 0.9
						duel_result_score_ok_trigger = yes
					}
					modifier = {
						factor = 1.1
						duel_result_score_good_trigger = yes
					}
					modifier = {
						factor = 1.3
						duel_result_score_great_trigger = yes
					}
					modifier = {
						factor = 1.6
						duel_result_score_fantastic_trigger = yes
					}
					modifier = {
						factor = 2
						duel_result_score_the_best_trigger = yes
					}
					modifier = {
						factor = 0.75
						intrigue < 5
					}
					modifier = {
						factor = 1.2
						intrigue = 10
					}
					modifier = {
						factor = 1.2
						intrigue = 15
					}
					modifier = {
						factor = 1.2
						intrigue = 20
					}
					modifier = {
						factor = 1.2
						intrigue = 25
					}
					modifier = {
						factor = 1.2
						intrigue = 30
					}
					modifier = {
						factor = 1.2
						intrigue = 35
					}
					modifier = {
						factor = 1.2
						intrigue = 40
					}
					modifier = {
						factor = 1.5
						FROM = { trait = pregnant } # Only 1.5 since it also has a combat rating penalty
					}
					modifier = {
						factor = 1.5
						FROM = {
							OR = {
								trait = slow
								trait = dull
								trait = imbecile
							}
						}
					}
					modifier = {
						factor = 2
						FROM = {
							OR = {
								trait = weak
								trait = feeble
							}
						}
					}
					modifier = {
						factor = 2
						FROM = { trait = trusting }
					}
					modifier = {
						factor = 2
						FROM = { trait = drunkard }
					}
					modifier = {
						factor = 3
						OR = {
							trait = duelist
							trait = hunter
							trait = schemer
						}
					}
					modifier = {
						factor = 0.9
						has_character_flag = vampire_feed_minor
					}
					modifier = {
						factor = 5
						reverse_has_opinion_modifier = { who = FROM modifier = opinion_thrall }
					}
					# Vile Blood effect
					modifier = {
						factor = 1.2
						any_owned_bloodline = {
							has_bloodline_flag = vampire_disease_hunger
						}
						FROM = { trait = has_aztec_disease }
					}
					modifier = {
						factor = 1.2
						any_owned_bloodline = {
							has_bloodline_flag = vampire_disease_hunger
						}
						FROM = { trait = has_typhus }
					}
					modifier = {
						factor = 1.2
						any_owned_bloodline = {
							has_bloodline_flag = vampire_disease_hunger
						}
						FROM = { trait = cancer }
					}
					modifier = {
						factor = 1.2
						any_owned_bloodline = {
							has_bloodline_flag = vampire_disease_hunger
						}
						FROM = { trait = has_tuberculosis }
					}
					modifier = {
						factor = 1.2
						any_owned_bloodline = {
							has_bloodline_flag = vampire_disease_hunger
						}
						FROM = { trait = dancing_plague }
					}
					modifier = {
						factor = 1.2
						any_owned_bloodline = {
							has_bloodline_flag = vampire_disease_hunger
						}
						FROM = { trait = dysentery }
					}
					modifier = {
						factor = 1.2
						any_owned_bloodline = {
							has_bloodline_flag = vampire_disease_hunger
						}
						FROM = { trait = flu }
					}
					modifier = {
						factor = 1.2
						any_owned_bloodline = {
							has_bloodline_flag = vampire_disease_hunger
						}
						FROM = { trait = food_poisoning }
					}
					modifier = {
						factor = 1.2
						any_owned_bloodline = {
							has_bloodline_flag = vampire_disease_hunger
						}
						FROM = { trait = gout }
					}
					modifier = {
						factor = 1.2
						any_owned_bloodline = {
							has_bloodline_flag = vampire_disease_hunger
						}
						FROM = { trait = syphilitic }
					}
					modifier = {
						factor = 1.2
						any_owned_bloodline = {
							has_bloodline_flag = vampire_disease_hunger
						}
						FROM = { trait = has_typhoid_fever }
					}
					modifier = {
						factor = 1.2
						any_owned_bloodline = {
							has_bloodline_flag = vampire_disease_hunger
						}
						FROM = { trait = ill }
					}
					modifier = {
						factor = 1.2
						any_owned_bloodline = {
							has_bloodline_flag = vampire_disease_hunger
						}
						FROM = { trait = leper }
					}
					modifier = {
						factor = 1.2
						any_owned_bloodline = {
							has_bloodline_flag = vampire_disease_hunger
						}
						FROM = { trait = has_measles }
					}
					modifier = {
						factor = 1.2
						any_owned_bloodline = {
							has_bloodline_flag = vampire_disease_hunger
						}
						FROM = { trait = pneumonic }
					}
					modifier = {
						factor = 1.2
						any_owned_bloodline = {
							has_bloodline_flag = vampire_disease_hunger
						}
						FROM = { trait = rabies }
					}
					modifier = {
						factor = 1.2
						any_owned_bloodline = {
							has_bloodline_flag = vampire_disease_hunger
						}
						FROM = { trait = scurvy }
					}
					modifier = {
						factor = 1.2
						any_owned_bloodline = {
							has_bloodline_flag = vampire_disease_hunger
						}
						FROM = { trait = has_small_pox }
					}
					modifier = {
						factor = 1.2
						any_owned_bloodline = {
							has_bloodline_flag = vampire_disease_hunger
						}
						FROM = { trait = has_bubonic_plague }
					}
					modifier = {
						factor = 1.2
						any_owned_bloodline = {
							has_bloodline_flag = vampire_disease_hunger
						}
						FROM = { trait = lovers_pox }
					}
					set_character_flag = vampire_feed_success
				}
			}
		}
		if = {
			limit = { has_character_flag = vampire_feed_success }
			random_list = {
				# Kill
				30 = {
					modifier = {
						factor = 0.2
						has_character_flag = vampire_feed_minor
					}
					modifier = {
						factor = 1.25
						trait = wroth
					}
					modifier = {
						factor = 1.25
						trait = cruel
					}
					modifier = {
						factor = 1.5
						trait = gluttonous
					}
					modifier = {
						factor = 1.2
						FROM = {
							OR = {
								trait = feeble
								trait = weak
							}
						}
					}
					modifier = {
						factor = 1.3
						FROM = { NOT = { health = 4 } }
					}
					modifier = {
						factor = 1.1
						trait = hunger_2
					}
					modifier = {
						factor = 1.2
						trait = hunger_3
					}
					modifier = {
						factor = 1.3
						trait = hunger_4
					}
					modifier = {
						factor = 1.4
						trait = hunger_5
					}
					set_character_flag = vampire_feed_kill
				}
				# Don't kill
				65 = {
					modifier = {
						factor = 2.67
						has_character_flag = vampire_feed_minor
					}
					modifier = {
						factor = 1.5
						trait = kind
					}
					modifier = {
						factor = 1.5
						trait = temperate
					}
					modifier = {
						factor = 2
						FROM = { health = 10 }
					}
					modifier = {
						factor = 2
						FROM = { trait = demi_god }
					}
					modifier = {
						factor = 8
						FROM = { trait = god }
					}
					modifier = {
						factor = 2
						FROM = {
							OR = {
								trait = strong
								trait = robust
							}
						}
					}
					set_character_flag = vampire_feed_survive
				}
				# Turn
				5 = {
					modifier = {
						factor = 0
						FROM = {
							OR = {
								trait = dragon
								trait = vampire
								trait = werewolf
								trait = demon_trait
								trait = ethereal_trait
								trait = zombie
								trait = mummy
							}
						}
					}
					modifier = {
						factor = 0.2
						FROM = { trait = monster_hunter }
					}
					modifier = {
						factor = 0.5
						FROM = {
							OR = {
								trait = god
								trait = demi_god
							}
						}
					}
					modifier = {
						factor = 0.2
						has_character_flag = vampire_feed_minor
					}
					set_character_flag = vampire_feed_turn
				}
			}
		}
		# Caught?
		random_list = {
			# Caught
			5 = {
				modifier = {
					factor = 2
					has_character_flag = vampire_feed_kill
				}
				modifier = {
					factor = 2
					trait = known_vampire
				}
				modifier = {
					factor = 1.2
					trait = wroth
				}
				modifier = {
					factor = 1.1
					trait = hunger_2
				}
				modifier = {
					factor = 1.2
					trait = hunger_3
				}
				modifier = {
					factor = 1.3
					trait = hunger_4
				}
				modifier = {
					factor = 1.4
					trait = hunger_5
				}
				modifier = {
					factor = 1.5
					FROM = { trait = genius }
					NOT = { has_character_flag = vampire_feed_kill }
				}
				modifier = {
					factor = 1.2
					FROM = {
						OR = {
							trait = quick
							trait = shrewd
						}
					}
					NOT = { has_character_flag = vampire_feed_kill }
				}
				modifier = {
					factor = 1.5
					FROM = { trait = hell_knight }
					NOT = { has_character_flag = vampire_feed_kill }
				}
				modifier = {
					factor = 1.5
					FROM = {
						OR = {
							trait = werewolf
							trait = dragon
							trait = djinn
							trait = demon_trait
							trait = ethereal_trait
							trait = god
						}
					}
					NOT = { has_character_flag = vampire_feed_kill }
				}
				modifier = {
					factor = 10
					FROM = { trait = monster_hunter }
					NOT = { has_character_flag = vampire_feed_kill }
				}
				modifier = {
					factor = 1.3
					intrigue < 5
				}
				modifier = {
					factor = 1.3
					diplomacy < 5
				}
				modifier = {
					factor = 1.5
					has_instances_of_character_modifier = { modifier = known_monster amount = 1 }
				}
				modifier = {
					factor = 1.5
					has_instances_of_character_modifier = { modifier = known_monster amount = 2 }
				}
				modifier = {
					factor = 2
					has_instances_of_character_modifier = { modifier = known_monster amount = 3 }
				}
				modifier = {
					factor = 2
					has_game_rule = { name = secrecy value = more }
				}
				modifier = {
					factor = 0.5
					has_game_rule = { name = secrecy value = fewer }
				}
				set_character_flag = vampire_feed_caught
			}
			# Suspected
			10 = {
				modifier = {
					factor = 1.5
					trait = known_vampire
					# And gives suspected murderer instead of suspected monster
				}
				modifier = {
					factor = 1.05
					trait = hunger_2
				}
				modifier = {
					factor = 1.1
					trait = hunger_3
				}
				modifier = {
					factor = 1.15
					trait = hunger_4
				}
				modifier = {
					factor = 1.2
					trait = hunger_5
				}
				modifier = {
					factor = 1.1
					trait = wroth
				}
				modifier = {
					factor = 1.2
					FROM = { trait = paranoid }
					NOT = { has_character_flag = vampire_feed_kill }
				}
				modifier = {
					factor = 1.2
					FROM = { trait = gregarious }
					NOT = { has_character_flag = vampire_feed_kill }
				}
				modifier = {
					factor = 1.3
					FROM = { trait = genius }
					NOT = { has_character_flag = vampire_feed_kill }
				}
				modifier = {
					factor = 1.1
					FROM = {
						OR = {
							trait = quick
							trait = shrewd
						}
					}
					NOT = { has_character_flag = vampire_feed_kill }
				}
				modifier = {
					factor = 1.2
					FROM = { num_of_friends = 3 }
					has_character_flag = vampire_feed_kill
				}
				modifier = {
					factor = 1.2
					has_instances_of_character_modifier = { modifier = known_monster amount = 1 }
				}
				modifier = {
					factor = 1.2
					has_instances_of_character_modifier = { modifier = known_monster amount = 2 }
				}
				modifier = {
					factor = 2
					has_game_rule = { name = secrecy value = more }
				}
				modifier = {
					factor = 0.5
					has_game_rule = { name = secrecy value = fewer }
				}
				set_character_flag = vampire_feed_suspected
			}
			# Got away
			15 = {
				modifier = {
					factor = 1.2
					trait = kind
				}
				modifier = {
					factor = 0.8
					trait = ambitious
				}
				modifier = {
					factor = 1.5
					trait = schemer
				}
				modifier = {
					factor = 0.75
					intrigue < 5
				}
				modifier = {
					factor = 1.5
					intrigue = 10
				}
				modifier = {
					factor = 1.5
					intrigue = 15
				}
				modifier = {
					factor = 1.5
					intrigue = 20
				}
				modifier = {
					factor = 1.5
					intrigue = 25
				}
				modifier = {
					factor = 1.5
					intrigue = 30
				}
				modifier = {
					factor = 1.5
					intrigue = 35
				}
				modifier = {
					factor = 1.5
					intrigue = 40
				}
				modifier = {
					factor = 5
					reverse_has_opinion_modifier = { who = FROM modifier = opinion_thrall }
				}
				set_character_flag = vampire_feed_escape
			}
		}
		
		### Results
		if = {
			limit = { has_character_flag = vampire_feed_success }
			character_event = { id = VAMPIRE.9 }
			# Handle the other conditions there
		}
		if = { # Gave gave an error using else
			limit = { NOT = { has_character_flag = vampire_feed_success } }
			# Failure - Caught
			if = {
				limit = { has_character_flag = vampire_feed_caught }
				# Get alerted to what happened
				FROM = { character_event = { id = VAMPIRE.11 } }
				# Vampire alerted to failure and awareness
				character_event = { id = VAMPIRE.12 }
				if = {
					limit = {
						has_minor_title = title_vampiric_protection
						NOT = { liege = { character = FROM } }
						liege = { trait = vampire }
					}
					liege = {
						FROM = {
							if = {
								limit = { NOT = { ROOT = { has_character_flag = vampire_feed_kill } } }
								reverse_opinion = { who = PREV modifier = attacked_protected years = 20 }
								character_event = { id = VAMPIRE.162 }
							}
							else = {
								reverse_opinion = { who = PREV modifier = killed_protected years = 50 }
								character_event = { id = VAMPIRE.164 }
							}
						}
					}
				}
			}
			# Failure - Suspected
			if = {
				limit = { has_character_flag = vampire_feed_suspected }
				# Get alerted to what happened
				FROM = { character_event = { id = VAMPIRE.47 } }
				# Vampire alerted
				character_event = { id = VAMPIRE.43 }
				if = {
					limit = {
						has_minor_title = title_vampiric_protection
						NOT = { liege = { character = FROM } }
						liege = { trait = vampire }
					}
					liege = {
						random_list = {
							4 = {
								modifier = {
									factor = 0.5
									FROM = {
										liege = {
											NOT = { character = PREVPREV }
										}
									}
								}
								FROM = {
									reverse_opinion = { who = PREV modifier = suspected_attacked_protected years = 10 }
									character_event = { id = VAMPIRE.163 }
								}
							}
							1 = {
								any_courtier = {
									preferred_limit = { trait = vampire }
									score_value = {
										value = 10
										interesting_courtier_selection_score = yes
									}
									reverse_opinion = { who = PREV modifier = suspected_attacked_protected years = 10 }
									character_event = { id = VAMPIRE.163 }
								}
							}
						}
					}
				}
			}
			# Failure, got away
			if = {
				limit = { has_character_flag = vampire_feed_escape }
				# Alert
				character_event = { id = VAMPIRE.13 }
			}
		}
	}
}

# VAMPIRE.11 - A vampire tried to feed on you
character_event = {
	id = VAMPIRE.11
	desc = EVTDESC_VAMPIRE.11
	picture = GFX_evt_bloody_man
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.11
		opinion = { who = FROM modifier = attempted_murder years = 100 }
		custom_tooltip = {
			text = tt_vampire_revealed
			hidden_tooltip = {
				FROM = { character_event = { id = VAMPIRE.25 } }
			}
		}
	}
}
	
# VAMPIRE.12 - Your victim escaped and knows what you are
# Replaced by VAMPIRE.25
character_event = {
	id = VAMPIRE.12
	desc = EVTDESC_VAMPIRE.12
	picture = GFX_evt_battle
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.12
		hidden_tooltip = {
			clr_character_flag = vampire_feed_success
			clr_character_flag = vampire_feed_failure
			clr_character_flag = vampire_feed_caught
			clr_character_flag = vampire_feed_suspected
			clr_character_flag = vampire_feed_escape
			clr_character_flag = vampire_feed_kill
			clr_character_flag = vampire_feed_survive
			clr_character_flag = vampire_feed_turn
			clr_character_flag = vampire_feed_minor
		}
	}
}
	
# VAMPIRE.13 - Your victim escaped
character_event = {
	id = VAMPIRE.13
	desc = EVTDESC_VAMPIRE.13
	picture = GFX_evt_whispers
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.13
		hidden_tooltip = {
			clr_character_flag = vampire_feed_success
			clr_character_flag = vampire_feed_failure
			clr_character_flag = vampire_feed_caught
			clr_character_flag = vampire_feed_suspected
			clr_character_flag = vampire_feed_escape
			clr_character_flag = vampire_feed_kill
			clr_character_flag = vampire_feed_survive
			clr_character_flag = vampire_feed_turn
			clr_character_flag = vampire_feed_minor
		}
	}
}

# VAMPIRE.14 - You've been uncovered as a vampire - snitched
character_event = {
	id = VAMPIRE.14
	title = EVTNAME_VAMPIRE.14
	desc = EVTDESC_VAMPIRE.14
	
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.14
		trigger = {
			NOT = { culture = vampire_culture }
		}
	}
	option = {
		name = EVTOPTB_VAMPIRE.14
		trigger = {
			culture = vampire_culture
		}
	}
	after = {
		opinion = {
			who = FROM
			modifier = exposed_me
		}
		add_trait = known_vampire
		hidden_tooltip = {
			remove_character_modifier = known_monster
			remove_trait = secret_vampire
		}
	}
}

# VAMPIRE.15 - Someone in your court is a vampire - informed
character_event = {
	id = VAMPIRE.15
	title = EVTNAME_VAMPIRE.15
	desc = { # Not vampire or vampire culture - they are a monster
		text = EVTDESCA_VAMPIRE.15
		trigger = {
			NOT = { trait = vampire }
			NOT = { culture = vampire_culture }
		}
	}
	desc = { # Vampire culture looks up to werewolves
		text = EVTDESCB_VAMPIRE.15
		trigger = {
			NOT = { trait = vampire }
			culture = vampire_culture
		}
	}
	desc = { # Hidden vampire needs to keep their cover
		text = EVTDESCC_VAMPIRE.15
		trigger = {
			trait = vampire
			NOT = { trait = known_vampire }
		}
	}
	desc = { # Another known vampire
		text = EVTDESCD_VAMPIRE.15
		trigger = {
			trait = known_vampire
		}
	}
	
	picture = GFX_evt_eavesdropping
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	capable_only = yes
	
	# Most people just hate you
	option = {
		name = EVTOPTA_VAMPIRE.15
		trigger = {
			NOT = { trait = vampire }
			NOT = { culture = vampire_culture }
		}
		
		opinion = {
			modifier = newly_found_vampire
			who = event_target:target_discovered_vampire
			years = 1
		}
		custom_tooltip = { text = EVTTOOLTIPA_VAMPIRE.15 }
		ai_chance = {
			factor = 100
			modifier = {
				factor = 10
				trait = monster_hunter
			}
			modifier = {
				factor = 2
				trait = zealous
			}
		}
	}
	# Secret vampires can take advantage of this
	option = {
		name = EVTOPTB_VAMPIRE.15
		trigger = {
			trait = vampire
			NOT = { trait = known_vampire }
		}
		opinion = {
			modifier = newly_found_vampire
			who = event_target:target_discovered_vampire
			years = 1
		}
		custom_tooltip = { text = EVTTOOLTIPA_VAMPIRE.15 }
		ai_chance = {
			factor = 100
			modifier = {
				factor = 10
				trait = monster_hunter
			}
			modifier = {
				factor = 2
				trait = zealous
			}
		}
	}
	# Vampire culture views this positively - impressed toward vampire, approves of my behavior from vampire
	option = {
		name = EVTOPTC_MYTH_WoL.7
		trigger = { culture = vampire_culture }
		opinion = {
			modifier = opinion_approves
			who = event_target:target_discovered_vampire
			years = 1
		}
		reverse_opinion = {
			modifier = approves_of_my_behaviour
			who = event_target:target_discovered_vampire
			years = 1
		}
		ai_chance = {
			factor = 100
		}
	}
	# Vampire culture + ambitious is envious. May gain envious trait
	option = {
		name = EVTOPTD_VAMPIRE.15
		trigger = {
			culture = vampire_culture
			OR = {
				trait = ambitious
				trait = envious
			}
			NOT = { trait = vampire }
		}
		opinion = {
			modifier = opinion_envy
			who = event_target:target_discovered_vampire
			years = 1
		}
		random = {
			chance = 20
			add_trait = envious
			hidden_tooltip = {
				# Notification
				character_event = { id = 38271 }
			}
		}
		ai_chance = {
			factor = 100
			modifier = {
				opinion = { who = event_target:target_discovered_vampire value = 50 }
				factor = 1.4
			}
			modifier = {
				NOT = { opinion = { who = event_target:target_discovered_vampire value = 50 } }
				factor = 0.8
			}
		}
	}
	# Vampires ignore it
	option = {
		name = EVTOPTE_VAMPIRE.15
		trigger = { trait = vampire }
		ai_chance = {
			factor = 100
		}
	}
	after = {
		hidden_tooltip = {
			character_event = { id = MYTH.56 }
		}
	}
}

# VAMPIRE.16 - Your vassal/courtier is a vampire - informed
character_event = {
	id = VAMPIRE.16
	title = EVTNAME_VAMPIRE.16
	picture = GFX_evt_eavesdropping
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	# Human announcement
	desc = {
		text = EVTDESCA_VAMPIRE.16
		trigger = {
			NOR = {
				trait = vampire
				culture = vampire_culture
			}
		}
	}
	# Vampire Culture announcement
	desc = {
		text = EVTDESCB_VAMPIRE.16
		trigger = {
			culture = vampire_culture
			NOT = { trait = vampire }
		}
	}
	# Secret vampire announcement
	desc = {
		text = EVTDESCC_VAMPIRE.16
		trigger = {
			trait = vampire
			NOT = { trait = known_vampire }
		}
	}
	# Known Vampire announcement
	desc = {
		text = EVTDESCD_VAMPIRE.16
		trigger = {
			trait = known_vampire
		}
	}
	
	# Arrest him (Non-vampire) 
	option = {
		name = EVTOPTA_VAMPIRE.16
		tooltip_info = martial
		trigger = {
			NOR = {
				trait = known_vampire
				culture = vampire_culture
			}
			martial = 15
		}
		event_target:target_discovered_vampire = {
			imprison = ROOT
		}
		ai_chance = {
			factor = 200
		}
	}
	# Let go for favor
	option = {
		name = EVTOPTE_VAMPIRE.16
		tooltip_info = intrigue
		trigger = {
			NOR = {
				trait = known_vampire
				culture = vampire_culture
			}
			intrigue = 12
			has_dlc = "Zeus" # For favors
		}
		hidden_tooltip = {
			event_target:target_discovered_vampire = { character_event = { id = VAMPIRE.22 days = 1 } }
		}
		custom_tooltip = { text = EVTTOOLTIPE_VAMPIRE.16 }
	}
	# He gets one last chance (Non-vampire)
	option = {
		name = EVTOPTB_VAMPIRE.16
		trigger = {
			NOR = {
				trait = vampire
				culture = vampire_culture
			}
		}
		opinion = {
			modifier = newly_found_vampire
			who = event_target:target_discovered_vampire
			years = 1
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 1.5
				trait = kind
			}
			modifier = {
				factor = 1.5
				trait = trusting
			}
		}
	}
	# Pleased (Vampire culture or known vampire)
	option = {
		name = EVTOPTC_VAMPIRE.16
		trigger = {
			OR = {
				culture = vampire_culture
				trait = known_vampire
			}
		}
		opinion = {
			modifier = opinion_pleased
			who = event_target:target_discovered_vampire
			months = 6
		}
		reverse_opinion = {
			modifier = opinion_pleased
			who = event_target:target_discovered_vampire
			months = 6
		}
	}
	# No concern of mine (Vampire or vampire culture)
	option = {
		name = EVTOPTD_VAMPIRE.16
		trigger = {
			OR = {
				culture = vampire_culture
				trait = vampire
			}
		}
	}
}

# VAMPIRE.17 - Vampire discovered
character_event = {
	id = VAMPIRE.17
	title = EVTNAME_VAMPIRE.17
	desc = EVTDESC_VAMPIRE.17
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		# Expose the vampire
		name = EVTOPTA_VAMPIRE.17
		trigger = {
			OR = {
				is_liege_of = event_target:target_discovered_vampire
				AND = {
					trait = monster_hunter
					event_target:target_discovered_vampire = {
						at_location = ROOT
					}
				}
			}
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 1.5
				trait = monster_hunter
				trait = werewolf
			}
			modifier = {
				factor = 0.2
				trait = vampire
			}
			modifier = {
				factor = 1.3
				NOT = { opinion = { who = event_target:target_discovered_vampire value = 0 } }
			}
			modifier = {
				factor = 0.9
				opinion = { who = event_target:target_discovered_vampire value = 50 }
			}
		}
		
		reverse_opinion = {
			who = event_target:target_discovered_vampire
			modifier = exposed_me
		}
		
		custom_tooltip = { text = EVTTOOLTIPA_VAMPIRE.17 }
		hidden_tooltip = {
			event_target:target_discovered_vampire = { character_event = { id = VAMPIRE.14 } } # Character uncovered as a vampire
			any_realm_character = { character_event = { id = VAMPIRE.15 } } # Court finds out character is a vampire
			if = {
				limit = {
					independent = no
				}
				liege = { character_event = { id = VAMPIRE.16 } } # Liege finds out character is a vampire
			}
		}
	}
	
	option = { 
		# Inform Liege
		name = EVTOPTB_VAMPIRE.17
		trigger = {
			NOT = { is_liege_of = event_target:target_discovered_vampire }
			event_target:target_discovered_vampire = { independent = no }
			event_target:target_discovered_vampire = { liege = { NOT = { war_with = ROOT } } }
			event_target:target_discovered_vampire = { liege = { NOT = { trait = known_vampire } } }
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.7
				trait = monster_hunter
			}
		}
		
		custom_tooltip = { text = EVTTOOLTIPB_VAMPIRE.17 }
		
		hidden_tooltip = {
			event_target:target_discovered_vampire = { liege = { character_event = { id = VAMPIRE.18 } } }
		}
	}
	
	option = { 
		# Blackmail to prevent factionalism
		name = EVTOPTC_VAMPIRE.17
		trigger = {
			is_liege_of = event_target:target_discovered_vampire
			event_target:target_discovered_vampire = {
				is_playable = yes
				NOT = { has_opinion_modifier = { who = liege modifier = opinion_coerced_into_leaving_faction } }
			}
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 10.0
				event_target:target_discovered_vampire = {
					in_faction = yes
				}
			}
			modifier = {
				factor = 1.2
				trait = vampire
			}
			modifier = {
				factor = 0.6
				trait = monster_hunter
			}
		}
			
		custom_tooltip = { text = EVTTOOLTIPC_VAMPIRE.17 }
		
		reverse_opinion = {
			who = event_target:target_discovered_vampire
			modifier = opinion_spy_blackmailed
		}
		
		hidden_tooltip = {
			event_target:target_discovered_vampire = { character_event = { id = VAMPIRE.20 } }
		}
	}
	
	option = { 
		# Blackmail to join faction
		name = EVTOPTD_VAMPIRE.17
		trigger = {
			same_liege = event_target:target_discovered_vampire
			event_target:target_discovered_vampire = {
				ai = yes
				is_playable = yes
				NOT = { liege = { character = ROOT } }
				NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_coerced_into_joining_faction } }
			}
		}
		ai_chance = {
			factor = 110
			modifier = {
				factor = 0.2
				trait = monster_hunter
			}
		}
		
		custom_tooltip = { text = EVTTOOLTIPD_VAMPIRE.17 }
		
		reverse_opinion = {
			who = event_target:target_discovered_vampire
			modifier = opinion_spy_blackmailed
		}
		
		hidden_tooltip = {
			event_target:target_discovered_vampire = { character_event = { id = VAMPIRE.19 } }
		}
	}
	
	option = { 
		# Keep it to yourself
		name = EVTOPTE_VAMPIRE.17
		ai_chance = {
			factor = 1
			modifier = {
				factor = 90
				trait = vampire
			}
		}
		
		custom_tooltip = { text = EVTTOOLTIPE_VAMPIRE.17 }
	}
	
	option = {
		name = EVTOPTF_VAMPIRE.17
		ai_chance = {
			factor = 1
		}
		
		custom_tooltip = { text = EVTTOOLTIPF_VAMPIRE.17 }
		
		hidden_tooltip = {
			character_event = { id = WoL.2069 }
		}
	}
}

# VAMPIRE.18 - Another character informs you that your courtier is a vampire
character_event = {
	id = VAMPIRE.18
	title = EVTNAME_VAMPIRE.18
	picture = GFX_evt_eavesdropping
	border = GFX_event_normal_frame_intrigue
	
	desc = {
		text = EVTDESCA_VAMPIRE.18
		trigger = { NOT = { trait = vampire } }
	}
	desc = {
		text = EVTDESCB_VAMPIRE.18
		trigger = { trait = vampire }
	}
	
	is_triggered_only = yes

	trigger = {
		NOT = { FROM = { war_with = ROOT } }
	}
	
	option = { # Expose
		name = EVTOPTA_VAMPIRE.18
		ai_chance = {
			factor = 100
			modifier = {
				factor = 1.5
				trait = monster_hunter
				trait = werewolf
			}
			modifier = {
				factor = 0.2
				trait = vampire
			}
			modifier = {
				factor = 1.3
				NOT = { opinion = { who = event_target:target_discovered_vampire value = 0 } }
			}
			modifier = {
				factor = 0.9
				opinion = { who = event_target:target_discovered_vampire value = 50 }
			}
		}
		
		reverse_opinion = {
			who = event_target:target_discovered_vampire
			modifier = exposed_me
		}
		
		custom_tooltip = { text = EVTTOOLTIPA_VAMPIRE.17 }
		hidden_tooltip = {
			event_target:target_discovered_werewolf = { character_event = { id = VAMPIRE.14 } } # Character uncovered as a vampire
			any_realm_character = { character_event = { id = VAMPIRE.15 } } # Court finds out character is a vampire
			if = {
				limit = {
					independent = no
				}
				liege = { character_event = { id = VAMPIRE.16 } } # Liege finds out character is a vampire
			}
		}
	}
	
	option = { 
		# Blackmail to prevent factionalism
		name = EVTOPTC_VAMPIRE.18
		trigger = {
			event_target:target_discovered_vampire = {
				is_playable = yes
				NOT = { has_opinion_modifier = { who = liege modifier = opinion_coerced_into_leaving_faction } }
			}
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 10.0
				event_target:target_discovered_vampire = {
					in_faction = yes
				}
			}
			modifier = {
				factor = 1.2
				trait = vampire
			}
			modifier = {
				factor = 0.6
				trait = monster_hunter
			}
		}
			
		custom_tooltip = { text = EVTTOOLTIPC_VAMPIRE.18 }
		
		reverse_opinion = {
			who = event_target:target_discovered_vampire
			modifier = opinion_spy_blackmailed
		}
	}
	
	option = { 
		# Keep it to myself
		name = EVTOPTE_VAMPIRE.18
		ai_chance = {
			factor = 1
			modifier = {
				factor = 90
				trait = vampire
			}
		}
	}
}

# VAMPIRE.19 - Blackmailed for being a vampire - join faction
character_event = {
	id = VAMPIRE.19
	picture = GFX_evt_eavesdropping
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	desc = OK # AI only
	
	option = {
		name = OK # Agree
		ai_chance = {
			factor = 100
			modifier = {
				factor = 5.0
				trait = craven
			}
			modifier = {
				factor = 3.0
				trait = proud
			}
			modifier = {
				factor = 3.0
				trait = content
			}
			modifier = {
				factor = 2.0
				trait = trusting
			}
			modifier = {
				factor = 2.0
				trait = patient
			}
		}
		opinion = {
			who = FROM
			modifier = opinion_coerced_into_joining_faction
			months = 1200
		}
		
		hidden_tooltip = {
			FROM = { character_event = { id = WoL.2090 days = 3 } }
		}
	}
	
	option = {
		name = OK # Never!
		ai_chance = {
			factor = 20
			modifier = {
				factor = 3
				trait = brave
			}
			modifier = {
				factor = 3
				trait = wroth
			}
			modifier = {
				factor = 3
				trait = ambitious
			}
		}
		
		opinion = {
			who = FROM
			modifier = opinion_slandered
			months = 24
		}
		
		hidden_tooltip = {
			FROM = { character_event = { id = VAMPIRE.21 days = 3 } }
		}
	}
}

# VAMPIRE.20 - Blackmailed for being a vampire - stay out of factions
character_event = {
	id = VAMPIRE.20
	picture = GFX_evt_eavesdropping
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	desc = OK # AI only
	
	option = {
		name = OK # Agree
		ai_chance = {
			factor = 100
			modifier = {
				factor = 5.0
				trait = craven
			}
			modifier = {
				factor = 3.0
				trait = proud
			}
			modifier = {
				factor = 3.0
				trait = content
			}
			modifier = {
				factor = 2.0
				trait = trusting
			}
			modifier = {
				factor = 2.0
				trait = patient
			}
		}
		
		opinion = {
			who = FROM
			modifier = opinion_coerced_into_joining_faction
			months = 1200
		}
		
		hidden_tooltip = {
			FROM = { character_event = { id = WoL.2090 days = 3 } }
		}
	}
	
	option = {
		name = OK # Never!
		ai_chance = {
			factor = 20
			modifier = {
				factor = 3.0
				trait = brave
			}
			modifier = {
				factor = 3.0
				trait = wroth
			}
			modifier = {
				factor = 3.0
				trait = ambitious
			}
		}
		
		opinion = {
			who = FROM
			modifier = opinion_slandered
			months = 24
		}
		
		hidden_tooltip = {
			FROM = { character_event = { id = VAMPIRE.21 days = 3 } }
		}
	}
}

# VAMPIRE.21 - Blackmailer notified of faction join refusal
character_event = {
	id = VAMPIRE.21
	picture = GFX_evt_eavesdropping
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	desc = EVTDESC_WOL_2091
	
	option = {
		name = EVTOPTA_WOL_2088
	}
}

# VAMPIRE.22 - Liege will let discovered vampire free for a favor
character_event = {
	id = VAMPIRE.22
	title = EVTNAME_VAMPIRE.22
	desc = EVTDESC_VAMPIRE.22
	picture = GFX_evt_throne_room
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	immediate = {
		clear_event_target = target_discovered_vampire
	}
	
	option = { # Accept the offer
		name = EVTOPTA_VAMPIRE.22
		add_favor = FROM
		ai_chance = { factor = 100 }
	}
	option = { # Refuse and get exposed
		name = EVTOPTB_VAMPIRE.22
		add_trait = known_vampire
		hidden_tooltip = { remove_character_modifier = known_monster }
		any_realm_character = { character_event = { id = VAMPIRE.23 } }
		FROM = {
			opinion = { 
				modifier = newly_found_vampire
				who = ROOT
				years = 1
			}
		}
		ai_chance = {
			factor = 10
			modifier = {
				factor = 3
				trait = proud
			}
		}
	}
}

# VAMPIRE.23 - A Vampire revealed, generic
character_event = {
	id = VAMPIRE.23
	title = EVTNAME_VAMPIRE.23
	desc = { # Not vampire or vampire culture - they are a monster
		text = EVTDESCA_VAMPIRE.23
		trigger = {
			NOT = { trait = vampire }
			NOT = { culture = vampire_culture }
		}
	}
	desc = { # vampire culture looks up to vampires
		text = EVTDESCB_VAMPIRE.23
		trigger = {
			NOT = { trait = vampire }
			culture = vampire_culture
		}
	}
	desc = { # Hidden vampire needs to keep their cover
		text = EVTDESCC_VAMPIRE.23
		trigger = {
			trait = vampire
			NOT = { trait = known_vampire }
		}
	}
	desc = { # Another known werewolf
		text = EVTDESCD_VAMPIRE.23
		trigger = {
			trait = known_vampire
		}
	}
	
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	capable_only = yes
	
	trigger = {
		#NOT = { trait = incapable }
	}
	
	# Most people just hate you
	option = {
		name = EVTOPTA_VAMPIRE.23	
		trigger = { # Most people
			NOT = { trait = vampire }
			NOT = { culture = vampire_culture }
		}
		opinion = {
			modifier = newly_found_vampire
			who = FROM
			years = 1
		}
		custom_tooltip = { text = EVTTOOLTIPA_VAMPIRE.23 }
		ai_chance = {
			factor = 100
			modifier = {
				factor = 10
				trait = monster_hunter
			}
			modifier = {
				factor = 2
				trait = zealous
			}
			modifier = {
				factor = 1.5
				ai_zeal = 20
			}
		}
	}	
	# Secret vampires can take advantage of this
	option = {
		name = EVTOPTB_VAMPIRE.23
		trigger = {
			trait = vampire
			NOT = { trait = known_vampire }
		}
		opinion = {
			modifier = newly_found_vampire
			who = FROM
			years = 1
		}
		custom_tooltip = { text = EVTTOOLTIPA_VAMPIRE.23 }
		ai_chance = {
			factor = 100
			modifier = {
				factor = 2
				ai_ambition = 30
			}
			modifier = {
				factor = 3
				trait = paranoid
			}
		}
	}
	# Vampire culture views this positively - impressed toward vampire, approves of my behavior from vampire
	option = {
		name = EVTOPTC_VAMPIRE.23
		trigger = { culture = vampire_culture }
		opinion = {
			modifier = opinion_approves
			who = FROM
			years = 1
		}
		reverse_opinion = {
			modifier = approves_of_my_behaviour
			who = FROM
			years = 1
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 1.5
				trait = content
			}
			modifier = {
				factor = 1.5
				trait = gregarious
			}
		}
	}
	# Vampire culture + ambitious is envious. May gain envious trait
	option = {
		name = EVTOPTD_VAMPIRE.23
		trigger = {
			culture = vampire_culture
			OR = {
				trait = ambitious
				trait = envious
			}
			NOT = { trait = vampire }
		}
		opinion = {
			modifier = opinion_envy
			who = FROM
			years = 1
		}
		random = {
			chance = 20
			add_trait = envious
			hidden_tooltip = {
				# Notification
				character_event = { id = 38271 }
			}
		}
		ai_chance = {
			factor = 100
			modifier = {
				opinion = { who = FROM value = 50 }
				factor = 1.4
			}
			modifier = {
				NOT = { opinion = { who = FROM value = 50 } }
				factor = 0.8
			}
		}
	}
	# Vampires can ignore it
	option = {
		name = EVTOPTE_VAMPIRE.23
		trigger = { trait = vampire }
		ai_chance = {
			factor = 100
		}
	}
}

# VAMPIRE.24 - Healing reveals hidden nature.
character_event = {
	id = VAMPIRE.24
	title = EVTNAME_VAMPIRE.24
	desc = EVTDESC_VAMPIRE.24
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	min_age = 16
	
	trigger = {
		trait = vampire
		NOT = { trait = known_vampire }
	}
	
	option = {
		name = EVTOPTA_VAMPIRE.24
		hidden_tooltip = {
			any_realm_character = { character_event = { id = VAMPIRE.23 } } # Court finds out character is a werewolf
			if = {
				limit = {
					independent = no
				}
				liege = { character_event = { id = VAMPIRE.23 } } # Liege finds out character is a werewolf
			}
		}
		remove_trait = secret_vampire
		add_trait = known_vampire
		hidden_tooltip = { remove_character_modifier = known_monster }
	}
}

# VAMPIRE.25 - Caught trying to feed on someone
character_event = {
	id = VAMPIRE.25
	desc = EVTDESC_VAMPIRE.25
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	trigger = {
		trait = secret_vampire
	}
	
	option = {
		name = EVTOPTA_VAMPIRE.25
		hidden_tooltip = {
			any_realm_character = { character_event = { id = VAMPIRE.23 } } # Court finds out character is a vampire
			if = {
				limit = {
					independent = no
				}
				liege = { character_event = { id = VAMPIRE.23 } } # Liege finds out character is a vampire
			}
		}
		remove_trait = secret_vampire
		add_trait = known_vampire
		hidden_tooltip = { remove_character_modifier = known_monster }
	}
}

# VAMPIRE.26 - Old vampires can get caught
character_event = {
	id = VAMPIRE.26
	desc = EVTDESC_VAMPIRE.26
	picture = GFX_evt_peasants
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	trigger = {
		trait = secret_vampire
		OR = {
			AND = {
				age = 30
				NOT = { immortal_age = 16 }
			}
			AND = {
				is_40 = yes
				NOT = { immortal_age = 20 }
			}
			AND = {
				is_50 = yes
				NOT = { immortal_age = 30 }
			}
			AND = {
				is_60 = yes
				NOT = { immortal_age = 40 }
			}
			is_70 = yes
		}
		NOR = {
			trait = immortal
			trait = god
			trait = philosopher_stone_trait
			trait = demon_trait
			trait = ethereal_trait
			trait = zombie
			trait = mummy
		}
	}
	
	weight_multiplier = {
		days = 1
		modifier = {
			factor = 1.5
			NOT = { immortal_age = 16 }
		}
		modifier = {
			factor = 1.2
			is_50 = yes
		}
		modifier = {
			factor = 1.5
			is_60 = yes
		}
		modifier = {
			factor = 1.8
			is_70 = yes
		}
		modifier = {
			factor = 2
			is_80 = yes
		}
		modifier = {
			factor = 2
			is_90 = yes
		}
		modifier = {
			factor = 2
			is_100 = yes
		}
		modifier = {
			factor = 1.1
			trait = hunger_1
		}
		modifier = {
			factor = 1.2
			trait = hunger_2
		}
		modifier = {
			factor = 1.4
			trait = hunger_3
		}
		modifier = {
			factor = 1.7
			trait = hunger_4
		}
		modifier = {
			factor = 2
			trait = hunger_5
		}
		modifier = {
			factor = 2
			has_instances_of_character_modifier = { modifier = known_monster amount = 1 }
		}
		modifier = {
			factor = 1.5
			has_instances_of_character_modifier = { modifier = known_monster amount = 2 }
		}
		modifier = {
			factor = 1.25 # They stack, but each one adds less than the previous
			has_instances_of_character_modifier = { modifier = known_monster amount = 3 }
		}
		modifier = {
			factor = 2
			has_game_rule = { name = secrecy value = more }
		}
		modifier = {
			factor = 0.5
			has_game_rule = { name = secrecy value = fewer }
		}
	}
	
	option = {
		name = EVTOPTA_VAMPIRE.26
		add_trait = known_vampire
		hidden_tooltip = {
			remove_trait = secret_vampire
			remove_character_modifier = known_monster
		}
		any_realm_character = { character_event = { id = VAMPIRE.23 } }
	}
}

# VAMPIRE.27 - Hunger increases
#character_event = {
#	id = VAMPIRE.27
#	hide_window = yes
#	
#	capable_only = yes
#	
#	mean_time_to_happen = {
#		months = 24
#		modifier = {
#			factor = 0.5
#			trait = gluttonous
#		}
#		modifier = {
#			factor = 1.5
#			trait = temperate
#		}
#		modifier = {
#			factor = 0.8
#			is_maimed_trigger = yes
#		}
#		modifier = {
#			factor = 2
#			trait = vomiting
#		}
#		modifier = {
#			factor = 0.9
#			trait = impaler
#		}
#		modifier = {
#			factor = 0.9
#			trait = hunter
#		}
#		modifier = {
#			factor = 1.1
#			trait = hunger_1
#		}
#		modifier = {
#			factor = 1.2
#			trait = hunger_2
#		}
#		modifier = {
#			factor = 1.3
#			trait = hunger_3
#		}
#		modifier = {
#			factor = 1.4
#			trait = hunger_5
#		}
#		modifier = {
#			factor = 1.5
#			trait = hunger_5
#		}
#		modifier = {
#			factor = 0.8
#			NOT = { age = 30 }
#		}
#		modifier = {
#			factor = 1.2
#			age = 50
#		}
#		modifier = {
#			factor = 1.2
#			age = 70
#		}
#		modifier = {
#			factor = 1.2
#			age = 90
#		}
#		modifier = {
#			factor = 1.2
#			age = 110
#		}
#		modifier = {
#			factor = 1.2
#			age = 130
#		}
#		modifier = {
#			factor = 1.2
#			age = 150
#		}
#		modifier = {
#			factor = 1.5
#			ai = yes
#		}
#		modifier = {
#			factor = 1.2
#			any_owned_bloodline = { has_bloodline_flag = vampire_disease_hunger }
#			trait = has_aztec_disease
#		}
#		modifier = {
#			factor = 1.2
#			any_owned_bloodline = { has_bloodline_flag = vampire_disease_hunger }
#			trait = has_typhus
#		}
#		modifier = {
#			factor = 1.2
#			any_owned_bloodline = { has_bloodline_flag = vampire_disease_hunger }
#			trait = cancer
#		}
#		modifier = {
#			factor = 1.2
#			any_owned_bloodline = { has_bloodline_flag = vampire_disease_hunger }
#			trait = has_tuberculosis
#		}
#		modifier = {
#			factor = 1.2
#			any_owned_bloodline = { has_bloodline_flag = vampire_disease_hunger }
#			trait = dancing_plague
#		}
#		modifier = {
#			factor = 1.2
#			any_owned_bloodline = { has_bloodline_flag = vampire_disease_hunger }
#			trait = dysentery
#		}
#		modifier = {
#			factor = 1.2
#			any_owned_bloodline = { has_bloodline_flag = vampire_disease_hunger }
#			trait = flu
#		}
#		modifier = {
#			factor = 1.2
#			any_owned_bloodline = { has_bloodline_flag = vampire_disease_hunger }
#			trait = food_poisoning
#		}
#		modifier = {
#			factor = 1.2
#			any_owned_bloodline = { has_bloodline_flag = vampire_disease_hunger }
#			trait = gout
#		}
#		modifier = {
#			factor = 1.2
#			any_owned_bloodline = { has_bloodline_flag = vampire_disease_hunger }
#			trait = syphilitic
#		}
#		modifier = {
#			factor = 1.2
#			any_owned_bloodline = { has_bloodline_flag = vampire_disease_hunger }
#			trait = has_typhoid_fever
#		}
#		modifier = {
#			factor = 1.2
#			any_owned_bloodline = { has_bloodline_flag = vampire_disease_hunger }
#			trait = ill
#		}
#		modifier = {
#			factor = 1.2
#			any_owned_bloodline = { has_bloodline_flag = vampire_disease_hunger }
#			trait = leper
#		}
#		modifier = {
#			factor = 1.2
#			any_owned_bloodline = { has_bloodline_flag = vampire_disease_hunger }
#			trait = has_measles
#		}
#		modifier = {
#			factor = 1.2
#			any_owned_bloodline = { has_bloodline_flag = vampire_disease_hunger }
#			trait = pneumonic
#		}
#		modifier = {
#			factor = 1.2
#			any_owned_bloodline = { has_bloodline_flag = vampire_disease_hunger }
#			trait = rabies
#		}
#		modifier = {
#			factor = 1.2
#			any_owned_bloodline = { has_bloodline_flag = vampire_disease_hunger }
#			trait = scurvy
#		}
#		modifier = {
#			factor = 1.2
#			any_owned_bloodline = { has_bloodline_flag = vampire_disease_hunger }
#			trait = sickly
#		}
#		modifier = {
#			factor = 1.2
#			any_owned_bloodline = { has_bloodline_flag = vampire_disease_hunger }
#			trait = has_small_pox
#		}
#		modifier = {
#			factor = 1.2
#			any_owned_bloodline = { has_bloodline_flag = vampire_disease_hunger }
#			trait = has_bubonic_plague
#		}
#	}
#	
#	trigger = {
#		trait = vampire
#	}
#	
#	immediate = {
#		if = {
#			limit = { trait = hunger_5 }
#			# Fails if imprisoned
#			if = {
#				limit = { prisoner = no }
#				# Automatic high-risk feeding
#				random_courtier = {
#					limit = {
#						NOT = { trait = known_vampire }
#					}
#					character_event = { id = VAMPIRE.28 }
#				}
#			}
#		}
#		else = {
#			# Get hungry
#			character_event = { id = VAMPIRE.35 }
#		}
#	}
#}

# VAMPIRE.28 - Determine feeding success. ROOT is target, FROM is vampire
character_event = {
	id = VAMPIRE.28
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		# Determine success or failure
		send_duel_result_event_effect = yes
		random_list = {
			# Avoid
			10 = {
				# Players more likely to avoid
				modifier = {
					factor = 10
					ai = no
				}
				modifier = {
					factor = 3
					trait = genius
				}
				modifier = {
					factor = 2
					OR = {
						trait = quick
						trait = shrewd
					}
				}
				modifier = {
					factor = 2
					OR = {
						trait = strong
						trait = robust
					}
				}
				modifier = {
					factor = 3
					OR = {
						trait = duelist
						trait = hunter
						trait = schemer
					}
				}
				modifier = {
					factor = 1.5
					trait = wroth
				}
				modifier = {
					factor = 3
					trait = paranoid
				}
				modifier = {
					factor = 5
					trait = monster_hunter
				}
				modifier = {
					factor = 3
					OR = {
						trait = werewolf
						trait = vampire
						trait = dragon
						trait = god
						trait = demi_god
						trait = giant
						trait = djinn
						trait = demon_trait
						trait = ethereal_trait
					}
				}
				# Caught or not?
				random_list = {
					# Caught
					40 = {
						modifier = {
							factor = 2
							trait = genius
						}
						modifier = {
							factor = 1.5
							OR = {
								trait = quick
								trait = shrewd
							}
						}
						modifier = {
							factor = 2
							trait = hell_knight
						}
						modifier = {
							factor = 2
							OR = {
								trait = werewolf
								trait = dragon
								trait = djinn
								trait = demon_trait
								trait = ethereal_trait
								trait = god
							}
						}
						modifier = {
							factor = 10
							trait = monster_hunter
						}
						modifier = {
							factor = 2
							has_game_rule = { name = secrecy value = more }
						}
						modifier = {
							factor = 0.5
							has_game_rule = { name = secrecy value = fewer }
						}
						# Alert attacked character
						character_event = { id = VAMPIRE.36 }
						# Vampire alerted to failure and awareness
						FROM = { character_event = { id = 11 } }
						FROM = { character_event = { id = VAMPIRE.30 } }
					}
					# Unnoticed - much less likely with automatic feeding
					10 = {
						modifier = {
							factor = 2
							OR = {
								trait = lunatic
								trait = possessed
							}
						}
						modifier = {
							factor = 2
							OR = {
								trait = slow
								trait = imbecile
								trait = inbred
								trait = dull
							}
						}
						modifier = {
							factor = 2
							trait = paranoid
						}
						# Vampire is alerted to failure
						FROM = { character_event = { id = VAMPIRE.33 } }
					}
				}
			}
			# Successful feeding. More likely
			30 = {
				modifier = {
					factor = 0.5
					duel_result_score_the_worst_trigger = yes
				}
				modifier = {
					factor = 0.6
					duel_result_score_terrible_trigger = yes
				}
				modifier = {
					factor = 0.8
					duel_result_score_bad_trigger = yes
				}
				modifier = {
					factor = 0.9
					duel_result_score_ok_trigger = yes
				}
				modifier = {
					factor = 1.1
					duel_result_score_good_trigger = yes
				}
				modifier = {
					factor = 1.3
					duel_result_score_great_trigger = yes
				}
				modifier = {
					factor = 1.6
					duel_result_score_fantastic_trigger = yes
				}
				modifier = {
					factor = 2
					duel_result_score_the_best_trigger = yes
				}
				modifier = {
					factor = 1.5
					trait = pregnant # Only 1.5 since it also has a combat rating penalty
				}
				modifier = {
					factor = 1.5
					OR = {
						trait = slow
						trait = dull
						trait = imbecile
					}
				}
				modifier = {
					factor = 2
					OR = {
						trait = weak
						trait = feeble
					}
				}
				# Vile Blood effect
				modifier = {
					factor = 1.2
					any_owned_bloodline = {
						has_bloodline_flag = vampire_disease_hunger
					}
					FROM = { trait = has_aztec_disease }
				}
				modifier = {
					factor = 1.2
					any_owned_bloodline = {
						has_bloodline_flag = vampire_disease_hunger
					}
					FROM = { trait = has_typhus }
				}
				modifier = {
					factor = 1.2
					any_owned_bloodline = {
						has_bloodline_flag = vampire_disease_hunger
					}
					FROM = { trait = cancer }
				}
				modifier = {
					factor = 1.2
					any_owned_bloodline = {
						has_bloodline_flag = vampire_disease_hunger
					}
					FROM = { trait = has_tuberculosis }
				}
				modifier = {
					factor = 1.2
					any_owned_bloodline = {
						has_bloodline_flag = vampire_disease_hunger
					}
					FROM = { trait = dancing_plague }
				}
				modifier = {
					factor = 1.2
					any_owned_bloodline = {
						has_bloodline_flag = vampire_disease_hunger
					}
					FROM = { trait = dysentery }
				}
				modifier = {
					factor = 1.2
					any_owned_bloodline = {
						has_bloodline_flag = vampire_disease_hunger
					}
					FROM = { trait = flu }
				}
				modifier = {
					factor = 1.2
					any_owned_bloodline = {
						has_bloodline_flag = vampire_disease_hunger
					}
					FROM = { trait = food_poisoning }
				}
				modifier = {
					factor = 1.2
					any_owned_bloodline = {
						has_bloodline_flag = vampire_disease_hunger
					}
					FROM = { trait = gout }
				}
				modifier = {
					factor = 1.2
					any_owned_bloodline = {
						has_bloodline_flag = vampire_disease_hunger
					}
					FROM = { trait = syphilitic }
				}
				modifier = {
					factor = 1.2
					any_owned_bloodline = {
						has_bloodline_flag = vampire_disease_hunger
					}
					FROM = { trait = has_typhoid_fever }
				}
				modifier = {
					factor = 1.2
					any_owned_bloodline = {
						has_bloodline_flag = vampire_disease_hunger
					}
					FROM = { trait = ill }
				}
				modifier = {
					factor = 1.2
					any_owned_bloodline = {
						has_bloodline_flag = vampire_disease_hunger
					}
					FROM = { trait = leper }
				}
				modifier = {
					factor = 1.2
					any_owned_bloodline = {
						has_bloodline_flag = vampire_disease_hunger
					}
					FROM = { trait = has_measles }
				}
				modifier = {
					factor = 1.2
					any_owned_bloodline = {
						has_bloodline_flag = vampire_disease_hunger
					}
					FROM = { trait = pneumonic }
				}
				modifier = {
					factor = 1.2
					any_owned_bloodline = {
						has_bloodline_flag = vampire_disease_hunger
					}
					FROM = { trait = rabies }
				}
				modifier = {
					factor = 1.2
					any_owned_bloodline = {
						has_bloodline_flag = vampire_disease_hunger
					}
					FROM = { trait = scurvy }
				}
				modifier = {
					factor = 1.2
					any_owned_bloodline = {
						has_bloodline_flag = vampire_disease_hunger
					}
					FROM = { trait = has_small_pox }
				}
				modifier = {
					factor = 1.2
					any_owned_bloodline = {
						has_bloodline_flag = vampire_disease_hunger
					}
					FROM = { trait = has_bubonic_plague }
				}
				modifier = {
					factor = 1.2
					any_owned_bloodline = {
						has_bloodline_flag = vampire_disease_hunger
					}
					FROM = { trait = lovers_pox }
				}
				FROM = { character_event = { id = VAMPIRE.9 } } # Feeding effect
				# Caught or not?
				random_list = {
					# Caught. More likley. Less than if you failed because there are more options
					20 = {
						modifier = {
							factor = 1.5
							FROM = { has_instances_of_character_modifier = { modifier = known_monster amount = 1 } }
						}
						modifier = {
							factor = 1.25
							FROM = { has_instances_of_character_modifier = { modifier = known_monster amount = 2 } }
						}
						modifier = {
							factor = 1.12
							FROM = { has_instances_of_character_modifier = { modifier = known_monster amount = 3 } }
						}
						modifier = {
							factor = 1.4
							FROM = { is_the_best_duelist_trigger = yes }
						}
						modifier = {
							factor = 1.3
							FROM = { is_fantastic_duelist_trigger = yes }
						}
						modifier = {
							factor = 1.2
							FROM = { is_great_duelist_trigger = yes }
						}
						modifier = {
							factor = 1.1
							FROM = { is_good_duelist_trigger = yes }
						}
						modifier = {
							factor = 2
							FROM = { trait = known_vampire }
						}
						modifier = {
							factor = 1.5
							FROM = { trait = gluttonous }
						}
						modifier = {
							factor = 0.8
							FROM = { trait = temperate }
						}
						modifier = {
							factor = 2
							has_game_rule = { name = secrecy value = more }
						}
						modifier = {
							factor = 0.5
							has_game_rule = { name = secrecy value = fewer }
						}
						FROM = { character_event = { id = 10 } }
						FROM = { character_event = { id = VAMPIRE.29 } }
					}
					# Known murder, but not known vampirism
					10 = {
						modifier = {
							factor = 0
							FROM = { trait = known_vampire }
						}
						modifier = {
							factor = 1.4
							FROM = { is_the_best_duelist_trigger = yes }
						}
						modifier = {
							factor = 1.3
							FROM = { is_fantastic_duelist_trigger = yes }
						}
						modifier = {
							factor = 1.2
							FROM = { is_great_duelist_trigger = yes }
						}
						modifier = {
							factor = 1.1
							FROM = { is_good_duelist_trigger = yes }
						}
						modifier = {
							factor = 0.5
							FROM = { has_character_modifier = known_monster }
						}
						modifier = {
							factor = 1.5
							FROM = { trait = cruel } # Brutality hides the bloodloss
						}
						modifier = {
							factor = 1.2
							FROM = { trait = impaler }
						}
						modifier = {
							factor = 1.2
							FROM = { trait = deceitful }
						}
						modifier = {
							factor = 1.2
							FROM = { has_character_modifier = known_murderer }
						}
						FROM = { character_event = { id = 10 } }
						FROM = { character_event = { id = VAMPIRE.31 } }
					}
					# Not known, but suspected
					10 = {
						modifier = {
							factor = 0
							FROM = { trait = known_vampire }
						}
						modifier = {
							factor = 1.2
							FROM = { has_instances_of_character_modifier = { modifier = known_monster amount = 1 } }
						}
						modifier = {
							factor = 1.1
							FROM = { has_instances_of_character_modifier = { modifier = known_monster amount = 2 } }
						}
						modifier = {
							factor = 1.05
							FROM = { has_instances_of_character_modifier = { modifier = known_monster amount = 3 } }
						}
						modifier = {
							factor = 2
							FROM = { intrigue = 15 }
						}
						# Suspicious character
						modifier = {
							factor = 1.1
							trait = wroth
						}
						modifier = {
							factor = 1.1
							trait = cruel
						}
						modifier = {
							factor = 1.1
							trait = impaler
						}
						modifier = {
							factor = 1.1
							trait = excommunicated
						}
						modifier = {
							factor = 1.1
							trait = cannibal_trait
						}
						modifier = {
							factor = 1.1
							trait = bastard
						}
						FROM = { character_event = { id = VAMPIRE.32 } }
					}
					# Not caught, but injured
					10 = {
						modifier = {
							factor = 0
							can_be_maimed_trigger = no
						}
						modifier = {
							factor = 3
							FROM = { is_the_best_duelist_trigger = yes }
						}
						modifier = {
							factor = 2.5
							FROM = { is_fantastic_duelist_trigger = yes }
						}
						modifier = {
							factor = 2
							FROM = { is_great_duelist_trigger = yes }
						}
						modifier = {
							factor = 1.5
							FROM = { is_good_duelist_trigger = yes }
						}
						modifier = {
							factor = 0.775
							FROM = { is_ok_duelist_trigger = yes }
						}
						modifier = {
							factor = 0.55
							FROM = { is_bad_duelist_trigger = yes }
						}
						modifier = {
							factor = 0.325
							FROM = { is_terrible_duelist_trigger = yes }
						}
						modifier = {
							factor = 0.1
							FROM = { is_the_worst_duelist_trigger = yes }
						}
						FROM = { character_event = { id = VAMPIRE.37 } }
					}
					# Not caught
					10 = {
						modifier = {
							factor = 1.5
							FROM = { intrigue = 10 }
						}
						modifier = {
							factor = 1.5
							FROM = { intrigue = 15 }
						}
						modifier = {
							factor = 1.5
							FROM = { intrigue = 20 }
						}
						modifier = {
							factor = 1.3
							FROM = { trait = temperate }
						}
						FROM = { character_event = { id = VAMPIRE.34 } }
					}
				}
			}
		}
	}
}
		
# VAMPIRE.29 - Automatic feeding successful, but caught
character_event = {
	id = VAMPIRE.29
	desc = EVTDESC_VAMPIRE.29
	picture = GFX_evt_house_arrest_escape
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.29
		FROM = { death = { death_reason = death_vampire killer = ROOT } }
		if = {
			limit = { NOT = { trait = known_vampire } }
			add_trait = known_vampire
			hidden_tooltip = { 
				remove_trait = secret_vampire
				remove_character_modifier = known_monster
				any_realm_character = {
					limit = { NOT = { character = ROOT } }
					character_event = { id = VAMPIRE.23 }
				}
			}
		}
	}
}

# VAMPIRE.30 - Automatic feeding failed and caught
character_event = {
	id = VAMPIRE.30
	desc = EVTDESC_VAMPIRE.30
	picture = GFX_evt_house_arrest_escape
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.30
		if = {
			limit = { NOT = { trait = known_vampire } }
			add_trait = known_vampire
			hidden_tooltip = { 
				remove_trait = secret_vampire
				remove_character_modifier = known_monster
				any_realm_character = {
					limit = { NOT = { character = ROOT } }
					character_event = { id = VAMPIRE.23 }
				}
			}
		}
	}
}

# VAMPIRE.31 - Automatic feeding successful, people know of killing but not vampirism
character_event = {
	id = VAMPIRE.31
	desc = EVTDESC_VAMPIRE.31
	picture = GFX_evt_bloody_man
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.31
		if = {
			limit = { NOT = { has_character_modifier = known_murderer } }
			add_character_modifier = {
				name = known_murderer
				years = 50
			}
		}
	}
}

# VAMPIRE.32 - Automatic feeding successful, people are suspicious
character_event = {
	id = VAMPIRE.32
	desc = EVTDESC_VAMPIRE.32
	picture = GFX_evt_state_diplomacy
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.32
		if = {
			limit = { NOT = { trait = known_vampire } }
			add_character_modifier = { modifier = known_monster years = 5 stacking = yes }
		}
		else = {
			any_courtier_or_vassal = {
				limit = { NOT = { trait = vampire } }
				random = {
					chance = 50
					opinion = { who = FROM modifier = opinion_terrified years = 5 }
				}
			}
		}
	}
}

# VAMPIRE.33 - Automatic feeding failed, not caught
character_event = {
	id = VAMPIRE.33
	desc = EVTDESC_VAMPIRE.33
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.33
	}
}

# VAMPIRE.34 - Automatic feeding successful, not caught
character_event = {
	id = VAMPIRE.34
	desc = EVTDESC_VAMPIRE.34
	picture = GFX_evt_dark_love
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.34
	}
}

# VAMPIRE.35 - Increase hunger
character_event = {
	id = VAMPIRE.35
	desc = EVTDESC_VAMPIRE.35
	picture = GFX_evt_lunatic
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	trigger = {
		trait = vampire
	}
	
	option = {
		name = EVTOPTA_VAMPIRE.35
		if = {
			limit = { trait = hunger_4 }
			add_trait = hunger_5
			hidden_tooltip = { remove_trait = hunger_4 }
		}
		else_if = {
			limit = { trait = hunger_3 }
			add_trait = hunger_4
			hidden_tooltip = { remove_trait = hunger_3 }
		}
		else_if = {
			limit = { trait = hunger_2 }
			add_trait = hunger_3
			hidden_tooltip = { remove_trait = hunger_2 }
		}
		else_if = {
			limit = { trait = hunger_1 }
			add_trait = hunger_2
			hidden_tooltip = { remove_trait = hunger_1 }
		}
		else = {
			add_trait = hunger_1
			hidden_tooltip = { remove_trait = hunger_0 }
		}
	}
}

# VAMPIRE.36 - Vampire tried to feed on you. Vampire already alerted to failure
character_event = {
	id = VAMPIRE.36
	desc = EVTDESC_VAMPIRE.11
	picture = GFX_evt_bloody_man
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.11
		opinion = { who = FROM modifier = attempted_murder years = 100 }
		custom_tooltip = {
			text = tt_vampire_revealed
			# Already alerted through another event
		}
	}
}

# VAMPIRE.37 - Automatic feeing successful. Not caught, but injured
character_event = {
	id = VAMPIRE.37
	desc = EVTDESC_VAMPIRE.37
	picture = GFX_evt_bloody_man
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.37
		random_list = {
			4 = {
				add_wounded_effect = yes
			}
			1 = {
				add_maimed_trait_effect = yes
			}
		}
	}
}

# VAMPIRE.38 - Vampire loses Drunkard "I don't drink... wine." On actions, timed
character_event = {
	id = VAMPIRE.38
	desc = EVTDESC_VAMPIRE.38
	picture = GFX_evt_noble_in_castle
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	trigger = {
		trait = drunkard
	}
	
	option = {
		name = EVTOPTA_VAMPIRE.38
		remove_trait = drunkard
	}
}

# VAMPIRE.39 - Defunct

# VAMPIRE.40 - Defunct

# VAMPIRE.41 - Defunct

# VAMPIRE.42 - Defunct

# VAMPIRE.43 - Suspected failing feeding
character_event = {
	id = VAMPIRE.43
	desc = EVTDESC_VAMPIRE.43
	picture = GFX_evt_jailbreak
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.42
		if = {
			limit = { trait = known_vampire }
			any_courtier = {
				limit = { NOT = { trait = vampire } }
				random = {
					chance = 50
					opinion = { who = FROM modifier = opinion_terrified years = 5 }
				}
			}
			any_vassal = {
				limit = { NOT = { trait = vampire } }
				random = {
					chance = 50
					opinion = { who = FROM modifier = opinion_terrified years = 5 }
				}
			}
		}
		else = {
			add_character_modifier = { modifier = known_monster years = 10 stacking = yes }
		}
		hidden_tooltip = {
			clr_character_flag = vampire_feed_success
			clr_character_flag = vampire_feed_failure
			clr_character_flag = vampire_feed_caught
			clr_character_flag = vampire_feed_suspected
			clr_character_flag = vampire_feed_escape
			clr_character_flag = vampire_feed_kill
			clr_character_flag = vampire_feed_survive
			clr_character_flag = vampire_feed_turn
			clr_character_flag = vampire_feed_minor
		}
	}
}

# VAMPIRE.44 - defunct

# VAMPIRE.45 - Attempted to feed on secret werewolf prisoner
character_event = {
	id = VAMPIRE.45
	desc = EVTDESC_VAMPIRE.45
	picture = GFX_evt_werewolf_shadowed
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.45
		add_trait = wounded
		tooltip = {
			FROMFROM = {
				add_trait = known_werewolf
				hidden_tooltip = { remove_character_modifier = known_monster }
				imprison = no
			}
		}
		hidden_tooltip = {
			clr_character_flag = vampire_feed_minor
		}
	}
}

# VAMPIRE.46 - Secret Werewolf escapes during feeding attempt
character_event = {
	id = VAMPIRE.46
	desc = EVTDESC_VAMPIRE.46
	picture = GFX_evt_werewolf_shadowed
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.46
		add_trait = known_werewolf
		prisoner = no
		hidden_tooltip = {
			remove_trait = secret_werewolf
			remove_character_modifier = known_monster
			any_realm_character = {
				character_event = { id = WEREWOLF.33 }
			}
		}
	}
}

# VAMPIRE.47 - Suspect FROM was up to something, stalking you (werewolf or vampire)
character_event = {
	id = VAMPIRE.47
	desc = EVTDESC_VAMPIRE.47
	picture = GFX_evt_hiding_from_pursuers
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.47
		tooltip = {
			FROM = { add_character_modifier = { modifier = known_monster years = 5 } }
		}
	}
}

# VAMPIRE.48 - Vampire fed on you. Identity known
#character_event = {
#	id = VAMPIRE.48
#	desc = EVTDESC_VAMPIRE.48
#	picture = GFX_evt_dark_love
#	border = GFX_event_normal_frame_intrigue
#	
#	is_triggered_only = yes
#	
#	option = {
#		name = EVTOPTA_VAMPIRE.48
#		tooltip = {
#			FROMFROM = {
#				reverse_opinion = { who = ROOT modifier = opinion_angry }
#				if = {
#					limit = { trait = secret_vampire }
#					add_trait = known_vampire
#				}
#			}
#		}
#	}
#}

# VAMPIRE.49 - Deleted


# VAMPIRE.50 - Deleted
		
# VAMPIRE.51 - Fed off character gets sick from vampire
character_event = {
	id = VAMPIRE.51
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = { FROM = { has_vampire_spread_illness = yes } }
			FROM = {
				ROOT = {
					spread_vampire_illness = yes
					if = {
						limit = { has_character_modifier = plague_vampire }
						change_variable = { which = vile_blood_spread value = 1 }
						if = {
							limit = {
								NOT = { any_owned_bloodline = { has_bloodline_modifier = vile_blood } }
								check_variable = { which = vile_blood_spread which = global_bloodline_vile_blood_needed }
							}
							multiply_variable = { which = global_bloodline_vile_blood_needed value = 2 }
							character_event = { id = MBLOODLINE.45 }
						}
					}
				}
				# Chance to lose one disease you've spread
				random_list = {
					3 = {}
					1 = {
						trigger = {
							OR = { 
								trait = has_tuberculosis
								has_character_flag = got_tuberculosis
							}
							NOT = { has_character_flag = vf_sick_tuberculosis }
						}
						modifier = {
							factor = 12
							ROOT = {
								OR = {
									trait = has_tuberculosis
									has_character_flag = got_tuberculosis
								}
							}
						}
						remove_trait = has_tuberculosis
						clr_character_flag = got_tuberculosis
					}
					1 = {
						trigger = {
							OR = { 
								trait = has_typhoid_fever
								has_character_flag = got_typhoid_fever
							}
							NOT = { has_character_flag = vf_sick_typhoid_fever }
						}
						modifier = {
							factor = 12
							ROOT = {
								OR = {
									trait = has_typhoid_fever
									has_character_flag = got_typhoid_fever
								}
							}
						}
						remove_trait = has_typhoid_fever
						clr_character_flag = got_typhoid_fever
					}
					1 = {
						trigger = {
							OR = { 
								trait = has_typhus
								has_character_flag = got_typhus
							}
							NOT = { has_character_flag = vf_sick_typhus }
						}
						modifier = {
							factor = 12
							ROOT = {
								OR = {
									trait = has_typhus
									has_character_flag = got_typhus
								}
							}
						}
						remove_trait = has_typhus
						clr_character_flag = got_typhus
					}
					1 = {
						trigger = {
							OR = { 
								trait = has_bubonic_plague
								has_character_flag = got_bubonic_plague
							}
							NOT = { has_character_flag = vf_sick_bubonic_plague }
						}
						modifier = {
							factor = 12
							ROOT = {
								OR = {
									trait = has_bubonic_plague
									has_character_flag = got_bubonic_plague
								}
							}
						}
						remove_trait = has_bubonic_plague
						clr_character_flag = got_bubonic_plague
					}
					1 = {
						trigger = {
							OR = { 
								trait = has_measles
								has_character_flag = got_measles
							}
							NOT = { has_character_flag = vf_sick_measles }
						}
						modifier = {
							factor = 12
							ROOT = {
								OR = {
									trait = has_measles
									has_character_flag = got_measles
								}
							}
						}
						remove_trait = has_measles
						clr_character_flag = got_measles
					}
					1 = {
						trigger = {
							OR = { 
								trait = has_small_pox
								has_character_flag = got_smallpox
							}
							NOT = { has_character_flag = vf_sick_small_pox }
						}
						modifier = {
							factor = 12
							ROOT = {
								OR = {
									trait = has_small_pox
									has_character_flag = got_smallpox
								}
							}
						}
						remove_trait = has_small_pox
						clr_character_flag = got_smallpox
					}
					1 = {
						trigger = {
							OR = { 
								trait = has_aztec_disease
								has_character_flag = got_aztec_disease
							}
							NOT = { has_character_flag = vf_sick_aztec_disease }
						}
						modifier = {
							factor = 12
							ROOT = {
								OR = {
									trait = has_aztec_disease
									has_character_flag = got_aztec_disease
								}
							}
						}
						remove_trait = has_aztec_disease
						clr_character_flag = got_aztec_disease
					}
					1 = {
						trigger = {
							OR = { 
								trait = syphilitic
								has_character_flag = got_syphilis
							}
							NOT = { has_character_flag = vf_sick_syphilitic }
						}
						modifier = {
							factor = 12
							ROOT = {
								OR = {
									trait = syphilitic
									has_character_flag = got_syphilis
								}
							}
						}
						remove_trait = syphilitic
						clr_character_flag = got_syphilis
					}
					1 = {
						trigger = {
							OR = { 
								trait = flu
								has_character_flag = got_flu
							}
							NOT = { has_character_flag = vf_sick_flu }
						}
						modifier = {
							factor = 12
							ROOT = {
								OR = {
									trait = flu
									has_character_flag = got_flu
								}
							}
						}
						remove_trait = flu
						clr_character_flag = got_flu
					}
					1 = {
						trigger = {
							OR = { 
								trait = dysentery
								has_character_flag = got_dysentery
							}
							NOT = { has_character_flag = vf_sick_dysentery }
						}
						modifier = {
							factor = 12
							ROOT = {
								OR = {
									trait = dysentery
									has_character_flag = got_dysentery
								}
							}
						}
						remove_trait = dysentery
						clr_character_flag = got_dysentery
					}
					1 = {
						trigger = {
							OR = { 
								trait = gout
								has_character_flag = got_gout
							}
							NOT = { has_character_flag = vf_sick_gout }
						}
						modifier = {
							factor = 12
							ROOT = {
								OR = {
									trait = gout
									has_character_flag = got_gout
								}
							}
						}
						remove_trait = gout
						clr_character_flag = got_gout
					}
					1 = {
						trigger = {
							OR = { 
								trait = food_poisoning
								has_character_flag = got_food_poisoning
							}
							NOT = { has_character_flag = vf_sick_food_poisoning }
						}
						modifier = {
							factor = 12
							ROOT = {
								OR = {
									trait = food_poisoning
									has_character_flag = got_food_poisoning
								}
							}
						}
						remove_trait = food_poisoning
						clr_character_flag = got_food_poisoning
					}
					1 = {
						trigger = {
							OR = { 
								trait = rabies
								has_character_flag = got_rabies
							}
							NOT = { has_character_flag = vf_sick_food_poisoning }
						}
						modifier = {
							factor = 12
							ROOT = {
								OR = {
									trait = rabies
									has_character_flag = got_rabies
								}
							}
						}
						remove_trait = rabies
						clr_character_flag = got_rabies
					}
					1 = {
						trigger = {
							OR = { 
								trait = cancer
								has_character_flag = got_cancer
							}
							NOT = { has_character_flag = vf_sick_cancer }
						}
						modifier = {
							factor = 12
							ROOT = {
								OR = {
									trait = cancer
									has_character_flag = got_cancer
								}
							}
						}
						remove_trait = cancer
						clr_character_flag = got_cancer
					}
					1 = {
						trigger = {
							OR = { 
								trait = pneumonic
								has_character_flag = got_pneumonic
							}
							NOT = { has_character_flag = vf_sick_pneumonic }
						}
						modifier = {
							factor = 12
							ROOT = {
								OR = {
									trait = pneumonic
									has_character_flag = got_pneumonic
								}
							}
						}
						remove_trait = pneumonic
						clr_character_flag = got_pneumonic
					}
					1 = {
						trigger = {
							OR = { 
								trait = dancing_plague
								has_character_flag = got_dancing_plague
							}
							NOT = { has_character_flag = vf_sick_dancing_plague }
						}
						modifier = {
							factor = 12
							ROOT = {
								OR = {
									trait = dancing_plague
									has_character_flag = got_dancing_plague
								}
							}
						}
						remove_trait = dancing_plague
						clr_character_flag = got_dancing_plague
					}
					1 = {
						trigger = {
							trait = ill
							NOT = { has_character_flag = vf_sick_ill }
						}
						modifier = {
							factor = 12
							ROOT = {
								trait = ill
							}
						}
						remove_trait = ill
					}
					1 = {
						trigger = {
							trait = leper
							NOT = { has_character_flag = vf_sick_leper }
						}
						modifier = {
							factor = 12
							ROOT = {
								trait = leper
							}
						}
						remove_trait = leper
					}
					1 = {
						trigger = {
							trait = lovers_pox
							NOT = { has_character_flag = vf_sick_lovers_pox }
						}
						modifier = {
							factor = 12
							ROOT = {
								trait = lovers_pox
							}
						}
						remove_trait = lovers_pox
					}
				}
			}
		}
	}
}

# VAMPIRE.52 - Pass VAMPIRE.47 to a lunatic as an alternate way of getting it
character_event = {
	id = VAMPIRE.52
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		any_realm_character = {
			ai = no
			trait = lunatic
		}
	}
	
	immediate = {
		random_realm_character = {
			limit = {
				ai = no
				trait = lunatic
			}
			character_event = { id = VAMPIRE.47 }
		}
	}
}

# VAMPIRE.53 - Vampire becomes more ambitious
character_event = {
	id = VAMPIRE.53
	desc = EVTDESC_VAMPIRE.53
	picture = GFX_evt_stressed_ruler
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	has_dlc = Zeus
	prisoner = no
	
	trigger = {
		independent = no
		trait = vampire
		NOT = { trait = ambitious }
		OR = {
			liege = { NOT = { government = blood_court_government } }
			is_voter = no
		}
	}
	
	option = {
		name = EVTOPTA_VAMPIRE.53
		trigger = { NOT = { trait = content } }
		add_trait = ambitious
		hidden_tooltip = { character_event = { id = 38278 } }
	}
	option = {
		name = EVTOPTB_VAMPIRE.53
		trigger = { trait = content }
		remove_trait = content
		hidden_tooltip = { character_event = { id = 38299 } }
	}
}

# VAMPIRE.54 - Vampire becomes envious
character_event = {
	id = VAMPIRE.54
	desc = EVTDESC_VAMPIRE.54
	picture = GFX_evt_stressed_ruler
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	prisoner = no
	
	trigger = { 
		trait = vampire
		NOT = { trait = envious }
	}
	
	option = {
		name = EVTOPTA_VAMPIRE.54
		trigger = { NOT = { trait = kind } }
		add_trait = envious
		hidden_tooltip = { character_event = { id = 38271 } }
	}
	option = {
		name = EVTOPTB_VAMPIRE.54
		trigger = { trait = kind }
		remove_trait = kind
		hidden_tooltip = { character_event = { id = 38307 } }
	}
}

# VAMPIRE.55 - Voter can make some private dealings to gain more political power
character_event = {
	id = VAMPIRE.55
	desc = EVTDESC_VAMPIRE.55
	picture = GFX_evt_war_planning
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	min_age = 16
	only_capable = yes
	has_dlc = Zeus
	prisoner = no
	
	trigger = {
		is_voter = yes
		liege = { government = blood_court_government }
		NAND = {
			liege = {
				ROOT = {
					persistent_event_target:sire = { character = PREVPREV }
				}
			}
			has_opinion_modifier = { modifier = vampire_blood_bond who = persistent_event_target:sire }
		}
		OR = {
			AND  = {
				diplomacy = 10
				NOT = { has_character_modifier = major_political_influence }
				NOT = {
					any_realm_character = {
						is_voter = yes
						has_character_modifier = major_political_influence
					}
				}
			}
			AND  = {
				martial = 10
				NOT = { has_character_modifier = major_military_influence }
				NOT = {
					any_realm_character = {
						is_voter = yes
						has_character_modifier = major_military_influence
					}
				}
			}
			AND  = {
				stewardship = 10
				NOT = { has_character_modifier = major_economic_influence }
				NOT = {
					any_realm_character = {
						is_voter = yes
						has_character_modifier = major_political_influence
					}
				}
			}
		}
	}
	
	weight_multiplier = {
		days = 1
		modifier = {
			factor = 2
			OR = {
				has_character_modifier = major_political_influence
				has_character_modifier = major_military_influence
				has_character_modifier = major_economic_influence
			}
		}
		modifier = {
			factor = 1.5
			trait = ambitious
		}
		modifier = {
			factor = 1.2
			trait = envious
		}
		modifier = {
			factor = 2
			has_minor_title = title_regent
		}
	}
	
	option = {
		name = EVTOPTA_VAMPIRE.55
		tooltip_info = diplomacy
		trigger = { 
			diplomacy = 10 
			NOT = {
				any_realm_character = {
					is_voter = yes
					has_character_modifier = major_political_influence
				}
			}
		}
		set_character_flag = gain_political_influence
		hidden_tooltip = { character_event = { id = VAMPIRE.56 days = 3 random = 10 } }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				ai_ambition = 50
			}
			modifier = {
				factor = 2
				ai_ambition = 100
			}
		}
	}
	option = {
		name = EVTOPTB_VAMPIRE.55
		tooltip_info = martial
		trigger = {
			martial = 10
			NOT = {
				any_realm_character = {
					is_voter = yes
					has_character_modifier = major_military_influence
				}
			}
		}
		set_character_flag = gain_military_influence
		hidden_tooltip = { character_event = { id = VAMPIRE.56 days = 3 random = 10 } }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				ai_honor = 50
			}
			modifier = {
				factor = 2
				ai_zeal = 50
			}
		}
	}
	option = {
		name = EVTOPTC_VAMPIRE.55
		tooltip_info = stewardship
		trigger = {
			stewardship = 10
			NOT = {
				any_realm_character = {
					is_voter = yes
					has_character_modifier = major_economic_influence
				}
			}
		}
		set_character_flag = gain_economic_influence
		hidden_tooltip = { character_event = { id = VAMPIRE.56 days = 3 random = 10 } }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				ai_greed = 50
			}
			modifier = {
				factor = 2
				ai_greed = 100
			}
		}
	}
	option = {
		name = EVTOPTD_VAMPIRE.55
		ai_chance = {
			factor = 1
		}
	}
}

# VAMPIRE.56 - Level of investment in influence
character_event = {
	id = VAMPIRE.56
	desc = EVTDESC_VAMPIRE.56
	picture = GFX_evt_relaxed_ruler
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	min_age = 16
	only_capable = yes
	has_dlc = Zeus
	prisoner = no
	
	trigger = {
		is_voter = yes
		liege = { government = blood_court_government }
	}
	
	option = {
		name = EVTOPTA_VAMPIRE.56
		scaled_wealth = -0.25
		hidden_tooltip = { 
			character_event = { id = VAMPIRE.57 days = 10 random = 20 }
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				ai_ambition < 0
			}
		}
	}
	
	option = {
		name = EVTOPTB_VAMPIRE.56
		scaled_wealth = -1
		hidden_tooltip = { 
			set_character_flag = major_influence_investment
			character_event = { id = VAMPIRE.57 days = 10 random = 20 }
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				ai_ambition = 50
			}
		}
	}
	
	option = {
		name = EVTOPTC_VAMPIRE.56
		hidden_tooltip = {
			clr_character_flag = gain_political_influence
			clr_character_flag = gain_military_influence
			clr_character_flag = gain_economic_influence
		}
		ai_chance = { factor = 0 }
	}
}

# VAMPIRE.57
character_event = {
	id = VAMPIRE.57
	hide_window = yes
	is_triggered_only = yes
	
	min_age = 16
	only_capable = yes
	has_dlc = Zeus
	prisoner = no
	
	trigger = {
		is_voter = yes
		liege = { government = blood_court_government }
	}
	
	immediate = {
		liege = {
			random_realm_character = {
				limit = { is_voter = yes }
				# Chance to interfere
				random_list = {
					30 = {
						modifier = {
							factor = 0
							ROOT = { has_character_flag = gain_political_influence }
							OR = {
								has_character_modifier = minor_political_influence
								has_character_modifier = political_influence
								has_character_modifier = major_political_influence
							}
						}
						modifier = {
							factor = 0
							ROOT = { has_character_flag = gain_military_influence }
							OR = {
								has_character_modifier = minor_military_influence
								has_character_modifier = military_influence
								has_character_modifier = major_military_influence
							}
						}
						modifier = {
							factor = 0
							ROOT = { has_character_flag = gain_economic_influence }
							OR = {
								has_character_modifier = minor_economic_influence
								has_character_modifier = economic_influence
								has_character_modifier = major_economic_influence
							}
						}
						modifier = {
							factor = 1.3
							intrigue = 10
						}
						modifier = {
							factor = 1.3
							intrigue = 12
						}
						modifier = {
							factor = 1.3
							intrigue = 15
						}
						modifier = {
							factor = 1.3
							intrigue = 20
						}
						modifier = {
							factor = 1.2
							diplomacy = 10
							ROOT = { has_character_flag = gain_political_influence }
						}
						modifier = {
							factor = 1.2
							diplomacy = 12
							ROOT = { has_character_flag = gain_political_influence }
						}
						modifier = {
							factor = 1.2
							diplomacy = 15
							ROOT = { has_character_flag = gain_political_influence }
						}
						modifier = {
							factor = 1.2
							diplomacy = 20
							ROOT = { has_character_flag = gain_political_influence }
						}
						modifier = {
							factor = 1.2
							diplomacy = 25
							ROOT = { has_character_flag = gain_political_influence }
						}
						modifier = {
							factor = 1.2
							martial = 10
							ROOT = { has_character_flag = gain_military_influence }
						}
						modifier = {
							factor = 1.2
							martial = 12
							ROOT = { has_character_flag = gain_military_influence }
						}
						modifier = {
							factor = 1.2
							martial = 15
							ROOT = { has_character_flag = gain_military_influence }
						}
						modifier = {
							factor = 1.2
							martial = 20
							ROOT = { has_character_flag = gain_military_influence }
						}
						modifier = {
							factor = 1.2
							martial = 25
							ROOT = { has_character_flag = gain_military_influence }
						}
						modifier = {
							factor = 1.2
							stewardship = 10
							ROOT = { has_character_flag = gain_economic_influence }
						}
						modifier = {
							factor = 1.2
							stewardship = 12
							ROOT = { has_character_flag = gain_economic_influence }
						}
						modifier = {
							factor = 1.2
							stewardship = 15
							ROOT = { has_character_flag = gain_economic_influence }
						}
						modifier = {
							factor = 1.2
							stewardship = 20
							ROOT = { has_character_flag = gain_economic_influence }
						}
						modifier = {
							factor = 1.2
							stewardship = 25
							ROOT = { has_character_flag = gain_economic_influence }
						}
						character_event = { id = VAMPIRE.58 }
					}
					70 = {
						ROOT = { character_event = { id = VAMPIRE.65 days = 3 random = 10 } }
					}
				}
				break = yes
			}
		}
		# If no one is able to intervene
		character_event = { id = VAMPIRE.65 days = 3 random = 10 }
	}
}

# VAMPIRE.58 - Another voter can intevene
character_event = {
	id = VAMPIRE.58
	picture = GFX_evt_suspicious_noble
	border = GFX_event_normal_frame_intrigue
	desc = {
		trigger = { FROM = { has_character_flag = gain_political_influence } }
		text = EVTDESCA_VAMPIRE.58
	}
	desc = {
		trigger = { FROM = { has_character_flag = gain_military_influence } }
		text = EVTDESCB_VAMPIRE.58
	}
	desc = {
		trigger = { FROM = { has_character_flag = gain_economic_influence } }
		text = EVTDESCC_VAMPIRE.58
	}
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.58 # Offer to help
		tooltip = { transfer_scaled_wealth = { to = FROM value = 0.1 } }
		FROM = {
			letter_event = { id = VAMPIRE.59 }
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				ai_honor = 25
			}
			modifier = {
				factor = 2
				ai_honor = 50
			}
			modifier = {
				factor = 2
				ai_honor = 75
			}
			modifier = {
				factor = 2
				ai_honor = 100
			}
		}
	}
	option = {
		name = EVTOPTB_VAMPIRE.59 # Interfere
		trigger = {
			NOR = {
				holds_favor_on = FROM
				owes_favor_to = FROM
			}
		}
		FROM = {
			letter_event = { id = VAMPIRE.60 }
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				ai_ambition = 30
			}
			modifier = {
				factor = 2
				ai_ambition = 60
			}
			modifier = {
				factor = 2
				ai_ambition = 90
			}
			modifier = {
				factor = 2
				ai_ambition = 120
			}
		}
	}
	option = {
		name = EVTOPTC_VAMPIRE.59 # Ignore
		FROM = {
			character_event = { id = VAMPIRE.65 days = 3 random = 10 }
		}
		ai_chance = { factor = 0 }
	}
}

# VAMPIRE.59 - Offered help
letter_event = {
	id = VAMPIRE.59
	desc = EVTDESC_VAMPIRE.59
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.59
		FROM = { transfer_scaled_wealth = { to = ROOT value = 0.1 } }
		custom_tooltip = { text = EVTTT_VAMPIRE.59 }
		hidden_tooltip = {
			FROM = { 
				save_event_target_as = helper
				letter_event = { id = VAMPIRE.61 days = 2 }
			}
			character_event = { id = VAMPIRE.65 days = 3 random = 10 }
		}
		ai_chance = {
			factor = 2
			modifier = {
				factor = 2
				opinion = { who = FROM value = 40 }
			}
		}
	}
	option = {
		name = EVTOPTB_VAMPIRE.59
		hidden_tooltip = {
			FROM = {
				letter_event = { id = VAMPIRE.62 days = 2 }
			}
			character_event = { id = VAMPIRE.65 days = 3 random = 10 }
		}
		ai_chance = {
			factor = 1
		}
	}
}

# VAMPIRE.60 - Threatened with interference
letter_event = {
	id = VAMPIRE.60
	desc = EVTDESC_VAMPIRE.60
	border = GFX_event_letter_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.60
		reverse_add_favor = FROM
		opinion = { who = FROM modifier = insulted }
		hidden_tooltip = {
			FROM = { letter_event = { id = VAMPIRE.63 days = 2 } }
			character_event = { id = VAMPIRE.65 days = 3 random = 10 }
		}
		ai_chance = {
			factor = 2
			modifier = {
				factor = 2
				opinion = { who = FROM value = 40 }
			}
		}
	}
	option = {
		name = EVTOPTB_VAMPIRE.60
		opinion = { who = FROM modifier = insulted }
		custom_tooltip = { text = EVTTT_VAMPIRE.60 }
		hidden_tooltip = {
			FROM = { letter_event = { id = VAMPIRE.64 days = 2 } }
			set_character_flag = interefered_influence
			character_event = { id = VAMPIRE.65 days = 3 random = 10 }
		}
		ai_chance = {
			factor = 1
		}
	}
}

# VAMPIRE.61 - Positive respose to aid
letter_event = {
	id = VAMPIRE.61
	desc = EVTDESC_VAMPIRE.61
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EXCELLENT
	}
}

# VAMPIRE.62 - Negative response to aid
letter_event = {
	id = VAMPIRE.62
	desc = EVTDESC_VAMPIRE.62
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.62
	}
}

# VAMPIRE.63 - Positive response to blackmail
letter_event = {
	id = VAMPIRE.63
	desc = EVTDESC_VAMPIRE.63
	border = GFX_event_letter_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EXCELLENT
	}
}

# VAMPIRE.64 - Negative response to blackmail
letter_event = {
	id = VAMPIRE.64
	desc = EVTDESC_VAMPIRE.64
	border = GFX_event_letter_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.64
	}
}

# VAMPIRE.65 - Determine level of result
character_event = {
	id = VAMPIRE.65
	hide_window = yes
	is_triggered_only = yes
	
	only_capable = yes
	prisoner = no
	
	immediate = {
		# Base for everyone
		random = {
			chance = 75
			change_variable = { which = influence value = 1 }
		}
		# Extra investment
		if = {
			limit = { has_character_flag = major_influence_investment }
			random = {
				chance = 50
				change_variable = { which = influence value = 1 }
			}
			random = {
				chance = 50
				change_variable = { which = influence value = 1 }
			}
		}
		# Stat bonus
		if = {
			limit = { has_character_flag = gain_political_influence }
			export_to_variable = { which = influence_stat value = diplomacy }
		}
		else_if = {
			limit = { has_character_flag = gain_military_influence }
			export_to_variable = { which = influence_stat value = martial }
		}
		else = {
			export_to_variable = { which = influence_stat value = stewardship }
		}
		if = {
			limit = { check_variable = { which = influence_stat value = 12 } }
			random = {
				chance = 20
				change_variable = { which = influence value = 1 }
			}
			if = {
				limit = { check_variable = { which = influence_stat value = 15 } }
				random = {
					chance = 30
					change_variable = { which = influence value = 1 }
				}
				if = {
					limit = { check_variable = { which = influence_stat value = 20 } }
					random = {
						chance = 50
						change_variable = { which = influence value = 1 }
					}
					if = {
						limit = { check_variable = { which = influence_stat value = 25 } }
						random = {
							chance = 75
							change_variable = { which = influence value = 1 }
						}
					}
				}
			}
		}
		set_variable = { which = influence_stat value = 0 }
		# Had help
		if = {
			limit = { event_target:helper = { always = yes } }
			change_variable = { which = influence value = 1 }
			random = {
				chance = 50
				change_variable = { which = influence value = 1 }
			}
		}
		# Hindered
		if = {
			limit = { has_character_flag = interefered_influence }
			change_variable = { which = influence value = -1 }
			random = {
				chance = 50
				change_variable = { which = influence value = -1 }
			}
			random = {
				chance = 10
				change_variable = { which = influence value = -1 }
			}
		}
		# Liege opinion
		if = {
			limit = { reverse_opinion = { who = liege value = 50 } }
			random = {
				chance = 40
				change_variable = { which = influence value = 1 }
			}
		}
		else_if = {
			limit = { NOT = { reverse_opinion = { who = liege value = -20 } } }
			random = {
				chance = 40
				change_variable = { which = influence value = -1 }
			}
		}
		
		character_event = { id = VAMPIRE.66 }
	}
}

# VAMPIRE.66 - Results of your work
character_event = {
	id = VAMPIRE.66
	picture = GFX_evt_powerful_ruler
	border = GFX_event_normal_frame_diplomacy
	
	# Diplomatic success
	desc = {
		trigger = {
			has_character_flag = gain_political_influence
			check_variable = { which = influence value = 1 }
		}
		text = EVTDESCA_VAMPIRE.66
	}
	# Diplomatic failure
	desc = {
		trigger = {
			has_character_flag = gain_political_influence
			is_variable_equal = { which = influence value = 0 }
		}
		text = EVTDESCB_VAMPIRE.66
		picture = GFX_evt_stressed_ruler
	}
	# Diplomatic Disaster - Rumours of you starting a coup
	desc = {
		trigger = {
			has_character_flag = gain_political_influence
			NOT = { check_variable = { which = influence value = 0 } }
		}
		text = EVTDESCC_VAMPIRE.66
		picture = GFX_evt_scandal
	}
	# Martial success
	desc = {
		trigger = {
			has_character_flag = gain_military_influence
			check_variable = { which = influence value = 1 }
		}
		text = EVTDESCD_VAMPIRE.66
		picture = GFX_evt_carriage
	}
	# Martial failure
	desc = {
		trigger = {
			has_character_flag = gain_military_influence
			is_variable_equal = { which = influence value = 0 }
		}
		text = EVTDESCE_VAMPIRE.66
		picture = GFX_evt_stressed_ruler
	}
	# Martial disaster - Organization mess, some areas completely unmanned
	desc = {
		trigger = {
			has_character_flag = gain_military_influence
			NOT = { check_variable = { which = influence value = 0 } }
		}
		text = EVTDESCF_VAMPIRE.66
		picture = GFX_evt_castle_construction
	}
	# Economic success
	desc = {
		trigger = {
			has_character_flag = gain_economic_influence
			check_variable = { which = influence value = 1 }
		}
		text = EVTDESCG_VAMPIRE.66
		picture = GFX_evt_relaxed_ruler
	}
	# Economic failure
	desc = {
		trigger = {
			has_character_flag = gain_economic_influence
			is_variable_equal = { which = influence value = 0 }
		}
		text = EVTDESCH_VAMPIRE.66
		picture = GFX_evt_stressed_ruler
	}
	# Economic disaster - businesses operating at a loss, but too vital to just shut down
	desc = {
		trigger = {
			has_character_flag = gain_economic_influence
			NOT = { check_variable = { which = influence value = 0 } }
		}
		text = EVTDESCI_VAMPIRE.66
		picture = GFX_evt_construction_site
	}
	
	is_triggered_only = yes
	
	option = {
		trigger = { check_variable = { which = influence value = 1 } }
		name = EVTOPTA_VAMPIRE.66
		if = {
			limit = { check_variable = { which = influence value = 9 } }
			if = {
				limit = { has_character_flag = gain_political_influence }
				add_character_modifier = { name = major_political_influence years = 10 }
			}
			if = {
				limit = { has_character_flag = gain_military_influence }
				add_character_modifier = { name = major_military_influence years = 10 }
			}
			if = {
				limit = { has_character_flag = gain_economic_influence }
				add_character_modifier = { name = major_economic_influence years = 10 }
			}
		}
		if = {
			limit = {
				check_variable = { which = influence value = 8 }
				check_variable = { which = influence value < 9 }
			}
			if = {
				limit = { has_character_flag = gain_political_influence }
				add_character_modifier = { name = major_political_influence years = 6 }
			}
			if = {
				limit = { has_character_flag = gain_military_influence }
				add_character_modifier = { name = major_military_influence years = 6 }
			}
			if = {
				limit = { has_character_flag = gain_economic_influence }
				add_character_modifier = { name = major_economic_influence years = 6 }
			}
		}
		if = {
			limit = {
				check_variable = { which = influence value = 7 }
				check_variable = { which = influence value < 8 }
			}
			if = {
				limit = { has_character_flag = gain_political_influence }
				add_character_modifier = { name = major_political_influence years = 4 }
			}
			if = {
				limit = { has_character_flag = gain_military_influence }
				add_character_modifier = { name = major_military_influence years = 4 }
			}
			if = {
				limit = { has_character_flag = gain_economic_influence }
				add_character_modifier = { name = major_economic_influence years = 4 }
			}
		}
		if = {
			limit = {
				check_variable = { which = influence value = 6 }
				check_variable = { which = influence value < 7 }
			}
			if = {
				limit = { has_character_flag = gain_political_influence }
				add_character_modifier = { name = major_political_influence years = 2 }
			}
			if = {
				limit = { has_character_flag = gain_military_influence }
				add_character_modifier = { name = major_military_influence years = 2 }
			}
			if = {
				limit = { has_character_flag = gain_economic_influence }
				add_character_modifier = { name = major_economic_influence years = 2 }
			}
		}
		if = {
			limit = {
				check_variable = { which = influence value = 5 }
				check_variable = { which = influence value < 6 }
			}
			if = {
				limit = { has_character_flag = gain_political_influence }
				add_character_modifier = { name = political_influence years = 6 }
			}
			if = {
				limit = { has_character_flag = gain_military_influence }
				add_character_modifier = { name = military_influence years = 6 }
			}
			if = {
				limit = { has_character_flag = gain_economic_influence }
				add_character_modifier = { name = economic_influence years = 6 }
			}
		}
		if = {
			limit = {
				check_variable = { which = influence value = 4 }
				check_variable = { which = influence value < 5 }
			}
			if = {
				limit = { has_character_flag = gain_political_influence }
				add_character_modifier = { name = political_influence years = 4 }
			}
			if = {
				limit = { has_character_flag = gain_military_influence }
				add_character_modifier = { name = military_influence years = 4 }
			}
			if = {
				limit = { has_character_flag = gain_economic_influence }
				add_character_modifier = { name = economic_influence years = 4 }
			}
		}
		if = {
			limit = {
				check_variable = { which = influence value = 3 }
				check_variable = { which = influence value < 4 }
			}
			if = {
				limit = { has_character_flag = gain_political_influence }
				add_character_modifier = { name = political_influence years = 2 }
			}
			if = {
				limit = { has_character_flag = gain_military_influence }
				add_character_modifier = { name = military_influence years = 2 }
			}
			if = {
				limit = { has_character_flag = gain_economic_influence }
				add_character_modifier = { name = economic_influence years = 2 }
			}
		}
		if = {
			limit = {
				check_variable = { which = influence value = 2 }
				check_variable = { which = influence value < 3 }
			}
			if = {
				limit = { has_character_flag = gain_political_influence }
				add_character_modifier = { name = minor_political_influence years = 4 }
			}
			if = {
				limit = { has_character_flag = gain_military_influence }
				add_character_modifier = { name = minor_military_influence years = 4 }
			}
			if = {
				limit = { has_character_flag = gain_economic_influence }
				add_character_modifier = { name = minor_economic_influence years = 4 }
			}
		}
		if = {
			limit = {
				check_variable = { which = influence value < 2 }
			}
			if = {
				limit = { has_character_flag = gain_political_influence }
				add_character_modifier = { name = minor_political_influence years = 2 }
			}
			if = {
				limit = { has_character_flag = gain_military_influence }
				add_character_modifier = { name = minor_military_influence years = 2 }
			}
			if = {
				limit = { has_character_flag = gain_economic_influence }
				add_character_modifier = { name = minor_economic_influence years = 2 }
			}
		}
		# Helper gets a bonus too
		if = {
			limit = { event_target:helper = { always = yes } }
			hidden_tooltip = {
				event_target:helper = {
					set_variable = { which = influence which = ROOT }
					if = {
						limit = { ROOT = { has_character_flag = gain_political_influence } }
						add_character_modifier = { name = minor_political_influence years = 2 }
					}
					if = {
						limit = { ROOT = { has_character_flag = gain_military_influence } }
						add_character_modifier = { name = minor_military_influence years = 2 }
					}
					if = {
						limit = { ROOT = { has_character_flag = gain_economic_influence } }
						add_character_modifier = { name = minor_economic_influence years = 2 }
					}
					character_event = { id = VAMPIRE.67 }
				}
			}
		}
	}
	
	# Failure
	option = {
		trigger = { is_variable_equal = { which = influence value = 0 } }
		name = EVTOPTB_VAMPIRE.66
	}
	
	# Disaster
	option = {
		trigger = { NOT = { check_variable = { which = influence value = 0 } } }
		name = EVTOPTC_VAMPIRE.66
		if = {
			limit = { is_variable_equal = { which = influence value = -1 } }
			if = {
				limit = { has_character_flag = gain_political_influence }
				add_character_modifier = { name = political_humilitation years = 2 }
			}
			if = {
				limit = { has_character_flag = gain_military_influence }
				add_character_modifier = { name = military_disorganisation years = 2 }
			}
			if = {
				limit = { has_character_flag = gain_economic_influence }
				add_character_modifier = { name = economic_disaster years = 2 }
			}
		}
		if = {
			limit = { is_variable_equal = { which = influence value = -2 } }
			if = {
				limit = { has_character_flag = gain_political_influence }
				add_character_modifier = { name = political_humilitation years = 4 }
			}
			if = {
				limit = { has_character_flag = gain_military_influence }
				add_character_modifier = { name = military_disorganisation years = 4 }
			}
			if = {
				limit = { has_character_flag = gain_economic_influence }
				add_character_modifier = { name = economic_disaster years = 4 }
			}
		}
		if = {
			limit = { check_variable = { which = influence value < -2 } }
			if = {
				limit = { has_character_flag = gain_political_influence }
				add_character_modifier = { name = political_humilitation years = 6 }
			}
			if = {
				limit = { has_character_flag = gain_military_influence }
				add_character_modifier = { name = military_disorganisation years = 6 }
			}
			if = {
				limit = { has_character_flag = gain_economic_influence }
				add_character_modifier = { name = economic_disaster years = 6 }
			}
		}
	}
	
	after = {
		hidden_tooltip = {
			clr_character_flag = gain_political_influence
			clr_character_flag = gain_military_influence
			clr_character_flag = gain_economic_influence
			clr_character_flag = interefered_influence
			clr_character_flag = major_influence_investment
			set_variable = { which = influence value = 0 }
		}
	}
}

# VAMPIRE.67 - Helper reaps benefits
character_event = {
	id = VAMPIRE.67
	desc = EVTDESC_VAMPIRE.67
	picture = GFX_evt_powerful_ruler
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.67
		if = {
			limit = { check_variable = { which = influence value = 9 } }
			if = {
				limit = { has_character_flag = gain_political_influence }
				add_character_modifier = { modifier = political_influence years = 8 }
			}
			else_if = {
				limit = { has_character_flag = gain_military_influence }
				add_character_modifier = { modifier = military_influence years = 8 }
			}
			else = {
				add_character_modifier = { modifier = economic_influence years = 8 }
			}
		}
		else_if = {
			limit = { check_variable = { which = influence value = 8 } }
			if = {
				limit = { has_character_flag = gain_political_influence }
				add_character_modifier = { modifier = political_influence years = 6 }
			}
			else_if = {
				limit = { has_character_flag = gain_military_influence }
				add_character_modifier = { modifier = military_influence years = 6 }
			}
			else = {
				add_character_modifier = { modifier = economic_influence years = 6 }
			}
		}
		else_if = {
			limit = { check_variable = { which = influence value = 7 } }
			if = {
				limit = { has_character_flag = gain_political_influence }
				add_character_modifier = { modifier = political_influence years = 4 }
			}
			else_if = {
				limit = { has_character_flag = gain_military_influence }
				add_character_modifier = { modifier = military_influence years = 4 }
			}
			else = {
				add_character_modifier = { modifier = economic_influence years = 4 }
			}
		}
		else_if = {
			limit = { check_variable = { which = influence value = 6 } }
			if = {
				limit = { has_character_flag = gain_political_influence }
				add_character_modifier = { modifier = political_influence years = 2 }
			}
			else_if = {
				limit = { has_character_flag = gain_military_influence }
				add_character_modifier = { modifier = military_influence years = 2 }
			}
			else = {
				add_character_modifier = { modifier = economic_influence years = 2 }
			}
		}
		else_if = {
			limit = { check_variable = { which = influence value = 5 } }
			if = {
				limit = { has_character_flag = gain_political_influence }
				add_character_modifier = { modifier = minor_political_influence years = 6 }
			}
			else_if = {
				limit = { has_character_flag = gain_military_influence }
				add_character_modifier = { modifier = minor_military_influence years = 6 }
			}
			else = {
				add_character_modifier = { modifier = minor_economic_influence years = 6 }
			}
		}
		else_if = {
			limit = { check_variable = { which = influence value = 4 } }
			if = {
				limit = { has_character_flag = gain_political_influence }
				add_character_modifier = { modifier = minor_political_influence years = 4 }
			}
			else_if = {
				limit = { has_character_flag = gain_military_influence }
				add_character_modifier = { modifier = minor_military_influence years = 4 }
			}
			else = {
				add_character_modifier = { modifier = minor_economic_influence years = 4 }
			}
		}
		else = {
			if = {
				limit = { has_character_flag = gain_political_influence }
				add_character_modifier = { modifier = minor_political_influence years = 2 }
			}
			else_if = {
				limit = { has_character_flag = gain_military_influence }
				add_character_modifier = { modifier = minor_military_influence years = 2 }
			}
			else = {
				add_character_modifier = { modifier = minor_economic_influence years = 2 }
			}
		}
	}
	
	after = {
		hidden_tooltip = {
			set_variable = { which = influence value = 0 }
			clr_character_flag = gain_political_influence
			clr_character_flag = gain_military_influence
			clr_character_flag = gain_economic_influence
		}
	}
}

# Improve level of control

# VAMPIRE.68 - Select control to improve
character_event = {
	id = VAMPIRE.68
	hide_window = yes
	is_triggered_only = yes
	
	has_dlc = Zeus
	prisoner = no
	capable_only = yes
	
	trigger = {
		liege = { government = blood_court_government }
		is_voter = yes
		OR = {
			has_character_modifier = minor_political_influence
			has_character_modifier = political_influence
			has_character_modifier = minor_military_influence
			has_character_modifier = military_influence
			has_character_modifier = minor_economic_influence
			has_character_modifier = economic_influence
		}
		NAND = {
			liege = {
				ROOT = {
					persistent_event_target:sire = { character = PREVPREV }
				}
			}
			has_opinion_modifier = { modifier = vampire_blood_bond who = persistent_event_target:sire }
		}
	}
	
	weight_multiplier = {
		days = 1
		modifier = {
			factor = 2
			OR = {
				has_character_modifier = minor_political_influence
				has_character_modifier = minor_military_influence
				has_character_modifier = minor_economic_influence
			}
		}
		modifier = {
			factor = 1.5
			trait = ambitious
		}
		modifier = {
			factor = 1.2
			trait = envious
		}
	}
	
	immediate = {
		random_list = {
			1 = {
				modifier = {
					factor = 0
					NOR = {
						has_character_modifier = minor_political_influence
						has_character_modifier = political_influence
					}
				}
				modifier = {
					factor = 2
					has_character_modifier = political_influence
				}
				set_character_flag = improve_political_influence
			}
			1 = {
				modifier = {
					factor = 0
					NOR = {
						has_character_modifier = minor_military_influence
						has_character_modifier = military_influence
					}
				}
				modifier = {
					factor = 2
					has_character_modifier = military_influence
				}
				set_character_flag = improve_military_influence
			}
			1 = {
				modifier = {
					factor = 0
					NOR = {
						has_character_modifier = minor_economic_influence
						has_character_modifier = economic_influence
					}
				}
				modifier = {
					factor = 2
					has_character_modifier = economic_influence
				}
				set_character_flag = improve_economic_influence
			}
		}
		character_event = { id = VAMPIRE.69 }
	}
}

# VAMPIRE.69 - How do you want to consolidate your power?
character_event = {
	id = VAMPIRE.69
	desc = EVTDESC_VAMPIRE.69
	picture = GFX_evt_noble_in_castle
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	# Bribes
	option = {
		name = EVTOPTA_VAMPIRE.69
		hidden_tooltip = {
			set_character_flag = vampire_bribe
			character_event = { id = VAMPIRE.70 days = 3 random = 3 }
		}
	}
	# Favors
	option = {
		name = EVTOPTB_VAMPIRE.69
		hidden_tooltip = {
			set_character_flag = vampire_favor
			character_event = { id = VAMPIRE.71 days = 4 random = 4 }
		}
	}
	# Assassinations
	option = {
		name = EVTOPTC_VAMPIRE.69
		hidden_tooltip = {
			set_character_flag = vampire_assassinate
			character_event = { id = VAMPIRE.76 days = 5 random = 7 }
		}
	}
	# No need
	option = {
		name = EVTOPTD_VAMPIRE.69
	}
}
	
# VAMPIRE.70 - Pay a bribe
character_event = {
	id = VAMPIRE.70
	desc = EVTDESC_VAMPIRE.70
	picture = GFX_evt_bribe_accepted
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = { # Pay
		name = EVTOPTA_VAMPIRE.70
		scaled_wealth = -0.2
		hidden_tooltip = {
			change_variable = { which = invest_level value = 1 }
			vampire_plot_repeat_chance = yes
		}
		ai_chance = { factor = 1000 }
	}
	option = { # Give up
		name = EVTOPTA_VAMPIRE.70
		custom_tooltip = { text = tt_investment_give_up }
		hidden_tooltip = {
			clr_character_flag = improve_political_influence
			clr_character_flag = improve_military_influence
			clr_character_flag = improve_economic_influence
			clr_character_flag = vampire_bribe
			set_variable = { which = invest_level value = 0 }
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 1000
				NOT = { scaled_wealth = 0.2 }
			}
		}
	}
}

# VAMPIRE.71 - Select someone to handle favor
character_event = {
	id = VAMPIRE.71
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		random_list = {
			19 = {
				liege = {
					random_realm_character = {
						limit = {
							is_voter = yes
							prisoner = no
							liege = { character = PREVPREV }
						}
						if = {
							limit = { owes_favor_to = ROOT }
							character_event = { id = VAMPIRE.80 }
						}
						else = {
							character_event = { id = VAMPIRE.72 }
						}
						break = yes
					}
				}
				# No possible characters
				character_event = { id = VAMPIRE.78 }
			}
			1 = {
				character_event = { id = VAMPIRE.82 }
			}
		}
	}
}

# VAMPIRE.72 - Other voter receives favor offer
character_event = {
	id = VAMPIRE.72
	desc = EVTDESC_VAMPIRE.72
	picture = GFX_evt_bribe_accepted
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.72
		FROM = { letter_event = { id = VAMPIRE.73 days = 2 tooltip = EVTTT_VAMPIRE.72 } }
	}
	option = {
		name = EVTOPTB_VAMPIRE.72
		hidden_tooltip = { FROM = { character_event = { id = VAMPIRE.71 days = 2 } } }
	}
}

# VAMPIRE.73 - Offer favor for support
letter_event = {
	id = VAMPIRE.73
	desc = EVTDESC_VAMPIRE.73
	border = GFX_event_letter_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.73
		reverse_add_favor = FROM
		hidden_tooltip = {
			FROM = { letter_event = { id = VAMPIRE.81 days = 2 } }
			change_variable = { which = invest_level value = 2 }
			vampire_plot_repeat_chance = yes
		}
	}
	
	option = {
		name = EVTOPTB_VAMPIRE.73
		hidden_tooltip = { 
			FROM = { letter_event = { id = VAMPIRE.75 days = 2 } }
			character_event = { id = VAMPIRE.71 days = 3 random = 3 }
		}
	}
	
	option = {
		name = EVTOPTC_VAMPIRE.73
		custom_tooltip = { text = tt_investment_give_up }
		hidden_tooltip = {
			clr_character_flag = improve_political_influence
			clr_character_flag = improve_military_influence
			clr_character_flag = improve_economic_influence
			clr_character_flag = vampire_favor
			set_variable = { which = invest_level value = 0 }
		}
	}
}
			
# VAMPIRE.74 - Call in favor for support
character_event = {
	id = VAMPIRE.74
	desc = EVTDESC_VAMPIRE.74
	picture = GFX_evt_noble_in_castle
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.74
		reverse_remove_favor = FROM
		hidden_tooltip = {
			FROM = { character_event = { id = VAMPIRE.79 days = 2 } }
			change_variable = { which = invest_level value = 2 }
			vampire_plot_repeat_chance = yes
		}
	}
	
	option = {
		name = EVTOPTB_VAMPIRE.74
		hidden_tooltip = { character_event = { id = VAMPIRE.71 days = 3 random = 3 } }
	}
	
	option = {
		name = EVTOPTC_VAMPIRE.73
		custom_tooltip = { text = tt_investment_give_up }
		hidden_tooltip = {
			clr_character_flag = improve_political_influence
			clr_character_flag = improve_military_influence
			clr_character_flag = improve_economic_influence
			clr_character_flag = vampire_favor
			set_variable = { which = invest_level value = 0 }
		}
	}
}

# VAMPIRE.75 - Favor offer ignored
letter_event = {
	id = VAMPIRE.75
	desc = EVTDESC_VAMPIRE.75
	border = GFX_event_letter_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = ALAS
	}
}
	
# VAMPIRE.76 - Assassination needed
character_event = {
	id = VAMPIRE.76
	desc = EVTDESC_VAMPIRE.76
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.76
		random_list = {
			40 = { # Caught
				custom_tooltip = {
					text = tt_assassination_caught
					hidden_tooltip = {
						character_event = { id = VAMPIRE.77 days = 1 }
						liege = { character_event = { id = VAMPIRE.83 days = 1 } }
						set_character_flag = abandon_influence
					}
				}
			}
			60 = {
				modifier = {
					factor = 1.2
					intrigue = 8
				}
				modifier = {
					factor = 1.2
					intrigue = 10
				}
				modifier = {
					factor = 1.2
					intrigue = 12
				}
				modifier = {
					factor = 1.2
					intrigue = 15
				}
				modifier = {
					factor = 1.2
					intrigue = 20
				}
				modifier = {
					factor = 1.2
					intrigue = 25
				}
				custom_tooltip = {
					text = tt_major_influence_progress
					hidden_tooltip = { change_variable = { which = invest_level value = 2 } }
				}
			}
		}
	}
	option = {
		name = EVTOPTB_VAMPIRE.76
		random_list = {
			20 = { # Caught
				custom_tooltip = {
					text = tt_assassination_caught
					hidden_tooltip = {
						character_event = { id = VAMPIRE.77 days = 1 }
						liege = { character_event = { id = VAMPIRE.83 days = 1 } }
						set_character_flag = abandon_influence
					}
				}
			}
			80 = {
				modifier = {
					factor = 1.2
					intrigue = 8
				}
				modifier = {
					factor = 1.2
					intrigue = 10
				}
				modifier = {
					factor = 1.2
					intrigue = 12
				}
				modifier = {
					factor = 1.2
					intrigue = 15
				}
				modifier = {
					factor = 1.2
					intrigue = 20
				}
				modifier = {
					factor = 1.2
					intrigue = 25
				}
				custom_tooltip = {
					text = tt_minor_influence_progress
					hidden_tooltip = { change_variable = { which = invest_level value = 1 } }
				}
			}
		}
	}
	option = {
		name = EVTOPTC_VAMPIRE.76
		custom_tooltip = {
			text = tt_investment_give_up
			hidden_tooltip = {
				set_character_flag = abandon_influence
				clr_character_flag = improve_political_influence
				clr_character_flag = improve_military_influence
				clr_character_flag = improve_economic_influence
				clr_character_flag = vampire_assassinate
				set_variable = { which = invest_level value = 0 }
			}
		}
	}
	
	after = {
		hidden_tooltip = {
			if = {
				limit = { NOT = { has_character_flag = abandon_influence } }
				vampire_plot_repeat_chance = yes
			}
		}
		clr_character_flag = abandon_influence
	}
}

# VAMPIRE.77 - Assassination caught
character_event = {
	id = VAMPIRE.77
	desc = EVTDESC_VAMPIRE.77
	picture = GFX_evt_into_the_dungeon
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.77
		tooltip = { # Actual imprisonment in VAMPIRE.83
			liege = { reverse_imprison = ROOT }
			reverse_opinion = { who = liege modifier = evil_murderer }
		}
	}
}

# VAMPIRE.78 - Success
character_event = {
	id = VAMPIRE.78
	desc = EVTDESC_VAMPIRE.77
	picture = GFX_evt_powerful_ruler
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.77
		if = {
			limit = { has_character_flag = improve_political_influence }
			if = {
				limit = { has_character_modifier = minor_political_influence }
				hidden_tooltip = { remove_character_modifier = minor_political_influence }
				add_character_modifier = { modifier = political_influence years = 6 }
			}
			else_if = {
				limit = { has_character_modifier = political_influence }
				hidden_tooltip = { remove_character_modifier = minor_political_influence }
				add_character_modifier = { modifier = political_influence years = 6 }
			}
			hidden_tooltip = { liege = { character_event = { id = VAMPIRE.84 } } }
		}
		else_if = {
			limit = { has_character_flag = improve_military_influence }
			if = {
				limit = { has_character_modifier = minor_military_influence }
				hidden_tooltip = { remove_character_modifier = minor_military_influence }
				add_character_modifier = { modifier = military_influence years = 6 }
			}
			else_if = {
				limit = { has_character_modifier = military_influence }
				hidden_tooltip = { remove_character_modifier = minor_military_influence }
				add_character_modifier = { modifier = military_influence years = 6 }
			}
			hidden_tooltip = { liege = { character_event = { id = VAMPIRE.85 } } }
		}
		else = {
			if = {
				limit = { has_character_modifier = minor_economic_influence }
				hidden_tooltip = { remove_character_modifier = minor_economic_influence }
				add_character_modifier = { modifier = economic_influence years = 6 }
			}
			else_if = {
				limit = { has_character_modifier = economic_influence }
				hidden_tooltip = { remove_character_modifier = minor_economic_influence }
				add_character_modifier = { modifier = economic_influence years = 6 }
			}
			hidden_tooltip = { liege = { character_event = { id = VAMPIRE.86 } } }
		}
		hidden_tooltip = {
			clr_character_flag = improve_political_influence
			clr_character_flag = improve_military_influence
			clr_character_flag = improve_economic_influence
			set_variable = { which = invest_level value = 0 }
		}
	}
}

# VAMPIRE.79 - Favor called in for support
character_event = {
	id = VAMPIRE.79
	desc = EVTDESC_VAMPIRE.79
	picture = GFX_evt_noble_in_castle
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.79
		tooltip = { remove_favor = FROM }
	}
}

# VAMPIRE.80 - Ping favor character for VAMPIRE.74
character_event = {
	id = VAMPIRE.80
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		FROM = { character_event = { id = VAMPIRE.74 } }
	}
}

# VAMPIRE.81 - Your help was accepted and you are owed a favor (letter)
letter_event = {
	id = VAMPIRE.81
	desc = EVTDESC_VAMPIRE.81
	border = GFX_event_letter_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EXCELLENT
		tooltip = { add_favor = FROM }
	}
}
	
# VAMPIRE.82 - No characters interested in favor
character_event = {
	id = VAMPIRE.82
	desc = EVTDESC_VAMPIRE.82
	picture = GFX_evt_stressed_ruler
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.82
		custom_tooltip = { text = tt_investment_give_up }
		hidden_tooltip = {
			clr_character_flag = improve_political_influence
			clr_character_flag = improve_military_influence
			clr_character_flag = improve_economic_influence
			clr_character_flag = vampire_favor
			set_variable = { which = invest_level value = 0 }
		}
	}
}

# VAMPIRE.83 - Liege informed of your murder
character_event = {
	id = VAMPIRE.83
	desc = EVTDESC_VAMPIRE.83
	picture = GFX_evt_into_the_dungeon
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.83
		reverse_imprison = FROM
		FROM = {
			if = {
				limit = { has_character_modifier = major_political_influence }
				remove_character_modifier = major_political_influence
				ROOT = { remove_character_modifiers = { modifier = undermined_bureaucracy amount = 1 } }
			}
			else_if = {
				limit = { has_character_modifier = political_influence }
				remove_character_modifier = political_influence
				ROOT = { remove_character_modifiers = { modifier = undermined_bureaucracy amount = 1 } }
			}
			else_if = {
				limit = { has_character_modifier = minor_political_influence }
				remove_character_modifier = minor_political_influence
				ROOT = { remove_character_modifiers = { modifier = undermined_bureaucracy amount = 1 } }
			}
			if = {
				limit = { has_character_modifier = major_military_influence }
				remove_character_modifier = major_military_influence
				ROOT = { remove_character_modifiers = { modifier = loss_of_military_control amount = 1 } }
			}
			else_if = {
				limit = { has_character_modifier = military_influence }
				remove_character_modifier = military_influence
				ROOT = { remove_character_modifiers = { modifier = loss_of_military_control amount = 1 } }
			}
			else_if = {
				limit = { has_character_modifier = minor_military_influence }
				remove_character_modifier = minor_military_influence
				ROOT = { remove_character_modifiers = { modifier = loss_of_military_control amount = 1 } }
			}
			if = {
				limit = { has_character_modifier = major_economic_influence }
				remove_character_modifier = major_economic_influence
				ROOT = { remove_character_modifiers = { modifier = operating_losses amount = 1 } }
			}
			else_if = {
				limit = { has_character_modifier = economic_influence }
				remove_character_modifier = economic_influence
				ROOT = { remove_character_modifiers = { modifier = operating_losses amount = 1 } }
			}
			else_if = {
				limit = { has_character_modifier = minor_economic_influence }
				remove_character_modifier = minor_economic_influence
				ROOT = { remove_character_modifiers = { modifier = operating_losses amount = 1 } }
			}
			hidden_tooltip = {
				clr_character_flag = improve_political_influence
				clr_character_flag = improve_military_influence
				clr_character_flag = improve_economic_influence
				clr_character_flag = vampire_assassinate
				set_variable = { which = invest_level value = 0 }
			}
		}
	}
}

# VAMPIRE.84 - Liege gets undermined bueracracy
character_event = {
	id = VAMPIRE.84
	desc = EVTDESC_VAMPIRE.84
	picture = GFX_evt_stressed_ruler
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.84
		add_character_modifier = { modifier = undermined_bureaucracy years = 6 stacking = yes }
	}
}

# VAMPIRE.85 - Liege gets loss of military control
character_event = {
	id = VAMPIRE.85
	desc = EVTDESC_VAMPIRE.85
	picture = GFX_evt_stressed_ruler
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.85
		add_character_modifier = { modifier = loss_of_military_control years = 6 stacking = yes }
	}
}

# VAMPIRE.86 - Liege gets operating losses
character_event = {
	id = VAMPIRE.86
	desc = EVTDESC_VAMPIRE.86
	picture = GFX_evt_stressed_ruler
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.86
		add_character_modifier = { modifier = operating_losses years = 6 stacking = yes }
	}
}

# Event to extend major control

# VAMPIRE.87 - Extend political control
character_event = {
	id = VAMPIRE.87
	desc = EVTDESC_VAMPIRE.87
	picture = GFX_evt_stressed_ruler
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	trigger = {
		liege = {
			government = blood_court_government
		}
		is_voter = yes
		has_character_modifier = major_political_influence
	}
	
	option = {
		name = EVTOPTA_VAMPIRE.87
		scaled_wealth = { value = -0.8 min = 40 max = 100 }
		hidden_tooltip = {
			remove_character_modifier = major_political_influence
		}
		add_character_modifier = { modifier = major_political_influence years = 10 }
		if = {
			limit = { has_character_modifier = diplomatic_control }
			hidden_tooltip = { remove_character_modifier = diplomatic_control }
			add_character_modifier = { modifier = diplomatic_control years = 10 }
		}
		if = {
			limit = { has_character_modifier = control_of_court }
			hidden_tooltip = { remove_character_modifier = control_of_court }
			add_character_modifier = { modifier = control_of_court years = 10 }
		}
		if = {
			limit = { has_character_modifier = unrestricted_access }
			hidden_tooltip = { remove_character_modifier = unrestricted_access }
			add_character_modifier = { modifier = unrestricted_access years = 10 }
		}
	}
	
	option = {
		name = EVTOPTB_VAMPIRE.87
	}
}

# VAMPIRE.88 - Extend military control
character_event = {
	id = VAMPIRE.88
	desc = EVTDESC_VAMPIRE.88
	picture = GFX_evt_stressed_ruler
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	trigger = {
		liege = {
			government = blood_court_government
		}
		is_voter = yes
		has_character_modifier = major_military_influence
	}
	
	option = {
		name = EVTOPTA_VAMPIRE.87
		scaled_wealth = { value = -0.8 min = 40 max = 100 }
		hidden_tooltip = {
			remove_character_modifier = major_military_influence
		}
		add_character_modifier = { modifier = major_military_influence years = 10 }
		if = {
			limit = { has_character_modifier = castle_guards }
			hidden_tooltip = { remove_character_modifier = castle_guards }
			add_character_modifier = { modifier = castle_guards years = 10 }
		}
		if = {
			limit = { has_character_modifier = supply_chains }
			hidden_tooltip = { remove_character_modifier = supply_chains }
			add_character_modifier = { modifier = supply_chains years = 10 }
		}
		if = {
			limit = { has_character_modifier = guarded_roads }
			hidden_tooltip = { remove_character_modifier = guarded_roads }
			add_character_modifier = { modifier = guarded_roads years = 10 }
		}
	}
	
	option = {
		name = EVTOPTB_VAMPIRE.87
	}
}

# VAMPIRE.89 - Extend economic control
character_event = {
	id = VAMPIRE.89
	desc = EVTDESC_VAMPIRE.89
	picture = GFX_evt_stressed_ruler
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	trigger = {
		liege = {
			government = blood_court_government
		}
		is_voter = yes
		has_character_modifier = major_economic_influence
	}
	
	option = {
		name = EVTOPTA_VAMPIRE.87
		scaled_wealth = { value = -0.8 min = 40 max = 100 }
		hidden_tooltip = {
			remove_character_modifier = major_economic_influence
		}
		add_character_modifier = { modifier = major_economic_influence years = 10 }
		if = {
			limit = { has_character_modifier = trade_negotiations }
			hidden_tooltip = { remove_character_modifier = trade_negotiations }
			add_character_modifier = { modifier = trade_negotiations years = 10 }
		}
		if = {
			limit = { has_character_modifier = port_control }
			hidden_tooltip = { remove_character_modifier = port_control }
			add_character_modifier = { modifier = port_control years = 10 }
		}
		if = {
			limit = { has_character_modifier = skilled_workers }
			hidden_tooltip = { remove_character_modifier = skilled_workers }
			add_character_modifier = { modifier = skilled_workers years = 10 }
		}
	}
	
	option = {
		name = EVTOPTB_VAMPIRE.87
	}
}

# VAMPIRE.90 - Political Influence exterts more control
character_event = {
	id = VAMPIRE.90
	desc = EVTDESC_VAMPIRE.90
	picture = GFX_evt_suspicious_noble
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	trigger = {
		liege = {
			government = blood_court_government
		}
		is_voter = yes
		has_character_modifier = major_political_influence
		NAND = {
			has_character_modifier = diplomatic_control
			has_character_modifier = control_of_court
			has_character_modifier = unrestricted_access
		}
	}
	
	immediate = {
		liege = {
			job_chancellor = {
				export_to_variable = { which = local_c_diplo value = diplomacy }
				ROOT = {
					set_variable = { which = local_c_diplo which = PREV }
				}
			}
			job_spymaster = {
				export_to_variable = { which = local_s_int value = intrigue }
				ROOT = {
					set_variable = { which = local_s_int which = PREV }
				}
			}
		}
	}
	
	# Lower chance than normal since this one can occur with no valid options, increased if there's a clear option
	weight_multiplier = {
		days = 1
		modifier = {
			factor = 4
			OR = {
				NOT = { has_character_modifier = control_of_court }
				AND = {
					NOT = { has_character_modifier = diplomatic_control }
					has_job_title = job_chancellor
				}
				AND = {
					NOT = { has_character_modifier = unrestricted_access }
					has_job_title = job_spymaster
				}
			}
		}
	}
	
	option = {
		name = EVTOPTA_VAMPIRE.90
		trigger = { 
			NOT = { has_character_modifier = diplomatic_control }
			has_job_title = job_chancellor
		}
		capital_scope = { add_province_modifier = { modifier = transferred_staff years = 1 } }
		add_character_modifier = { modifier = diplomatic_control years = 10 }
		tooltip = { liege = { add_character_modifier = { modifier = undermined_diplomacy years = 10 } } }
		hidden_tooltip = { liege = { character_event = { id = VAMPIRE.91 } } }
	}
	
	option = {
		name = EVTOPTB_VAMPIRE.90
		trigger = { 
			NOT = { has_character_modifier = diplomatic_control }
			NOT = { has_job_title = job_chancellor }
			diplomacy > local_c_diplo
		}
		capital_scope = { add_province_modifier = { modifier = transferred_staff years = 1 } }
		add_character_modifier = { modifier = diplomatic_control years = 10 }
		tooltip = { liege = { add_character_modifier = { modifier = undermined_diplomacy years = 10 } } }
		hidden_tooltip = { liege = { character_event = { id = VAMPIRE.91 } } }
	}
	
	option = {
		name = EVTOPTC_VAMPIRE.90
		trigger = {
			NOT = { has_character_modifier = control_of_court }
		}
		scaled_wealth = -1
		add_character_modifier = { modifier = control_of_court years = 10 }
		tooltip = { liege = { add_character_modifier = { modifier = hostile_court years = 10 } } }
		hidden_tooltip = { liege = { character_event = { id = VAMPIRE.92 } } }
	}
	
	option = {
		name = EVTOPTD_VAMPIRE.90
		trigger = {
			NOT = { has_character_modifier = unrestricted_access }
			has_job_title = job_spymaster
		}
		prestige = -200
		add_character_modifier = { modifier = unrestricted_access years = 10 }
		tooltip = { liege = { add_character_modifier = { modifier = access_comprimised years = 10 } } }
		hidden_tooltip = { liege = { character_event = { id = VAMPIRE.93 } } }
	}
	
	option = {
		name = EVTOPTE_VAMPIRE.90
		trigger = {
			NOT = { has_character_modifier = unrestricted_access }
			NOT = { has_job_title = job_spymaster }
			intrigue > local_s_int
		}
		prestige = -200
		add_character_modifier = { modifier = unrestricted_access years = 10 }
		tooltip = { liege = { add_character_modifier = { modifier = access_comprimised years = 10 } } }
		hidden_tooltip = { liege = { character_event = { id = VAMPIRE.93 } } }
	}
	
	# Decline
	option = {
		name = EVTOPTF_VAMPIRE.90
		trigger = {
			OR = {
				AND = {
					NOT = { has_character_modifier = diplomatic_control }
					OR = {
						has_job_title = job_chancellor
						diplomacy > local_c_diplo
					}
				}
				NOT = { has_character_modifier = control_of_court }
				AND = {
					NOT = { has_character_modifier = unrestricted_access }
					OR = {
						has_job_title = job_spymaster
						intrigue > local_s_int
					}
				}
			}
		}
	}
	
	# No valid options right now
	option = {
		name = EVTOPTG_VAMPIRE.90
		trigger = {
			has_character_modifier = control_of_court
			OR = {
				has_character_modifier = diplomatic_control
				NOR = {
					has_job_title = job_chancellor
					diplomacy > local_c_diplo
				}
			}
			OR = {
				has_character_modifier = unrestricted_access
				NOR = {
					has_job_title = job_spymaster
					intrigue > local_s_int
				}
			}
		}
	}
}

	
# VAMPIRE.91 - Liege gains undermined_diplomacy
character_event = {
	id = VAMPIRE.91
	desc = EVTDESC_VAMPIRE.91
	picture = GFX_evt_suspicious_noble
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.91
		add_character_modifier = { modifier = undermined_diplomacy years = 10 }
		if = {
			limit = { NOT = { trait = paranoid } }
			random = {
				chance = 10
				add_trait = paranoid
				hidden_tooltip = {
					# Notify
					character_event = { id = 38275 }
				}
			}
		}
	}
}
		
# VAMPIRE.92 - Liege gains hostile_court
character_event = {
	id = VAMPIRE.92
	desc = EVTDESC_VAMPIRE.92
	picture = GFX_evt_scandal
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.92
		add_character_modifier = { modifier = hostile_court years = 10 }
	}
}

# VAMPIRE.93 - Liege gains access_comprimised
character_event = {
	id = VAMPIRE.93
	desc = EVTDESC_VAMPIRE.93
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.93
		add_character_modifier = { modifier = access_comprimised years = 10 }
		if = {
			limit = { NOT = { trait = paranoid } }
			random = {
				chance = 20
				add_trait = paranoid
				hidden_tooltip = {
					# Notify
					character_event = { id = 38275 }
				}
			}
		}
	}
}

# VAMPIRE.94 - Expand military control
character_event = {
	id = VAMPIRE.94
	desc = EVTDESC_VAMPIRE.94
	picture = GFX_evt_crusaders
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	trigger = {
		liege = {
			government = blood_court_government
		}
		is_voter = yes
		has_character_modifier = major_military_influence
		NAND = {
			has_character_modifier = castle_guards
			OR = {
				has_character_modifier = supply_chains
				AND = {
					has_dlc = "Reapers"
					any_demesne_province = {
						count = 3
						OR = {
							has_province_modifier = prosperity_modifier_1
							has_province_modifier = prosperity_modifier_2
							has_province_modifier = prosperity_modifier_3
						}
					}
				}
			}
			has_character_modifier = guarded_roads
		}
	}
	
	# Divert castle guards
	option = {
		name = EVTOPTA_VAMPIRE.94
		trigger = { NOT = { has_character_modifier = castle_guards } }
		add_character_modifier = { modifier = castle_guards years = 10 }
		capital_scope = { add_province_modifier = { modifier = transferred_guards years = 1 } }
		custom_tooltip = { text = tt_liege_troop_loss_in_one_year }
		hidden_tooltip = { liege = { character_event = { id = VAMPIRE.95 days = 365 } } }
	}
	
	# Divert supplies
	option = {
		name = EVTOPTB_VAMPIRE.94
		trigger = {
			NOT = { has_character_modifier = supply_chains }
			OR = {
				NOT = { has_dlc = "Reapers" }
				any_demesne_province = {
					count = 3
					OR = {
						has_province_modifier = prosperity_modifier_1
						has_province_modifier = prosperity_modifier_2
						has_province_modifier = prosperity_modifier_3
					}
				}
			}
		}
		add_character_modifier = { modifier = supply_chains years = 10 }
		if = {
			limit = { has_dlc = "Reapers" }
			random_demesne_province = {
				limit = { 
					OR = {
						has_province_modifier = prosperity_modifier_1
						has_province_modifier = prosperity_modifier_2
						has_province_modifier = prosperity_modifier_3
					}
				}
				custom_tooltip = { text = tt_lower_prosperity }
				hidden_tooltip = { province_event = { id = MYTHMORE.32 } }
			}
			random_demesne_province = {
				limit = { 
					OR = {
						has_province_modifier = prosperity_modifier_1
						has_province_modifier = prosperity_modifier_2
						has_province_modifier = prosperity_modifier_3
					}
				}
				custom_tooltip = { text = tt_lower_prosperity }
				hidden_tooltip = { province_event = { id = MYTHMORE.32 } }
			}
			random_demesne_province = {
				limit = { 
					OR = {
						has_province_modifier = prosperity_modifier_1
						has_province_modifier = prosperity_modifier_2
						has_province_modifier = prosperity_modifier_3
					}
				}
				custom_tooltip = { text = tt_lower_prosperity }
				hidden_tooltip = { province_event = { id = MYTHMORE.32 } }
			}
		}
		else = {
			random_demesne_province = {
				limit = { NOT = { has_province_modifier = transferred_supplies } }
				add_province_modifier = { modifier = transferred_supplies years = 1 }
			}
			random_demesne_province = {
				limit = { NOT = { has_province_modifier = transferred_supplies } }
				add_province_modifier = { modifier = transferred_supplies years = 1 }
			}
			random_demesne_province = {
				limit = { NOT = { has_province_modifier = transferred_supplies } }
				add_province_modifier = { modifier = transferred_supplies years = 1 }
			}
		}
		custom_tooltip = { text = tt_liege_supply_loss_in_one_year }
		hidden_tooltip = { liege = { character_event = { id = VAMPIRE.96 days = 365 } } }
	}
	
	option = {
		name = EVTOPTC_VAMPIRE.94
		trigger = { NOT = { has_character_modifier = guarded_roads } }
		add_character_modifier = { modifier = guarded_roads years = 10 }
		add_character_modifier = { modifier = covering_financial_losses years = 1 }
		custom_tooltip = { text = tt_liege_road_guard_loss_in_one_year }
		hidden_tooltip = { liege = { character_event = { id = VAMPIRE.97 days = 365 } } }
	}
	
	option = {
		name = EVTOPTD_VAMPIRE.95
	}
}
		
# VAMPIRE.95 - Liege gets disloyal_guards for 9 years
character_event = {
	id = VAMPIRE.95
	desc = EVTDESC_VAMPIRE.95
	picture = GFX_evt_melee
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.95
		add_character_modifier = { modifier = disloyal_guards years = 9 }
	}
}
	
# VAMPIRE.96 - Liege gets diverted_supplies for 9 years
character_event = {
	id = VAMPIRE.96
	desc = EVTDESC_VAMPIRE.96
	picture = GFX_evt_merchant_caravan
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.96
		add_character_modifier = { modifier = diverted_supplies years = 9 }
	}
}

# VAMPIRE.97 - Liege gets unguarded_roads for 9 years
character_event = {
	id = VAMPIRE.97
	desc = EVTDESC_VAMPIRE.97
	picture = GFX_evt_merchant_caravan
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.97
		add_character_modifier = { modifier = unguarded_roads years = 9 }
	}
}

# VAMPIRE.98 - Expand economic control
character_event = {
	id = VAMPIRE.98
	desc = EVTDESC_VAMPIRE.98
	picture = GFX_evt_merchant_caravan
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	trigger = {
		liege = {
			government = blood_court_government
		}
		is_voter = yes
		has_character_modifier = major_military_influence
		NAND = {
			has_character_modifier = trade_negotiations
			has_character_modifier = port_control
			OR = {
				has_character_modifier = skilled_workers
				has_character_modifier = loss_of_skilled_workers
			}
		}
	}
	
	option = {
		name = EVTOPTA_VAMPIRE.98
		trigger = { NOT = { has_character_modifier = trade_negotiations } }
		custom_tooltip = { text = tt_coverup_fund }
		liege = { ROOT = { transfer_scaled_wealth = { value = 0.75 to = PREV } } }
		add_character_modifier = { modifier = trade_negotiations years = 10 }
		hidden_tooltip = { liege = { character_event = { id = VAMPIRE.99 } } }
	}
	
	option = {
		name = EVTOPTB_VAMPIRE.98
		trigger = { NOT = { has_character_modifier = port_control } }
		custom_tooltip = { text = tt_upset_mayor }
		any_vassal = {
			limit = { is_republic = yes }
			opinion = { modifier = opinion_dislikes_new_obligation_law years = 5 who = ROOT }
		}
		add_character_modifier = { modifier = port_control years = 10 }
		hidden_tooltip = { liege = { character_event = { id = VAMPIRE.100 } } }
	}
	
	option = {
		name = EVTOPTC_VAMPIRE.98
		trigger = {
			NOR = {
				has_character_modifier = skilled_workers
				has_character_modifier = loss_of_skilled_workers
			}
		}
		add_character_modifier = { modifier = loss_of_skilled_workers months = 6 }
		liege = { add_character_modifier = { modifier = skilled_workers months = 6 } }
		custom_tooltip = { text = tt_six_month_skilled_worker }
		hidden_tooltip = { character_event = { id = VAMPIRE.101 days = 180 } }
	}
	
	option = {
		name = EVTOPTD_VAMPIRE.98
	}
}

# VAMPIRE.99 - Liege gains poor_trade_negotiations
character_event = {
	id = VAMPIRE.99
	desc = EVTDESC_VAMPIRE.99
	picture = GFX_evt_busy_trading_dock_republic
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.99
		add_character_modifier = { modifier = poor_trade_negotiations years = 10 }
	}
}

# VAMPIRE.100 - Liege gains poorly_controlled_ports
character_event = {
	id = VAMPIRE.100
	desc = EVTDESC_VAMPIRE.100
	picture = GFX_evt_busy_trading_dock_republic
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.100
		add_character_modifier = { modifier = poorly_controlled_ports years = 10 }
	}
}

# VAMPIRE.101 - Swap skilled worker penalty
character_event = {
	id = VAMPIRE.101
	desc = EVTDESC_VAMPIRE.101
	picture = GFX_evt_culture_change
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.101
		remove_character_modifier = loss_of_skilled_workers
		add_character_modifier = { modifier = skilled_workers months = 114 }
		tooltip = { liege = { add_character_modifier = { modifier = loss_of_skilled_workers months = 114 } } }
		hidden_tooltip = { liege = { character_event = { id = VAMPIRE.102 } } }
	}
}

# VAMPIRE.102 - Liege gained loss_of_skilled_workers
character_event = {
	id = VAMPIRE.102
	desc = EVTDESC_VAMPIRE.102
	picture = GFX_evt_castle_construction
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.102
		add_character_modifier = { modifier = loss_of_skilled_workers months = 114 }
	}
}

# VAMPIRE.103 - Remove bonuses if independent - Run on winning independence war or gaining title.
character_event = {
	id = VAMPIRE.103
	hide_window = yes
	is_triggered_only = yes
	
	only_playable = yes
	only_independent = yes
	
	immediate = {
		remove_character_modifier = minor_political_influence
		remove_character_modifier = political_influence
		remove_character_modifier = major_political_influence
		remove_character_modifier = minor_military_influence
		remove_character_modifier = military_influence
		remove_character_modifier = major_military_influence
		remove_character_modifier = minor_economic_influence
		remove_character_modifier = economic_influence
		remove_character_modifier = major_economic_influence
		remove_character_modifier = diplomatic_control
		remove_character_modifier = control_of_court
		remove_character_modifier = unrestricted_access
		remove_character_modifier = castle_guards
		remove_character_modifier = supply_chains
		remove_character_modifier = guarded_roads
		remove_character_modifier = trade_negotiations
		remove_character_modifier = port_control
		remove_character_modifier = skilled_workers
	}
}

# VAMPIRE.104 - Sanity check. Remove bonuses if independent, not a voter, or liege has wrong government
character_event = {
	id = VAMPIRE.104
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		OR = {
			is_voter = no
			independent = yes
			liege = { NOT = { government = blood_court_government } }
		}
		OR = {
			has_character_modifier = minor_political_influence
			has_character_modifier = political_influence
			has_character_modifier = major_political_influence
			has_character_modifier = minor_military_influence
			has_character_modifier = military_influence
			has_character_modifier = major_military_influence
			has_character_modifier = minor_economic_influence
			has_character_modifier = economic_influence
			has_character_modifier = major_economic_influence
			has_character_modifier = diplomatic_control
			has_character_modifier = control_of_court
			has_character_modifier = unrestricted_access
			has_character_modifier = castle_guards
			has_character_modifier = supply_chains
			has_character_modifier = guarded_roads
			has_character_modifier = trade_negotiations
			has_character_modifier = port_control
			has_character_modifier = skilled_workers
		}
	}
	
	immediate = {
		remove_character_modifier = minor_political_influence
		remove_character_modifier = political_influence
		remove_character_modifier = major_political_influence
		remove_character_modifier = minor_military_influence
		remove_character_modifier = military_influence
		remove_character_modifier = major_military_influence
		remove_character_modifier = minor_economic_influence
		remove_character_modifier = economic_influence
		remove_character_modifier = major_economic_influence
		remove_character_modifier = diplomatic_control
		remove_character_modifier = control_of_court
		remove_character_modifier = unrestricted_access
		remove_character_modifier = castle_guards
		remove_character_modifier = supply_chains
		remove_character_modifier = guarded_roads
		remove_character_modifier = trade_negotiations
		remove_character_modifier = port_control
		remove_character_modifier = skilled_workers
	}
}

# VAMPIRE.105 - Sanity check. Remove bonuses if you don't have the right political control
character_event = {
	id = VAMPIRE.105
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		is_voter = yes
		independent = no
		liege = { government = blood_court_government }
		OR = {
			has_character_modifier = diplomatic_control
			has_character_modifier = control_of_court
			has_character_modifier = unrestricted_access
			has_character_modifier = castle_guards
			has_character_modifier = supply_chains
			has_character_modifier = guarded_roads
			has_character_modifier = trade_negotiations
			has_character_modifier = port_control
			has_character_modifier = skilled_workers
		}
	}
	
	immediate = {
		if = {
			limit = { NOT = { has_character_modifier = major_political_influence } }
			remove_character_modifier = diplomatic_control
			remove_character_modifier = control_of_court
			remove_character_modifier = unrestricted_access
		}
		if = {
			limit = { NOT = { has_character_modifier = major_military_influence } }
			remove_character_modifier = castle_guards
			remove_character_modifier = supply_chains
			remove_character_modifier = guarded_roads
		}
		if = {
			limit = { NOT = { has_character_modifier = major_economic_influence } }
			remove_character_modifier = trade_negotiations
			remove_character_modifier = port_control
			remove_character_modifier = skilled_workers
		}
	}
}

# VAMPIRE.106 - Remove penalties if no one has the appropriate bonuses
character_event = {
	id = VAMPIRE.106
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		government = blood_court_government
		OR = {
			has_character_modifier = undermined_bureaucracy
			has_character_modifier = loss_of_military_control
			has_character_modifier = operating_losses
			has_character_modifier = undermined_diplomacy
			has_character_modifier = hostile_court
			has_character_modifier = access_comprimised
			has_character_modifier = disloyal_guards
			has_character_modifier = diverted_supplies
			has_character_modifier = unguarded_roads
			has_character_modifier = poor_trade_negotiations
			has_character_modifier = poorly_controlled_ports
			has_character_modifier = loss_of_skilled_workers
		}
		any_realm_character = {
			liege = { character = ROOT }
			is_voter = yes
		}
	}
	
	immediate = {
		if = {
			limit = {
				NOT = {
					any_realm_character = {
						liege = { character = ROOT }
						is_voter = yes
						OR = {
							has_character_modifier = political_influence
							has_character_modifier = major_political_influence
						}
					}
				}
			}
			remove_character_modifier = undermined_bureaucracy
		}
		if = {
			limit = {
				NOT = {
					any_realm_character = {
						liege = { character = ROOT }
						is_voter = yes
						OR = {
							has_character_modifier = military_influence
							has_character_modifier = major_military_influence
						}
					}
				}
			}
			remove_character_modifier = loss_of_military_control
		}
		if = {
			limit = {
				NOT = {
					any_realm_character = {
						liege = { character = ROOT }
						is_voter = yes
						OR = {
							has_character_modifier = economic_influence
							has_character_modifier = major_economic_influence
						}
					}
				}
			}
			remove_character_modifier = operating_losses
		}
		if = {
			limit = {
				NOT = {
					any_realm_character = {
						liege = { character = ROOT }
						is_voter = yes
						has_character_modifier = diplomatic_control
					}
				}
			}
			remove_character_modifier = undermined_diplomacy
		}
		if = {
			limit = {
				NOT = {
					any_realm_character = {
						liege = { character = ROOT }
						is_voter = yes
						has_character_modifier = control_of_court
					}
				}
			}
			remove_character_modifier = hostile_court
		}
		if = {
			limit = {
				NOT = {
					any_realm_character = {
						liege = { character = ROOT }
						is_voter = yes
						has_character_modifier = unrestricted_access
					}
				}
			}
			remove_character_modifier = access_comprimised
		}
		if = {
			limit = {
				NOT = {
					any_realm_character = {
						liege = { character = ROOT }
						is_voter = yes
						has_character_modifier = castle_guards
					}
				}
			}
			remove_character_modifier = disloyal_guards
		}
		if = {
			limit = {
				NOT = {
					any_realm_character = {
						liege = { character = ROOT }
						is_voter = yes
						has_character_modifier = supply_chains
					}
				}
			}
			remove_character_modifier = diverted_supplies
		}
		if = {
			limit = {
				NOT = {
					any_realm_character = {
						liege = { character = ROOT }
						is_voter = yes
						has_character_modifier = guarded_roads
					}
				}
			}
			remove_character_modifier = unguarded_roads
		}
		if = {
			limit = {
				NOT = {
					any_realm_character = {
						liege = { character = ROOT }
						is_voter = yes
						has_character_modifier = trade_negotiations
					}
				}
			}
			remove_character_modifier = poor_trade_negotiations
		}
		if = {
			limit = {
				NOT = {
					any_realm_character = {
						liege = { character = ROOT }
						is_voter = yes
						has_character_modifier = port_control
					}
				}
			}
			remove_character_modifier = poorly_controlled_ports
		}
		if = {
			limit = {
				NOT = {
					any_realm_character = {
						liege = { character = ROOT }
						is_voter = yes
						has_character_modifier = skilled_workers
					}
				}
			}
			remove_character_modifier = loss_of_skilled_workers
		}
	}
}

# VAMPIRE.107 - Begin bid to sieze the throne
character_event = {
	id = VAMPIRE.107
	desc = EVTDESC_VAMPIRE.107
	picture = GFX_evt_noble_in_castle
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = { trait = deceitful }
			change_variable = { which = local_rank value = 1 }
		}
		if = {
			limit = { trait = elusive_shadow }
			change_variable = { which = local_rank value = 1 }
		}
		if = {
			limit = { trait = schemer }
			change_variable = { which = local_rank value = 1 }
		}
		if = {
			limit = { is_smart_trigger = yes }
			change_variable = { which = local_rank value = 1 }
		}
		if = {
			limit = { 
				liege = { attacted_to_root_trigger = yes }
				OR = {
					has_fair_trait_trigger = yes
					trait = seducer
					trait = seductress
				}
			}
			change_variable = { which = local_rank value = 1 }
		}
		if = {
			limit = { trait = honest }
			change_variable = { which = local_rank value = -1 }
		}
		if = {
			limit = { trait = content }
			change_variable = { which = local_rank value = -1 }
		}
		if = {
			limit = { is_dumb_trigger = yes }
			change_variable = { which = local_rank value = -1 }
		}
		if = {
			limit = { intrigue = 10 }
			change_variable = { which = local_rank value = 1 }
		}
		if = {
			limit = { intrigue = 15 }
			change_variable = { which = local_rank value = 1 }
		}
		if = {
			limit = { intrigue = 20 }
			change_variable = { which = local_rank value = 1 }
		}
		if = {
			limit = { intrigue = 25 }
			change_variable = { which = local_rank value = 1 }
		}
		if = {
			limit = { intrigue = 30 }
			change_variable = { which = local_rank value = 1 }
		}
		if = {
			limit = { liege = { realm_intrigue = 15 } }
			change_variable = { which = local_rank value = -1 }
		}
		if = {
			limit = { liege = { realm_intrigue = 20 } }
			change_variable = { which = local_rank value = -1 }
		}
		if = {
			limit = { liege = { realm_intrigue = 25 } }
			change_variable = { which = local_rank value = -1 }
		}
		if = {
			limit = { liege = { realm_intrigue = 30 } }
			change_variable = { which = local_rank value = -1 }
		}
		if = {
			limit = { liege = { realm_intrigue = 35 } }
			change_variable = { which = local_rank value = -1 }
		}
		if = {
			limit = { NOT = { check_variable = { which = local_rank value = 0 } } }
			set_variable = { which = local_rank value = 0 }
		}
		
		set_variable = { which = local_temp which = local_rank }
		multiply_variable = { which = local_temp value = 5 }
		set_variable = { which = local_time value = 60 }
		subtract_variable = { which = local_time which = local_temp }
		set_variable = { which = local_catch_chance value = 12 }
		subtract_variable = { which = local_catch_chance which = local_rank }
		set_variable = { which = local_suspect_chance which = local_catch_chance }
		divide_variable = { which = local_catch_chance value = 4 }
		divide_variable = { which = local_suspect_chance value = 3 }
		change_variable = { which = local_catch_chance value = 1 }
		change_variable = { which = local_suspect_chance value = 1 }
	}
	
	option = {
		name = EVTOPTA_VAMPIRE.107
		random_list = {
			1 = {
				modifier = {
					factor = 2
					check_variable = { which = local_catch_chance value = 2 }
				}
				modifier = {
					factor = 1.5
					check_variable = { which = local_catch_chance value = 3 }
				}
				modifier = {
					factor = 1.33
					check_variable = { which = local_catch_chance value = 4 }
				}
				custom_tooltip = { text = tt_liege_catch }
				hidden_tooltip = { liege = { character_event = { id = VAMPIRE.112 days = 2 } } }
			}
			2 = {
				modifier = {
					factor = 2
					check_variable = { which = local_suspect_chance value = 2 }
				}
				modifier = {
					factor = 1.5
					check_variable = { which = local_suspect_chance value = 3 }
				}
				modifier = {
					factor = 1.33
					check_variable = { which = local_suspect_chance value = 4 }
				}
				modifier = {
					factor = 1.2
					check_variable = { which = local_suspect_chance value = 5 }
				}
				custom_tooltip = { text = tt_liege_suspect }
				hidden_tooltip = { liege = { character_event = { id = VAMPIRE.113 days = 2 } } }
			}
			7 = {}
		}
		hidden_tooltip = {
			if = {
				limit = { check_variable = { which = local_time value = 60 } }
				character_event = { id = VAMPIRE.108 days = 60 random = 60 }
			}
			else_if = {
				limit = { check_variable = { which = local_time value = 55 } }
				character_event = { id = VAMPIRE.108 days = 55 random = 55 }
			}
			else_if = {
				limit = { check_variable = { which = local_time value = 50 } }
				character_event = { id = VAMPIRE.108 days = 50 random = 50 }
			}
			else_if = {
				limit = { check_variable = { which = local_time value = 45 } }
				character_event = { id = VAMPIRE.108 days = 45 random = 45 }
			}
			else_if = {
				limit = { check_variable = { which = local_time value = 40 } }
				character_event = { id = VAMPIRE.108 days = 40 random = 40 }
			}
			else_if = {
				limit = { check_variable = { which = local_time value = 35 } }
				character_event = { id = VAMPIRE.108 days = 35 random = 35 }
			}
			else_if = {
				limit = { check_variable = { which = local_time value = 30 } }
				character_event = { id = VAMPIRE.108 days = 30 random = 30 }
			}
			else_if = {
				limit = { check_variable = { which = local_time value = 25 } }
				character_event = { id = VAMPIRE.108 days = 25 random = 25 }
			}
			else_if = {
				limit = { check_variable = { which = local_time value = 20 } }
				character_event = { id = VAMPIRE.108 days = 20 random = 20 }
			}
			else_if = {
				limit = { check_variable = { which = local_time value = 15 } }
				character_event = { id = VAMPIRE.108 days = 15 random = 15 }
			}
			else = {
				character_event = { id = VAMPIRE.108 days = 10 random = 10 }
			}
		}
	}
}

# VAMPIRE.108 - Prepare funds for coup
character_event = {
	id = VAMPIRE.108
	desc = EVTDESC_VAMPIRE.108
	picture = GFX_evt_bribe_accepted
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	prisoner = no
	
	immediate = {
		set_variable = { which = local_rank value = 0 }
		if = {
			limit = { stewardship = 10 }
			change_variable = { which = local_rank value = 1 }
		}
		if = {
			limit = { stewardship = 15 }
			change_variable = { which = local_rank value = 1 }
		}
		if = {
			limit = { stewardship = 20 }
			change_variable = { which = local_rank value = 1 }
		}
		if = {
			limit = { stewardship = 25 }
			change_variable = { which = local_rank value = 1 }
		}
		if = {
			limit = { stewardship = 30 }
			change_variable = { which = local_rank value = 1 }
		}
		if = {
			limit = { liege = { realm_stewardship = 15 } }
			change_variable = { which = local_rank value = -1 }
		}
		if = {
			limit = { liege = { realm_stewardship = 20 } }
			change_variable = { which = local_rank value = -1 }
		}
		if = {
			limit = { liege = { realm_stewardship = 25 } }
			change_variable = { which = local_rank value = -1 }
		}
		if = {
			limit = { liege = { realm_stewardship = 30 } }
			change_variable = { which = local_rank value = -1 }
		}
		if = {
			limit = { liege = { realm_stewardship = 35 } }
			change_variable = { which = local_rank value = -1 }
		}
		if = {
			limit = { NOT = { check_variable = { which = local_rank value = 0 } } }
			set_variable = { which = local_rank value = 0 }
		}
		set_variable = { which = local_temp which = local_rank }
		multiply_variable = { which = local_temp value = 5 }
		set_variable = { which = local_time value = 60 }
		subtract_variable = { which = local_time which = local_temp }
		set_variable = { which = local_catch_chance value = 10 }
		subtract_variable = { which = local_catch_chance which = local_rank }
		set_variable = { which = local_suspect_chance which = local_catch_chance }
		divide_variable = { which = local_catch_chance value = 4 }
		divide_variable = { which = local_suspect_chance value = 3 }
		change_variable = { which = local_catch_chance value = 1 }
		change_variable = { which = local_suspect_chance value = 1 }
	}
	
	# Most expensive
	option = {
		name = EVTOPTA_VAMPIRE.108
		scaled_wealth = { value = -3 max = -450 }
		random_list = {
			1 = {
				modifier = {
					factor = 2
					check_variable = { which = local_catch_chance value = 2 }
				}
				modifier = {
					factor = 1.5
					check_variable = { which = local_catch_chance value = 3 }
				}
				modifier = {
					factor = 4
					liege = { has_character_modifier = worrying_rumors }
				}
				custom_tooltip = { text = tt_liege_catch }
				hidden_tooltip = { liege = { character_event = { id = VAMPIRE.112 days = 2 } } }
			}
			2 = {
				modifier = {
					factor = 2
					check_variable = { which = local_suspect_chance value = 2 }
				}
				modifier = {
					factor = 1.5
					check_variable = { which = local_suspect_chance value = 3 }
				}
				modifier = {
					factor = 0
					liege = { has_character_modifier = worrying_rumors }
				}
				custom_tooltip = { text = tt_liege_suspect }
				hidden_tooltip = { liege = { character_event = { id = VAMPIRE.113 days = 2 } } }
			}
			40 = {}
		}
		hidden_tooltip = {
			divide_variable = { which = local_time value = 4 }
			if = {
				limit = { check_variable = { which = local_time value = 15 } }
				character_event = { id = VAMPIRE.109 days = 15 random = 15 }
			}
			else_if = {
				limit = { check_variable = { which = local_time value = 14 } }
				character_event = { id = VAMPIRE.109 days = 14 random = 14 }
			}
			else_if = {
				limit = { check_variable = { which = local_time value = 13 } }
				character_event = { id = VAMPIRE.109 days = 13 random = 13 }
			}
			else_if = {
				limit = { check_variable = { which = local_time value = 12 } }
				character_event = { id = VAMPIRE.109 days = 12 random = 12 }
			}
			else_if = {
				limit = { check_variable = { which = local_time value = 11 } }
				character_event = { id = VAMPIRE.109 days = 11 random = 11 }
			}
			else = {
				character_event = { id = VAMPIRE.109 days = 10 random = 10 }
			}
		}
		if = {
			limit = { 
				NOR = { 
					trait = charitable
					trait = greedy
				}
			}
			add_trait = charitable
		}
		if = {
			limit = { 
				NOR = { 
					trait = ambitious
					trait = content
				}
			}
			random = {
				chance = 50
				add_trait = ambitious
				hidden_tooltip = {
					# Notify
					character_event = { id = 38278 }
				}
			}
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				NOT = { scaled_wealth = 3 }
			}
			modifier = {
				factor = 0.5
				NOT = { scaled_wealth = 4 }
			}
		}
	}
	
	# Expensive
	option = {
		name = EVTOPTB_VAMPIRE.108
		scaled_wealth = { value = -1 max = -150 }
		random_list = {
			1 = {
				modifier = {
					factor = 2
					check_variable = { which = local_catch_chance value = 2 }
				}
				modifier = {
					factor = 1.5
					check_variable = { which = local_catch_chance value = 3 }
				}
				modifier = {
					factor = 4
					liege = { has_character_modifier = worrying_rumors }
				}
				custom_tooltip = { text = tt_liege_catch }
				hidden_tooltip = { liege = { character_event = { id = VAMPIRE.112 days = 2 } } }
			}
			2 = {
				modifier = {
					factor = 2
					check_variable = { which = local_suspect_chance value = 2 }
				}
				modifier = {
					factor = 1.5
					check_variable = { which = local_suspect_chance value = 3 }
				}
				modifier = {
					factor = 0
					liege = { has_character_modifier = worrying_rumors }
				}
				custom_tooltip = { text = tt_liege_suspect }
				hidden_tooltip = { liege = { character_event = { id = VAMPIRE.113 days = 2 } } }
			}
			20 = {}
		}
		hidden_tooltip = {
			divide_variable = { which = local_time value = 3 }
			if = {
				limit = { check_variable = { which = local_time value = 20 } }
				character_event = { id = VAMPIRE.109 days = 20 random = 20 }
			}
			else_if = {
				limit = { check_variable = { which = local_time value = 18 } }
				character_event = { id = VAMPIRE.109 days = 18 random = 18 }
			}
			else_if = {
				limit = { check_variable = { which = local_time value = 16 } }
				character_event = { id = VAMPIRE.109 days = 16 random = 16 }
			}
			else_if = {
				limit = { check_variable = { which = local_time value = 14 } }
				character_event = { id = VAMPIRE.109 days = 14 random = 14 }
			}
			else = {
				character_event = { id = VAMPIRE.109 days = 10 random = 10 }
			}
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				NOT = { scaled_wealth = 1 }
			}
			modifier = {
				factor = 0.5
				NOT = { scaled_wealth = 2 }
			}
		}
	}
	
	# Inexpensive
	option = {
		name = EVTOPTC_VAMPIRE.108
		scaled_wealth = { value = -0.3 max = -50 }
		random_list = {
			1 = {
				modifier = {
					factor = 2
					check_variable = { which = local_catch_chance value = 2 }
				}
				modifier = {
					factor = 1.5
					check_variable = { which = local_catch_chance value = 3 }
				}
				modifier = {
					factor = 4
					liege = { has_character_modifier = worrying_rumors }
				}
				custom_tooltip = { text = tt_liege_catch }
				hidden_tooltip = { liege = { character_event = { id = VAMPIRE.112 days = 2 } } }
			}
			2 = {
				modifier = {
					factor = 2
					check_variable = { which = local_suspect_chance value = 2 }
				}
				modifier = {
					factor = 1.5
					check_variable = { which = local_suspect_chance value = 3 }
				}
				modifier = {
					factor = 0
					liege = { has_character_modifier = worrying_rumors }
				}
				custom_tooltip = { text = tt_liege_suspect }
				hidden_tooltip = { liege = { character_event = { id = VAMPIRE.113 days = 2 } } }
			}
			10 = {}
		}
		hidden_tooltip = {
			divide_variable = { which = local_time value = 2 }
			if = {
				limit = { check_variable = { which = local_time value = 30 } }
				character_event = { id = VAMPIRE.109 days = 30 random = 30 }
			}
			else_if = {
				limit = { check_variable = { which = local_time value = 27 } }
				character_event = { id = VAMPIRE.109 days = 27 random = 27 }
			}
			else_if = {
				limit = { check_variable = { which = local_time value = 24 } }
				character_event = { id = VAMPIRE.109 days = 24 random = 24 }
			}
			else_if = {
				limit = { check_variable = { which = local_time value = 21 } }
				character_event = { id = VAMPIRE.109 days = 21 random = 21 }
			}
			else_if = {
				limit = { check_variable = { which = local_time value = 18 } }
				character_event = { id = VAMPIRE.109 days = 18 random = 18 }
			}
			else = {
				character_event = { id = VAMPIRE.109 days = 15 random = 15 }
			}
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				NOT = { scaled_wealth = 0.3 }
			}
			modifier = {
				factor = 0.5
				NOT = { scaled_wealth = 1 }
			}
		}
	}
	
	# No funding
	option = {
		name = EVTOPTD_VAMPIRE.108
		random_list = {
			1 = {
				modifier = {
					factor = 2
					check_variable = { which = local_catch_chance value = 2 }
				}
				modifier = {
					factor = 1.5
					check_variable = { which = local_catch_chance value = 3 }
				}
				modifier = {
					factor = 4
					liege = { has_character_modifier = worrying_rumors }
				}
				custom_tooltip = { text = tt_liege_catch }
				hidden_tooltip = { liege = { character_event = { id = VAMPIRE.112 days = 2 } } }
			}
			2 = {
				modifier = {
					factor = 2
					check_variable = { which = local_suspect_chance value = 2 }
				}
				modifier = {
					factor = 1.5
					check_variable = { which = local_suspect_chance value = 3 }
				}
				modifier = {
					factor = 0
					liege = { has_character_modifier = worrying_rumors }
				}
				custom_tooltip = { text = tt_liege_suspect }
				hidden_tooltip = { liege = { character_event = { id = VAMPIRE.113 days = 2 } } }
			}
			5 = {}
		}
		hidden_tooltip = {
			if = {
				limit = { check_variable = { which = local_time value = 60 } }
				character_event = { id = VAMPIRE.109 days = 60 random = 60 }
			}
			else_if = {
				limit = { check_variable = { which = local_time value = 55 } }
				character_event = { id = VAMPIRE.109 days = 55 random = 55 }
			}
			else_if = {
				limit = { check_variable = { which = local_time value = 50 } }
				character_event = { id = VAMPIRE.109 days = 50 random = 50 }
			}
			else_if = {
				limit = { check_variable = { which = local_time value = 45 } }
				character_event = { id = VAMPIRE.109 days = 45 random = 45 }
			}
			else_if = {
				limit = { check_variable = { which = local_time value = 40 } }
				character_event = { id = VAMPIRE.109 days = 48 random = 40 }
			}
			else = {
				character_event = { id = VAMPIRE.109 days = 35 random = 35 }
			}
		}
		if = {
			limit = { 
				NOR = { 
					trait = charitable
					trait = greedy
				}
			}
			add_trait = greedy
		}
		ai_chance = {
			factor = 1
		}
	}
}

# VAMPIRE.109 - Call in favor for coup
character_event = {
	id = VAMPIRE.109
	desc = EVTDESC_VAMPIRE.109
	picture = GFX_evt_whispers
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	prisoner = no
	
	immediate = {
		set_variable = { which = local_rank value = 0 }
		if = {
			limit = { diplomacy = 10 }
			change_variable = { which = local_rank value = 1 }
		}
		if = {
			limit = { diplomacy = 15 }
			change_variable = { which = local_rank value = 1 }
		}
		if = {
			limit = { diplomacy = 20 }
			change_variable = { which = local_rank value = 1 }
		}
		if = {
			limit = { diplomacy = 25 }
			change_variable = { which = local_rank value = 1 }
		}
		if = {
			limit = { diplomacy = 30 }
			change_variable = { which = local_rank value = 1 }
		}
		if = {
			limit = { liege = { realm_diplomacy = 15 } }
			change_variable = { which = local_rank value = -1 }
		}
		if = {
			limit = { liege = { realm_diplomacy = 20 } }
			change_variable = { which = local_rank value = -1 }
		}
		if = {
			limit = { liege = { realm_diplomacy = 25 } }
			change_variable = { which = local_rank value = -1 }
		}
		if = {
			limit = { liege = { realm_diplomacy = 30 } }
			change_variable = { which = local_rank value = -1 }
		}
		if = {
			limit = { liege = { realm_diplomacy = 35 } }
			change_variable = { which = local_rank value = -1 }
		}
		if = {
			limit = { NOT = { check_variable = { which = local_rank value = 0 } } }
			set_variable = { which = local_rank value = 0 }
		}
		set_variable = { which = local_temp which = local_rank }
		multiply_variable = { which = local_temp value = 5 }
		set_variable = { which = local_time value = 60 }
		subtract_variable = { which = local_time which = local_temp }
		set_variable = { which = local_catch_chance value = 12 }
		subtract_variable = { which = local_catch_chance which = local_rank }
		set_variable = { which = local_suspect_chance which = local_catch_chance }
		divide_variable = { which = local_catch_chance value = 4 }
		divide_variable = { which = local_suspect_chance value = 3 }
		change_variable = { which = local_catch_chance value = 1 }
		change_variable = { which = local_suspect_chance value = 1 }
	}
	
	# Use favor for support
	option = {
		name = EVTOPTA_VAMPIRE.109
		trigger = {
			liege = {
				any_realm_character = {
					liege = { character = PREV }
					is_voter = yes
					owes_favor_to = ROOT
				}
			}
		}
		random_realm_character = {
			limit = {
				liege = { ROOT = { liege = { character = PREVPREV } } }
				is_voter = yes
				owes_favor_to = ROOT
			}
			reverse_remove_favor = ROOT
			hidden_tooltip = { character_event = { id = VAMPIRE.115 } }
		}
		random_list = {
			1 = {
				modifier = {
					factor = 2
					check_variable = { which = local_catch_chance value = 2 }
				}
				modifier = {
					factor = 1.5
					check_variable = { which = local_catch_chance value = 3 }
				}
				modifier = {
					factor = 4
					liege = { has_character_modifier = worrying_rumors }
				}
				custom_tooltip = { text = tt_liege_catch }
				hidden_tooltip = { liege = { character_event = { id = VAMPIRE.112 days = 2 } } }
			}
			2 = {
				modifier = {
					factor = 2
					check_variable = { which = local_suspect_chance value = 2 }
				}
				modifier = {
					factor = 1.5
					check_variable = { which = local_suspect_chance value = 3 }
				}
				modifier = {
					factor = 0
					liege = { has_character_modifier = worrying_rumors }
				}
				custom_tooltip = { text = tt_liege_suspect }
				hidden_tooltip = { liege = { character_event = { id = VAMPIRE.113 days = 2 } } }
			}
			20 = {}
		}
		hidden_tooltip = {
			divide_variable = { which = local_time value = 2 }
			if = {
				limit = { check_variable = { which = local_time value = 30 } }
				character_event = { id = VAMPIRE.110 days = 30 random = 30 }
			}
			else_if = {
				limit = { check_variable = { which = local_time value = 27 } }
				character_event = { id = VAMPIRE.110 days = 27 random = 27 }
			}
			else_if = {
				limit = { check_variable = { which = local_time value = 24 } }
				character_event = { id = VAMPIRE.110 days = 24 random = 24 }
			}
			else_if = {
				limit = { check_variable = { which = local_time value = 21 } }
				character_event = { id = VAMPIRE.110 days = 21 random = 21 }
			}
			else_if = {
				limit = { check_variable = { which = local_time value = 18 } }
				character_event = { id = VAMPIRE.110 days = 18 random = 18 }
			}
			else = {
				character_event = { id = VAMPIRE.110 days = 15 random = 15 }
			}
		}
	}
	
	# Don't use favor
	option = {
		name = EVTOPTB_VAMPIRE.109
		trigger = {
			liege = {
				any_realm_character = {
					liege = { character = PREV }
					is_voter = yes
					owes_favor_to = ROOT
				}
			}
		}
		random_list = {
			1 = {
				modifier = {
					factor = 2
					check_variable = { which = local_catch_chance value = 2 }
				}
				modifier = {
					factor = 1.5
					check_variable = { which = local_catch_chance value = 3 }
				}
				modifier = {
					factor = 4
					liege = { has_character_modifier = worrying_rumors }
				}
				custom_tooltip = { text = tt_liege_catch }
				hidden_tooltip = { liege = { character_event = { id = VAMPIRE.112 days = 2 } } }
			}
			2 = {
				modifier = {
					factor = 2
					check_variable = { which = local_suspect_chance value = 2 }
				}
				modifier = {
					factor = 1.5
					check_variable = { which = local_suspect_chance value = 3 }
				}
				modifier = {
					factor = 0
					liege = { has_character_modifier = worrying_rumors }
				}
				custom_tooltip = { text = tt_liege_suspect }
				hidden_tooltip = { liege = { character_event = { id = VAMPIRE.113 days = 2 } } }
			}
			5 = {}
		}
		hidden_tooltip = {
			if = {
				limit = { check_variable = { which = local_time value = 60 } }
				character_event = { id = VAMPIRE.110 days = 60 random = 60 }
			}
			else_if = {
				limit = { check_variable = { which = local_time value = 55 } }
				character_event = { id = VAMPIRE.110 days = 55 random = 55 }
			}
			else_if = {
				limit = { check_variable = { which = local_time value = 50 } }
				character_event = { id = VAMPIRE.110 days = 50 random = 50 }
			}
			else_if = {
				limit = { check_variable = { which = local_time value = 45 } }
				character_event = { id = VAMPIRE.110 days = 45 random = 45 }
			}
			else_if = {
				limit = { check_variable = { which = local_time value = 40 } }
				character_event = { id = VAMPIRE.110 days = 48 random = 40 }
			}
			else = {
				character_event = { id = VAMPIRE.110 days = 35 random = 35 }
			}
		}
	}
	
	# Can't use favor
	option = {
		name = EVTOPTC_VAMPIRE.109
		trigger = {
			liege = {
				NOT = {
					any_realm_character = {
						liege = { character = PREV }
						is_voter = yes
						owes_favor_to = ROOT
					}
				}
			}
		}
		random_list = {
			1 = {
				modifier = {
					factor = 2
					check_variable = { which = local_catch_chance value = 2 }
				}
				modifier = {
					factor = 1.5
					check_variable = { which = local_catch_chance value = 3 }
				}
				modifier = {
					factor = 4
					liege = { has_character_modifier = worrying_rumors }
				}
				custom_tooltip = { text = tt_liege_catch }
				hidden_tooltip = { liege = { character_event = { id = VAMPIRE.112 days = 2 } } }
			}
			2 = {
				modifier = {
					factor = 2
					check_variable = { which = local_suspect_chance value = 2 }
				}
				modifier = {
					factor = 1.5
					check_variable = { which = local_suspect_chance value = 3 }
				}
				modifier = {
					factor = 0
					liege = { has_character_modifier = worrying_rumors }
				}
				custom_tooltip = { text = tt_liege_suspect }
				hidden_tooltip = { liege = { character_event = { id = VAMPIRE.113 days = 2 } } }
			}
			5 = {}
		}
		hidden_tooltip = {
			if = {
				limit = { check_variable = { which = local_time value = 60 } }
				character_event = { id = VAMPIRE.110 days = 60 random = 60 }
			}
			else_if = {
				limit = { check_variable = { which = local_time value = 55 } }
				character_event = { id = VAMPIRE.110 days = 55 random = 55 }
			}
			else_if = {
				limit = { check_variable = { which = local_time value = 50 } }
				character_event = { id = VAMPIRE.110 days = 50 random = 50 }
			}
			else_if = {
				limit = { check_variable = { which = local_time value = 45 } }
				character_event = { id = VAMPIRE.110 days = 45 random = 45 }
			}
			else_if = {
				limit = { check_variable = { which = local_time value = 40 } }
				character_event = { id = VAMPIRE.110 days = 48 random = 40 }
			}
			else = {
				character_event = { id = VAMPIRE.110 days = 35 random = 35 }
			}
		}
	}
}

# VAMPIRE.110 - Prepare troops for coup
character_event = {
	id = VAMPIRE.110
	desc = EVTDESC_VAMPIRE.110
	picture = GFX_evt_crusaders
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	prisoner = no
	
	immediate = {
		set_variable = { which = local_rank value = 0 }
		if = {
			limit = { martial = 10 }
			change_variable = { which = local_rank value = 1 }
		}
		if = {
			limit = { martial = 15 }
			change_variable = { which = local_rank value = 1 }
		}
		if = {
			limit = { martial = 20 }
			change_variable = { which = local_rank value = 1 }
		}
		if = {
			limit = { martial = 25 }
			change_variable = { which = local_rank value = 1 }
		}
		if = {
			limit = { martial = 30 }
			change_variable = { which = local_rank value = 1 }
		}
		if = {
			limit = { liege = { realm_martial = 15 } }
			change_variable = { which = local_rank value = -1 }
		}
		if = {
			limit = { liege = { realm_martial = 20 } }
			change_variable = { which = local_rank value = -1 }
		}
		if = {
			limit = { liege = { realm_martial = 25 } }
			change_variable = { which = local_rank value = -1 }
		}
		if = {
			limit = { liege = { realm_martial = 30 } }
			change_variable = { which = local_rank value = -1 }
		}
		if = {
			limit = { liege = { realm_martial = 35 } }
			change_variable = { which = local_rank value = -1 }
		}
		if = {
			limit = { NOT = { check_variable = { which = local_rank value = 0 } } }
			set_variable = { which = local_rank value = 0 }
		}
		set_variable = { which = local_temp which = local_rank }
		multiply_variable = { which = local_temp value = 5 }
		set_variable = { which = local_time value = 60 }
		subtract_variable = { which = local_time which = local_temp }
		set_variable = { which = local_catch_chance value = 12 }
		subtract_variable = { which = local_catch_chance which = local_rank }
		set_variable = { which = local_suspect_chance which = local_catch_chance }
		divide_variable = { which = local_catch_chance value = 4 }
		divide_variable = { which = local_suspect_chance value = 3 }
	}
	
	option = {
		name = EVTOPTA_VAMPIRE.110
		random_list = {
			1 = {
				modifier = {
					factor = 2
					check_variable = { which = local_catch_chance value = 2 }
				}
				modifier = {
					factor = 1.5
					check_variable = { which = local_catch_chance value = 3 }
				}
				modifier = {
					factor = 4
					liege = { has_character_modifier = worrying_rumors }
				}
				custom_tooltip = { text = tt_liege_catch }
				hidden_tooltip = { liege = { character_event = { id = VAMPIRE.112 days = 2 } } }
			}
			2 = {
				modifier = {
					factor = 2
					check_variable = { which = local_suspect_chance value = 2 }
				}
				modifier = {
					factor = 1.5
					check_variable = { which = local_suspect_chance value = 3 }
				}
				modifier = {
					factor = 0
					liege = { has_character_modifier = worrying_rumors }
				}
				custom_tooltip = { text = tt_liege_suspect }
				hidden_tooltip = { liege = { character_event = { id = VAMPIRE.113 days = 2 } } }
			}
			17 = {}
		}
		hidden_tooltip = {
			if = {
				limit = { check_variable = { which = local_time value = 60 } }
				character_event = { id = VAMPIRE.111 days = 60 random = 60 }
			}
			else_if = {
				limit = { check_variable = { which = local_time value = 55 } }
				character_event = { id = VAMPIRE.111 days = 55 random = 55 }
			}
			else_if = {
				limit = { check_variable = { which = local_time value = 50 } }
				character_event = { id = VAMPIRE.111 days = 50 random = 50 }
			}
			else_if = {
				limit = { check_variable = { which = local_time value = 45 } }
				character_event = { id = VAMPIRE.111 days = 45 random = 45 }
			}
			else_if = {
				limit = { check_variable = { which = local_time value = 40 } }
				character_event = { id = VAMPIRE.111 days = 48 random = 40 }
			}
			else = {
				character_event = { id = VAMPIRE.111 days = 35 random = 35 }
			}
		}
	}
}

# VAMPIRE.111 - Sieze throne
character_event = {
	id = VAMPIRE.111
	desc = EVTDESC_VAMPIRE.111
	picture = GFX_evt_powerful_ruler
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	prisoner = no
	
	option = {
		name = EVTOPTA_VAMPIRE.111
		liege = { opinion = { who = ROOT modifier = opinion_usurped_title } }
		# Remove bonuses and penalties
		hidden_tooltip = {
			remove_character_modifier = plotting_coup
			remove_character_modifier = minor_political_influence
			remove_character_modifier = political_influence
			remove_character_modifier = major_political_influence
			remove_character_modifier = minor_military_influence
			remove_character_modifier = military_influence
			remove_character_modifier = major_military_influence
			remove_character_modifier = minor_economic_influence
			remove_character_modifier = economic_influence
			remove_character_modifier = major_economic_influence
			remove_character_modifier = diplomatic_control
			remove_character_modifier = control_of_court
			remove_character_modifier = unrestricted_access
			remove_character_modifier = castle_guards
			remove_character_modifier = supply_chains
			remove_character_modifier = guarded_roads
			remove_character_modifier = trade_negotiations
			remove_character_modifier = port_control
			remove_character_modifier = skilled_workers
			liege = {
				character_event = { id = VAMPIRE.114 }
				remove_character_modifier = minor_political_influence
				remove_character_modifier = political_influence
				remove_character_modifier = major_political_influence
				remove_character_modifier = minor_military_influence
				remove_character_modifier = military_influence
				remove_character_modifier = major_military_influence
				remove_character_modifier = minor_economic_influence
				remove_character_modifier = economic_influence
				remove_character_modifier = major_economic_influence
				remove_character_modifier = diplomatic_control
				remove_character_modifier = control_of_court
				remove_character_modifier = unrestricted_access
				remove_character_modifier = castle_guards
				remove_character_modifier = supply_chains
				remove_character_modifier = guarded_roads
				remove_character_modifier = trade_negotiations
				remove_character_modifier = port_control
				remove_character_modifier = skilled_workers
				remove_character_modifier = undermined_bureaucracy
				remove_character_modifier = loss_of_military_control
				remove_character_modifier = operating_losses
				remove_character_modifier = undermined_diplomacy
				remove_character_modifier = hostile_court
				remove_character_modifier = access_comprimised
				remove_character_modifier = disloyal_guards
				remove_character_modifier = diverted_supplies
				remove_character_modifier = unguarded_roads
				remove_character_modifier = poor_trade_negotiations
				remove_character_modifier = poorly_controlled_ports
				remove_character_modifier = loss_of_skilled_workers
				remove_character_modifier = worrying_rumors
			}
		}
		liege = {
			primary_title = {
				usurp_title_plus_barony_if_unlanded_and_vassals = ROOT
			}
		}
		if = {
			limit = { lifestyle_traits < 1 }
			add_trait = schemer
		}
	}
}

# VAMPIRE.112 - Liege catches usurper
character_event = {
	id = VAMPIRE.112
	desc = EVTDESC_VAMPIRE.112
	picture = GFX_evt_suspicious_noble
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.112
		opinion = { who = FROM modifier = opinion_traitor }
		hidden_tooltip = { opinion = { who = FROM modifier = aware_of_secret_actions } }
	}
}

# VAMPIRE.113 - Liege suspects usurption
character_event = {
	id = VAMPIRE.113
	desc = EVTDESC_VAMPIRE.113
	picture = GFX_evt_whispers
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.113
		add_character_modifier = { modifier = worrying_rumors years = 2 }
	}
}

# VAMPIRE.114 - Liege is usurped
character_event = {
	id = VAMPIRE.114
	desc = EVTDESC_VAMPIRE.114
	picture = GFX_evt_drunk
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.114
		tooltip = {
			opinion = { who = FROM modifier = opinion_usurped_title }
		}
	}
}

# VAMPIRE.115 - Character had a favor called in
character_event = {
	id = VAMPIRE.115
	desc = EVTDESC_VAMPIRE.115
	picture = GFX_evt_noble_in_castle
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.115
		reverse_remove_favor = FROM
	}
}

# VAMPIRE.116 - Imprisonment removes bonuses and ends coup
character_event = {
	id = VAMPIRE.116
	desc = EVTDESC_VAMPIRE.116
	picture = GFX_evt_into_the_dungeon
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	trigger = {
		independent = no
		liege = { government = blood_court_government }
	}
	
	option = {
		name = EVTOPTA_VAMPIRE.116
		remove_character_modifier = plotting_coup
		remove_character_modifier = minor_political_influence
		remove_character_modifier = political_influence
		remove_character_modifier = major_political_influence
		remove_character_modifier = minor_military_influence
		remove_character_modifier = military_influence
		remove_character_modifier = major_military_influence
		remove_character_modifier = minor_economic_influence
		remove_character_modifier = economic_influence
		remove_character_modifier = major_economic_influence
		remove_character_modifier = diplomatic_control
		remove_character_modifier = control_of_court
		remove_character_modifier = unrestricted_access
		remove_character_modifier = castle_guards
		remove_character_modifier = supply_chains
		remove_character_modifier = guarded_roads
		remove_character_modifier = trade_negotiations
		remove_character_modifier = port_control
		remove_character_modifier = skilled_workers
	}
}

# VAMPIRE.117 - Gained a claim on liege title - informed
character_event = {
	id = VAMPIRE.117
	desc = EVTDESC_VAMPIRE.117
	picture = GFX_evt_suspicious_noble
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.117
		opinion = { modifier = opinion_betrayed who = FROM years = 5 }
		hidden_tooltip = { opinion = { modifier = aware_of_secret_actions who = FROM } }
	}
}

# VAMPIRE.118 - Political Rival
character_event = {
	id = VAMPIRE.118
	hide_window = yes
	is_triggered_only = yes
	
	min_age = 16
	only_capable = yes
	prisoner = no
	
	trigger = {
		independent = no
		liege = { government = blood_court_government }
		is_voter = yes
		OR = {
			has_character_modifier = minor_political_influence
			has_character_modifier = political_influence
			has_character_modifier = major_political_influence
		}
		any_realm_character = {
			liege = { ROOT = { liege = { character = PREVPREV } } }
			OR = {
				has_character_modifier = minor_political_influence
				has_character_modifier = political_influence
				has_character_modifier = major_political_influence
			}
		}
	}
	
	immediate = {
		set_character_flag = usurp_political_influence
		character_event = { id = VAMPIRE.121 }
	}
}

# VAMPIRE.119 - Military Rival
character_event = {
	id = VAMPIRE.119
	hide_window = yes
	is_triggered_only = yes
	
	min_age = 16
	only_capable = yes
	prisoner = no
	
	trigger = {
		independent = no
		liege = { government = blood_court_government }
		is_voter = yes
		OR = {
			has_character_modifier = minor_military_influence
			has_character_modifier = military_influence
			has_character_modifier = major_military_influence
		}
		any_realm_character = {
			liege = { ROOT = { liege = { character = PREVPREV } } }
			OR = {
				has_character_modifier = minor_military_influence
				has_character_modifier = military_influence
				has_character_modifier = major_military_influence
			}
		}
	}
	
	immediate = {
		set_character_flag = usurp_military_influence
		character_event = { id = VAMPIRE.121 }
	}
}

# VAMPIRE.120 - Economic Rival
character_event = {
	id = VAMPIRE.120
	hide_window = yes
	is_triggered_only = yes
	
	min_age = 16
	only_capable = yes
	prisoner = no
	
	trigger = {
		independent = no
		liege = { government = blood_court_government }
		is_voter = yes
		OR = {
			has_character_modifier = minor_economic_influence
			has_character_modifier = economic_influence
			has_character_modifier = major_economic_influence
		}
		any_realm_character = {
			liege = { ROOT = { liege = { character = PREVPREV } } }
			OR = {
				has_character_modifier = minor_economic_influence
				has_character_modifier = economic_influence
				has_character_modifier = major_economic_influence
			}
		}
	}
	
	immediate = {
		random_realm_character = {
			limit = {
				liege = { ROOT = { liege = { character = PREVPREV } } }
				OR = {
					has_character_modifier = minor_economic_influence
					has_character_modifier = economic_influence
					has_character_modifier = major_economic_influence
				}
			}
			save_event_target_as = influence_rival
		}
		set_character_flag = usurp_economic_influence
		character_event = { id = VAMPIRE.121 }
	}
}

# VAMPIRE.121 - Become aware of influence rival
character_event = {
	id = VAMPIRE.121
	picture = GFX_evt_throne_room
	border = GFX_event_normal_frame_diplomacy
	desc = {
		trigger = { has_character_flag = usurp_political_influence }
		text = EVTDESCA_VAMPIRE.121
	}
	desc = {
		trigger = { has_character_flag = usurp_military_influence }
		text = EVTDESCB_VAMPIRE.121
		picture = GFX_evt_crusaders
	}
	desc = {
		trigger = { has_character_flag = usurp_economic_influence }
		text = EVTDESCC_VAMPIRE.121
		picture = GFX_evt_stressed_ruler
	}
	
	is_triggered_only = yes
	
	immediate = {
		opinion = { modifier = aware_of_secret_actions who = event_target:influence_rival years = 4 }
	}
	
	option = {
		name = EVTOPTA_VAMPIRE.121
		opinion = { modifier = opinion_meddler who = event_target:influence_rival years = 4 }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				trait = content
			}
			modifier = {
				factor = 2
				opinion = { who = event_target:influence_rival value = 50 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = event_target:influence_rival value = 75 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = event_target:influence_rival value = 100 }
			}
			modifier = {
				factor = 2
				trait = slothful
			}
		}
	}
	option = {
		name = EVTOPTB_VAMPIRE.121
		random_list = {
			# Fail
			1 = {
				modifier = {
					factor = 2
					NOT = { intrigue = 5 }
				}
				modifier = {
					factor = 1.5
					event_target:influence_rival = { intrigue = 15 }
				}
				modifier = {
					factor = 1.5
					event_target:influence_rival = { intrigue = 20 }
				}
				modifier = {
					factor = 2
					event_target:influence_rival = { intrigue = 25 }
				}
				custom_tooltip = { text = tt_assassin_fail }
				hidden_tooltip = { character_event = { id = VAMPIRE.124 days = 2 random = 3 } }
			}
			# Succeed, but caught
			1 = {
				modifier = {
					factor = 1.5
					intrigue = 15
				}
				modifier = {
					factor = 1.5
					intrigue = 25
				}
				modifier = {
					factor = 1.2
					event_target:influence_rival = { intrigue = 15 }
				}
				modifier = {
					factor = 1.2
					event_target:influence_rival = { intrigue = 25 }
				}
				custom_tooltip = { text = tt_assassin_caught }
				hidden_tooltip = { character_event = { id = VAMPIRE.122 days = 2 random = 3 } }
			}
			# Succeed
			1 = {
				modifier = {
					factor = 2
					intrigue = 15
				}
				modifier = {
					factor = 1.5
					intrigue = 20
				}
				modifier = {
					factor = 2
					intrigue = 25
				}
				custom_tooltip = { text = tt_assassin_success }
				hidden_tooltip = { character_event = { id = VAMPIRE.126 days = 2 random = 3 } }
			}
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				NOT = { ai_honor = -50 }
			}
			modifier = {
				factor = 2
				trait = deceitful
			}
			modifier = {
				factor = 2
				trait = schemer
			}
			modifier = {
				factor = 2
				intrigue = 20
			}
			modifier = {
				factor = 2
				intrigue = 25
			}
		}
	}
	
	option = {
		name = EVTOPTC_VAMPIRE.121
		scaled_wealth = { value = -0.5 max = -100 }
		random_list = {
			1 = {
				modifier = {
					factor = 2
					NOT = { stewardship = 5 }
				}
				modifier = {
					factor = 1.5
					event_target:influence_rival = { stewardship = 15 }
				}
				modifier = {
					factor = 1.5
					event_target:influence_rival = { stewardship = 20 }
				}
				modifier = {
					factor = 2
					event_target:influence_rival = { stewardship = 25 }
				}
				custom_tooltip = { text = tt_bribe_failure }
				hidden_tooltip = { character_event = { id = VAMPIRE.128 days = 2 random = 3 } }
			}
			1 = {
				modifier = {
					factor = 2
					NOT = { event_target:influence_rival = { stewardship = 5 } }
				}
				modifier = {
					factor = 1.5
					stewardship = 15
				}
				modifier = {
					factor = 1.5
					stewardship = 20
				}
				modifier = {
					factor = 2
					stewardship = 25
				}
				custom_tooltip = { text = tt_bribe_success }
				hidden_tooltip = { character_event = { id = VAMPIRE.126 days = 2 random = 3 } }
			}
		}
	}
	
	option = {
		name = EVTOPTD_VAMPIRE.121
		liege = { 
			tooltip = { opinion = { modifier = abuse_of_office who = event_target:influence_rival years = 4 } }
			hidden_tooltip = { character_event = { id = VAMPIRE.129 days = 2 random = 3 } }
		}
		ai_chance = {
			factor = 1
			additive_opinion_modifier = {
				factor = 0.04
				who = liege
			}
			modifier = {
				factor = 1.5
				trait = content
			}
			modifier = {
				factor = 1.5
				trait = arbitrary
			}
		}
	}
}

# VAMPIRE.122 - Assassin caught, but successful
character_event = {
	id = VAMPIRE.122
	desc = EVTDESC_VAMPIRE.122
	picture = GFX_evt_hiding_from_pursuers
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.122
		if = {
			limit = { has_character_flag = usurp_political_influence }
			if = {
				limit = { has_character_modifier = minor_political_influence }
				hidden_tooltip = { remove_character_modifier = minor_political_influence }
				add_character_modifier = { modifier = political_influence years = 10 }
			}
			else_if = {
				limit = { has_character_modifier = political_influence }
				hidden_tooltip = { remove_character_modifier = political_influence }
				add_character_modifier = { modifier = major_political_influence years = 10 }
			}
			if = {
				limit = { event_target:influence_rival = { has_character_modifier = major_political_influence } }
				event_target:influence_rival = {
					remove_character_modifier = major_political_influence
					add_character_modifier = { modifier = political_influence years = 10 }
				}
			}
			else_if = {
				limit = { event_target:influence_rival = { has_character_modifier = political_influence } }
				event_target:influence_rival = {
					remove_character_modifier = political_influence
					add_character_modifier = { modifier = minor_political_influence years = 10 }
				}
			}
			else = {
				event_target:influence_rival = {
					remove_character_modifier = minor_political_influence
				}
			}
		}
		else_if = {
			limit = { has_character_flag = usurp_military_influence }
			if = {
				limit = { has_character_modifier = minor_military_influence }
				hidden_tooltip = { remove_character_modifier = minor_military_influence }
				add_character_modifier = { modifier = military_influence years = 10 }
			}
			else_if = {
				limit = { has_character_modifier = military_influence }
				hidden_tooltip = { remove_character_modifier = military_influence }
				add_character_modifier = { modifier = major_military_influence years = 10 }
			}
			if = {
				limit = { event_target:influence_rival = { has_character_modifier = major_military_influence } }
				event_target:influence_rival = {
					remove_character_modifier = major_military_influence
					add_character_modifier = { modifier = military_influence years = 10 }
				}
			}
			else_if = {
				limit = { event_target:influence_rival = { has_character_modifier = military_influence } }
				event_target:influence_rival = {
					remove_character_modifier = military_influence
					add_character_modifier = { modifier = minor_military_influence years = 10 }
				}
			}
			else = {
				event_target:influence_rival = {
					remove_character_modifier = minor_military_influence
				}
			}
		}
		else = {
			if = {
				limit = { has_character_modifier = minor_economic_influence }
				hidden_tooltip = { remove_character_modifier = minor_economic_influence }
				add_character_modifier = { modifier = economic_influence years = 10 }
			}
			else_if = {
				limit = { has_character_modifier = economic_influence }
				hidden_tooltip = { remove_character_modifier = economic_influence }
				add_character_modifier = { modifier = major_economic_influence years = 10 }
			}
			if = {
				limit = { event_target:influence_rival = { has_character_modifier = major_economic_influence } }
				event_target:influence_rival = {
					remove_character_modifier = major_economic_influence
					add_character_modifier = { modifier = economic_influence years = 10 }
				}
			}
			else_if = {
				limit = { event_target:influence_rival = { has_character_modifier = economic_influence } }
				event_target:influence_rival = {
					remove_character_modifier = economic_influence
					add_character_modifier = { modifier = minor_economic_influence years = 10 }
				}
			}
			else = {
				event_target:influence_rival = {
					remove_character_modifier = minor_economic_influence
				}
			}
		}
		tooltip = {
			event_target:influence_rival = { opinion = { who = ROOT modifier = suspect_of_murder } }
		}
		hidden_tooltip = { event_target:influence_rival = { character_event = { id = VAMPIRE.123 } } }
	}
}

# VAMPIRE.123 - Assassin caught, but successful - informed
character_event = {
	id = VAMPIRE.123
	desc = EVTDESC_VAMPIRE.123
	picture = GFX_evt_whispers
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.123
		opinion = { who = FROM modifier = suspect_of_murder years = 5 }
		hidden_tooltip = { opinion = { who = FROM modifier = aware_of_secret_actions years = 5 } }
	}
}

# VAMPIRE.124 - Assassin caught
character_event = {
	id = VAMPIRE.124
	desc = EVTDESC_VAMPIRE.124
	picture = GFX_evt_into_the_dungeon
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.124
		tooltip = {
			event_target:influence_rival = { opinion = { who = ROOT modifier = suspect_of_murder } }
		}
		hidden_tooltip = { event_target:influence_rival = { character_event = { id = VAMPIRE.125 } } }
	}
}

# VAMPIRE.125 - Assassin caught - informed
character_event = {
	id = VAMPIRE.125
	desc = EVTDESC_VAMPIRE.125
	picture = GFX_evt_whispers
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.125
		opinion = { who = FROM modifier = suspect_of_murder years = 5 }
		hidden_tooltip = { opinion = { who = FROM modifier = aware_of_secret_actions years = 5 } }
	}
}

# VAMPIRE.126 - Success
character_event = {
	id = VAMPIRE.126
	desc = EVTDESC_VAMPIRE.126
	picture = GFX_evt_relaxed_ruler
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.126
		if = {
			limit = { has_character_flag = usurp_political_influence }
			if = {
				limit = { has_character_modifier = minor_political_influence }
				hidden_tooltip = { remove_character_modifier = minor_political_influence }
				add_character_modifier = { modifier = political_influence years = 10 }
			}
			else_if = {
				limit = { has_character_modifier = political_influence }
				hidden_tooltip = { remove_character_modifier = political_influence }
				add_character_modifier = { modifier = major_political_influence years = 10 }
			}
			if = {
				limit = { event_target:influence_rival = { has_character_modifier = major_political_influence } }
				event_target:influence_rival = {
					remove_character_modifier = major_political_influence
					add_character_modifier = { modifier = political_influence years = 10 }
				}
			}
			else_if = {
				limit = { event_target:influence_rival = { has_character_modifier = political_influence } }
				event_target:influence_rival = {
					remove_character_modifier = political_influence
					add_character_modifier = { modifier = minor_political_influence years = 10 }
				}
			}
			else = {
				event_target:influence_rival = {
					remove_character_modifier = minor_political_influence
				}
			}
		}
		else_if = {
			limit = { has_character_flag = usurp_military_influence }
			if = {
				limit = { has_character_modifier = minor_military_influence }
				hidden_tooltip = { remove_character_modifier = minor_military_influence }
				add_character_modifier = { modifier = military_influence years = 10 }
			}
			else_if = {
				limit = { has_character_modifier = military_influence }
				hidden_tooltip = { remove_character_modifier = military_influence }
				add_character_modifier = { modifier = major_military_influence years = 10 }
			}
			if = {
				limit = { event_target:influence_rival = { has_character_modifier = major_military_influence } }
				event_target:influence_rival = {
					remove_character_modifier = major_military_influence
					add_character_modifier = { modifier = military_influence years = 10 }
				}
			}
			else_if = {
				limit = { event_target:influence_rival = { has_character_modifier = military_influence } }
				event_target:influence_rival = {
					remove_character_modifier = military_influence
					add_character_modifier = { modifier = minor_military_influence years = 10 }
				}
			}
			else = {
				event_target:influence_rival = {
					remove_character_modifier = minor_military_influence
				}
			}
		}
		else = {
			if = {
				limit = { has_character_modifier = minor_economic_influence }
				hidden_tooltip = { remove_character_modifier = minor_economic_influence }
				add_character_modifier = { modifier = economic_influence years = 10 }
			}
			else_if = {
				limit = { has_character_modifier = economic_influence }
				hidden_tooltip = { remove_character_modifier = economic_influence }
				add_character_modifier = { modifier = major_economic_influence years = 10 }
			}
			if = {
				limit = { event_target:influence_rival = { has_character_modifier = major_economic_influence } }
				event_target:influence_rival = {
					remove_character_modifier = major_economic_influence
					add_character_modifier = { modifier = economic_influence years = 10 }
				}
			}
			else_if = {
				limit = { event_target:influence_rival = { has_character_modifier = economic_influence } }
				event_target:influence_rival = {
					remove_character_modifier = economic_influence
					add_character_modifier = { modifier = minor_economic_influence years = 10 }
				}
			}
			else = {
				event_target:influence_rival = {
					remove_character_modifier = minor_economic_influence
				}
			}
		}
		tooltip = {
			event_target:influence_rival = { opinion = { who = ROOT modifier = suspect_of_murder } }
		}
		hidden_tooltip = { event_target:influence_rival = { character_event = { id = VAMPIRE.127 } } }
	}
}

# VAMPIRE.127 - Power weakened
character_event = {
	id = VAMPIRE.127
	desc = EVTDESC_VAMPIRE.127
	picture = GFX_evt_stressed_ruler
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.127
	}
}

# VAMPIRE.128 - Bribe failed
character_event = {
	id = VAMPIRE.128
	desc = EVTDESC_VAMPIRE.128
	picture = GFX_evt_stressed_ruler
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.128
		scaled_wealth = 0.05
	}
}

# VAMPIRE.129 - Informed of political power
character_event = {
	id = VAMPIRE.129
	desc = EVTDESC_VAMPIRE.129
	picture = GFX_evt_whispers
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.129
		opinion = { modifier = abuse_of_office who = event_target:influence_rival years = 4 }
		hidden_tooltip = { opinion = { modifier = aware_of_secret_actions who = event_target:influence_rival years = 4 } }
	}
}

# VAMPIRE.130 - Liege becomes aware of someone stealing power
character_event = {
	id = VAMPIRE.130
	desc = EVTDESC_VAMPIRE.130
	picture = GFX_evt_suspicious_noble
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	only_playable = yes
	only_independent = yes
	only_capable = yes
	min_age = 16
	
	trigger = {
		government = blood_court_government
		any_realm_character = {
			liege = { character = ROOT }
			is_voter = yes
			OR = {
				has_character_modifier = minor_political_influence
				has_character_modifier = political_influence
				has_character_modifier = major_political_influence
				has_character_modifier = minor_military_influence
				has_character_modifier = military_influence
				has_character_modifier = major_military_influence
				has_character_modifier = minor_economic_influence
				has_character_modifier = economic_influence
				has_character_modifier = major_economic_influence
			}
			NOT = { reverse_has_opinion_modifier = { who = ROOT modifier = aware_of_secret_actions } }
		}
	}
	
	option = {
		name = EVTOPTA_VAMPIRE.130
		random_realm_character = {
			limit = {
				liege = { character = ROOT }
				is_voter = yes
				OR = {
					has_character_modifier = minor_political_influence
					has_character_modifier = political_influence
					has_character_modifier = major_political_influence
					has_character_modifier = minor_military_influence
					has_character_modifier = military_influence
					has_character_modifier = major_military_influence
					has_character_modifier = minor_economic_influence
					has_character_modifier = economic_influence
					has_character_modifier = major_economic_influence
				}
				NOT = { reverse_has_opinion_modifier = { who = ROOT modifier = aware_of_secret_actions } }
			}
			reverse_opinion = { who = ROOT modifier = aware_of_secret_actions years = 5 }
			reverse_opinion = { who = ROOT modifier = opinion_unhappy years = 5 }
		}
	}
}

# VAMPIRE.131-139 - Deleted

# VAMPIRE.140 - Able to build spy network in the capital
character_event = {
	id = VAMPIRE.140
	desc = EVTDESC_VAMPIRE.140
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	capable_only = yes
	min_age = 16
	prisoner = no
	
	trigger = {
		is_voter = yes
		independent = no
		liege = { government = blood_court_government }
		NOT = { has_character_modifier = spy_network }
	}
	
	option = {
		name = EVTOPTA_VAMPIRE.140
		custom_tooltip = {
			text = tt_begin_spy_network
			hidden_tooltip = {
				set_variable = { which = local_progress value = 1 }
				save_event_target_as = spy_plotter
				random_list = {
					1 = {
						character_event = { id = VAMPIRE.141 days = 4 random = 4 }
					}
					1 = {
						character_event = { id = VAMPIRE.142 days = 4 random = 4 }
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_VAMPIRE.140
		trigger = { ai = no }
	}
}

# VAMPIRE.141 - Spy network needs extra funds
character_event = {
	id = VAMPIRE.141
	desc = EVTDESC_VAMPIRE.141
	picture = GFX_evt_stressed_ruler
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	prisoner = no
	
	trigger = {
		is_voter = yes
	}
	
	option = {
		name = EVTOPTA_VAMPIRE.141
		scaled_wealth = { value = -0.3 min = -10 max = -70 }
		hidden_tooltip = {
			change_variable = { which = local_progress value = 0.3 }
			random_list = {
				40 = {
					modifier = {
						factor = 1.2
						trait = honest
					}
					modifier = {
						factor = 1.2
						trait = charitable
					}
					character_event = { id = VAMPIRE.141 days = 15 random = 20 }
				}
				40 = {
					modifier = {
						factor = 1.2
						trait = honest
					}
					modifier = {
						factor = 1.2
						trait = diligent
					}
					character_event = { id = VAMPIRE.142 days = 15 random = 20 }
				}
				10 = {
					modifier = {
						factor = 1.3
						check_variable = { which = local_progress value = 1.3 }
					}
					modifier = {
						factor = 1.23
						check_variable = { which = local_progress value = 1.6 }
					}
					modifier = {
						factor = 1.19
						check_variable = { which = local_progress value = 1.9 }
					}
					modifier = {
						factor = 1.11
						check_variable = { which = local_progress value = 2.1 }
					}
					modifier = {
						factor = 1.14
						check_variable = { which = local_progress value = 2.4 }
					}
					modifier = {
						factor = 1.13
						check_variable = { which = local_progress value = 2.7 }
					}
					modifier = {
						factor = 1.11
						check_variable = { which = local_progress value = 3 }
					}
					modifier = {
						factor = 1.1
						check_variable = { which = local_progress value = 3.3 }
					}
					modifier = {
						factor = 1.09
						check_variable = { which = local_progress value = 3.6 }
					}
					modifier = {
						factor = 1.08
						check_variable = { which = local_progress value = 3.9 }
					}
					modifier = {
						factor = 1.2
						trait = deceitful
					}
					character_event = { id = VAMPIRE.143 days = 15 random = 20 }
				}
				10 = {
					modifier = {
						factor = 1.3
						check_variable = { which = local_progress value = 1.3 }
					}
					modifier = {
						factor = 1.23
						check_variable = { which = local_progress value = 1.6 }
					}
					modifier = {
						factor = 1.19
						check_variable = { which = local_progress value = 1.9 }
					}
					modifier = {
						factor = 1.11
						check_variable = { which = local_progress value = 2.1 }
					}
					modifier = {
						factor = 1.14
						check_variable = { which = local_progress value = 2.4 }
					}
					modifier = {
						factor = 1.13
						check_variable = { which = local_progress value = 2.7 }
					}
					modifier = {
						factor = 1.11
						check_variable = { which = local_progress value = 3 }
					}
					modifier = {
						factor = 1.1
						check_variable = { which = local_progress value = 3.3 }
					}
					modifier = {
						factor = 1.09
						check_variable = { which = local_progress value = 3.6 }
					}
					modifier = {
						factor = 1.08
						check_variable = { which = local_progress value = 3.9 }
					}
					modifier = {
						factor = 1.2
						trait = gregarious
					}
					modifier = {
						factor = 1.2
						trait = honest
					}
					liege = { character_event = { id = VAMPIRE.144 days = 15 random = 20 } }
				}
				10 = {
					modifier = {
						factor = 1.3
						check_variable = { which = local_progress value = 1.3 }
					}
					modifier = {
						factor = 1.23
						check_variable = { which = local_progress value = 1.6 }
					}
					modifier = {
						factor = 1.19
						check_variable = { which = local_progress value = 1.9 }
					}
					modifier = {
						factor = 1.11
						check_variable = { which = local_progress value = 2.1 }
					}
					modifier = {
						factor = 1.14
						check_variable = { which = local_progress value = 2.4 }
					}
					modifier = {
						factor = 1.13
						check_variable = { which = local_progress value = 2.7 }
					}
					modifier = {
						factor = 1.11
						check_variable = { which = local_progress value = 3 }
					}
					modifier = {
						factor = 1.1
						check_variable = { which = local_progress value = 3.3 }
					}
					modifier = {
						factor = 1.09
						check_variable = { which = local_progress value = 3.6 }
					}
					modifier = {
						factor = 1.08
						check_variable = { which = local_progress value = 3.9 }
					}
					modifier = {
						factor = 1.2
						trait = gregarious
					}
					modifier = {
						factor = 1.2
						trait = honest
					}
					liege = {
						random_realm_character = {
							limit = {
								liege = { character = PREV }
								is_voter = yes
							}
							character_event = { id = VAMPIRE.145 days = 15 random = 20 }
						}
					}
				}
			}
		}
		ai_chance = {
			factor = 5
			modifier = {
				factor = 1.2
				trait = deceitful
			}
			modifier = {
				factor = 2
				scaled_wealth = 1
			}
		}
	}
	
	option = {
		name = EVTOPTA_VAMPIRE.141
		ai_chance = {
			factor = 1
			modifier = {
				factor = 3
				NOT = { scaled_wealth = 0.3 }
			}
			modifier = {
				factor = 2
				NOT = { scaled_wealth = 0.5 }
			}
			modifier = {
				factor = 1.5
				trait = slothful
			}
			modifier = {
				factor = 0.5
				check_variable = { which = local_progress value = 3 }
			}
		}
	}
}

# VAMPIRE.142 - Spy network needs attention
character_event = {
	id = VAMPIRE.142
	desc = EVTDESC_VAMPIRE.142
	picture = GFX_evt_scientist
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	prisoner = no
	
	trigger = {
		is_voter = yes
	}
	
	option = {
		name = EVTOPTA_VAMPIRE.142
		add_character_modifier = { modifier = distracted years = 2 stacking = yes }
		hidden_tooltip = {
			change_variable = { which = local_progress value = 0.3 }
			random_list = {
				40 = {
					modifier = {
						factor = 1.2
						trait = honest
					}
					modifier = {
						factor = 1.2
						trait = charitable
					}
					character_event = { id = VAMPIRE.141 days = 15 random = 20 }
				}
				40 = {
					modifier = {
						factor = 1.2
						trait = honest
					}
					modifier = {
						factor = 1.2
						trait = diligent
					}
					character_event = { id = VAMPIRE.142 days = 15 random = 20 }
				}
				10 = {
					modifier = {
						factor = 1.3
						check_variable = { which = local_progress value = 1.3 }
					}
					modifier = {
						factor = 1.23
						check_variable = { which = local_progress value = 1.6 }
					}
					modifier = {
						factor = 1.19
						check_variable = { which = local_progress value = 1.9 }
					}
					modifier = {
						factor = 1.11
						check_variable = { which = local_progress value = 2.1 }
					}
					modifier = {
						factor = 1.14
						check_variable = { which = local_progress value = 2.4 }
					}
					modifier = {
						factor = 1.13
						check_variable = { which = local_progress value = 2.7 }
					}
					modifier = {
						factor = 1.11
						check_variable = { which = local_progress value = 3 }
					}
					modifier = {
						factor = 1.1
						check_variable = { which = local_progress value = 3.3 }
					}
					modifier = {
						factor = 1.09
						check_variable = { which = local_progress value = 3.6 }
					}
					modifier = {
						factor = 1.08
						check_variable = { which = local_progress value = 3.9 }
					}
					modifier = {
						factor = 1.2
						trait = deceitful
					}
					character_event = { id = VAMPIRE.143 days = 15 random = 20 }
				}
				10 = {
					modifier = {
						factor = 1.3
						check_variable = { which = local_progress value = 1.3 }
					}
					modifier = {
						factor = 1.23
						check_variable = { which = local_progress value = 1.6 }
					}
					modifier = {
						factor = 1.19
						check_variable = { which = local_progress value = 1.9 }
					}
					modifier = {
						factor = 1.11
						check_variable = { which = local_progress value = 2.1 }
					}
					modifier = {
						factor = 1.14
						check_variable = { which = local_progress value = 2.4 }
					}
					modifier = {
						factor = 1.13
						check_variable = { which = local_progress value = 2.7 }
					}
					modifier = {
						factor = 1.11
						check_variable = { which = local_progress value = 3 }
					}
					modifier = {
						factor = 1.1
						check_variable = { which = local_progress value = 3.3 }
					}
					modifier = {
						factor = 1.09
						check_variable = { which = local_progress value = 3.6 }
					}
					modifier = {
						factor = 1.08
						check_variable = { which = local_progress value = 3.9 }
					}
					modifier = {
						factor = 1.2
						trait = gregarious
					}
					modifier = {
						factor = 1.2
						trait = honest
					}
					liege = { character_event = { id = VAMPIRE.144 days = 15 random = 20 } }
				}
				10 = {
					modifier = {
						factor = 1.3
						check_variable = { which = local_progress value = 1.3 }
					}
					modifier = {
						factor = 1.23
						check_variable = { which = local_progress value = 1.6 }
					}
					modifier = {
						factor = 1.19
						check_variable = { which = local_progress value = 1.9 }
					}
					modifier = {
						factor = 1.11
						check_variable = { which = local_progress value = 2.1 }
					}
					modifier = {
						factor = 1.14
						check_variable = { which = local_progress value = 2.4 }
					}
					modifier = {
						factor = 1.13
						check_variable = { which = local_progress value = 2.7 }
					}
					modifier = {
						factor = 1.11
						check_variable = { which = local_progress value = 3 }
					}
					modifier = {
						factor = 1.1
						check_variable = { which = local_progress value = 3.3 }
					}
					modifier = {
						factor = 1.09
						check_variable = { which = local_progress value = 3.6 }
					}
					modifier = {
						factor = 1.08
						check_variable = { which = local_progress value = 3.9 }
					}
					modifier = {
						factor = 1.2
						trait = gregarious
					}
					modifier = {
						factor = 1.2
						trait = honest
					}
					liege = {
						random_realm_character = {
							limit = {
								liege = { character = PREV }
								is_voter = yes
							}
							character_event = { id = VAMPIRE.145 days = 15 random = 20 }
						}
					}
				}
			}
		}
		ai_chance = {
			factor = 5
			modifier = {
				factor = 1.2
				trait = deceitful
			}
			modifier = {
				factor = 2
				scaled_wealth = 1
			}
		}
	}
	
	option = {
		name = EVTOPTA_VAMPIRE.142
		ai_chance = {
			factor = 1
			modifier = {
				factor = 3
				NOT = { scaled_wealth = 0.3 }
			}
			modifier = {
				factor = 2
				NOT = { scaled_wealth = 0.5 }
			}
			modifier = {
				factor = 1.5
				trait = slothful
			}
			modifier = {
				factor = 0.5
				check_variable = { which = local_progress value = 3 }
			}
		}
	}
}

# VAMPIRE.143 - Successful spy network
character_event = {
	id = VAMPIRE.143
	desc = EVTDESC_VAMPIRE.143
	picture = GFX_evt_shadow
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	prisoner = no
	
	trigger = {
		is_voter = yes
	}
	
	option = {
		name = EVTOPTA_VAMPIRE.143
		add_character_modifier = { modifier = spy_network years = 20 }
	}
}

# VAMPIRE.144 - Caught by liege
character_event = {
	id = VAMPIRE.144
	picture = GFX_evt_suspicious_noble
	border = GFX_event_normal_frame_intrigue
	desc = {
		text = EVTDESCA_VAMPIRE.144
		trigger = { event_target:plotter = { character = FROM } }
	}
	desc = {
		text = EVTDESCB_VAMPIRE.144
		trigger = { NOT = { event_target:plotter = { character = FROM } } }
	}
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.144
		opinion = { modifier = opinion_charge_traitor who = event_target:plotter years = 10 }
		if = {
			limit = { FROM = { NOT = { character = event_target:plotter } } }
			opinion = { who = FROM modifier = warning_received years = 10 }
		}
		ai_chance = {
			factor = 3
			modifier = {
				factor = 2
				trait = just
			}
		}
	}
	
	option = {
		name = EVTOPTB_VAMPIRE.144
		scaled_wealth = { value = -0.3 min = -10 max = -50 }
		add_character_modifier = { modifier = spy_network years = 20 stacking = yes}
		event_target:plotter = {
			add_character_modifier = { modifier = subverted_spies years = 20 }
			character_event = { id = VAMPIRE.143 }
		}
		if = {
			limit = { FROM = { NOT = { character = event_target:plotter } } }
			opinion = { who = FROM modifier = warning_received years = 10 }
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				trait = deceitful
			}
			modifier = {
				factor = 2
				scaled_wealth = 1
			}
			modifier = {
				factor = 2
				intrigue = 12
			}
		}
	}
}

# VAMPIRE.145 - Caught by councillor
character_event = {
	id = VAMPIRE.145
	desc = EVTDESC_VAMPIRE.145
	picture = GFX_evt_accused
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.145
		FROM = { character_event = { id = VAMPIRE.143 } }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 3
				holds_favor_on = FROM
			}
			modifier = {
				factor = 2
				opinion = { who = FROM value = 50 }
			}
			modifier = {
				factor = 3
				is_friend = FROM
			}
		}
	}
	option = {
		name = EVTOPTB_VAMPIRE.145
		liege = { character_event = { id = VAMPIRE.144 } }
		ai_chance = {
			factor = 2
			modifier = {
				factor = 2
				NOT = { opinion = { who = FROM value = -25 } }
			}
			modifier = {
				factor = 3
				is_rival = FROM
			}
		}
	}
	option = {
		name = EVTOPTC_VAMPIRE.145
		trigger = { holds_favor_on = FROM }
		FROM = { letter_event = { id = VAMPIRE.146 } }
		ai_chance = {
			factor = 2
			modifier = {
				factor = 1.5
				trait = deceitful
			}
			modifier = {
				factor = 2
				intrigue = 12
			}
		}
	}
}

# VAMPIRE.146 - Blackmailed for favor
letter_event = {
	id = VAMPIRE.146
	desc = EVTDESC_VAMPIRE.146
	border = GFX_event_letter_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.146
		add_favor = FROM
		opinion = { who = FROM modifier = opinion_blackmailed years = 4 }
		hidden_tooltip = {
			FROM = { character_event = { id = VAMPIRE.147 days = 2 random = 2 } }
		}
	}
	
	option = {
		name = EVTOPTB_VAMPIRE.146
		trigger = { ai = no }
		opinion = { who = FROM modifier = opinion_blackmailed years = 4 }
		hidden_tooltip = {
			FROM = { character_event = { id = VAMPIRE.147 days = 2 random = 2 } }
		}
	}
}

# VAMPIRE.147 - Inform
character_event = {
	id = VAMPIRE.147
	picture = GFX_evt_bribe_accepted
	border = GFX_event_normal_frame_intrigue
	desc = {
		trigger = { holds_favor_on = FROM }
		text = EVTDESCA_VAMPIRE.147
	}
	desc = {
		trigger = { NOT = { holds_favor_on = FROM } }
		text = EVTDESCB_VAMPIRE.147
		picture = GFX_evt_bribe_declined
	}
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.147
		trigger = { holds_favor_on = FROM }
		hidden_tooltip = { FROM = { character_event = { id = VAMPIRE.143 days = 2 } } }
	}
	option = {
		name = EVTOPTB_VAMPIRE.147
		trigger = { NOT = { holds_favor_on = FROM } }
		liege = { character_event = { id = VAMPIRE.144 days = 2 } }
	}
}

# VAMPIRE.148 - Blood Bonded
character_event = {
	id = VAMPIRE.148
	desc = EVTDESC_VAMPIRE.148
	picture = GFX_evt_judged_by_ruler
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.148
		tooltip = { opinion = { who = FROM modifier = vampire_blood_bond } }
	}
}

# VAMPIRE.149 - Beginning to turn
character_event = {
	id = VAMPIRE.149
	picture = GFX_evt_bad_news
	border = GFX_event_normal_frame_diplomacy
	
	desc = {
		trigger = { is_female = no }
		text = EVTDESC_VAMPIRE.149
	}
	desc = {
		trigger = { is_female = yes }
		text = EVTDESC_VAMPIRE.149
		picture = GFX_evt_bad_news_female
	}
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.149
		random = {
			chance = 70
			add_trait = vomiting
		}
		hidden_tooltip = {
			random_list = {
				70 = {
					character_event = { id = VAMPIRE.150 days = 4 random = 12 }
				}
				30 = {
					modifier = {
						factor = 1.2
						health = 7
					}
					modifier = {
						factor = 1.2
						health = 9
					}
					modifier = {
						factor = 1.2
						health = 11
					}
					modifier = {
						factor = 1.2
						health = 13
					}
					modifier = {
						factor = 1.2
						health = 15
					}
					character_event = { id = VAMPIRE.151 days = 4 random = 12 }
				}
			}
		}
	}
}

# VAMPIRE.150 - Beginning to turn
character_event = {
	id = VAMPIRE.150
	picture = GFX_evt_bad_news
	border = GFX_event_normal_frame_diplomacy
	
	desc = {
		trigger = { is_female = no }
		text = EVTDESC_VAMPIRE.150
	}
	desc = {
		trigger = { is_female = yes }
		text = EVTDESC_VAMPIRE.150
		picture = GFX_evt_bad_news_female
	}
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.150
		random = {
			chance = 70
			add_trait = chest_pain
		}
		random = {
			chance = 50
			add_trait = rash
		}
		hidden_tooltip = {
			random_list = {
				70 = {
					character_event = { id = VAMPIRE.152 days = 6 random = 18 }
				}
				30 = {
					modifier = {
						factor = 1.2
						health = 7
					}
					modifier = {
						factor = 1.2
						health = 9
					}
					modifier = {
						factor = 1.2
						health = 11
					}
					modifier = {
						factor = 1.2
						health = 13
					}
					modifier = {
						factor = 1.2
						health = 15
					}
					character_event = { id = VAMPIRE.151 days = 6 random = 18 }
				}
			}
		}
	}
}

# VAMPIRE.151 - Did not turn
character_event = {
	id = VAMPIRE.151
	desc = EVTDESC_VAMPIRE.151
	picture = GFX_evt_recovery
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.151
		if = {
			limit = { trait = vomiting }
			remove_trait = vomiting
		}
		if = {
			limit = { trait = chest_pain }
			remove_trait = chest_pain
		}
		if = {
			limit = { trait = rash }
			remove_trait = rash
		}
		health = 0.5
	}
}

# VAMPIRE.152 - Turned
character_event = {
	id = VAMPIRE.152
	desc = EVTDESC_VAMPIRE.152
	picture = GFX_evt_powerful_ruler
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.152
		add_trait = vampire
		add_trait = hunger_1
		if = {
			limit = {
				FROMFROM = {
					any_owned_bloodline = {
						has_bloodline_flag = vampiric_inheritance
					}
				}
			}
			FROMFROM = {
				any_owned_bloodline = {
					limit = { has_bloodline_flag = vampiric_inheritance }
					random = {
						chance = 30
						add_bloodline_member = ROOT
					}
				}
			}
			if = {
				limit = { any_owned_bloodline = { has_bloodline_flag = vampire_auto_known } }
				add_trait = known_vampire
			}
			if = {
				limit = { any_owned_bloodline = { has_bloodline_flag = vampire_auto_ugly } }
				remove_trait = fair
				add_trait = ugly
			}
		}
	}
}

# VAMPIRE.153 - Replace Blood Court member
character_event = {
	id = VAMPIRE.153
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = { is_variable_equal = { which = local_title value = 1 } }
			event_target:new_blood_court = {
				give_minor_title = blood_court_count
				character_event = { id = VAMPIRE.156 }
			}
		}
		else_if = {
			limit = { is_variable_equal = { which = local_title value = 2 } }
			event_target:new_blood_court = {
				give_minor_title = blood_court_duke
				character_event = { id = VAMPIRE.156 }
			}
		}
		else_if = {
			limit = { is_variable_equal = { which = local_title value = 3 } }
			event_target:new_blood_court = {
				give_minor_title = blood_court_king
				character_event = { id = VAMPIRE.156 }
			}
		}
		else_if = {
			limit = { is_variable_equal = { which = local_title value = 4 } } 
			event_target:new_blood_court = {
				give_minor_title = blood_court_emperor
				character_event = { id = VAMPIRE.156 }
			}
		}
		else_if = {
			limit = { is_variable_equal = { which = local_title value = 5 } }
			event_target:new_blood_court = {
				give_minor_title = blood_court_e_vampire_1
				character_event = { id = VAMPIRE.156 }
			}
		}
		else_if = {
			limit = { is_variable_equal = { which = local_title value = 6 } }
			event_target:new_blood_court = {
				give_minor_title = blood_court_e_vampire_2
				character_event = { id = VAMPIRE.156 }
			}
		}
	}
}

# VAMPIRE.154
character_event = {
	id = VAMPIRE.154
	hide_window = yes
	is_triggered_only = yes
	
	# Not triggering on death
	trigger = {
		OR = {
			has_minor_title = blood_court_count
			has_minor_title = blood_court_duke
			has_minor_title = blood_court_king
			has_minor_title = blood_court_emperor
			has_minor_title = blood_court_e_vampire_1
			has_minor_title = blood_court_e_vampire_2
		}
	}
	
	immediate = {
		# Note which title is being replaced and remove title
		if = {
			limit = { has_minor_title = blood_court_count }
			liege = { set_variable = { which = local_title value = 1 } }
			remove_title = blood_court_count
		}
		else_if = {
			limit = { has_minor_title = blood_court_duke }
			liege = { set_variable = { which = local_title value = 2 } }
			remove_title = blood_court_duke
		}
		else_if = {
			limit = { has_minor_title = blood_court_king }
			liege = { set_variable = { which = local_title value = 3 } }
			remove_title = blood_court_king
		}
		else_if = {
			limit = { has_minor_title = blood_court_emperor }
			liege = { set_variable = { which = local_title value = 4 } }
			remove_title = blood_court_emperor
		}
		else_if = {
			limit = { has_minor_title = blood_court_e_vampire_1 }
			liege = { set_variable = { which = local_title value = 5 } }
			remove_title = blood_court_e_vampire_1
		}
		else_if = {
			limit = { has_minor_title = blood_court_e_vampire_2 }
			liege = { set_variable = { which = local_title value = 6 } }
			remove_title = blood_court_e_vampire_2
		}
		liege = {
			random_courtier = {
				limit = {
					can_hold_title = blood_court_count
					has_job_title = no
					is_voter = no
					prisoner = no
					NOT = { character = ROOT }
				}
				save_event_target_as = new_blood_court
			}
			any_vassal = {
				limit = {
					can_hold_title = blood_court_count
					has_job_title = no
					is_voter = no
					prisoner = no
					NOT = { character = ROOT }
				}
				if = {
					limit = { is_older_than = event_target:new_blood_court }
					save_event_target_as = new_blood_court
				}
			}
			any_courtier = {
				limit = {
					can_hold_title = blood_court_count
					has_job_title = no
					is_voter = no
					prisoner = no
					NOT = { character = ROOT }
				}
				if = {
					limit = { is_older_than = event_target:new_blood_court }
					save_event_target_as = new_blood_court
				}
			}
		}
		
		liege = {
			character_event = { id = VAMPIRE.153 }
		}
	}
}

# Assign all unassigned Blood Court titles
# Now with loops and hopefully less crashing
character_event = {
	id = VAMPIRE.155
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = { NOT = { has_assigned_minor_title = blood_court_count } }
			random_courtier = {
				limit = {
					can_hold_title = blood_court_count
					has_job_title = no
					is_voter = no
					prisoner = no
					NOT = { character = ROOT }
				}
				save_event_target_as = new_blood_court
			}
			any_courtier_or_vassal = {
				limit = {
					can_hold_title = blood_court_count
					has_job_title = no
					is_voter = no
					prisoner = no
					NOT = { character = ROOT }
					NOT = { character = event_target:new_blood_court }
				}
				if = {
					limit = { is_older_than = event_target:new_blood_court }
					save_event_target_as = new_blood_court
				}
			}
			event_target:new_blood_court = {
				give_minor_title = blood_court_count
				character_event = { id = VAMPIRE.156 }
			}
		}
		clear_event_target = new_blood_court
		if = {
			limit = { NOT = { has_assigned_minor_title = blood_court_duke } }
			random_courtier = {
				limit = {
					can_hold_title = blood_court_duke
					has_job_title = no
					is_voter = no
					prisoner = no
					NOT = { character = ROOT }
				}
				save_event_target_as = new_blood_court
			}
			any_courtier_or_vassal = {
				limit = {
					can_hold_title = blood_court_duke
					has_job_title = no
					is_voter = no
					prisoner = no
					NOT = { character = ROOT }
					NOT = { character = event_target:new_blood_court }
				}
				if = {
					limit = { is_older_than = event_target:new_blood_court }
					save_event_target_as = new_blood_court
				}
			}
			event_target:new_blood_court = {
				give_minor_title = blood_court_duke
				character_event = { id = VAMPIRE.156 }
			}
		}
		clear_event_target = new_blood_court
		if = {
			limit = { NOT = { has_assigned_minor_title = blood_court_king } }
			random_courtier = {
				limit = {
					can_hold_title = blood_court_king
					has_job_title = no
					is_voter = no
					prisoner = no
					NOT = { character = ROOT }
				}
				save_event_target_as = new_blood_court
			}
			any_courtier_or_vassal = {
				limit = {
					can_hold_title = blood_court_king
					has_job_title = no
					is_voter = no
					prisoner = no
					NOT = { character = ROOT }
					NOT = { character = event_target:new_blood_court }
				}
				if = {
					limit = { is_older_than = event_target:new_blood_court }
					save_event_target_as = new_blood_court
				}
			}
			event_target:new_blood_court = {
				give_minor_title = blood_court_king
				character_event = { id = VAMPIRE.156 }
			}
		}
		clear_event_target = new_blood_court
		if = {
			limit = { NOT = { has_assigned_minor_title = blood_court_emperor } }
			random_courtier = {
				limit = {
					can_hold_title = blood_court_emperor
					has_job_title = no
					is_voter = no
					prisoner = no
					NOT = { character = ROOT }
				}
				save_event_target_as = new_blood_court
			}
			any_courtier_or_vassal = {
				limit = {
					can_hold_title = blood_court_emperor
					has_job_title = no
					is_voter = no
					prisoner = no
					NOT = { character = ROOT }
					NOT = { character = event_target:new_blood_court }
				}
				if = {
					limit = { is_older_than = event_target:new_blood_court }
					save_event_target_as = new_blood_court
				}
			}
			event_target:new_blood_court = {
				give_minor_title = blood_court_emperor
				character_event = { id = VAMPIRE.156 }
			}
		}
		clear_event_target = new_blood_court
		if = {
			limit = { NOT = { has_assigned_minor_title = blood_court_e_vampire_1 } }
			random_courtier = {
				limit = {
					can_hold_title = blood_court_e_vampire_1
					has_job_title = no
					is_voter = no
					prisoner = no
					NOT = { character = ROOT }
				}
				save_event_target_as = new_blood_court
			}
			any_courtier_or_vassal = {
				limit = {
					can_hold_title = blood_court_e_vampire_1
					has_job_title = no
					is_voter = no
					prisoner = no
					NOT = { character = ROOT }
					NOT = { character = event_target:new_blood_court }
				}
				if = {
					limit = { is_older_than = event_target:new_blood_court }
					save_event_target_as = new_blood_court
				}
			}
			event_target:new_blood_court = {
				give_minor_title = blood_court_e_vampire_1
				character_event = { id = VAMPIRE.156 }
			}
		}
		clear_event_target = new_blood_court
		if = {
			limit = { NOT = { has_assigned_minor_title = blood_court_e_vampire_2 } }
			random_courtier = {
				limit = {
					can_hold_title = blood_court_e_vampire_2
					has_job_title = no
					is_voter = no
					prisoner = no
					NOT = { character = ROOT }
				}
				save_event_target_as = new_blood_court
			}
			any_courtier_or_vassal = {
				limit = {
					can_hold_title = blood_court_e_vampire_2
					has_job_title = no
					is_voter = no
					prisoner = no
					NOT = { character = ROOT }
					NOT = { character = event_target:new_blood_court }
				}
				if = {
					limit = { is_older_than = event_target:new_blood_court }
					save_event_target_as = new_blood_court
				}
			}
			event_target:new_blood_court = {
				give_minor_title = blood_court_e_vampire_2
				character_event = { id = VAMPIRE.156 }
			}
		}
		clear_event_target = new_blood_court
	}
}

# Fix anyone having multiple blood court titles
character_event = {
	id = VAMPIRE.156
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		calc_true_if = {
			amount = 2
			has_minor_title = blood_court_count
			has_minor_title = blood_court_duke
			has_minor_title = blood_court_king
			has_minor_title = blood_court_emperor
			has_minor_title = blood_court_e_vampire_1
			has_minor_title = blood_court_e_vampire_2
		}
	}
	
	immediate = {
		if = {
			limit = {
				has_minor_title = blood_court_count
				OR = {
					has_minor_title = blood_court_duke
					has_minor_title = blood_court_king
					has_minor_title = blood_court_emperor
					has_minor_title = blood_court_e_vampire_1
					has_minor_title = blood_court_e_vampire_2
				}
			}
			remove_title = blood_court_count
		}
		if = {
			limit = {
				has_minor_title = blood_court_duke
				OR = {
					has_minor_title = blood_court_king
					has_minor_title = blood_court_emperor
					has_minor_title = blood_court_e_vampire_1
					has_minor_title = blood_court_e_vampire_2
				}
			}
			remove_title = blood_court_duke
		}
		if = {
			limit = {
				has_minor_title = blood_court_king
				OR = {
					has_minor_title = blood_court_emperor
					has_minor_title = blood_court_e_vampire_1
					has_minor_title = blood_court_e_vampire_2
				}
			}
			remove_title = blood_court_king
		}
		if = {
			limit = {
				has_minor_title = blood_court_emperor
				OR = {
					has_minor_title = blood_court_e_vampire_1
					has_minor_title = blood_court_e_vampire_2
				}
			}
			remove_title = blood_court_emperor
		}
		if = {
			limit = {
				has_minor_title = blood_court_e_vampire_1
				has_minor_title = blood_court_e_vampire_2
			}
			remove_title = blood_court_e_vampire_1
		}
		liege = {
			character_event = { id = VAMPIRE.155 }
		}
	}
}

# VAMPIRE.157 - Vampire gains a rival
character_event = {
	id = VAMPIRE.157
	desc = EVTDESC_VAMPIRE.157
	picture = GFX_evt_rival_rulers
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	only_playable = yes
	min_age = 16
	only_capable = yes
	
	trigger = {
		trait = vampire
		higher_tier_than = duke # In small realms, this could get out of hand
		any_realm_character = {
			count = 3
			trait = vampire
			is_incapable = no
			NOR = { 
				is_rival = ROOT
				is_close_relative = ROOT
				is_cousin_of = ROOT
				is_friend = ROOT
				is_lover = ROOT
				is_nibling_of = ROOT
				any_spouse = { character = ROOT }
			}
		}
		NOT = {
			any_rival = {
				count = 3
				trait = vampire
			}
		}
	}
	
	# Characters with few total rivals (including non-vampires) are more likely to get this event
	weight_multiplier = {
		days = 1
		modifier = {
			factor = 2
			NOT = { num_of_rivals = 3 }
		}
		modifier = {
			factor = 1.5
			NOT = { num_of_rivals = 2 }
		}
		modifier = {
			factor = 2
			NOT = { num_of_rivals = 1 }
		}
	}
	
	immediate = {
		any_realm_character = {
			limit = {
				is_incapable = no
				trait = vampire
				is_adult = yes
				NOR = { 
					is_rival = ROOT
					is_close_relative = ROOT
					is_cousin_of = ROOT
					is_friend = ROOT
					is_lover = ROOT
					is_nibling_of = ROOT
					any_spouse = { character = ROOT }
				}
			}
			score_value = {
				value = 10
				interesting_courtier_selection_score = yes
			}
			save_event_target_as = new_rival
		}
	}
	
	option = {
		name = EVTOPTA_VAMPIRE.157
		event_target:new_rival = {
			add_rival = ROOT
			hidden_tooltip = {
				character_event = { id = VAMPIRE.158 }
			}
		}
	}
}

character_event = {
	id = VAMPIRE.158
	desc = EVTDESC_VAMPIRE.158
	picture = GFX_evt_rival_rulers
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.158
		tooltip = {
			add_rival = FROM
		}
	}
}

narrative_event = {
	id = VAMPIRE.159
	title = EVTTITLE_VAMPIRE.159
	desc = {
		trigger = { character = FROM }
		text = EVTDESCA_VAMPIRE.159
	}
	desc = {
		trigger = {
			religion = satanist
			NOT = { character = FROM }
		}
		text = EVTDESCB_VAMPIRE.159
	}
	desc = {
		trigger = {
			NOT = { religion = satanist }
		}
		text = EVTDESCC_VAMPIRE.159
	}
	picture = GFX_evt_sacrifice
	border = GFX_event_narrative_frame_religion
	
	ai = no
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.159
		trigger = { religion = satanist }
	}
	option = {
		name = EVTOPTB_VAMPIRE.159
		trigger = {
			OR = {
				religion_group = christian
				religion_group = muslim
				religion_group = jewish_group
			}
		}
	}
	option = {
		name = EVTOPTC_VAMPIRE.159
		trigger = {
			NOR = {
				religion = satanist
				religion_group = christian
				religion_group = muslim
				religion_group = jewish_group
			}
		}
	}
}

# Feeding on someone protected
character_event = {
	id = VAMPIRE.160
	desc = EVTDESC_VAMPIRE.160
	picture = GFX_evt_dark_love
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.160
		repeat_event = { id = VAMPIRE.10 }
	}
	option = {
		name = EVTOPTB_VAMPIRE.160
		clr_character_flag = vampire_feed_minor
	}
}

character_event = {
	id = VAMPIRE.161
	desc = EVTDESC_VAMPIRE.161
	picture = GFX_evt_suspicious_noble
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.161
		tooltip = {	opinion = { who = FROM modifier = suspected_attacked_protected years = 10 } }
	}
}
character_event = {
	id = VAMPIRE.162
	desc = EVTDESC_VAMPIRE.162
	picture = GFX_evt_catching_heretic
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.162
		tooltip = {	opinion = { who = FROM modifier = attacked_protected years = 20 } }
	}
}

# Bounce to disguise From
character_event = {
	id = VAMPIRE.163
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		FROMFROMFROM = { liege = { character_event = { id = VAMPIRE.161 } } }
	}
}
character_event = {
	id = VAMPIRE.164
	desc = EVTDESC_VAMPIRE.164
	picture = GFX_evt_catching_heretic
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.164
		tooltip = {	opinion = { who = FROM modifier = killed_protected years = 50 } }
	}
}

character_event = {
	id = VAMPIRE.165
	desc = EVTDESC_VAMPIRE.165
	picture = GFX_evt_stressed_ruler
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.165
		opinion = { who = FROM modifier = opinion_thrall years = 50 }
		FROM = { character_event = { id = VAMPIRE.166 } }
	}
}

character_event = {
	id = VAMPIRE.166
	desc = EVTDESC_VAMPIRE.166
	picture = GFX_evt_powerful_ruler
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.166
		tooltip = { reverse_opinion = { who = FROM modifier = opinion_thrall years = 50 } }
	}
}

# Safety catch for blood feast
character_event = {
	id = VAMPIRE.167
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		remove_character_modifier = holding_large_feast
		clr_character_flag = do_not_disturb
		clr_character_flag = attending_blood_feast
		clr_character_flag = holding_blood_feast
		clr_character_flag = blood_feast_werewolf
		clr_character_flag = ate_bad_food
		clr_character_flag = blood_feast_illness
		clr_character_flag = blood_feast_rival
		
		set_variable = { which = count_blood_feast_events value = 0 }
	}
}

# Blood Feast
character_event = {
	id = VAMPIRE.168
	desc = EVTDESC_VAMPIRE.168
	picture = GFX_evt_feast
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.168
		set_character_flag = holding_blood_feast
		any_courtier_or_vassal = {
			limit = {
				trait = vampire
				prisoner = no
				NOT = { is_inaccessible_trigger = yes }
				age = 16
				war = no
				is_incapable = no
			}
			letter_event = { id = VAMPIRE.169 tooltip = EVTTT_VAMPIRE.169 }
		}
		hidden_tooltip = { character_event = { id = VAMPIRE.171 days = 10 } }
	}
}

# Invited to Blood Feast
letter_event = {
	id = VAMPIRE.169
	desc = EVTDESC_VAMPIRE.169
	is_triggered_only = yes
	
	trigger =  { NOT = { is_inaccessible_trigger = yes } }
	
	# Attend
	option = {
		name = EVTOPTA_VAMPIRE.169
		set_character_flag = attending_blood_feast
		set_character_flag = do_not_disturb
		
		hidden_tooltip = { character_event = { id = VAMPIRE.167 days = 50 } } # Safety catch flag clearing
		ai_chance = {
			factor = 40
			modifier = {
				factor = 2
				trait = hunger_5
			}
			modifier = {
				factor = 1.5
				NOT = { intrigue = 5 }
			}
		}
	}
	
	# Decline
	option = {
		name = EVTOPTA_VAMPIRE.169
		hidden_tooltip = { FROM = { letter_event = { id = VAMPIRE.170 days = 2 random = 3 } } }
		ai_chance = {
			factor = 10
			additive_opinion_modifier = {
				factor = -0.1
				who = FROM
			}
			modifier = {
				factor = 8
				NOR = {
					trait = hunger_1
					trait = hunger_2
					trait = hunger_3
					trait = hunger_4
					trait = hunger_5
				}
			}
		}
	}
}

# Declined Invitation
letter_event = {
	id = VAMPIRE.170
	desc = EVTDESC_VAMPIRE.170
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.170
		opinion = { modifier = opinion_disappointed who = FROM years = 5 }
	}
}

# Blood Feast begins (Liege)
character_event = {
	id = VAMPIRE.171
	desc = EVTDESC_VAMPIRE.171
	picture = GFX_evt_feast
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA72015
		hidden_tooltip = { 
			any_courtier_or_vassal = {
				limit = {
					has_character_flag =  attending_blood_feast
				}
				character_event = {
					id = VAMPIRE.172
					tooltip = "EVTTOOLTIP72016"
				}
			}
			# First sacrifice
			random_courtier = {
				limit = {
					prisoner = yes
					NOR = {
						trait = vampire
						trait = zombie
						trait = known_werewolf
						trait = demon_trait
						trait = ethereal_trait
						has_minor_title = title_vampiric_protection
					}
				}
				# Normal Sacrifice
				if = {
					limit = { NOT = { trait = werewolf } }
					character_event = { id = VAMPIRE.173 days = 4 }
				}
				# Secret Werewolf
				else = {
					character_event = { id = VAMPIRE.176 days = 4 }
				}
			}
			# Call event tombola
			character_event = { id = VAMPIRE.178 days = 8 }
		}
	}
}

# 172 - Blood Feast started (Guest)
character_event = {
	id = VAMPIRE.172
	desc = EVTDESC_VAMPIRE.172
	picture = GFX_evt_feast
	
	is_triggered_only = yes

	option = {
		name = "EVTOPTA72016"
	}
}

# 173 - Ping Food
character_event = {
	id = VAMPIRE.173
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		FROM = { character_event = { id = VAMPIRE.174 } }
	}
}

# 174 - Liege sacrifices and feeds
character_event = {
	id = VAMPIRE.174
	desc = EVTDESC_VAMPIRE.174
	picture = GFX_evt_sacrifice
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.174
		if = {
			limit = { FROM = { has_vampire_spread_illness = yes } }
			set_character_flag = ate_bad_food
		}
		if = {
			limit = { trait = secret_vampire }
			FROM = { death = { death_reason = death_vampire_unknown killer = ROOT } }
		}
		else = {
			FROM = { death = { death_reason = death_vampire killer = ROOT } }
		}
		any_courtier_or_vassal = {
			limit = { has_character_flag = attending_blood_feast }
			character_event = { id = VAMPIRE.175 }
		}
		hidden_tooltip = { set_variable = { which = hunger_progress  value = 0 } }
		remove_character_modifier = vampire_starving
		if = {
			limit = { trait = hunger_5 }
			hidden_tooltip = { remove_trait = hunger_5 }
			add_trait = hunger_4
		}
		else_if = {
			limit = { trait = hunger_4 }
			hidden_tooltip = { remove_trait = hunger_4 }
			add_trait = hunger_3
		}
		else_if = {
			limit = { trait = hunger_3 }
			hidden_tooltip = { remove_trait = hunger_3 }
			add_trait = hunger_2
		}
		else_if = {
			limit = { trait = hunger_2 }
			hidden_tooltip = { remove_trait = hunger_2 }
			add_trait = hunger_1
		}
		else_if = {
			limit = { trait = hunger_1 }
			hidden_tooltip = { remove_trait = hunger_1 }
			add_trait = hunger_0
		}
	}
}

# 175 - Guests feed
character_event = {
	id = VAMPIRE.175
	desc = EVTDESC_VAMPIRE.175
	picture = GFX_evt_sacrifice
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.175
		tooltip = { FROMFROM = { death = { death_reason = death_vampire } } }
		hidden_tooltip = { set_variable = { which = hunger_progress  value = 0 } }
		if = {
			limit = { has_character_modifier = vampire_starving }
			remove_character_modifier = vampire_starving
		}
		if = {
			limit = { trait = hunger_5 }
			hidden_tooltip = { remove_trait = hunger_5 }
			add_trait = hunger_4
		}
		else_if = {
			limit = { trait = hunger_4 }
			hidden_tooltip = { remove_trait = hunger_4 }
			add_trait = hunger_3
		}
		else_if = {
			limit = { trait = hunger_3 }
			hidden_tooltip = { remove_trait = hunger_3 }
			add_trait = hunger_2
		}
		else_if = {
			limit = { trait = hunger_2 }
			hidden_tooltip = { remove_trait = hunger_2 }
			add_trait = hunger_1
		}
		else_if = {
			limit = { trait = hunger_1 }
			hidden_tooltip = { remove_trait = hunger_1 }
			add_trait = hunger_0
		}
	}
}
	
# 176 - Werewolf attempted feeding. Expose and escape
character_event = {
	id = VAMPIRE.176
	desc = EVTDESC_VAMPIRE.176
	picture = GFX_evt_werewolf_shadowed
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.176
		remove_trait = secret_werewolf
		add_trait = known_werewolf
		remove_character_modifier = known_monster
		any_realm_character = {
			character_event = { id = WEREWOLF.33 }
		}
		prisoner = no
		FROM = {
			character_event = { id = VAMPIRE.177 }
			set_character_flag = blood_feast_werewolf
			any_courtier_or_vassal = {
				limit = { has_character_flag = attending_blood_feast }
				character_event = { id = VAMPIRE.177 }
			}
		}
	}
}

# 177 - Everyone informed of werewolf. Each has chance to be wounded
character_event = {
	id = VAMPIRE.177
	desc = EVTDESC_VAMPIRE.177
	picture = GFX_evt_werewolf_shadowed
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.177
		FROM = {
			tooltip = {
				add_trait = known_werewolf
				prisoner = no
			}
		}
		random = {
			chance = 20
			add_trait = wounded
		}
		random = {
			chance = 5
			add_maimed_trait_effect = yes
		}
	}
}
# 178 - Feast event tombola
character_event = {
	id = VAMPIRE.178
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		random_list = {
			# Feed on another prisoner
			3 = {
				trigger = {
					num_of_prisoners = 1
					any_courtier = {
						prisoner = yes
						NOR = {
							trait = vampire
							trait = zombie
							trait = known_werewolf
							trait = demon_trait
							trait = ethereal_trait
							has_minor_title = title_vampiric_protection
						}
					}
					any_courtier_or_vassal = {
						has_character_flag = attending_blood_feast
						OR = {
							trait = hunger_1
							trait = hunger_2
							trait = hunger_3
							trait = hunger_4
							trait = hunger_5
						}
					}
				}
				modifier = {
					factor = 2
					any_courtier = {
						count = 4
						prisoner = yes
						NOR = {
							trait = vampire
							trait = zombie
							trait = known_werewolf
							trait = demon_trait
							trait = ethereal_trait
							has_minor_title = title_vampiric_protection
						}
					}
				}
				random_courtier = {
					limit = {
						prisoner = yes
						NOR = {
							trait = vampire
							trait = zombie
							trait = known_werewolf
							trait = demon_trait
							trait = ethereal_trait
							has_minor_title = title_vampiric_protection
						}
					}
					# Normal Sacrifice
					if = {
						limit = { NOT = { trait = werewolf } }
						character_event = { id = VAMPIRE.173 }
					}
					# Secret Werewolf
					else = {
						character_event = { id = VAMPIRE.177 }
					}
				}
				# Call event tombola
				repeat_event = { id = VAMPIRE.178 days = 4 }
				change_variable = { which = count_blood_feast_events value = 1 }
			}
			# Guests eat a non-prisoner courtier
			1 = {
				trigger = {
					any_courtier_or_vassal = {
						has_character_flag = attending_blood_feast
						OR = {
							trait = hunger_1
							trait = hunger_2
							trait = hunger_3
							trait = hunger_4
							trait = hunger_5
						}
					}
				}
				any_courtier = {
					limit = {
						prisoner = no
						NOR = {
							trait = vampire
							trait = zombie
							trait = werewolf
							trait = demon_trait
							trait = ethereal_trait
							has_minor_title = title_vampiric_protection
						}
					}
					score_value = {
						value = 10
						interesting_courtier_selection_score = yes
					}
					character_event = { id = VAMPIRE.179 }
				}
				# Call event tombola
				repeat_event = { id = VAMPIRE.178 days = 4 }
				change_variable = { which = count_blood_feast_events value = 1 }
			}
			# Rumors spread about the feast
			1 = {
				trigger = {
					OR = {
						trait = secret_vampire
						any_courtier_or_vassal = {
							has_character_flag = attending_blood_feast
							trait = secret_vampire
						}
					}
				}
				character_event = { id = VAMPIRE.182 }
				any_courtier_or_vassal = {
					limit = { has_character_flag = attending_blood_feast }
					character_event = { id = VAMPIRE.182 }
				}
				# Call event tombola
				repeat_event = { id = VAMPIRE.178 days = 4 }
				change_variable = { which = count_blood_feast_events value = 1 }
			}
			# Disease spreads from tainted food
			1 = {
				trigger = { NOT = { has_character_flag = blood_feast_illness } }
				modifier = {
					factor = 3
					has_character_flag = ate_bad_food
				}
				character_event = { id = VAMPIRE.183 }
				any_courtier_or_vassal = {
					limit = { has_character_flag = attending_blood_feast }
					character_event = { id = VAMPIRE.183 }
				}
				# Call event tombola
				repeat_event = { id = VAMPIRE.178 days = 4 }
				change_variable = { which = count_blood_feast_events value = 1 }
			}
			# Liege makes a new friend
			2 = {
				modifier = {
					factor = 1.5
					trait = gregarious
				}
				modifier = {
					factor = 0.5
					trait = shy
				}
				character_event = { id = VAMPIRE.184 }
				# Call event tombola
				repeat_event = { id = VAMPIRE.178 days = 4 }
				change_variable = { which = count_blood_feast_events value = 1 }
			}
			# Liege makes a rival
			1 = {
				trigger = { NOT = { has_character_flag = blood_feast_rival } }
				set_character_flag = blood_feast_rival
				character_event = { id = VAMPIRE.186 }
				# Call event tombola
				repeat_event = { id = VAMPIRE.178 days = 4 }
				change_variable = { which = count_blood_feast_events value = 1 }
			}
			# Liege ends a rivalry
			1 = {
				trigger = { NOT = { has_character_flag = blood_feast_rival } }
				character_event = { id = VAMPIRE.188 }
				# Call event tombola
				repeat_event = { id = VAMPIRE.178 days = 4 }
				change_variable = { which = count_blood_feast_events value = 1 }
			}
			# Liege overeats
			1 = {
				trigger = { NOT = { trait = gluttonous } }
				character_event = { id = VAMPIRE.190 }
				# Call event tombola
				repeat_event = { id = VAMPIRE.178 days = 4 }
				change_variable = { which = count_blood_feast_events value = 1 }
			}
			# Guest overeats
			1 = {
				trigger = {
					any_courtier_or_vassal = {
						has_character_flag = attending_blood_feast
						NOT = { trait = gluttonous }
					}
				}
				random_courtier_or_vassal = {
					limit = { has_character_flag = attending_blood_feast }
					character_event = { id = VAMPIRE.190 }
				}
				# Call event tombola
				repeat_event = { id = VAMPIRE.178 days = 4 }
				change_variable = { which = count_blood_feast_events value = 1 }
			}
			# End of festivities
			3 = {
				modifier = {
					factor = 1.5
					check_variable = { which = count_blood_feast_events value = 1 }
				}
				modifier = {
					factor = 1.5
					check_variable = { which = count_blood_feast_events value = 2 }
				}
				modifier = {
					factor = 1.5
					check_variable = { which = count_blood_feast_events value = 3 }
				}
				modifier = {
					factor = 1.5
					check_variable = { which = count_blood_feast_events value = 4 }
				}
				modifier = {
					factor = 1.5
					check_variable = { which = count_blood_feast_events value = 5 }
				}
				modifier = {
					factor = 1.5
					check_variable = { which = count_blood_feast_events value = 6 }
				}
				character_event = { id = VAMPIRE.191 }
				character_event = { id = VAMPIRE.167 }
				any_courtier_or_vassal = {
					limit = { has_character_flag = attending_blood_feast }
					character_event = { id = VAMPIRE.191 }
					character_event = { id = VAMPIRE.167 }
				}
			}
		}
	}
}

# 179 - Guests feed on courtier - ping
character_event = {
	id = VAMPIRE.179
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		FROM = { character_event = { id = VAMPIRE.180 } }
	}
}

# 180 - Guests feed on courtier - liege
character_event = {
	id = VAMPIRE.180
	desc = EVTDESC_VAMPIRE.180
	picture = GFX_evt_catching_heretic
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.180
		if = {
			limit = { FROM = { has_vampire_spread_illness = yes } }
			set_character_flag = ate_bad_food
		}
		FROM = { death = { death_reason = death_vampire_unknown } }
		any_courtier_or_vassal = {
			limit = { has_character_flag = attending_blood_feast }
			reverse_opinion = { who = ROOT modifier = opinion_feast_scandal years = 1 }
			character_event = { id = VAMPIRE.181 }
		}
	}
}

# 181 - Guests feed on courtier - guests
character_event = {
	id = VAMPIRE.181
	desc = EVTDESC_VAMPIRE.181
	picture = GFX_evt_catching_heretic
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.181
		tooltip = {
			FROMFROM = { death = { death_reason = death_vampire_unknown } }
			reverse_opinion = { who = ROOT modifier = opinion_feast_scandal years = 1 }
		}
		hidden_tooltip = { set_variable = { which = hunger_progress  value = 0 } }
		if = {
			limit = { has_character_modifier = vampire_starving }
			remove_character_modifier = vampire_starving
		}
		if = {
			limit = { trait = hunger_5 }
			hidden_tooltip = { remove_trait = hunger_5 }
			add_trait = hunger_4
		}
		else_if = {
			limit = { trait = hunger_4 }
			hidden_tooltip = { remove_trait = hunger_4 }
			add_trait = hunger_3
		}
		else_if = {
			limit = { trait = hunger_3 }
			hidden_tooltip = { remove_trait = hunger_3 }
			add_trait = hunger_2
		}
		else_if = {
			limit = { trait = hunger_2 }
			hidden_tooltip = { remove_trait = hunger_2 }
			add_trait = hunger_1
		}
		else_if = {
			limit = { trait = hunger_1 }
			hidden_tooltip = { remove_trait = hunger_1 }
			add_trait = hunger_0
		}
	}
}

# 182 - Rumors spread about feast - gain suspected monster or bad opinion
character_event = {
	id = VAMPIRE.182
	desc = EVTDESC_VAMPIRE.182
	picture = GFX_evt_scandal
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.182
		if = {
			limit = { NOT = { trait = known_vampire } }
			add_character_modifier = { modifier = known_monster years = 5 stacking = yes }
		}
		else = {
			any_courtier_or_vassal = {
				limit = { NOT = { trait = vampire } }
				random = {
					chance = 50
					opinion = { who = FROM modifier = opinion_terrified years = 5 }
				}
			}
		}
	}
}

# 183 - Illness from bad feeding
character_event = {
	id = VAMPIRE.183
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		NOT = { any_owned_bloodline = { has_bloodline_flag = vampire_feed_any } }
	}
	
	immediate = {
		random_list = {
			1 = {
				get_random_disease = yes
			}
			2 = {
				# Food poisoning
				trigger = {
					has_dlc = Reapers
					NOR = {
						trait = horse
						trait = cat
						immune_to_infection = yes
						
						has_character_flag = got_bubonic_plague
						has_character_flag = got_aztec_disease
						has_character_flag = got_smallpox
						has_character_flag = got_measles
						has_character_flag = got_typhus
						has_character_flag = got_typhoid_fever
						has_character_flag = got_syphilis
						has_character_flag = got_pneumonia
						has_character_flag = got_cancer
						has_character_flag = got_rabies
						has_character_flag = got_gout
						has_character_flag = got_flu
						has_character_flag = got_dysentery
						has_character_flag = got_food_poisoning
						has_character_flag = got_zombie_plague
					}
				}
				give_food_poisoning_effect = yes
			}
		}
	}
}

# 184 - Make a friend
character_event = {
	id = VAMPIRE.184
	desc = EVTDESC_VAMPIRE.184
	picture = GFX_evt_courtiers_talking
	
	is_triggered_only = yes
	
	trigger = {
		any_courtier_or_vassal = {
			has_character_flag = attending_blood_feast
			NOR = {
				is_friend = ROOT
				is_rival = ROOT
			}
		}
	}
	
	immediate = {
		random_courtier_or_vassal = {
			limit = {
				has_character_flag = attending_blood_feast
				NOR = {
					is_friend = ROOT
					is_rival = ROOT
				}
			}
			save_event_target_as = new_friend
		}
	}
	
	option = {
		name = EVTOPTA_VAMPIRE.184
		add_friend = event_target:new_friend
		event_target:new_friend = { character_event = { id = VAMPIRE.185 } }
	}
}
		
# 185 - Made a friend - inform friend
character_event = {
	id = VAMPIRE.185
	desc = EVTDESC_VAMPIRE.185
	picture = GFX_evt_courtiers_talking
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.184
		tooltip = { add_friend = FROM }
	}
}

# 186 - Make a new rival
character_event = {
	id = VAMPIRE.186
	desc = EVTDESC_VAMPIRE.186
	picture = GFX_evt_poke_king_in_chest
	
	is_triggered_only = yes
	
	trigger = {
		any_courtier_or_vassal = {
			has_character_flag = attending_blood_feast
			NOR = {
				is_friend = ROOT
				is_rival = ROOT
			}
		}
	}
	
	immediate = {
		random_courtier_or_vassal = {
			limit = {
				has_character_flag = attending_blood_feast
				NOR = {
					is_friend = ROOT
					is_rival = ROOT
				}
			}
			save_event_target_as = new_rival
		}
	}
	
	option = {
		name = EVTOPTA_VAMPIRE.186
		add_rival = event_target:new_rival
		event_target:new_rival = { character_event = { id = VAMPIRE.187 } }
		custom_tooltip = { text = tt_kick_out_rival }
	}
}

# 187 - Made a new rival - inform rival
character_event = {
	id = VAMPIRE.187
	desc = EVTDESC_VAMPIRE.187
	picture = GFX_evt_poke_king_in_chest
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.187
		tooltip = { add_rival = FROM }
		opinion = { who = FROM modifier = insulted months = 60 }
		clr_character_flag = attending_blood_feast
		custom_tooltip = { text = tt_kicked_out_of_feast }
		character_event = { id = VAMPIRE.167 }
	}
}

# 188 - End a rivalry
character_event = {
	id = VAMPIRE.188
	desc = EVTDESC_VAMPIRE.188
	picture = GFX_evt_courtiers_talking
	
	is_triggered_only = yes
	
	trigger = {
		any_courtier_or_vassal = {
			has_character_flag = attending_blood_feast
			is_rival = ROOT
		}
	}
	
	immediate = {
		random_courtier_or_vassal = {
			limit = {
				has_character_flag = attending_blood_feast
				is_rival = ROOT
			}
			save_event_target_as = old_rival
		}
	}
	
	option = {
		name = EVTOPTA_VAMPIRE.188
		remove_rival = event_target:old_rival
		event_target:old_rival = { character_event = { id = VAMPIRE.189 } }
	}
}

# 189 - Ended rivalry - inform rival
character_event = {
	id = VAMPIRE.189
	desc = EVTDESC_VAMPIRE.189
	picture = GFX_evt_courtiers_talking
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.189
		tooltip = { remove_rival = FROM }
	}
}

# 190 - Overeating
character_event = {
	id = VAMPIRE.190
	desc = EVTDESC_VAMPIRE.190
	picture = GFX_evt_feast
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.190
		if = {
			limit = { trait = temperate }
			remove_trait = temperate
			gain_weight_small_effect = yes
			weight_trait_check_effect = yes
		}
		else = {
			add_trait = gluttonous
			gain_weight_small_effect = yes
			weight_trait_check_effect = yes
		}
		clear_hunger_trait = yes
	}
}

# 191 - End of festivities
character_event = {
	id = VAMPIRE.191
	desc = EVTDESC_VAMPIRE.191
	picture = GFX_evt_noble_in_castle
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.191
		remove_character_modifier = holding_large_feast
		clr_character_flag = do_not_disturb
		clr_character_flag = attending_blood_feast
		clr_character_flag = holding_blood_feast
		if = {
			limit = { NOT = { character = FROM } }
			opinion = { modifier = opinion_enjoyed_feast who = FROM years = 1 }
		}
		else = {
			prestige = 20
		}
	}
}

# 192 - Chance to feed on a minor character - determine character type
character_event = {
	id = VAMPIRE.192
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		trait = vampire
		OR = {
			trait = hunger_1
			trait = hunger_2
			trait = hunger_3
			trait = hunger_4
			trait = hunger_5
		}
	}
	
	immediate = {
		random_list = {
			# Maid
			10 = {
				modifier = {
					OR = {
						AND = {
							is_female = no
							NOT = { trait = homosexual }
						}
						AND = {
							is_female = yes
							trait = homosexual
						}
					}
					factor = 2
				}
				set_character_flag = vampire_mini_feed_maid
			}
			# Servant
			5 = {
				modifier = {
					OR = {
						AND = {
							is_female = yes
							NOT = { trait = homosexual }
						}
						AND = {
							is_female = no
							trait = homosexual
						}
					}
					factor = 2
				}
				set_character_flag = vampire_mini_feed_servant
			}
			# Guard
			5 = {
				modifier = {
					OR = {
						AND = {
							is_female = yes
							NOT = { trait = homosexual }
						}
						AND = {
							is_female = no
							trait = homosexual
						}
					}
					factor = 2
				}
				set_character_flag = vampire_mini_feed_guard
			}
			# Clerk
			5 = {
				set_character_flag = vampire_mini_feed_clerk
			}
		}
		character_event = { id = VAMPIRE.193 }
	}
}

# 193 - Actual event for mini feeding chance
character_event = {
	id = VAMPIRE.193
	desc = {
		trigger = { has_character_flag = vampire_mini_feed_maid }
		text = EVTDESCA_VAMPIRE.193
		picture = GFX_evt_wise_woman
	}
	desc = {
		trigger = { has_character_flag = vampire_mini_feed_servant }
		text = EVTDESCB_VAMPIRE.193
		picture = GFX_evt_council_speaker
	}
	desc = {
		trigger = { has_character_flag = vampire_mini_feed_guard }
		text = EVTDESCB_VAMPIRE.193
		picture = GFX_evt_longbowman
	}
	desc = {
		trigger = { has_character_flag = vampire_mini_feed_clerk }
		text = EVTDESCB_VAMPIRE.193
		picture = GFX_evt_recieve_letter
	}
	border = GFX_event_normal_frame_intrigue
	picture = GFX_evt_wise_woman
	
	is_triggered_only = yes
	
	# Just a taste
	# Automatically lower hunger by one
	option = {
		name = EVTOPTA_VAMPIRE.193
		hidden_tooltip = { set_variable = { which = hunger_progress  value = 0 } }
		if = {
			limit = { has_character_modifier = vampire_starving }
			remove_character_modifier = vampire_starving
		}
		if = {
			limit = { trait = hunger_1 }
			hidden_tooltip = { remove_trait = hunger_1 }
			add_trait = hunger_0
		}
		else_if = {
			limit = { trait = hunger_2 }
			hidden_tooltip = { remove_trait = hunger_2 }
			add_trait = hunger_1
		}
		else_if = {
			limit = { trait = hunger_3 }
			hidden_tooltip = { remove_trait = hunger_3 }
			add_trait = hunger_2
		}
		else_if = {
			limit = { trait = hunger_4 }
			hidden_tooltip = { remove_trait = hunger_4 }
			add_trait = hunger_3
		}
		else_if = {
			limit = { trait = hunger_5 }
			hidden_tooltip = { remove_trait = hunger_5 }
			add_trait = hunger_4
		}
		ai_chance = {
			factor = 5
			modifier = {
				factor = 2
				trait = hunger_1
			}
			modifier = {
				factor = 1.4
				has_instances_of_character_modifier = { modifier = known_monster amount = 1 }
			}
			modifier = {
				factor = 1.4
				has_instances_of_character_modifier = { modifier = known_monster amount = 2 }
			}
		}
	}
	
	# Feed fully
	option = {
		name = EVTOPTB_VAMPIRE.193
		
		custom_tooltip = { text = EVTOPTB_TT_VAMPIRE.193 }
		
		# Determine feeding results
		evaluate_duel_result_score_effect = yes
		random_list = {
			# Fail
			10 = {
				modifier = {
					factor = 2
					has_character_flag = vampire_mini_feed_guard
				}
				modifier = {
					factor = 1.2
					has_instances_of_character_modifier = { modifier = known_monster amount = 1 }
				}
				modifier = {
					factor = 1.2
					has_instances_of_character_modifier = { modifier = known_monster amount = 2 }
				}
				modifier = {
					factor = 1.2
					has_instances_of_character_modifier = { modifier = known_monster amount = 3 }
				}
				set_character_flag = vampire_feed_failure
			}
			# Feed
			10 = {
				# Slightly more likely to succeed
				modifier = {
					factor = 1.05
					trait = hunger_1
				}
				modifier = {
					factor = 1.1
					trait = hunger_2
				}
				modifier = {
					factor = 1.15
					trait = hunger_3
				}
				modifier = {
					factor = 1.2
					trait = hunger_4
				}
				modifier = {
					factor = 1.25
					trait = hunger_5
				}
				modifier = {
					factor = 0.5
					duel_result_score_the_worst_trigger = yes
				}
				modifier = {
					factor = 0.6
					duel_result_score_terrible_trigger = yes
				}
				modifier = {
					factor = 0.8
					duel_result_score_bad_trigger = yes
				}
				modifier = {
					factor = 0.9
					duel_result_score_ok_trigger = yes
				}
				modifier = {
					factor = 1.1
					duel_result_score_good_trigger = yes
				}
				modifier = {
					factor = 1.3
					duel_result_score_great_trigger = yes
				}
				modifier = {
					factor = 1.6
					duel_result_score_fantastic_trigger = yes
				}
				modifier = {
					factor = 2
					duel_result_score_the_best_trigger = yes
				}
				modifier = {
					factor = 0.75
					intrigue < 5
				}
				modifier = {
					factor = 1.2
					intrigue = 10
				}
				modifier = {
					factor = 1.2
					intrigue = 15
				}
				modifier = {
					factor = 1.2
					intrigue = 20
				}
				modifier = {
					factor = 1.2
					intrigue = 25
				}
				modifier = {
					factor = 1.2
					intrigue = 30
				}
				modifier = {
					factor = 1.2
					intrigue = 35
				}
				modifier = {
					factor = 1.2
					intrigue = 40
				}
				modifier = {
					factor = 3
					OR = {
						trait = duelist
						trait = hunter
						trait = schemer
					}
				}
				set_character_flag = vampire_feed_success
			}
		}
		# Caught?
		random_list = {
			5 = {
				modifier = {
					factor = 2
					trait = known_vampire
				}
				modifier = {
					factor = 1.2
					trait = wroth
				}
				modifier = {
					factor = 1.1
					trait = hunger_2
				}
				modifier = {
					factor = 1.2
					trait = hunger_3
				}
				modifier = {
					factor = 1.3
					trait = hunger_4
				}
				modifier = {
					factor = 1.4
					trait = hunger_5
				}
				modifier = {
					factor = 1.3
					intrigue < 5
				}
				modifier = {
					factor = 1.3
					diplomacy < 5
				}
				modifier = {
					factor = 1.5
					has_instances_of_character_modifier = { modifier = known_monster amount = 1 }
				}
				modifier = {
					factor = 1.5
					has_instances_of_character_modifier = { modifier = known_monster amount = 2 }
				}
				modifier = {
					factor = 2
					has_instances_of_character_modifier = { modifier = known_monster amount = 3 }
				}
				modifier = {
					factor = 2
					has_game_rule = { name = secrecy value = more }
				}
				modifier = {
					factor = 0.5
					has_game_rule = { name = secrecy value = fewer }
				}
				if = {
					limit = {
						NAND = {
							trait = known_vampire
							culture = vampire_culture
						}
					}
					set_character_flag = vampire_feed_caught
				}
				else = {
					set_character_flag = vampire_feed_escape
				}
			}
			# Suspected
			10 = {
				modifier = {
					factor = 1.5
					trait = known_vampire
					# And gives suspected murderer instead of suspected monster
				}
				modifier = {
					factor = 1.05
					trait = hunger_2
				}
				modifier = {
					factor = 1.1
					trait = hunger_3
				}
				modifier = {
					factor = 1.15
					trait = hunger_4
				}
				modifier = {
					factor = 1.2
					trait = hunger_5
				}
				modifier = {
					factor = 1.1
					trait = wroth
				}
				modifier = {
					factor = 1.2
					has_instances_of_character_modifier = { modifier = known_monster amount = 1 }
				}
				modifier = {
					factor = 1.2
					has_instances_of_character_modifier = { modifier = known_monster amount = 2 }
				}
				modifier = {
					factor = 2
					has_game_rule = { name = secrecy value = more }
				}
				modifier = {
					factor = 0.5
					has_game_rule = { name = secrecy value = fewer }
				}
				set_character_flag = vampire_feed_suspected
			}
			# Got away
			15 = {
				modifier = {
					factor = 1.2
					trait = kind
				}
				modifier = {
					factor = 0.8
					trait = ambitious
				}
				modifier = {
					factor = 1.5
					trait = schemer
				}
				modifier = {
					factor = 0.75
					intrigue < 5
				}
				modifier = {
					factor = 1.5
					intrigue = 10
				}
				modifier = {
					factor = 1.5
					intrigue = 15
				}
				modifier = {
					factor = 1.5
					intrigue = 20
				}
				modifier = {
					factor = 1.5
					intrigue = 25
				}
				modifier = {
					factor = 1.5
					intrigue = 30
				}
				modifier = {
					factor = 1.5
					intrigue = 35
				}
				modifier = {
					factor = 1.5
					intrigue = 40
				}
				set_character_flag = vampire_feed_escape
			}
		}
		
		# Results
		if = {
			limit = { has_character_flag = vampire_feed_success }
			character_event = { id = VAMPIRE.194 }
		}
		if = {
			limit = { NOT = { has_character_flag = vampire_feed_success } }
			# Failure - Caught
			if = {
				limit = { has_character_flag = vampire_feed_caught }
				character_event = { id = VAMPIRE.195 }
			}
			else_if = {
				limit = { has_character_flag = vampire_feed_suspected }
				character_event = { id = VAMPIRE.196 }
			}
			else_if = {
				limit = { has_character_flag = vampire_feed_escape }
				character_event = { id = VAMPIRE.197 }
			}
		}
		ai_chance = {
			factor = 2
			modifier = {
				factor = 2
				trait = hunger_4
			}
			modifier = {
				factor = 5
				trait = hunger_5
			}
		}
	}
	
	# Decide against
	option = {
		name = EVTOPTC_VAMPIRE.193
		hidden_tooltip = {
			clr_character_flag = vampire_mini_feed_maid
			clr_character_flag = vampire_mini_feed_servant
			clr_character_flag = vampire_mini_feed_guard
			clr_character_flag = vampire_mini_feed_clerk
		}
		ai_chance = {
			factor = 0
		}
	}
}

# 194 - Mini-feed success
character_event = {
	id = VAMPIRE.194
	desc = {
		trigger = { has_character_flag = vampire_mini_feed_maid }
		text = EVTDESCA_VAMPIRE.194
	}
	desc = {
		trigger = { has_character_flag = vampire_mini_feed_servant }
		text = EVTDESCB_VAMPIRE.194
	}
	desc = {
		trigger = { has_character_flag = vampire_mini_feed_guard }
		text = EVTDESCC_VAMPIRE.194
	}
	desc = {
		trigger = { has_character_flag = vampire_mini_feed_clerk }
		text = EVTDESCD_VAMPIRE.194
	}
	picture = {
		trigger = { has_dlc = "Holy Fury" }
		picture = GFX_evt_dead_body_hf
	}
	picture = {
		trigger = { NOT = { has_dlc = "Holy Fury" } }
		picture = GFX_evt_powerful_ruler
	}
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				OR = {
					trait = wounded
					trait = infirm
					trait = blinded
					trait = eunuch
					trait = severely_injured
					is_maimed_trigger = yes
					has_minor_injury = yes
					has_scarred_trait_trigger = yes
				}
			}
			random = {
				chance = 10
				set_character_flag = vf_heal
			}
		}
		if = {
			limit = { NOT = { diplomacy = 8 } }
			random = {
				chance = 10
				set_character_flag = vf_stat
			}
		}
		if = {
			limit = { NOT = { stewardship = 8 } }
			random = {
				chance = 10
				set_character_flag = vf_stat
			}
		}
		if = {
			limit = { NOT = { martial = 8 } }
			random = {
				chance = 10
				set_character_flag = vf_stat
			}
		}
		if = {
			limit = { NOT = { intrigue = 8 } }
			random = {
				chance = 10
				set_character_flag = vf_stat
			}
		}
		if = {
			limit = { NOT = { learning = 8 } }
			random = {
				chance = 10
				set_character_flag = vf_stat
			}
		}
		# Heal an injury
		if = {
			limit = {
				has_character_flag = vf_heal
			}
			random_list = {
				3 = {
					trigger = { trait = wounded }
					set_character_flag = vf_heal_wounded
					set_variable = { which = healing value = 1 }
				}
				3 = {
					trigger = { trait = infirm }
					set_character_flag = vf_heal_infirm
					set_variable = { which = healing value = 1 }
				}
				3 = {
					trigger = { trait = maimed }
					set_character_flag = vf_heal_maimed
					set_variable = { which = healing value = 5 }
				}
				1 = {
					trigger = { has_scarred_trait_trigger = yes }
					set_character_flag = vf_heal_scarred
					set_variable = { which = healing value = 1 }
				}
				3 = {
					trigger = { trait = disfigured }
					set_character_flag = vf_heal_disfigured
					set_variable = { which = healing value = 6 }
				}
				3 = {
					trigger = { trait = one_eyed }
					set_character_flag = vf_heal_one_eyed
					set_variable = { which = healing value = 3 }
				}
				3 = {
					trigger = { trait = blinded }
					set_character_flag = vf_heal_blinded
					set_variable = { which = healing value = 4 }
				}
				3 = {
					trigger = { trait = one_handed }
					set_character_flag = vf_heal_one_handed
					set_variable = { which = healing value = 5 }
				}
				3 = {
					trigger = { trait = one_legged }
					set_character_flag = vf_heal_one_legged
					set_variable = { which = healing value = 5 }
				}
				3 = {
					trigger = { trait = mangled }
					set_character_flag = vf_heal_mangled
					set_variable = { which = healing value = 6 }
				}
				3 = {
					trigger = { trait = eunuch }
					set_character_flag = vf_heal_eunuch
					set_variable = { which = healing value = 1 }
				}
				3 = {
					trigger = { trait = severely_injured }
					set_character_flag = vf_heal_severely_injured
					set_variable = { which = healing value = 1 }
				}
				1 = {
					trigger = { has_minor_injury = yes }
					# Minor, so heal all of them
					set_character_flag = vf_heal_minor_injuries
					set_variable = { which = healing value = 1 }
				}
			}
		}
		
		if = {
			limit = { has_character_flag = vf_stat }
			random_list = {
				1 = {
					modifier = {
						factor = 0
						diplomacy = 8
					}
					set_character_flag = vf_stat_diplomacy
				}
				1 = {
					modifier = {
						factor = 0
						stewardship = 8
					}
					set_character_flag = vf_stat_stewardship
				}
				1 = {
					modifier = {
						factor = 0
						martial = 8
					}
					set_character_flag = vf_stat_martial
				}
				1 = {
					modifier = {
						factor = 0
						intrigue = 8
					}
					set_character_flag = vf_stat_intrigue
				}
				1 = {
					modifier = {
						factor = 0
						learning = 8
					}
					set_character_flag = vf_stat_learning
				}
			}
		}
	}
	
	option = {
		name = EVTOPTA_VAMPIRE.194
		if = {
			limit = { has_character_flag = vf_heal_wounded }
			remove_trait = wounded
		}
		if = {
			limit = { has_character_flag = vf_heal_infirm }
			remove_trait = infirm
		}
		if = {
			limit = { has_character_flag = vf_heal_maimed }
			remove_trait = maimed
		}
		if = {
			limit = { has_character_flag = vf_heal_scarred }
			remove_scarred = yes
		}
		if = {
			limit = { has_character_flag = vf_heal_disfigured }
			remove_trait = disfigured
		}
		if = {
			limit = { has_character_flag = vf_heal_one_eyed }
			remove_trait = one_eyed
		}
		if = {
			limit = { has_character_flag = vf_heal_blinded }
			remove_trait = blinded
		}
		if = {
			limit = { has_character_flag = vf_heal_one_handed }
			remove_trait = one_handed
		}
		if = {
			limit = { has_character_flag = vf_heal_one_legged }
			remove_trait = one_legged
		}
		if = {
			limit = { has_character_flag = vf_heal_mangled }
			remove_trait = mangled
		}
		if = {
			limit = { has_character_flag = vf_heal_eunuch }
			remove_trait = eunuch
		}
		if = {
			limit = { has_character_flag = vf_heal_severely_injured }
			remove_trait = severely_injured
			clear_delayed_event = { id = RIP.11000 }
		}
		if = {
			limit = { has_character_flag = vf_heal_minor_injuries }
			remove_minor_injuries = yes
		}
		if = {
			limit = { has_character_flag = vf_stat_diplomacy }
			change_diplomacy = 1
		}
		if = {
			limit = { has_character_flag = vf_stat_martial }
			change_martial = 1
		}
		if = {
			limit = { has_character_flag = vf_stat_stewardship }
			change_stewardship = 1
		}
		if = {
			limit = { has_character_flag = vf_stat_intrigue }
			change_intrigue = 1
		}
		if = {
			limit = { has_character_flag = vf_stat_learning }
			change_learning = 1
		}
		clear_hunger_trait = yes
	}
	
	after = {
		clr_character_flag = vf_heal
		clr_character_flag = vf_stat
		clr_character_flag = vf_heal_wounded
		clr_character_flag = vf_heal_infirm
		clr_character_flag = vf_heal_maimed
		clr_character_flag = vf_heal_scarred
		clr_character_flag = vf_heal_disfigured
		clr_character_flag = vf_heal_one_eyed
		clr_character_flag = vf_heal_blinded
		clr_character_flag = vf_heal_one_handed
		clr_character_flag = vf_heal_one_legged
		clr_character_flag = vf_heal_mangled
		clr_character_flag = vf_heal_eunuch
		clr_character_flag = vf_heal_severely_injured
		clr_character_flag = vf_heal_minor_injuries
		clr_character_flag = vf_stat_diplomacy
		clr_character_flag = vf_stat_martial
		clr_character_flag = vf_stat_stewardship
		clr_character_flag = vf_stat_intrigue
		clr_character_flag = vf_stat_learning
		clr_character_flag = vampire_mini_feed_maid
		clr_character_flag = vampire_mini_feed_servant
		clr_character_flag = vampire_mini_feed_guard
		clr_character_flag = vampire_mini_feed_clerk
	}
}

# 195 - Mini-feed caught
character_event = {
	id = VAMPIRE.195
	desc = {
		trigger = { has_character_flag = vampire_mini_feed_maid }
		text = EVTDESCA_VAMPIRE.195
	}
	desc = {
		trigger = { has_character_flag = vampire_mini_feed_servant }
		text = EVTDESCB_VAMPIRE.195
	}
	desc = {
		trigger = { has_character_flag = vampire_mini_feed_guard }
		text = EVTDESCC_VAMPIRE.195
	}
	desc = {
		trigger = { has_character_flag = vampire_mini_feed_clerk }
		text = EVTDESCD_VAMPIRE.195
	}
	picture = GFX_evt_hiding_from_pursuers
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.195
		trigger = { trait = secret_vampire }
		hidden_tooltip = {
			any_realm_character = { character_event = { id = VAMPIRE.23 } } # Court finds out character is a vampire
			if = {
				limit = {
					independent = no
				}
				liege = { character_event = { id = VAMPIRE.23 } } # Liege finds out character is a vampire
			}
			remove_trait = secret_vampire
		}
		add_trait = known_vampire
		hidden_tooltip = { remove_character_modifier = known_monster }
	}
	
	option = {
		name = EVTOPTA_VAMPIRE.195
		trigger = {
			NOR = {
				trait = secret_vampire
				culture = vampire_culture
			}
		}
		any_courtier = {
			opinion = { who = ROOT modifier = opinion_horrified years = 5 }
		}
	}
	
	option = {
		name = EVTOPTC_VAMPIRE.195
		trigger = {
			NOT = { trait = secret_vampire }
			culture = vampire_culture
		}
		random_courtier_or_vassal = {
			limit = {
				culture = vampire_culture
				NOT = { trait = vampire }
			}
			opinion = { who = ROOT modifier = opinion_envy years = 3 }
		}
		random_courtier_or_vassal = {
			limit = {
				culture = vampire_culture
				NOT = { trait = vampire }
			}
			opinion = { who = ROOT modifier = opinion_envy years = 3 }
		}
		random_courtier_or_vassal = {
			limit = {
				culture = vampire_culture
				NOT = { trait = vampire }
			}
			opinion = { who = ROOT modifier = opinion_envy years = 3 }
		}
	}
	
	after = {
		clr_character_flag = vf_heal
		clr_character_flag = vf_stat
		clr_character_flag = vf_heal_wounded
		clr_character_flag = vf_heal_infirm
		clr_character_flag = vf_heal_maimed
		clr_character_flag = vf_heal_scarred
		clr_character_flag = vf_heal_disfigured
		clr_character_flag = vf_heal_one_eyed
		clr_character_flag = vf_heal_blinded
		clr_character_flag = vf_heal_one_handed
		clr_character_flag = vf_heal_one_legged
		clr_character_flag = vf_heal_mangled
		clr_character_flag = vf_heal_eunuch
		clr_character_flag = vf_heal_severely_injured
		clr_character_flag = vf_heal_minor_injuries
		clr_character_flag = vf_stat_diplomacy
		clr_character_flag = vf_stat_martial
		clr_character_flag = vf_stat_stewardship
		clr_character_flag = vf_stat_intrigue
		clr_character_flag = vf_stat_learning
		clr_character_flag = vampire_mini_feed_maid
		clr_character_flag = vampire_mini_feed_servant
		clr_character_flag = vampire_mini_feed_guard
		clr_character_flag = vampire_mini_feed_clerk
	}
}

# 196 - Mini-feed suspected
character_event = {
	id = VAMPIRE.196
	desc = EVTDESC_VAMPIRE.196
	picture = GFX_evt_eavesdropping
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				OR = {
					trait = wounded
					trait = infirm
					trait = blinded
					trait = eunuch
					trait = severely_injured
					is_maimed_trigger = yes
					has_minor_injury = yes
					has_scarred_trait_trigger = yes
				}
			}
			random = {
				chance = 10
				set_character_flag = vf_heal
			}
		}
		if = {
			limit = { NOT = { diplomacy = 8 } }
			random = {
				chance = 10
				set_character_flag = vf_stat
			}
		}
		if = {
			limit = { NOT = { stewardship = 8 } }
			random = {
				chance = 10
				set_character_flag = vf_stat
			}
		}
		if = {
			limit = { NOT = { martial = 8 } }
			random = {
				chance = 10
				set_character_flag = vf_stat
			}
		}
		if = {
			limit = { NOT = { intrigue = 8 } }
			random = {
				chance = 10
				set_character_flag = vf_stat
			}
		}
		if = {
			limit = { NOT = { learning = 8 } }
			random = {
				chance = 10
				set_character_flag = vf_stat
			}
		}
		# Heal an injury
		if = {
			limit = {
				has_character_flag = vf_heal
			}
			random_list = {
				3 = {
					trigger = { trait = wounded }
					set_character_flag = vf_heal_wounded
					set_variable = { which = healing value = 1 }
				}
				3 = {
					trigger = { trait = infirm }
					set_character_flag = vf_heal_infirm
					set_variable = { which = healing value = 1 }
				}
				3 = {
					trigger = { trait = maimed }
					set_character_flag = vf_heal_maimed
					set_variable = { which = healing value = 5 }
				}
				1 = {
					trigger = { has_scarred_trait_trigger = yes }
					set_character_flag = vf_heal_scarred
					set_variable = { which = healing value = 1 }
				}
				3 = {
					trigger = { trait = disfigured }
					set_character_flag = vf_heal_disfigured
					set_variable = { which = healing value = 6 }
				}
				3 = {
					trigger = { trait = one_eyed }
					set_character_flag = vf_heal_one_eyed
					set_variable = { which = healing value = 3 }
				}
				3 = {
					trigger = { trait = blinded }
					set_character_flag = vf_heal_blinded
					set_variable = { which = healing value = 4 }
				}
				3 = {
					trigger = { trait = one_handed }
					set_character_flag = vf_heal_one_handed
					set_variable = { which = healing value = 5 }
				}
				3 = {
					trigger = { trait = one_legged }
					set_character_flag = vf_heal_one_legged
					set_variable = { which = healing value = 5 }
				}
				3 = {
					trigger = { trait = mangled }
					set_character_flag = vf_heal_mangled
					set_variable = { which = healing value = 6 }
				}
				3 = {
					trigger = { trait = eunuch }
					set_character_flag = vf_heal_eunuch
					set_variable = { which = healing value = 1 }
				}
				3 = {
					trigger = { trait = severely_injured }
					set_character_flag = vf_heal_severely_injured
					set_variable = { which = healing value = 1 }
				}
				1 = {
					trigger = { has_minor_injury = yes }
					# Minor, so heal all of them
					set_character_flag = vf_heal_minor_injuries
					set_variable = { which = healing value = 1 }
				}
			}
		}
		
		if = {
			limit = { has_character_flag = vf_stat }
			random_list = {
				1 = {
					modifier = {
						factor = 0
						diplomacy = 8
					}
					set_character_flag = vf_stat_diplomacy
				}
				1 = {
					modifier = {
						factor = 0
						stewardship = 8
					}
					set_character_flag = vf_stat_stewardship
				}
				1 = {
					modifier = {
						factor = 0
						martial = 8
					}
					set_character_flag = vf_stat_martial
				}
				1 = {
					modifier = {
						factor = 0
						intrigue = 8
					}
					set_character_flag = vf_stat_intrigue
				}
				1 = {
					modifier = {
						factor = 0
						learning = 8
					}
					set_character_flag = vf_stat_learning
				}
			}
		}
	}
	
	option = {
		name = EVTOPTA_VAMPIRE.196
		if = {
			limit = { has_character_flag = vf_heal_wounded }
			remove_trait = wounded
		}
		if = {
			limit = { has_character_flag = vf_heal_infirm }
			remove_trait = infirm
		}
		if = {
			limit = { has_character_flag = vf_heal_maimed }
			remove_trait = maimed
		}
		if = {
			limit = { has_character_flag = vf_heal_scarred }
			remove_scarred = yes
		}
		if = {
			limit = { has_character_flag = vf_heal_disfigured }
			remove_trait = disfigured
		}
		if = {
			limit = { has_character_flag = vf_heal_one_eyed }
			remove_trait = one_eyed
		}
		if = {
			limit = { has_character_flag = vf_heal_blinded }
			remove_trait = blinded
		}
		if = {
			limit = { has_character_flag = vf_heal_one_handed }
			remove_trait = one_handed
		}
		if = {
			limit = { has_character_flag = vf_heal_one_legged }
			remove_trait = one_legged
		}
		if = {
			limit = { has_character_flag = vf_heal_mangled }
			remove_trait = mangled
		}
		if = {
			limit = { has_character_flag = vf_heal_eunuch }
			remove_trait = eunuch
		}
		if = {
			limit = { has_character_flag = vf_heal_severely_injured }
			remove_trait = severely_injured
			clear_delayed_event = { id = RIP.11000 }
		}
		if = {
			limit = { has_character_flag = vf_heal_minor_injuries }
			remove_minor_injuries = yes
		}
		if = {
			limit = { has_character_flag = vf_stat_diplomacy }
			change_diplomacy = 1
		}
		if = {
			limit = { has_character_flag = vf_stat_martial }
			change_martial = 1
		}
		if = {
			limit = { has_character_flag = vf_stat_stewardship }
			change_stewardship = 1
		}
		if = {
			limit = { has_character_flag = vf_stat_intrigue }
			change_intrigue = 1
		}
		if = {
			limit = { has_character_flag = vf_stat_learning }
			change_learning = 1
		}
		clear_hunger_trait = yes
		
		if = {
			limit = { trait = known_vampire }
			hidden_tooltip = {
				any_realm_character = {
					opinion = { who = ROOT modifier = suspect_of_murder years = 10 }
				}
			}
		}
		else = {
			add_character_modifier = {
				name = known_monster
				years = 10
				stacking = yes
			}
		}
	}
	
	after = {
		clr_character_flag = vf_heal
		clr_character_flag = vf_stat
		clr_character_flag = vf_heal_wounded
		clr_character_flag = vf_heal_infirm
		clr_character_flag = vf_heal_maimed
		clr_character_flag = vf_heal_scarred
		clr_character_flag = vf_heal_disfigured
		clr_character_flag = vf_heal_one_eyed
		clr_character_flag = vf_heal_blinded
		clr_character_flag = vf_heal_one_handed
		clr_character_flag = vf_heal_one_legged
		clr_character_flag = vf_heal_mangled
		clr_character_flag = vf_heal_eunuch
		clr_character_flag = vf_heal_severely_injured
		clr_character_flag = vf_heal_minor_injuries
		clr_character_flag = vf_stat_diplomacy
		clr_character_flag = vf_stat_martial
		clr_character_flag = vf_stat_stewardship
		clr_character_flag = vf_stat_intrigue
		clr_character_flag = vf_stat_learning
		clr_character_flag = vampire_mini_feed_maid
		clr_character_flag = vampire_mini_feed_servant
		clr_character_flag = vampire_mini_feed_guard
		clr_character_flag = vampire_mini_feed_clerk
	}
}
		
# 197 - Mini-feed failure
character_event = {
	id = VAMPIRE.197
	desc = {
		trigger = { has_character_flag = vampire_mini_feed_maid }
		text = EVTDESCA_VAMPIRE.197
	}
	desc = {
		trigger = { has_character_flag = vampire_mini_feed_servant }
		text = EVTDESCB_VAMPIRE.197
	}
	desc = {
		trigger = { has_character_flag = vampire_mini_feed_guard }
		text = EVTDESCC_VAMPIRE.197
	}
	desc = {
		trigger = { has_character_flag = vampire_mini_feed_clerk }
		text = EVTDESCD_VAMPIRE.197
	}
	picture = GFX_evt_hiding_from_pursuers
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.197
		clr_character_flag = vf_heal
		clr_character_flag = vf_stat
		clr_character_flag = vf_heal_wounded
		clr_character_flag = vf_heal_infirm
		clr_character_flag = vf_heal_maimed
		clr_character_flag = vf_heal_scarred
		clr_character_flag = vf_heal_disfigured
		clr_character_flag = vf_heal_one_eyed
		clr_character_flag = vf_heal_blinded
		clr_character_flag = vf_heal_one_handed
		clr_character_flag = vf_heal_one_legged
		clr_character_flag = vf_heal_mangled
		clr_character_flag = vf_heal_eunuch
		clr_character_flag = vf_heal_severely_injured
		clr_character_flag = vf_heal_minor_injuries
		clr_character_flag = vf_stat_diplomacy
		clr_character_flag = vf_stat_martial
		clr_character_flag = vf_stat_stewardship
		clr_character_flag = vf_stat_intrigue
		clr_character_flag = vf_stat_learning
		clr_character_flag = vampire_mini_feed_maid
		clr_character_flag = vampire_mini_feed_servant
		clr_character_flag = vampire_mini_feed_guard
		clr_character_flag = vampire_mini_feed_clerk
	}
}

# 198 - Lose stats or traits from being fed upon
character_event = {
	id = VAMPIRE.198
	desc = EVTDESC_VAMPIRE.198
	picture = GFX_evt_bad_news
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.198
		if = {
			limit = { has_character_flag = vf_lose_fair }
			remove_trait = fair
		}
		if = {
			limit = { has_character_flag = vf_lose_genius }
			remove_trait = genius
			add_trait = quick
		}
		if = {
			limit = { has_character_flag = vf_lose_quick }
			remove_trait = quick
		}
		if = {
			limit = { has_character_flag = vf_lose_strong }
			remove_trait = strong
		}
		if = {
			limit = { has_character_flag = vf_gain_ugly }
			add_trait = ugly
		}
		if = {
			limit = { has_character_flag = vf_lose_diplomacy }
			change_diplomacy = -1
		}
		if = {
			limit = { has_character_flag = vf_lose_martial }
			change_martial = -1
		}
		if = {
			limit = { has_character_flag = vf_lose_stewardship }
			change_stewardship = -1
		}
		if = {
			limit = { has_character_flag = vf_lose_intrigue }
			change_intrigue = -1
		}
		if = {
			limit = { has_character_flag = vf_lose_learning }
			change_learning = -1
		}
		if = {
			limit = { has_character_flag = vf_lose_health }
			health = -0.25
		}
		clr_character_flag = vf_lose_fair
		clr_character_flag = vf_lose_genius
		clr_character_flag = vf_lose_quick
		clr_character_flag = vf_lose_strong
		clr_character_flag = vf_gain_ugly
		clr_character_flag = vf_lose_diplomacy
		clr_character_flag = vf_lose_martial
		clr_character_flag = vf_lose_stewardship
		clr_character_flag = vf_lose_intrigue
		clr_character_flag = vf_lose_learning
		clr_character_flag = vf_lose_health
	}
}

narrative_event = {
	id = VAMPIRE.199
	title = EVTTITLE_VAMPIRE.199
	desc = {
		text = EVTDESCA_VAMPIRE.199
		trigger = { character = FROM }
	}
	desc = {
		text = EVTDESCB_VAMPIRE.199
		trigger = { NOT = { character = FROM } }
	}
	picture = GFX_evt_sacrifice
	
	is_triggered_only = yes
	only_playable = yes
	
	major = yes
	
	major_trigger = {
		is_within_diplo_range = FROM
	}
	
	option = {
		trigger = { character = FROM }
		name = EVTOPTA_VAMPIRE.199
		activate_title = { title = e_vampire status = yes }
		primary_title = {
			e_vampire = {
				copy_title_laws = PREV
				add_law = law_voting_power_1
				add_law = war_voting_power_1
				add_law = revoke_title_voting_power_1
				add_law = imprison_voting_power_1
				add_law = grant_title_voting_power_1
				add_law = banish_voting_power_1
				add_law = execution_voting_power_1
				add_law = succession_voting_power_1
				gain_title = ROOT
			}
		}
		any_demesne_title = {
			limit = { tier = king }
			de_jure_liege = e_vampire
		}
		create_bloodline = {
			type = BL_vampiric_highborn
		}
		hidden_tooltip = {
			new_bloodline = {
				ROOT = {
					any_opinion_modifier_target = {
						limit = {
							reverse_has_opinion_modifier = { modifier = opinion_sire who = PREV }
						}
						add_bloodline_member = PREVPREV
						character_event = { id = VAMPIRE.205 }
					}
				}
			}
			if = {
				limit = { can_apply_super_cool_nickname_trigger = yes }
				random_list = {
					2 = {}
					1 = {
						trigger = { can_apply_lame_nickname_trigger = yes }
						give_nickname = nick_the_beguiling
					}
					1 = {
						trigger = { can_apply_lame_nickname_trigger = yes }
						give_nickname = nick_the_black
					}
					1 = {
						trigger = { can_apply_lame_nickname_trigger = yes }
						give_nickname = nick_the_undead
					}
					1 = {
						trigger = { can_apply_lame_nickname_trigger = yes }
						give_nickname = nick_the_grim
					}
					1 = {
						trigger = { can_apply_average_nickname_trigger = yes }
						give_nickname = nick_the_devil
					}
					1 = {
						trigger = { can_apply_average_nickname_trigger = yes }
						give_nickname = nick_the_great
					}
					1 = {
						trigger = { can_apply_average_nickname_trigger = yes }
						give_nickname = nick_the_grinner
					}
					1 = {
						trigger = { can_apply_average_nickname_trigger = yes }
						give_nickname = nick_the_posthumous
					}
					1 = {
						trigger = { can_apply_average_nickname_trigger = yes }
						give_nickname = nick_the_gravelord
					}
					1 = {
						trigger = { can_apply_cool_nickname_trigger = yes }
						give_nickname = nick_the_bloody
					}
					1 = {
						trigger = { can_apply_cool_nickname_trigger = yes }
						give_nickname = nick_the_undying
					}
					1 = {
						trigger = { can_apply_cool_nickname_trigger = yes }
						give_nickname = nick_the_unifier
					}
					1 = {
						trigger = {
							can_apply_cool_nickname_trigger = yes
							trait = necromancer
						}
						give_nickname = nick_king_of_the_dead
					}
					1 = {
						give_nickname = nick_the_blood_monger
					}
					1 = {
						give_nickname = nick_the_pale_prince
					}
					1 = {
						give_nickname = nick_the_leechlord
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_VAMPIRE.199
		trigger = {
			NOT = { character = FROM }
			trait = vampire
		}
	}
	
	option = {
		name = EVTOPTC_VAMPIRE.199
		trigger = {
			NOT = { character = FROM }
			NOT = { trait = vampire }
		}
	}
}

# VAMPIRE.200 - Founding Blood of Nosferatu 
character_event = {
	id = VAMPIRE.200
	desc = EVTDESC_VAMPIRE.200
	picture = GFX_evt_lunatic
	
	is_triggered_only = yes
	
	trigger = {
		trait = vampire
		trait = ugly
	}
	
	weight_multiplier = {
		days = 1
		modifier = {
			factor = 3
			NOT = { has_global_flag = founded_blood_of_nosferatu }
		}
		modifier = {
			factor = 1.5
			trait = uncouth
		}
		modifier = {
			factor = 0.5
			any_owned_bloodline = {
				OR = {
					has_bloodline_flag = high_vampiric_inheritance
					has_bloodline_flag = vampiric_inheritance
				}
			}
		}
		modifier = {
			factor = 1.5
			trait = known_vampire
		}
	}
	
	option = {
		name = EVTOPTA_VAMPIRE.200
		create_bloodline = {
			type = BL_blood_of_nosferatu
		}
		if = {
			limit = { trait = secret_vampire }
			hidden_tooltip = { remove_trait = secret_vampire }
			add_trait = known_vampire
		}
		hidden_tooltip = {
			new_bloodline = {
				ROOT = {
					any_opinion_modifier_target = {
						limit = {
							reverse_has_opinion_modifier = { modifier = opinion_sire who = PREV }
						}
						add_bloodline_member = PREVPREV
						character_event = { id = VAMPIRE.204 }
					}
				}
			}
		}
		if = {
			limit = { can_apply_average_nickname_trigger = yes }
			random_list = {
				1 = {
					trigger = { can_apply_lame_nickname_trigger = yes }
					give_nickname = nick_the_hideous
				}
				1 = {
					trigger = { can_apply_lame_nickname_trigger = yes }
					give_nickname = nick_the_frog
				}
				1 = {
					trigger = { can_apply_lame_nickname_trigger = yes }
					give_nickname = nick_the_repulsive
				}
				1 = {
					trigger = { can_apply_lame_nickname_trigger = yes }
					give_nickname = nick_the_hollow
				}
				1 = {
					trigger = { can_apply_lame_nickname_trigger = yes }
					give_nickname = nick_the_bewitched
				}
				1 = {
					trigger = { can_apply_lame_nickname_trigger = yes }
					give_nickname = nick_the_oakskin
				}
				1 = {
					trigger = { can_apply_lame_nickname_trigger = yes }
					give_nickname = nick_the_green_faced
				}
				1 = {
					give_nickname = nick_the_monster
				}
				1 = {
					give_nickname = nick_the_abomination
				}
				1 = {
					give_nickname = nick_the_mule
				}
				1 = {
					give_nickname = nick_the_accursed
				}
			}
		}
	}
}

# VAMPIRE.201 - Found new noble vampire house
character_event = {
	id = VAMPIRE.201
	desc = EVTDESC_VAMPIRE.201
	picture = GFX_evt_powerful_ruler
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_VAMPIRE.201
		create_bloodline = {
			type = BL_vampiric_highborn
		}
		hidden_tooltip = {
			new_bloodline = {
				ROOT = {
					any_opinion_modifier_target = {
						limit = {
							reverse_has_opinion_modifier = { modifier = opinion_sire who = PREV }
						}
						add_bloodline_member = PREVPREV
						character_event = { id = VAMPIRE.205 }
					}
				}
			}
		}
	}
}

# VAMPIRE.202 - Update Hunger with new hunger system
character_event = {
	id = VAMPIRE.202
	is_triggered_only = yes
	hide_window = yes
	
	trigger = { trait = vampire }
	
	immediate = {
		calculate_hunger_gain = yes
		change_variable = { which = hunger_progress which = hunger_gain }
		if = {
			limit = {
				NOR = {
					trait = hunger_0
					trait = hunger_1
					trait = hunger_2
					trait = hunger_3
					trait = hunger_4
					trait = hunger_5
				}
			}
			add_trait = hunger_0
		}
		if = {
			limit = { check_variable = { which = hunger_progress value = 100 } }
			if = {
				limit = { trait = hunger_5 }
				# In unable to attempt to feed, become starving, but reset progress
				if = {
					limit = {
						OR = {
							trait = incapable
							trait = sick_incapable
							prisoner = yes
						}
					}
					hidden_tooltip = { set_variable = { which = hunger_progress  value = 0 } }
					add_character_modifier = { modifier = vampire_starving duration = -1 stacking = yes }
				}
				else = {
					# Automatic high-risk feeding
					random_courtier = {
						limit = {
							NOT = { trait = known_vampire }
						}
						character_event = { id = VAMPIRE.28 }
					}
				}
			}
			else = {
				# Increase Hunger
				character_event = { id = VAMPIRE.203 }
			}
		}
	}
}

# Hunger increases
character_event = {
	id = VAMPIRE.203
	desc = {
		trigger = { trait = hunger_5 }
		text = EVTDESCA_VAMPIRE.203
	}
	desc = {
		trigger = { trait = hunger_1 }
		text = EVTDESCB_VAMPIRE.203
	}
	desc = {
		trigger = {
			OR = {
				trait = hunger_2
				trait = hunger_3
				trait = hunger_4
			}
		}
		text = EVTDESC_VAMPIRE.203
	}
	picture = GFX_evt_bad_news
	is_triggered_only = yes
	notification = yes
	
	immediate = { upgrade_hunger_trait = yes }
	
	option = {
		name = OK
	}
}

# Vampire.204 - Sire gained Blood of Nosferatu
character_event = {
	id = VAMPIRE.204
	desc = EVTDESC_VAMPIRE.204
	picture = GFX_evt_lunatic
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPT_VAMPIRE.204
		if = {
			limit = { trait = fair }
			remove_trait = fair
		}
		if = {
			limit = { NOT = { trait = ugly } }
			add_trait = ugly
		}
		if = {
			limit = { trait = secret_vampire }
			hidden_tooltip = { remove_trait = secret_vampire }
			add_trait = known_vampire
		}
		tooltip = {
			FROM = {
				any_owned_bloodline = {
					limit = { has_bloodline_flag = vampire_auto_ugly }
					add_bloodline_member = ROOT
				}
			}
		}
	}
}
	
# Vampire.205 - Sire gained Highborn Vampire Blood
character_event = {
	id = VAMPIRE.205
	desc = EVTDESC_VAMPIRE.205
	picture = GFX_evt_powerful_ruler
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPT_VAMPIRE.205
		if = {
			limit = { trait = secret_vampire }
			hidden_tooltip = { remove_trait = secret_vampire }
			add_trait = known_vampire
		}
		tooltip = {
			FROM = {
				any_owned_bloodline = {
					limit = { has_bloodline_flag = vampire_restricted_feeding }
					add_bloodline_member = ROOT
				}
			}
		}
	}
}

# Vampire.206 - Sire gained Vile Blood
character_event = {
	id = VAMPIRE.206
	desc = EVTDESC_VAMPIRE.206
	picture = GFX_evt_lunatic
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPT_VAMPIRE.206
		remove_character_modifier = plague_vampire
		tooltip = {
			FROM = {
				any_owned_bloodline = {
					limit = { has_bloodline_flag = vile_blood }
					add_bloodline_member = ROOT
				}
			}
		}
	}
}